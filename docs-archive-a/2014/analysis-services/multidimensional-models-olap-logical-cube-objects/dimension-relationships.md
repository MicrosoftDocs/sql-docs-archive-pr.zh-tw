---
title: 維度關聯性 |Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: reference
helpviewer_keywords:
- relationships [Analysis Services]
- member groups [Analysis Services]
- regular dimensions [Analysis Services]
- many-to-many relationships [Analysis Services]
- cubes [Analysis Services], relationships
- reference dimensions
- dimensions [Analysis Services], relationships
- fact dimensions [Analysis Services]
- relationships [Analysis Services], dimensions
ms.assetid: de54c059-cb0f-4f66-bd70-8605af05ec4f
author: minewiskan
ms.author: owend
ms.openlocfilehash: 2334c1a97bb4172fff70550dbece5376eb1cb9d7
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87706890"
---
# <a name="dimension-relationships"></a><span data-ttu-id="c2dee-102">維度關聯性</span><span class="sxs-lookup"><span data-stu-id="c2dee-102">Dimension Relationships</span></span>
  <span data-ttu-id="c2dee-103">維度使用方式會定義 Cube 維度和 Cube 內量值群組之間的關聯性。</span><span class="sxs-lookup"><span data-stu-id="c2dee-103">Dimension usage defines the relationships between a cube dimension and the measure groups in a cube.</span></span> <span data-ttu-id="c2dee-104">Cube 維度是在特定 Cube 中使用之資料庫維度的執行個體。</span><span class="sxs-lookup"><span data-stu-id="c2dee-104">A cube dimension is an instance of a database dimension that is used in a specific cube.</span></span> <span data-ttu-id="c2dee-105">Cube 可以，而且經常會，具有與量值群組沒有直接關聯的 Cube 維度，但可能會透過其他維度或量值群組，間接地與此量值群組相關。</span><span class="sxs-lookup"><span data-stu-id="c2dee-105">A cube can, and frequently does, have cube dimensions that are not directly related to a measure group, but which might be indirectly related to the measure group through another dimension or measure group.</span></span> <span data-ttu-id="c2dee-106">當您將資料庫維度或量值群組加入至 cube 時，會 [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 嘗試藉由檢查 cube 的資料來源視圖中的維度資料表與事實資料表之間的關聯性，以及檢查維度中屬性之間的關聯性，來判斷維度的使用方式。</span><span class="sxs-lookup"><span data-stu-id="c2dee-106">When you add a database dimension or measure group to a cube, [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] tries to determine dimension usage by examining relationships between the dimension tables and fact tables in the cube's data source view, and by examining the relationships between attributes in dimensions.</span></span> [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] <span data-ttu-id="c2dee-107">會自動設定其可偵測到之關聯性的維度使用方式設定。</span><span class="sxs-lookup"><span data-stu-id="c2dee-107">automatically sets the dimension usage settings for the relationships that it can detect.</span></span>  
  
 <span data-ttu-id="c2dee-108">維度與量值群組之間的關聯性，是由維度和參與關聯性的事實資料表所組成的，而資料粒度屬性則會指定特定量值群組中之維度的資料粒度。</span><span class="sxs-lookup"><span data-stu-id="c2dee-108">A relationship between a dimension and a measure group consists of the dimension and fact tables participating in the relationship and a granularity attribute that specifies the granularity of the dimension in the particular measure group.</span></span>  
  
## <a name="regular-dimension-relationships"></a><span data-ttu-id="c2dee-109">一般維度關聯性</span><span class="sxs-lookup"><span data-stu-id="c2dee-109">Regular Dimension Relationships</span></span>  
 <span data-ttu-id="c2dee-110">當維度的索引鍵資料行直接聯結到事實資料表時，在 Cube 維度與量值群組之間會存在一般維度關聯性。</span><span class="sxs-lookup"><span data-stu-id="c2dee-110">A regular dimension relationship between a cube dimension and a measure group exists when the key column for the dimension is joined directly to the fact table.</span></span> <span data-ttu-id="c2dee-111">這個直接關聯性是以基礎關係資料庫中的主鍵-外鍵關聯性為依據，但也可能是以資料來源視圖中所定義的邏輯關聯性為基礎。</span><span class="sxs-lookup"><span data-stu-id="c2dee-111">This direct relationship is based on a primary key-foreign key relationship in the underlying relational database, but might also be based on a logical relationship that is defined in the data source view.</span></span> <span data-ttu-id="c2dee-112">一般維度關聯性代表在傳統星狀結構描述設計中，維度資料表與事實資料表之間的關聯性。</span><span class="sxs-lookup"><span data-stu-id="c2dee-112">A regular dimension relationship represents the relationship between dimension tables and a fact table in a traditional star schema design.</span></span> <span data-ttu-id="c2dee-113">如需一般關聯性的詳細資訊，請參閱[定義一般關聯性和一般關聯性屬性](../multidimensional-models/define-a-regular-relationship-and-regular-relationship-properties.md)。</span><span class="sxs-lookup"><span data-stu-id="c2dee-113">For more information about regular relationships, see [Define a Regular Relationship and Regular Relationship Properties](../multidimensional-models/define-a-regular-relationship-and-regular-relationship-properties.md).</span></span>  
  
## <a name="reference-dimension-relationships"></a><span data-ttu-id="c2dee-114">參考維度關聯性</span><span class="sxs-lookup"><span data-stu-id="c2dee-114">Reference Dimension Relationships</span></span>  
 <span data-ttu-id="c2dee-115">當維度的索引鍵資料行透過其他維度資料表中的索引鍵間接聯結到事實資料表時，Cube 維度與量值群組之間就會有參考維度關聯性 (如下圖所示)。</span><span class="sxs-lookup"><span data-stu-id="c2dee-115">A reference dimension relationship between a cube dimension and a measure group exists when the key column for the dimension is joined indirectly to the fact table through a key in another dimension table, as shown in the following illustration.</span></span>  
  
 <span data-ttu-id="c2dee-116">![邏輯圖表，參考的維度關聯性](../../analysis-services/dev-guide/media/as-refdimension1.gif "邏輯圖表，參考的維度關聯性")</span><span class="sxs-lookup"><span data-stu-id="c2dee-116">![Logical diagram, referenced dimension relationship](../../analysis-services/dev-guide/media/as-refdimension1.gif "Logical diagram, referenced dimension relationship")</span></span>  
  
 <span data-ttu-id="c2dee-117">參考維度關聯性代表在雪花式結構描述設計中，維度資料表與事實資料表之間的關聯性。</span><span class="sxs-lookup"><span data-stu-id="c2dee-117">A reference dimension relationship represents the relationship between dimension tables and a fact table in a snowflake schema design.</span></span> <span data-ttu-id="c2dee-118">當您在雪花式結構描述中連接維度資料表時，可以使用多份資料表中的資料行來定義單一維度；或者根據不同的維度資料表來定義個別的維度，然後使用參考維度關聯性設定來定義這些維度之間的連結。</span><span class="sxs-lookup"><span data-stu-id="c2dee-118">When dimension tables are connected in a snowflake schema, you can define a single dimension using columns from multiple tables, or you can define separate dimensions based on the separate dimension tables and then define a link between them using the reference dimension relationship setting.</span></span> <span data-ttu-id="c2dee-119">下圖顯示一個名為**InternetSales**的事實資料表，以及一個雪花式架構中名為**Customer**和**Geography**的兩個維度資料表。</span><span class="sxs-lookup"><span data-stu-id="c2dee-119">The following figure shows one fact table named **InternetSales**, and two dimension tables called **Customer** and **Geography**, in a snowflake schema.</span></span>  
  
 <span data-ttu-id="c2dee-120">![邏輯結構描述，參考的維度關聯性](../../analysis-services/dev-guide/media/as-refdim-schema1.gif "邏輯結構描述，參考的維度關聯性")</span><span class="sxs-lookup"><span data-stu-id="c2dee-120">![Logical schema, referenced dimension relationship](../../analysis-services/dev-guide/media/as-refdim-schema1.gif "Logical schema, referenced dimension relationship")</span></span>  
  
 <span data-ttu-id="c2dee-121">您可以使用**Customer**資料表做為維度主資料表，並將**Geography**資料表當做相關資料表來建立維度。</span><span class="sxs-lookup"><span data-stu-id="c2dee-121">You can create a dimension with the **Customer** table as the dimension main table and the **Geography** table included as a related table.</span></span> <span data-ttu-id="c2dee-122">接著，在維度和 InternetSales 量值群組之間定義一般關聯性。</span><span class="sxs-lookup"><span data-stu-id="c2dee-122">A regular relationship is then defined between the dimension and the InternetSales measure group.</span></span>  
  
 <span data-ttu-id="c2dee-123">或者，您可以建立兩個與 InternetSales 量值群組相關的維度：以**Customer**資料表為基礎的維度，以及以**Geography**資料表為基礎的維度。</span><span class="sxs-lookup"><span data-stu-id="c2dee-123">Alternatively, you can create two dimensions related to the InternetSales measure group: a dimension based on the **Customer** table, and a dimension based on the **Geography** table.</span></span> <span data-ttu-id="c2dee-124">然後您就可以利用 Customer 維度，使用參考維度關聯性將 Geography 維度關聯至 InternetSales 量值群組。</span><span class="sxs-lookup"><span data-stu-id="c2dee-124">You can then relate the Geography dimension to the InternetSales measure group using a reference dimension relationship using the Customer dimension.</span></span> <span data-ttu-id="c2dee-125">在此情況下，當依 Geography 維度來標示 InternetSales 量值群組之事實的維度時，會依客戶與依地理位置來標示事實的維度。</span><span class="sxs-lookup"><span data-stu-id="c2dee-125">In this case, when the facts in the InternetSales measure group are dimensioned by the Geography dimension, the facts are dimensioned by customer and by geography.</span></span> <span data-ttu-id="c2dee-126">如果 Cube 包含稱為 Reseller Sales 的第二個量值群組，則因為 Reseller Sales 與 Geography 之間並沒有關聯性，所以您將無法在 Reseller Sales 量值群組中依 Geography 來標示事實的維度。</span><span class="sxs-lookup"><span data-stu-id="c2dee-126">If the cube contained a second measure group named Reseller Sales, you would be unable to dimension the facts in the Reseller Sales measure group by Geography because no relationship would exist between Reseller Sales and Geography.</span></span>  
  
 <span data-ttu-id="c2dee-127">可鏈結在一起的參考維度數目不限，如下圖所示。</span><span class="sxs-lookup"><span data-stu-id="c2dee-127">There is no limit to the number of reference dimensions that can be chained together, as shown in the following illustration.</span></span>  
  
 <span data-ttu-id="c2dee-128">![邏輯圖表，參考的維度關聯性](../../analysis-services/dev-guide/media/as-refdimension2.gif "邏輯圖表，參考的維度關聯性")</span><span class="sxs-lookup"><span data-stu-id="c2dee-128">![Logical diagram, referenced dimension relationship](../../analysis-services/dev-guide/media/as-refdimension2.gif "Logical diagram, referenced dimension relationship")</span></span>  
  
 <span data-ttu-id="c2dee-129">如需參考關聯性的詳細資訊，請參閱[定義參考的關聯性和參考的關聯性屬性](../multidimensional-models/define-a-referenced-relationship-and-referenced-relationship-properties.md)。</span><span class="sxs-lookup"><span data-stu-id="c2dee-129">For more information about referenced relationships, see [Define a Referenced Relationship and Referenced Relationship Properties](../multidimensional-models/define-a-referenced-relationship-and-referenced-relationship-properties.md).</span></span>  
  
## <a name="fact-dimension-relationships"></a><span data-ttu-id="c2dee-130">事實維度關聯性</span><span class="sxs-lookup"><span data-stu-id="c2dee-130">Fact Dimension Relationships</span></span>  
 <span data-ttu-id="c2dee-131">事實維度 (一般稱為變質維度) 是從事實資料表內的屬性資料行 (而非從維度資料表內的屬性資料行) 建構而來的標準維度。</span><span class="sxs-lookup"><span data-stu-id="c2dee-131">Fact dimensions, frequently referred to as degenerate dimensions, are standard dimensions that are constructed from attribute columns in fact tables instead of from attribute columns in dimension tables.</span></span> <span data-ttu-id="c2dee-132">有時候會將有用的維度資料儲存在事實資料表中，以減少資料的重複。</span><span class="sxs-lookup"><span data-stu-id="c2dee-132">Useful dimensional data is sometimes stored in a fact table to reduce duplication.</span></span> <span data-ttu-id="c2dee-133">例如，下圖顯示範例資料庫中的**FactResellerSales**事實資料表 [!INCLUDE[ssAWDWsp](../../includes/ssawdwsp-md.md)] 。</span><span class="sxs-lookup"><span data-stu-id="c2dee-133">For example, the following diagram displays the **FactResellerSales** fact table, from the [!INCLUDE[ssAWDWsp](../../includes/ssawdwsp-md.md)] sample database.</span></span>  
  
 <span data-ttu-id="c2dee-134">![事實資料表中的資料行可支援維度](../../analysis-services/dev-guide/media/as-factdim.gif "事實資料表中的資料行可支援維度")</span><span class="sxs-lookup"><span data-stu-id="c2dee-134">![Columns in fact table can support dimensions](../../analysis-services/dev-guide/media/as-factdim.gif "Columns in fact table can support dimensions")</span></span>  
  
 <span data-ttu-id="c2dee-135">此資料表所包含的屬性資訊，不但有零售商所發出的訂單產品線，還有關於訂單本身的資訊。</span><span class="sxs-lookup"><span data-stu-id="c2dee-135">The table contains attribute information not only for each line of an order issued by a reseller, but about the order itself.</span></span> <span data-ttu-id="c2dee-136">上圖中所圈出的屬性會識別**FactResellerSales**資料表中可用來當做維度屬性的資訊。</span><span class="sxs-lookup"><span data-stu-id="c2dee-136">The attributes circled in the previous diagram identify the information in the **FactResellerSales** table that could be used as attributes in a dimension.</span></span> <span data-ttu-id="c2dee-137">在此情況下，還有另外兩項資訊，即轉售商發出的貨運追蹤編號和訂單號碼，是由 CarrierTrackingNumber 和 CustomerPONumber 屬性資料行來表示。</span><span class="sxs-lookup"><span data-stu-id="c2dee-137">In this case, two additional pieces of information, the carrier tracking number and the purchase order number issued by the reseller, are represented by the CarrierTrackingNumber and CustomerPONumber attribute columns.</span></span> <span data-ttu-id="c2dee-138">這項資訊很有趣-例如，使用者對於在單一追蹤號碼下出貨的所有訂單，一定會有興趣查看匯總資訊，例如產品成本總計。</span><span class="sxs-lookup"><span data-stu-id="c2dee-138">This information is interesting-for example, users would definitely be interested in seeing aggregated information, such as the total product cost, for all the orders being shipped under a single tracking number.</span></span> <span data-ttu-id="c2dee-139">但沒有維度，也無法組織或彙總這兩個屬性的資料。</span><span class="sxs-lookup"><span data-stu-id="c2dee-139">But, without a dimension data for these two attributes cannot be organized or aggregated.</span></span>  
  
 <span data-ttu-id="c2dee-140">理論上，您可以建立與 FactResellerSales 資料表使用相同索引鍵資訊的維度資料表，並將其他兩個屬性資料行 (CarrierTrackingNumber 和 CustomerPONumber) 移到該維度資料表。</span><span class="sxs-lookup"><span data-stu-id="c2dee-140">In theory, you could create a dimension table that uses the same key information as the FactResellerSales table and move the other two attribute columns, CarrierTrackingNumber and CustomerPONumber, to that dimension table.</span></span> <span data-ttu-id="c2dee-141">不過，這樣做會重複大量資料，並在資料倉儲中增加了不必要的複雜性，而這一切只為了以個別維度來表示兩個屬性。</span><span class="sxs-lookup"><span data-stu-id="c2dee-141">However, you would be duplicating a significant portion of data and adding unnecessary complexity to the data warehouse to represent just two attributes as a separate dimension.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="c2dee-142">事實資料表經常會用來支援鑽研動作。</span><span class="sxs-lookup"><span data-stu-id="c2dee-142">Fact dimensions are frequently used to support drillthrough actions.</span></span> <span data-ttu-id="c2dee-143">如需動作的詳細資訊，請參閱[動作 &#40;Analysis Services - 多維度資料&#41;](../multidimensional-models/actions-analysis-services-multidimensional-data.md)。</span><span class="sxs-lookup"><span data-stu-id="c2dee-143">For more information about actions, see [Actions &#40;Analysis Services - Multidimensional Data&#41;](../multidimensional-models/actions-analysis-services-multidimensional-data.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="c2dee-144">在每次更新事實關聯性所參考的量值群組之後，都必須以累加方式更新事實維度。</span><span class="sxs-lookup"><span data-stu-id="c2dee-144">Fact dimensions must be incrementally updated after every update to the measure group that is referenced by the fact relationship.</span></span> <span data-ttu-id="c2dee-145">如果事實維度是 ROLAP 維度，則 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 處理引擎會卸除任何快取，並以累加方式處理量值群組。</span><span class="sxs-lookup"><span data-stu-id="c2dee-145">If the fact dimension is a ROLAP dimension, the [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] processing engine drops any caches and incrementally processes the measure group.</span></span>  
  
 <span data-ttu-id="c2dee-146">如需事實關聯性的詳細資訊，請參閱[定義事實關聯性和事實關聯性屬性](../multidimensional-models/define-a-fact-relationship-and-fact-relationship-properties.md)。</span><span class="sxs-lookup"><span data-stu-id="c2dee-146">For more information about fact relationships, see [Define a Fact Relationship and Fact Relationship Properties](../multidimensional-models/define-a-fact-relationship-and-fact-relationship-properties.md).</span></span>  
  
## <a name="many-to-many-dimension-relationships"></a><span data-ttu-id="c2dee-147">多對多維度關聯性</span><span class="sxs-lookup"><span data-stu-id="c2dee-147">Many to Many Dimension Relationships</span></span>  
 <span data-ttu-id="c2dee-148">在大部分維度中，每一個事實只會聯結到一個維度成員，且單一維度成員可與多個事實相關聯。</span><span class="sxs-lookup"><span data-stu-id="c2dee-148">In most dimensions, each fact joins to one and only one dimension member, and a single dimension member can be associated with multiple facts.</span></span> <span data-ttu-id="c2dee-149">在關聯式資料庫詞彙中，這稱為「一對多關聯性」。</span><span class="sxs-lookup"><span data-stu-id="c2dee-149">In relational database terminology, this is referred to as a one-to-many relationship.</span></span> <span data-ttu-id="c2dee-150">然而，將單一事實聯結至多個維度成員，是很有用的。</span><span class="sxs-lookup"><span data-stu-id="c2dee-150">However, it is frequently useful to join a single fact to multiple dimension members.</span></span> <span data-ttu-id="c2dee-151">例如，銀行客戶可以有多個帳戶 (支票、儲蓄、信用卡和投資帳戶)，而一個帳戶可以有聯合或多個擁有者。</span><span class="sxs-lookup"><span data-stu-id="c2dee-151">For example, a bank customer might have multiple accounts (checking, saving, credit card, and investment accounts), and an account can also have joint or multiple owners.</span></span> <span data-ttu-id="c2dee-152">從這樣的關聯性建構的客戶維度，就會有多個與單一帳戶交易相關的成員。</span><span class="sxs-lookup"><span data-stu-id="c2dee-152">The Customer dimension constructed from such relationships would then have multiple members that relate to a single account transaction.</span></span>  
  
 <span data-ttu-id="c2dee-153">![邏輯結構描述/多對多維度關聯性](../../analysis-services/dev-guide/media/as-many-dimension1.gif "邏輯結構描述/多對多維度關聯性")</span><span class="sxs-lookup"><span data-stu-id="c2dee-153">![Logical schema/many-to-many dimension relationship](../../analysis-services/dev-guide/media/as-many-dimension1.gif "Logical schema/many-to-many dimension relationship")</span></span>  
  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]<span data-ttu-id="c2dee-154">[!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)]可讓您定義維度與事實資料表之間的多對多關聯性。</span><span class="sxs-lookup"><span data-stu-id="c2dee-154">[!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] lets you define a many-to-many relationship between a dimension and a fact table.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="c2dee-155">若要支援多對多維度關聯性，資料來源檢視必須在所有相關資料表之間建立外部索引鍵關聯性 (如上圖所示)。</span><span class="sxs-lookup"><span data-stu-id="c2dee-155">To support a many-to-many dimension relationship, the data source view must have established a foreign key relationship between all the tables involved, as shown in the previous diagram.</span></span> <span data-ttu-id="c2dee-156">否則，當您在 [維度設計師] 的 [**維度使用**方式] 索引標籤中建立關聯性時，將無法選取正確的中繼量值群組。</span><span class="sxs-lookup"><span data-stu-id="c2dee-156">Otherwise, you will be unable to select the correct intermediate measure group when establishing the relationship in the **Dimension Usage** tab of Dimension Designer.</span></span>  
  
 <span data-ttu-id="c2dee-157">如需多對多關聯性的詳細資訊，請參閱[定義多對多關聯性和多對多關聯性屬性](../multidimensional-models/define-a-many-to-many-relationship-and-many-to-many-relationship-properties.md)。</span><span class="sxs-lookup"><span data-stu-id="c2dee-157">For more information about many-to-many relationships, see [Define a Many-to-Many Relationship and Many-to-Many Relationship Properties](../multidimensional-models/define-a-many-to-many-relationship-and-many-to-many-relationship-properties.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="c2dee-158">另請參閱</span><span class="sxs-lookup"><span data-stu-id="c2dee-158">See Also</span></span>  
 [<span data-ttu-id="c2dee-159">維度 &#40;Analysis Services - 多維度資料&#41;</span><span class="sxs-lookup"><span data-stu-id="c2dee-159">Dimensions &#40;Analysis Services - Multidimensional Data&#41;</span></span>](../multidimensional-models-olap-logical-dimension-objects/dimensions-analysis-services-multidimensional-data.md)  
  
  
