---
title: 分割區 (Analysis Services-多維度資料) |Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: reference
helpviewer_keywords:
- storage [Analysis Services], partitions
- incremental updates [Analysis Services]
- data sources [Analysis Services], partitions
- data storage [Analysis Services]
- aggregations [Analysis Services], partitions
- OLAP objects [Analysis Services], partitions
- storing data [Analysis Services], partitions
- partitions [Analysis Services], about partitions
- cubes [Analysis Services], partitions
- partitions [Analysis Services]
- remote partitions [Analysis Services]
- measure groups [Analysis Services], partitions
ms.assetid: cd10ad00-468c-4d49-9f8d-873494d04b4f
author: minewiskan
ms.author: owend
ms.openlocfilehash: 86057c14655b3fd2f0322387beb16a4a94717b68
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87607124"
---
# <a name="partitions-analysis-services---multidimensional-data"></a><span data-ttu-id="c3451-102">資料分割 (Analysis Services - 多維度資料)</span><span class="sxs-lookup"><span data-stu-id="c3451-102">Partitions (Analysis Services - Multidimensional Data)</span></span>
  <span data-ttu-id="c3451-103">資料分割是量值群組資料之一部分的容器。</span><span class="sxs-lookup"><span data-stu-id="c3451-103">A partition is a container for a portion of the measure group data.</span></span> <span data-ttu-id="c3451-104">無法從 MDX 查詢看到資料分割；所有的查詢都會反映量值群組的完整內容，不論針對此量值群組定義了多少個資料分割。</span><span class="sxs-lookup"><span data-stu-id="c3451-104">Partitions are not seen from MDX queries; all queries reflect the whole content of the measure group, regardless of how many partitions are defined for the measure group.</span></span> <span data-ttu-id="c3451-105">資料分割的資料內容是由資料分割的查詢繫結及分割運算式所定義。</span><span class="sxs-lookup"><span data-stu-id="c3451-105">The data content of a partition is defined by the query bindings of the partition, and by the slicing expression.</span></span>  
  
 <span data-ttu-id="c3451-106">簡單的 <xref:Microsoft.AnalysisServices.Partition> 物件是由基本資訊、分割定義、彙總設計等項目組成。</span><span class="sxs-lookup"><span data-stu-id="c3451-106">A simple <xref:Microsoft.AnalysisServices.Partition> object is composed of: basic information, slicing definition, aggregation design, and others.</span></span> <span data-ttu-id="c3451-107">基本資訊包括資料分割的名稱、儲存模式、處理模式等等。</span><span class="sxs-lookup"><span data-stu-id="c3451-107">Basic information includes the name of the partition, the storage mode, the processing mode, and others.</span></span> <span data-ttu-id="c3451-108">分割定義是指定 Tuple 或集合的 MDX 運算式。</span><span class="sxs-lookup"><span data-stu-id="c3451-108">The slicing definition is an MDX expression specifying a tuple or a set.</span></span> <span data-ttu-id="c3451-109">分割定義與 StrToSet MDX 函數有相同的限制。</span><span class="sxs-lookup"><span data-stu-id="c3451-109">The slicing definition has the same restrictions as the StrToSet MDX function.</span></span> <span data-ttu-id="c3451-110">分割定義結合了 CONSTRAINED 參數，便可以在 Cube 中使用維度、階層、層級和成員名稱、索引鍵、唯一名稱或其他具名物件，但是不能使用 MDX 函數。</span><span class="sxs-lookup"><span data-stu-id="c3451-110">Together with the CONSTRAINED parameter, the slicing definition can use dimension, hierarchy, level and member names, keys, unique names, or other named objects in the cube, but cannot use MDX functions.</span></span> <span data-ttu-id="c3451-111">彙總設計是可在多個資料分割之間共用之彙總定義的集合。</span><span class="sxs-lookup"><span data-stu-id="c3451-111">The aggregation design is a collection of aggregation definitions that can be shared across multiple partitions.</span></span> <span data-ttu-id="c3451-112">預設值是取自父 Cube 的彙總設計。</span><span class="sxs-lookup"><span data-stu-id="c3451-112">The default is taken from the parent cube's aggregation design.</span></span>  
  
 <span data-ttu-id="c3451-113">使用 [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 資料分割來管理及儲存 cube 中量值群組的資料和匯總。</span><span class="sxs-lookup"><span data-stu-id="c3451-113">Partitions are used by [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] to manage and store data and aggregations for a measure group in a cube.</span></span> <span data-ttu-id="c3451-114">每一個量值群組至少都有一個資料分割；當定義該量值群組時，就會建立此資料分割。</span><span class="sxs-lookup"><span data-stu-id="c3451-114">Every measure group has at least one partition; this partition is created when the measure group is defined.</span></span> <span data-ttu-id="c3451-115">為量值群組建立新的資料分割時，新的資料分割會加入到該量值群組已存在的資料分割集合中。</span><span class="sxs-lookup"><span data-stu-id="c3451-115">When you create a new partition for a measure group, the new partition is added to the set of partitions that already exist for the measure group.</span></span> <span data-ttu-id="c3451-116">量值群組會反映其所有資料分割中所包含的結合資料。</span><span class="sxs-lookup"><span data-stu-id="c3451-116">The measure group reflects the combined data that is contained in all its partitions.</span></span> <span data-ttu-id="c3451-117">這表示，您必須確定量值群組中某個資料分割的資料不包含該量值群組中其他任何資料分割的資料，以確保資料不會在量值群組中反映一次以上。</span><span class="sxs-lookup"><span data-stu-id="c3451-117">This means that you must ensure that the data for a partition in a measure group is exclusive of the data for any other partition in the measure group to ensure that data is not reflected in the measure group more than once.</span></span> <span data-ttu-id="c3451-118">量值群組的原始資料分割以 Cube 之資料來源檢視中的單一事實資料表為依據。</span><span class="sxs-lookup"><span data-stu-id="c3451-118">The original partition for a measure group is based on a single fact table in the data source view of the cube.</span></span> <span data-ttu-id="c3451-119">一個量值群組有多個資料分割時，每個資料分割都可以在資料來源檢視或 Cube 之基礎關聯式資料來源中參考不同的資料表。</span><span class="sxs-lookup"><span data-stu-id="c3451-119">When there are multiple partitions for a measure group, each partition can reference a different table in either the data source view or in the underlying relational data source for the cube.</span></span> <span data-ttu-id="c3451-120">如果將每個資料分割限制到資料表中的不同資料列，則量值群組中的多個資料分割即可參考相同的資料表。</span><span class="sxs-lookup"><span data-stu-id="c3451-120">More than one partition in a measure group can reference the same table, if each partition is restricted to different rows in the table.</span></span>  
  
 <span data-ttu-id="c3451-121">資料分割是管理 Cube 強大而有彈性的方式，特別是對大型的 Cube。</span><span class="sxs-lookup"><span data-stu-id="c3451-121">Partitions are a powerful and flexible means of managing cubes, especially large cubes.</span></span> <span data-ttu-id="c3451-122">例如，內含銷售資訊的 Cube 可以包含過去每年資料的資料分割，以及今年每一季的資料分割。</span><span class="sxs-lookup"><span data-stu-id="c3451-122">For example, a cube that contains sales information can contain a partition for the data of each past year and also partitions for each quarter of the current year.</span></span> <span data-ttu-id="c3451-123">將目前的資訊加入到 Cube 時，只需要處理目前這一季的資料分割；處理較少量的資料將會縮短處理時間而提升處理效能。</span><span class="sxs-lookup"><span data-stu-id="c3451-123">Only the current quarter partition needs to be processed when current information is added to the cube; processing a smaller amount of data will improve processing performance by decreasing processing time.</span></span> <span data-ttu-id="c3451-124">在一年的結尾，四季的資料分割可以合併到這一年的單一資料分割以及新年度第一季所建立的新資料分割當中。</span><span class="sxs-lookup"><span data-stu-id="c3451-124">At the end of the year the four quarterly partitions can be merged into a single partition for the year and a new partition created for the first quarter of the new year.</span></span> <span data-ttu-id="c3451-125">此外，可以在資料倉儲載入及 Cube 處理程序當中自動化這個新資料分割的建立程序。</span><span class="sxs-lookup"><span data-stu-id="c3451-125">Further, this new partition creation process can be automated as part of your data warehouse loading and cube processing procedures.</span></span>  
  
 <span data-ttu-id="c3451-126">Cube 的商務使用者看不到資料分割。</span><span class="sxs-lookup"><span data-stu-id="c3451-126">Partitions are not visible to business users of the cube.</span></span> <span data-ttu-id="c3451-127">不過，管理員可以設定、加入或卸除資料分割。</span><span class="sxs-lookup"><span data-stu-id="c3451-127">However, administrators can configure, add, or drop partitions.</span></span> <span data-ttu-id="c3451-128">每個資料分割儲存在個別的檔案集內。</span><span class="sxs-lookup"><span data-stu-id="c3451-128">Each partition is stored in a separate set of files.</span></span> <span data-ttu-id="c3451-129">每個資料分割的彙總資料都可以儲存在定義資料分割的 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 執行個體上、另一個 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 執行個體上，或用於提供資料分割之來源資料的資料來源中。</span><span class="sxs-lookup"><span data-stu-id="c3451-129">The aggregate data of each partition can be stored on the instance of [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] where the partition is defined, on another instance of [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)], or in the data source that is used to supply the partition's source data.</span></span> <span data-ttu-id="c3451-130">資料分割允許 Cube 的來源資料和彙總資料，散發在多個硬碟上與多部伺服器電腦間。</span><span class="sxs-lookup"><span data-stu-id="c3451-130">Partitions allow the source data and aggregate data of a cube to be distributed across multiple hard drives and among multiple server computers.</span></span> <span data-ttu-id="c3451-131">針對中型到大型的 Cube，資料分割可以大幅提升查詢效能、載入效能和簡化 Cube 的維護。</span><span class="sxs-lookup"><span data-stu-id="c3451-131">For a cube of moderate to large size, partitions can greatly improve query performance, load performance, and ease of cube maintenance.</span></span> <span data-ttu-id="c3451-132">如需遠端資料分割的詳細資訊，請參閱 [遠端資料分割](partitions-remote-partitions.md)。</span><span class="sxs-lookup"><span data-stu-id="c3451-132">For more information about remote partitions, see [Remote Partitions](partitions-remote-partitions.md).</span></span>  
  
 <span data-ttu-id="c3451-133">每個資料分割的儲存模式，可以不受量值群組中其他資料分割的影響，單獨設定。</span><span class="sxs-lookup"><span data-stu-id="c3451-133">The storage mode of each partition can be configured independently of other partitions in the measure group.</span></span> <span data-ttu-id="c3451-134">您可以使用於源資料位置、儲存模式、主動式快取和彙總設計之選項的任意組合來儲存資料分割；</span><span class="sxs-lookup"><span data-stu-id="c3451-134">Partitions can be stored by using any combination of options for source data location, storage mode, proactive caching, and aggregation design.</span></span> <span data-ttu-id="c3451-135">即時 OLAP 和主動式快取的選項可讓您在設計資料分割時，平衡查詢速度與延遲。</span><span class="sxs-lookup"><span data-stu-id="c3451-135">Options for real-time OLAP and proactive caching let you balance query speed against latency when you design a partition.</span></span> <span data-ttu-id="c3451-136">儲存選項也可以套用到相關的維度，以及量值群組中的事實。</span><span class="sxs-lookup"><span data-stu-id="c3451-136">Storage options can also be applied to related dimensions and to facts in a measure group.</span></span> <span data-ttu-id="c3451-137">這種彈性可讓您依據您的需求來設計適當的 Cube 儲存策略。</span><span class="sxs-lookup"><span data-stu-id="c3451-137">This flexibility lets you design cube storage strategies appropriate to your needs.</span></span> <span data-ttu-id="c3451-138">如需詳細資訊，請參閱[分割區儲存模式和處理](partitions-partition-storage-modes-and-processing.md)、[匯總和匯總設計](aggregations-and-aggregation-designs.md)和主動式快取[&#40;&#41;的磁碟分割](partitions-proactive-caching.md)。</span><span class="sxs-lookup"><span data-stu-id="c3451-138">For more information, see [Partition Storage Modes and Processing](partitions-partition-storage-modes-and-processing.md), [Aggregations and Aggregation Designs](aggregations-and-aggregation-designs.md) and [Proactive Caching &#40;Partitions&#41;](partitions-proactive-caching.md).</span></span>  
  
## <a name="partition-structure"></a><span data-ttu-id="c3451-139">資料分割結構</span><span class="sxs-lookup"><span data-stu-id="c3451-139">Partition Structure</span></span>  
 <span data-ttu-id="c3451-140">資料分割的結構必須符合其量值群組的結構，這也就表示，定義此量值群組的量值也必須定義於此資料分割中，連同所有相關的維度。</span><span class="sxs-lookup"><span data-stu-id="c3451-140">The structure of a partition must match the structure of its measure group, which means that the measures that define the measure group must also be defined in the partition, along with all related dimensions.</span></span> <span data-ttu-id="c3451-141">因此，建立資料分割時，它會自動繼承為該量值群組所定義的相同量值集合和相關維度。</span><span class="sxs-lookup"><span data-stu-id="c3451-141">Therefore, when a partition is created, it automatically inherits the same set of measures and related dimensions that were defined for the measure group.</span></span>  
  
 <span data-ttu-id="c3451-142">但是量值群組中的每一個資料分割都可以有不同的事實資料表，而這些事實資料表可以來自不同的資料來源。</span><span class="sxs-lookup"><span data-stu-id="c3451-142">However, each partition in a measure group can have a different fact table, and these fact tables can be from different data sources.</span></span> <span data-ttu-id="c3451-143">當量值群組中的不同資料分割有不同的事實資料表時，這些資料表必須非常類似，才能維護此量值群組的結構；這也就表示，處理查詢對於所有資料分割的所有事實資料表都會傳回相同的資料行和相同的資料類型。</span><span class="sxs-lookup"><span data-stu-id="c3451-143">When different partitions in a measure group have different fact tables, the tables must be sufficiently similar to maintain the structure of the measure group, which means that the processing query returns the same columns and same data types for all fact tables for all partitions.</span></span>  
  
 <span data-ttu-id="c3451-144">當不同資料分割的事實資料表是來自不同的資料來源時，任何相關維度的來源資料表和任何中繼事實資料表，也都必須存在於所有資料來源中，而且在所有資料庫中的結構都必須相同。</span><span class="sxs-lookup"><span data-stu-id="c3451-144">When fact tables for different partitions are from different data sources, the source tables for any related dimensions, and also any intermediate fact tables, must also be present in all data sources and must have the same structure in all the databases.</span></span> <span data-ttu-id="c3451-145">此外，用於定義與量值群組相關之 Cube 維度屬性的所有維度資料表資料行，都必須存在於所有的資料來源中。</span><span class="sxs-lookup"><span data-stu-id="c3451-145">Also, all dimension table columns that are used to define attributes for cube dimensions related to the measure group must be present in all of the data sources.</span></span> <span data-ttu-id="c3451-146">如果資料分割來源資料表與量值群組之來源資料表的結構完全相同，則不需要在資料分割的來源資料表與相關維度資料表之間定義所有的聯結。</span><span class="sxs-lookup"><span data-stu-id="c3451-146">There is no need to define all the joins between the source table of a partition and a related dimension table if the partition source table has the identical structure as the source table for the measure group.</span></span>  
  
 <span data-ttu-id="c3451-147">某些事實資料表中會有不是用於定義量值群組之量值的資料行，而某些事實資料表中則不會有這樣的資料行。</span><span class="sxs-lookup"><span data-stu-id="c3451-147">Columns that are not used to define measures in the measure group can be present in some fact tables but absent in others.</span></span> <span data-ttu-id="c3451-148">同樣地，某些資料庫中會有不是用於定義相關維度資料表之屬性的資料行，而某些資料庫中則不會有這樣的資料行。</span><span class="sxs-lookup"><span data-stu-id="c3451-148">Similarly, columns that are not used to define attributes in related dimension tables can be present in some databases but absent in others.</span></span> <span data-ttu-id="c3451-149">某些資料庫中會有不是用於事實資料表和相關維度資料表的資料表，而某些資料庫中則不會有這樣的資料表。</span><span class="sxs-lookup"><span data-stu-id="c3451-149">Tables that are not used for either fact tables or related dimension tables can be present in some databases but absent in others.</span></span>  
  
## <a name="data-sources-and-partition-storage"></a><span data-ttu-id="c3451-150">資料來源與資料分割儲存</span><span class="sxs-lookup"><span data-stu-id="c3451-150">Data Sources and Partition Storage</span></span>  
 <span data-ttu-id="c3451-151">資料分割的基礎是資料來源中的資料表或檢視，或資料來源檢視中的資料表或具名查詢。</span><span class="sxs-lookup"><span data-stu-id="c3451-151">A partition is based either on a table or view in a data source, or on a table or named query in a data source view.</span></span> <span data-ttu-id="c3451-152">資料分割資料的儲存位置是由資料來源繫結所定義。</span><span class="sxs-lookup"><span data-stu-id="c3451-152">The location where partition data is stored is defined by the data source binding.</span></span> <span data-ttu-id="c3451-153">通常，您可以水平或垂直地分割量值群組：</span><span class="sxs-lookup"><span data-stu-id="c3451-153">Typically, you can partition a measure group horizontally or vertically:</span></span>  
  
-   <span data-ttu-id="c3451-154">在水平分割的量值群組中，量值群組的每個資料分割是以個別的資料表為依據。</span><span class="sxs-lookup"><span data-stu-id="c3451-154">In a horizontally partitioned measure group, each partition in a measure group is based on a separate table.</span></span> <span data-ttu-id="c3451-155">這類型的資料分割適用於將資料分隔到多份資料表時。</span><span class="sxs-lookup"><span data-stu-id="c3451-155">This kind of partitioning is appropriate when data is separated into multiple tables.</span></span> <span data-ttu-id="c3451-156">例如，部份關聯式資料庫針對每個月的資料會有個別的資料表。</span><span class="sxs-lookup"><span data-stu-id="c3451-156">For example, some relational databases have a separate table for each month's data.</span></span>  
  
-   <span data-ttu-id="c3451-157">在垂直分割的量值群組中，量值群組是以單一資料表為基礎，而每一個資料分割都是根據篩選資料分割之資料的來源系統查詢。</span><span class="sxs-lookup"><span data-stu-id="c3451-157">In a vertically partitioned measure group, a measure group is based on a single table, and each partition is based on a source system query that filters the data for the partition.</span></span> <span data-ttu-id="c3451-158">例如，若單一資料表包含數個月份的資料，仍可以套用 Transact-SQL WHERE 子句來對每一個資料分割傳回個別月份資料，根據月份分割量值群組。</span><span class="sxs-lookup"><span data-stu-id="c3451-158">For example, if a single table contains several months data, the measure group could still be partitioned by month by applying a Transact-SQL WHERE clause that returns a separate month's data for each partition.</span></span>  
  
 <span data-ttu-id="c3451-159">每一個資料分割都會有儲存設定，用以決定是要將該資料分割的資料和彙總儲存在 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 的本機執行個體中，還是儲存在使用另一個 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 執行個體的遠端資料分割中；</span><span class="sxs-lookup"><span data-stu-id="c3451-159">Each partition has storage settings that determine whether the data and aggregations for the partition are stored in the local instance of [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] or in a remote partition using another instance of [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)].</span></span> <span data-ttu-id="c3451-160">這些儲存設定也可以指定儲存模式，以及指定是否使用主動式快取來控制資料分割的延遲。</span><span class="sxs-lookup"><span data-stu-id="c3451-160">The storage settings can also specify the storage mode and whether proactive caching is used to control latency for a partition.</span></span> <span data-ttu-id="c3451-161">如需詳細資訊，請參閱[磁碟分割儲存模式和處理](partitions-partition-storage-modes-and-processing.md)、主動式快取 &#40;分割區[&#41;](partitions-proactive-caching.md)和[遠端](partitions-remote-partitions.md)資料分割。</span><span class="sxs-lookup"><span data-stu-id="c3451-161">For more information, see [Partition Storage Modes and Processing](partitions-partition-storage-modes-and-processing.md), [Proactive Caching &#40;Partitions&#41;](partitions-proactive-caching.md), and [Remote Partitions](partitions-remote-partitions.md).</span></span>  
  
## <a name="incremental-updates"></a><span data-ttu-id="c3451-162">累加式更新</span><span class="sxs-lookup"><span data-stu-id="c3451-162">Incremental Updates</span></span>  
 <span data-ttu-id="c3451-163">當您在多資料分割量值群組中建立和管理資料分割時，必須採取特別注意事項以確保 Cube 資料正確。</span><span class="sxs-lookup"><span data-stu-id="c3451-163">When you create and manage partitions in multiple-partition measure groups, you must take special precautions to guarantee that cube data is accurate.</span></span> <span data-ttu-id="c3451-164">雖然這些注意事項通常都不會套用到單一資料分割量值群組，但是當您以累加方式更新資料分割時則會予以套用。</span><span class="sxs-lookup"><span data-stu-id="c3451-164">Although these precautions do not usually apply to single-partition measure groups, they do apply when you incrementally update partitions.</span></span> <span data-ttu-id="c3451-165">當您以累加方式更新資料分割時，會建立新的暫存資料分割，而這個資料分割的結構與來源資料分割的結構相同。</span><span class="sxs-lookup"><span data-stu-id="c3451-165">When you incrementally update a partition, a new temporary partition is created that has a structure identical to that of the source partition.</span></span> <span data-ttu-id="c3451-166">這時會處理暫存資料分割，再與來源資料分割合併。</span><span class="sxs-lookup"><span data-stu-id="c3451-166">The temporary partition is processed and then merged with the source partition.</span></span> <span data-ttu-id="c3451-167">因此，您必須確定擴展暫存資料分割的處理查詢不會複製已經存在於現有資料分割中的任何資料。</span><span class="sxs-lookup"><span data-stu-id="c3451-167">Therefore, you must ensure that the processing query that populates the temporary partition does not duplicate any data already present in an existing partition.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="c3451-168">另請參閱</span><span class="sxs-lookup"><span data-stu-id="c3451-168">See Also</span></span>  
 <span data-ttu-id="c3451-169">[設定量值屬性](../multidimensional-models/configure-measure-properties.md) </span><span class="sxs-lookup"><span data-stu-id="c3451-169">[Configure Measure Properties](../multidimensional-models/configure-measure-properties.md) </span></span>  
 [<span data-ttu-id="c3451-170">多維度模型中的 Cube</span><span class="sxs-lookup"><span data-stu-id="c3451-170">Cubes in Multidimensional Models</span></span>](../multidimensional-models/cubes-in-multidimensional-models.md)  
  
  
