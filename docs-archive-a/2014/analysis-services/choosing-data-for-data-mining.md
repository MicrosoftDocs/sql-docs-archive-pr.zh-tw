---
title: 選擇資料獲取的資料 |Microsoft Docs
ms.custom: ''
ms.date: 12/29/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
helpviewer_keywords:
- content type [data mining]
- nested tables
- key [data mining]
- continuous values
- key sequence [data mining]
- table data type
- key time [data mining]
- discrete values
- discretized
ms.assetid: 7c72d80e-913c-4bbe-b258-444294a78838
author: minewiskan
ms.author: owend
ms.openlocfilehash: 9b655e344bd9976c30781efb7be41a3fc602174d
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87593078"
---
# <a name="choosing-data-for-data-mining"></a>選擇要進行資料採礦的資料
  當您開始進行資料採礦時，您可能會問「我需要多少資料？」 或「在清除或格式化資料時，是否有任何特殊需求？」  
  
 特別是，資料採礦的新手經常會遇到 Excel 資料的問題，例如需要在資料行內持續地格式化資料、清除遺漏值或分類收納數字。 本章節也會列出特定模型種類的資料需求。  
  
 [選擇資料](#bkmk_ChoosingData)  
  
 [常見資料問題](#bkmk_CommonDataProblems)  
  
 [其他資料需求](#bkmk_OtherRequirements)  
  
##  <a name="choosing-data"></a><a name="bkmk_ChoosingData"></a>選擇資料  
 選取用於分析的資料或許是資料採礦程序中最重要的部分，甚至比選取演算法還重要。 這是因為資料採礦通常不是假設導向，而是資料導向。 資料採礦可能會取用資料並探索新的相互關聯性 (或者未能發現任何模式)，而不像傳統統計模型可能會事先選取及測試變數。 資料的品質和數量對於結果會有重大的影響。  
  
 一般而言，請觀察以下規則：  
  
-   盡量取得更多乾淨的資料。  
  
-   在您嘗試任何模型之前，請先執行資料分析。 您必須先了解資料，然後才可以從資料衍生意義。 最低限度：  
  
    1.  使用增益集中的工具來尋找您的最大值與最小值、最常見的值和平均值。  
  
    2.  填入遺漏的值。 增益集 (以及某些演算法) 會提供工具來輸入遺漏的值。  
  
    3.  盡可能更正不正確的資料。 資料採礦專案通常會當做新資料品質計劃的推動力量。  
  
-   嘗試建立測試模型，並以此方式尋找資料問題。 例如，當您查看結果時，您可能會發現銷售預測是根據貨幣轉換錯誤而產生的異常資料。  
  
-   嘗試將資料轉換成不同格式，或是嘗試儲存數字。 當轉換資料時，通常會出現模式。  
  
     例如，撥接中心的服務等級可能會受到星期幾所影響，如果您只使用日期時間值就不會看到這個狀況。 以 10 天的循環週期產生的預測可能會優於以每週或每天為單位的預測。  
  
-   將數字放在適當的分類收納中，以減少可能用於分析的值數目。  
  
-   建立資料的多個版本，並建立多個模型。  
  
 如需有關如何選取、修改和查看資料的其他秘訣，請參閱[資料採礦準備的檢查清單](checklist-of-preparation-for-data-mining.md)。  
  
### <a name="how-much-data-do-i-need"></a>我需要多少資料？  
 基本原則如下：最簡單的模型類型和案例絕對不要擁有少於 50-100 個資料列的資料。 例如，如果您使用貝氏機率分類模型預測單一屬性，而且資料集的格式正確，您或許可以使用 50-100 個資料列的資料產生相當精確的預測。  
  
 對於關聯模型，您通常需要更多的資料-如果您要分析許多屬性（例如產品之間的關聯），則會有一千個數據列可能無法滿足。 如果您的資料集太大或太小，您有時可以將資料列摺疊到類別目錄中來獲得較好的結果。 例如，您可以分類產品，而不用分析個別產品之間的關聯。  
  
 如果您有大小適當的資料集，請將焦點放在資料品質，而不是增加更多的資料。 在某個點之後，統計上有效的所有模式都將會被發現，而增加更多資料並不會改善其有效性。 相反地，增加更多資料有時可能會導入意外的相互關聯性。  
  
### <a name="discrete-vs-continuous-numbers"></a>離散與連續數位  
 *離散*資料行包含有限數量的值。 例如，文字一定會被視為離散值。  
  
 離散值有一些重要的屬性。 例如，如果您將數字視為離散，數字之間就不會隱含任何順序，您也無法平均數字或加總數字。 電話區域碼是很好的離散數值資料範例，您絕對不會使用這些代碼執行數學運算。  
  
 離散值有時稱為類別值，因為您可以依類別來分組資料，但您無法將排列成無限數列的數字分組。  
  
 如果值是明確分隔的，並且不可能有小數值或是小數值不實用，您也可能決定將這些數字視為離散值。  
  
 *連續*數值資料可以包含無限數目的小數值。 收入資料行就是連續屬性資料行的一個範例。 如果您指定某資料行為數值，則該資料行中的每一個值都必須是數字，除了 Null。 請注意，在 Excel 中，時間戳記以及可轉換成 [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] 資料類型的任何其他日期時間表示法都算是數值。  
  
 **將數字轉換成類別變數**  
  
 並不是說資料行包含數字就表示您應該將它們視為連續的數字。 *離散*化提供許多分析的優點。 其中一個優點是減少問題空間。 另一個優點如下：有時數字並不是呈現結果的適當方式。  
  
 例如，每戶家庭的孩童數目可以被視為連續或離散值。 因為一個家庭不可能有 2.5 個小孩，而且有 3 個或更多小孩的家庭與有 2 個小孩的家庭可能會有非常不同的行為模式，所以將這個數字視為一個類別目錄可能會得到更好的結果。 不過，如果您要建立迴歸模型或是需要平均值 (例如每個家庭 1.357 個小孩)，您就會使用連續數字資料類型。  
  
 建立具有連續資料的採礦模型，稍後便不可能將資料行視為離散的。 這兩個資料集必須以不同方式處理，而且在後端要當做個別的採礦結構來處理。 如果您不確定處理資料的正確方式為何，您應該建立以不同方式處理資料的個別模型。 在任何情況下，這都是取得資料的不同觀點以及可能的不同結果的好方法。  
  
 **將數字轉換成文字**  
  
 應該是離散的值 (如男性和女性) 常常會以數值資料表示，例如使用標籤 1 和 2。 一般來說，執行這樣的編碼是為了簡化資料輸入，或是為了節省資料庫中的儲存空間，但是這樣的編碼也可能會導致有關這些值本質或意義上的模稜兩可。 此外，因為離散的值會儲存成數字，所以當您在應用程式之間移動資料時，您可能會遇到資料類型轉換的錯誤，而且這些值可能會被計算或是視為連續的值。 為了避免這類問題，在開始資料採礦之前，您應該將數值標籤轉換回離散文字標籤。  
  
 **分類收納數字**  
  
 雖然原則中的所有數位都是無限的，因此，當您將資訊模型化時，您可能會發現*離散化*或將可用的值設為 [ *bin* ] 會更有效率。  
  
 您有許多方式可以分類收納資料：  
  
-   指定數量有限的貯體，然後讓演算法排序值放入貯體。  
  
-   您可以建立幾個具有商業意義或比較容易使用的群組，自己先將它們分組。 使用這種方法時，通常會遺失值的真正散發意義，不過，其範圍對使用者而言比較容易閱讀。  
  
-   讓演算法決定貯體的最佳數量和值的散發。 這是大部分工具中的預設值，但您可以在 [**資料採礦**] 工具列的 [嚮導] 中覆寫這些預設值。  
  
-   將值逼近到中央平均值或代表值。  
  
##  <a name="common-data-problems"></a><a name="bkmk_CommonDataProblems"></a>常見的資料問題  
  
### <a name="excel-number-formats"></a>Excel 數字格式  
 Excel 是一種容易使用的工具，因為它是容許的，您幾乎可以在任何地方放置任何類型的資料！ 不過，在開始尋找模式和分析相互關聯性之前，您需要給資料加上一些結構或條件約束。  
  
 根據預設，當您將數值資料匯入至 [!INCLUDE[msCoName](../includes/msconame-md.md)] Office Excel 時，數字會以含兩個小數位數的十進位格式儲存。 如果這不是適當的數字格式，您應該將它變更成另一個數值格式，或變更小數位數。  
  
 其中一個選項是使用重定卷[標工具來](relabel-sql-server-data-mining-add-ins.md)變更數位的顯示或分組方式。  
  
 不過，如果您的資料太複雜而無法使用重新**標記**工具處理，您可以使用 Excel 中的數值函數將資料轉換成離散範圍，將該結果儲存到個別的資料行，然後改用離散化資料行進行分類。  
  
 例如，如果您要分析賽跑結果，並想要以分鐘為單位，將跑者依其抵達終點的時間來加以分組，則可以藉由四捨五入法取最接近的分鐘值，並將該捨入值儲存到新資料行。 也可以使用 `MINUTE` 函數只擷取分鐘值，然後將該值儲存到新資料行供分析使用。  
  
### <a name="discretizing-numbers-and-dates-in-excel"></a>在 Excel 中離散化數字和日期  
 根據預設，Excel 中的數值資料會儲存為 `Double`。 日期和時間也是以數值格式儲存。 如果您為了資料採礦而需要離散化數字或日期，則應該在建立資料採礦模型之前加入新的資料行，或預先將日期和數字轉換成另一個格式。  
  
### <a name="scientific-number-formats"></a>科學數字格式  
 資料採礦工具通常會以科學記號標記法 (代表非常大或非常小的數字) 輸出機率。 如果您不熟悉科學記號標記法，只要變更資料格的格式，就可以使用其他格式輕鬆顯示這些數字。  
  
##### <a name="to-change-scientific-notation-to-a-decimal-numeric-format"></a>將科學記號標記法變更為十進位數值格式  
  
1.  在 Excel 資料表中，反白顯示包含使用科學記號標記法之數字的資料行或資料格。  
  
2.  以滑鼠右鍵按一下，然後從快捷方式功能表選取 [**格式化儲存格**]。  
  
3.  在 [**類別**] 清單中，選取 [**數位**]。  
  
4.  增加小數位數。 以科學記號標記法表示的機率通常非常小。  
  
     只有數字的顯示會變更，基礎值則不會變更。  
  
### <a name="working-with-dates-and-times"></a>處理日期和時間  
 當您的 Excel 資料表中有日期並且使用此資料行做為輸入或預測時，根據日期或時間資訊的格式，可能會發生未預期的結果。 例如，當您使用 [偵測**類別目錄**] 或 [**分類**]，並包含包含日期的資料行時，會將日期分類為具有許多小數位數的數值。 這不是錯誤，而是基礎資料的正確表示方式。 資料採礦演算法會使用基礎儲存格式，而非顯示格式。  
  
 如果您在使用日期有困難，而且要使用月或日之類的常識群組來分析日期，可以使用 Excel 的 DATE 函數，將年、月或日擷取至另一個資料行，然後改用此資料行進行分類。  
  
##  <a name="other-data-requirements"></a><a name="bkmk_OtherRequirements"></a>其他資料需求  
  
### <a name="requirements-by-algorithm-type"></a>依演算法類型的需求  
 在增益集中使用的某些演算法需要特定資料類型或內容類型才能建立模型。  
  
 **貝氏機率分類模型**  
  
-   [!INCLUDE[msCoName](../includes/msconame-md.md)] 貝氏機率分類演算法不能使用連續資料行當做輸入。 這表示您必須分類收納數字，或是在有幾個足夠的值時，將其當做離散值來處理。  
  
-   這種模型也無法預測連續值。 因此，如果您想要預測類似收入的連續數字，您應該先將值分類收納成有意義的範圍。 如果您不確定適當的範圍為何，您可以使用群集演算法來識別資料中的數字團塊。  
  
-   當您使用以此演算法為基礎的 wizard (例如[分析關鍵影響因數 &#40;適用于 Excel 的資料表分析工具&#41;](analyze-key-influencers-table-analysis-tools-for-excel.md)) 時，會由您的 wizard 分類收納連續的資料行。  
  
-   如果您使用 [[適用于 Excel &#40;的資料貝氏增益集&#41;](advanced-modeling-data-mining-add-ins-for-excel.md) ] 選項來建立貝氏機率分類模型，則會從模型中移除數位行。 如果您想要避免這種情況，請使用 [重定標籤[&#40;SQL Server 資料採礦增益集]&#41;](relabel-sql-server-data-mining-add-ins.md)工具來建立具有分類收納值的新資料行。  
  
 **群集模型**  
  
-   叢集工具 (叢集[Wizard &#40;適用于 excel 的資料採礦增益集&#41;](cluster-wizard-data-mining-add-ins-for-excel.md)並偵測[類別 &#40;適用于 Excel&#41;的資料表分析工具](detect-categories-table-analysis-tools-for-excel.md)) 也不能使用連續數位，但這兩個工具都會自動為您提供數位資料行。  
  
-   這兩種工具都提供選項讓您選擇結果中輸出類別的數目，但如果您要控制個別資料行中值的分組方式，就應該以您要的群組來建立新的資料行。  
  
 **預測模型**  
  
-   所有預測工具都會要求您預測連續的數字。 您無法預測已經儲存為文字的數字。  
  
-   如果您的資料包含錯誤資料類型的數字資料行，您可以使用 Excel 函數或 PowerPivot 函數來複製具有正確數值資料類型的資料行。 如果您這樣做，請務必移除具有文字數字的資料行複本，這樣值就不會重複。  
  
-   如果您要建立迴歸模型的散佈圖，輸入變數也必須是連續數字 (以適當的資料類型表示)。  
  
### <a name="using-content-types-to-make-better-models"></a>使用內容類型製作更好的模型  
 「*內容類型」（content type* ）是您套用至資料行的屬性，用來指定模型應該如何使用資料行資料。 當執行分析時，演算法可以使用內容類型當做指示或提示。  
  
 例如，如果資料行包含的數字以特定間隔重複 (表示星期幾)，您可能會指定該資料行的內容類型為 `Cyclical`。  
  
 如果您使用此增益集所提供的「嚮導」和「工具」，則不需要擔心內容類型。不過，如果您使用 [[將模型加入至 Excel &#40;資料採礦增益集&#41;](add-model-to-structure-data-mining-add-ins-for-excel.md)模型化] 選項將新模型加入現有的資料中，您可能會收到與內容類型相關的錯誤。  
  
 原因是某些模型類型需要特定種類的資料 (例如時間戳記)。 工具會依據特定需求來處理這些資料行，也會加入內容類型屬性。 因此，如果您以完全不同的演算法重複使用資料，您可能需要變更資料類型或內容類型。  
  
 下列清單描述資料採礦中使用的內容類型，並識別支援每一種類型的資料類型。  
  
 `Discrete`  
 此資料行包含有限數量的值，且值之間沒有延續。 例如，性別資料行是一個典型的離散屬性資料行，因為其資料代表特定數量的類別。  
  
 `Discrete` 內容類型可用於所有資料類型。  
  
 `Continuous`  
 此資料行包含的值代表刻度允許過渡值的數值資料。 連續資料行代表可擴充的度量，其資料可能包含無限個小數值。 溫度資料行就是連續屬性資料行的一個範例。  
  
  內容類型可以用於以下資料類型：、 和 。  
  
 `Discretized`  
 此資料行包含的值代表從連續資料行衍生之值的群組。 值區會被視為已**排序**和離散值。  
  
  內容類型可以用於以下資料類型：、 和 。  
  
 **索引鍵**  
 此資料行會唯一識別資料列。  
  
 索引鍵資料行通常是數值或文字識別碼，不應該用於分析，只能用於追蹤記錄。 時間序列索引鍵和時序索引鍵則是例外。  
  
 只有當您從已定義為數據源視圖的外部資料源取得資料時，才會使用**嵌套的資料表索引鍵** [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] 。 如需有關嵌套資料表的詳細資訊，請參閱 [https://msdn.microsoft.com/library/ms175659.aspx](https://msdn.microsoft.com/library/ms175659.aspx) ：  
  
 此內容類型可以用於以下資料類型：`Date`、`Double`、`Long` 和 `Text`。  
  
 **Key Sequence**  
 此資料行包含代表事件序列的值。 其值已排序，但不必為等距。  
  
 這個內容類型受到下列資料類型所支援：`Double`、`Long`、`Text` 和 `Date`。  
  
 **Key Time**  
 此資料行包含已排序而且代表時間刻度的值。 只有在模型為時間序列模型或時序群集模型時，才可以使用 Key Time 內容類型。  
  
 這個內容類型受到下列資料類型所支援：`Double`、`Long` 和 `Date`。  
  
 **資料表**  
 同樣的，只有從已定義為 [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] 資料來源檢視的外部資料來源取得資料時，才可以使用此內容類型。  
  
 也就是說，每個資料列實際上是包含了巢狀資料表 (具有一個或多個資料行以及一個或多個資料列)。  
  
 嵌套資料表非常方便，但您只能搭配[適用于 Excel 的 Advanced 模型 &#40;資料採礦增益集&#41;](advanced-modeling-data-mining-add-ins-for-excel.md)模型選項來使用它們。 例如，[[關聯] wizard &#40;[適用于&#41;excel 的資料採礦用戶端](associate-wizard-data-mining-client-for-excel.md)] 和 [[購物籃分析](shopping-basket-analysis-table-analysistools-for-excel.md)] 的範例資料會 &#40;[適用于 excel 的資料表 AnalysisTools]&#41;工具組含從嵌套資料表簡維化的資料。  

  
  
