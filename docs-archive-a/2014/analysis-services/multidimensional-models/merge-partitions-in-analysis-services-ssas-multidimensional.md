---
title: 在 Analysis Services 中合併資料分割 (SSAS-多維度) |Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
helpviewer_keywords:
- partitions [Analysis Services], merging
- merging partitions [Analysis Services]
ms.assetid: b3857b9b-de43-4911-989d-d14da0196f89
author: minewiskan
ms.author: owend
ms.openlocfilehash: 42820a202c4da58e21dfd55756b7bb03522ea879
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87707954"
---
# <a name="merge-partitions-in-analysis-services-ssas---multidimensional"></a><span data-ttu-id="3603a-102">在 Analysis Services 中合併分割區 (SSAS - 多維度)</span><span class="sxs-lookup"><span data-stu-id="3603a-102">Merge Partitions in Analysis Services (SSAS - Multidimensional)</span></span>
  <span data-ttu-id="3603a-103">您可以合併現有 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 資料庫中的資料分割，以合併相同量值群組中之多個資料分割的事實資料。</span><span class="sxs-lookup"><span data-stu-id="3603a-103">You can merge partitions in an existing [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] database to consolidate fact data from multiple partitions of the same measure group.</span></span>  
  
 [<span data-ttu-id="3603a-104">常見案例</span><span class="sxs-lookup"><span data-stu-id="3603a-104">Common scenarios</span></span>](#bkmk_Scenario)  
  
 [<span data-ttu-id="3603a-105">需求</span><span class="sxs-lookup"><span data-stu-id="3603a-105">Requirements</span></span>](#bkmk_prereq)  
  
 [<span data-ttu-id="3603a-106">合併分割區之後更新分割區來源</span><span class="sxs-lookup"><span data-stu-id="3603a-106">Update the Partition Source after merging partitions</span></span>](#bkmk_Where)  
  
 [<span data-ttu-id="3603a-107">依事實資料表或具名查詢分割分割區的特殊考量</span><span class="sxs-lookup"><span data-stu-id="3603a-107">Special considerations for partitions segmented by fact table or named query</span></span>](#bkmk_fact)  
  
 [<span data-ttu-id="3603a-108">如何使用 SSMS 合併分割區</span><span class="sxs-lookup"><span data-stu-id="3603a-108">How to merge partitions using SSMS</span></span>](#bkmk_partitionSSMS)  
  
 [<span data-ttu-id="3603a-109">如何使用 XMLA 合併資料分割</span><span class="sxs-lookup"><span data-stu-id="3603a-109">How to merge partitions using XMLA</span></span>](#bkmk_partitionsXMLA)  
  
##  <a name="common-scenarios"></a><a name="bkmk_Scenario"></a><span data-ttu-id="3603a-110">常見案例</span><span class="sxs-lookup"><span data-stu-id="3603a-110">Common scenarios</span></span>  
 <span data-ttu-id="3603a-111">針對分割區使用的單一最常見組態，牽涉到跨時間維度的資料分離。</span><span class="sxs-lookup"><span data-stu-id="3603a-111">The single most common configuration for partition use involves the separation of data across the dimension of time.</span></span> <span data-ttu-id="3603a-112">視專案特定的商務需求而定，與每個分割區相關聯的時間資料粒度會有所不同。</span><span class="sxs-lookup"><span data-stu-id="3603a-112">The granularity of time associated with each partition varies depending on the business requirements specific to the project.</span></span> <span data-ttu-id="3603a-113">例如，分割可能是依年份，並依月份分割最近的年份，再加上使用中之月份的個別分割區。</span><span class="sxs-lookup"><span data-stu-id="3603a-113">For example, segmentation might be by years, with the most recent year divided by months, plus a separate partition for the active month.</span></span> <span data-ttu-id="3603a-114">使用中月份分割區會定期顯示新資料。</span><span class="sxs-lookup"><span data-stu-id="3603a-114">The active month partition regularly takes on new data.</span></span>  
  
 <span data-ttu-id="3603a-115">當使用中的月份完成時，該分割區會合併回年初至今分割區中的月份，然後繼續進行。</span><span class="sxs-lookup"><span data-stu-id="3603a-115">When the active month is completed, that partition is merged back into the months in the year-to-date partition and the process continues.</span></span> <span data-ttu-id="3603a-116">在年份結束時，就會形成完整的新年度分割區。</span><span class="sxs-lookup"><span data-stu-id="3603a-116">At the end of the year, a whole new year partition has been formed.</span></span>  
  
 <span data-ttu-id="3603a-117">如此案例所示，合併分割區可成為定期執行的例行工作，以提供漸進的方法來合併及組織歷程記錄資料。</span><span class="sxs-lookup"><span data-stu-id="3603a-117">As this scenario demonstrates, merging partitions can become a routine task performed on a regular basis, providing a progressive approach for consolidating and organizing historical data.</span></span>  
  
##  <a name="requirements"></a><a name="bkmk_prereq"></a> <span data-ttu-id="3603a-118">需求</span><span class="sxs-lookup"><span data-stu-id="3603a-118">Requirements</span></span>  
 <span data-ttu-id="3603a-119">只能合併符合下列所有準則的分割區：</span><span class="sxs-lookup"><span data-stu-id="3603a-119">Partitions can be merged only if they meet all of the following criteria:</span></span>  
  
-   <span data-ttu-id="3603a-120">它們有相同的量值群組。</span><span class="sxs-lookup"><span data-stu-id="3603a-120">They have the same measure group.</span></span>  
  
-   <span data-ttu-id="3603a-121">它們有相同的結構。</span><span class="sxs-lookup"><span data-stu-id="3603a-121">They have the same structure.</span></span>  
  
-   <span data-ttu-id="3603a-122">它們必須處於已處理的狀態。</span><span class="sxs-lookup"><span data-stu-id="3603a-122">They must be in a processed state.</span></span>  
  
-   <span data-ttu-id="3603a-123">它們有相同的儲存模式。</span><span class="sxs-lookup"><span data-stu-id="3603a-123">They have the same storage modes.</span></span>  
  
-   <span data-ttu-id="3603a-124">它們包含相同的彙總設計。</span><span class="sxs-lookup"><span data-stu-id="3603a-124">They contain identical aggregation designs.</span></span>  
  
-   <span data-ttu-id="3603a-125">它們共用相同的字串存放相容性層級 (僅適用於已分割的相異計數量值群組)。</span><span class="sxs-lookup"><span data-stu-id="3603a-125">They share the same string store compatibility level (applies to partitioned distinct count measure groups only).</span></span>  
  
 <span data-ttu-id="3603a-126">如果目標分割區是空的 (亦即具有彙總設計但沒有彙總)，合併會卸除來源分割區的彙總。</span><span class="sxs-lookup"><span data-stu-id="3603a-126">If the target partition is empty (that is, it has an aggregation design but no aggregations), merge will drop the aggregations for the source partitions.</span></span> <span data-ttu-id="3603a-127">您必須對分割區執行處理索引、完整處理或處理預設，以建立彙總。</span><span class="sxs-lookup"><span data-stu-id="3603a-127">You must run Process Index, Process Full, or Process Default on the partition to build the aggregations.</span></span>  
  
 <span data-ttu-id="3603a-128">遠端資料分割只能與相同的遠端 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)]執行個體所定義的其他遠端資料分割合併。</span><span class="sxs-lookup"><span data-stu-id="3603a-128">Remote partitions can be merged only with other remote partitions that are defined with the same remote instance of [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)].</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="3603a-129">如果使用本機和遠端分割區的組合，替代方式是建立包含合併資料的新分割區，並刪除您不再使用的分割區。</span><span class="sxs-lookup"><span data-stu-id="3603a-129">If you are using a combination of local and remote partitions, an alternative approach is to create new partitions that include the combined data, deleting the partitions you no longer use.</span></span>  
  
 <span data-ttu-id="3603a-130">若要建立未來適合進行合併的分割區，當您在分割區精靈中建立分割區時，您可以選擇從 Cube 的另一個分割區來複製彙總設計。</span><span class="sxs-lookup"><span data-stu-id="3603a-130">To create a partition that is a candidate for future merging, when you create the partition in the Partition Wizard, you can choose to copy the aggregation design from another of the cube's partitions.</span></span> <span data-ttu-id="3603a-131">這樣可以確保這些分割區具有相同的彙總設計。</span><span class="sxs-lookup"><span data-stu-id="3603a-131">This ensures that these partitions have the same aggregation design.</span></span> <span data-ttu-id="3603a-132">進行合併時，來源分割區的彙總會與目標分割區中的彙總結合。</span><span class="sxs-lookup"><span data-stu-id="3603a-132">When they are merged, the aggregations of the source partition are combined with the aggregations in the target partition.</span></span>  
  
##  <a name="update-the-partition-source-after-merging-partitions"></a><a name="bkmk_Where"></a><span data-ttu-id="3603a-133">在合併分割區之後更新分割區來源</span><span class="sxs-lookup"><span data-stu-id="3603a-133">Update the Partition Source after merging partitions</span></span>  
 <span data-ttu-id="3603a-134">分割區會依查詢 (例如用於處理資料之 SQL 查詢的 WHERE 子句) 分割，或依資料表或具名查詢分割，以提供資料給分割區。</span><span class="sxs-lookup"><span data-stu-id="3603a-134">Partitions are segmented by query, such as the WHERE clause of a SQL query used to process the data, or by a table or named query that provides data to the partition.</span></span> <span data-ttu-id="3603a-135">分割區的 `Source` 屬性指出分割區繫結至查詢或資料表。</span><span class="sxs-lookup"><span data-stu-id="3603a-135">The `Source` property on the partition indicates whether the partition is bound to a query or a table.</span></span>  
  
 <span data-ttu-id="3603a-136">當您合併分割區時，會合併分割區的內容，但不會更新 `Source` 屬性以反映其他分割區的範圍。</span><span class="sxs-lookup"><span data-stu-id="3603a-136">When you merge partitions, the contents of the partitions are consolidated, but the `Source` property is not updated to reflect the additional scope of the partition.</span></span> <span data-ttu-id="3603a-137">這表示如果您後續重新處理保留其原始 `Source` 的分割區，會從該分割區取得不正確的資料。</span><span class="sxs-lookup"><span data-stu-id="3603a-137">This means if you subsequently reprocess a partition that retains its original `Source`, you will get incorrect data from that partition.</span></span> <span data-ttu-id="3603a-138">分割區會錯誤地在父層級彙總資料。</span><span class="sxs-lookup"><span data-stu-id="3603a-138">The partition will erroneously aggregate data at the parent level.</span></span> <span data-ttu-id="3603a-139">下列範例說明此行為。</span><span class="sxs-lookup"><span data-stu-id="3603a-139">The following example illustrates this behavior.</span></span>  
  
 <span data-ttu-id="3603a-140">**問題**</span><span class="sxs-lookup"><span data-stu-id="3603a-140">**The Problem**</span></span>  
  
 <span data-ttu-id="3603a-141">假設您有包含關於 3 種飲料產品之資訊的 Cube。</span><span class="sxs-lookup"><span data-stu-id="3603a-141">Suppose you have a cube containing information about three soft drink products.</span></span> <span data-ttu-id="3603a-142">其有 3 個使用相同事實資料表的分割區。</span><span class="sxs-lookup"><span data-stu-id="3603a-142">It has three partitions that use the same fact table.</span></span> <span data-ttu-id="3603a-143">這些分割區已依產品分割。</span><span class="sxs-lookup"><span data-stu-id="3603a-143">These partitions are segmented by product.</span></span> <span data-ttu-id="3603a-144">資料分割 1 包含關於 [ColaFull] 的資料，資料分割 2 包含關於 [ColaDecaf] 的資料，資料分割 3 包含關於 [ColaDiet] 的資料。</span><span class="sxs-lookup"><span data-stu-id="3603a-144">Partition 1 contains data about [ColaFull], Partition 2 contains data about [ColaDecaf], and Partition 3 contains data about [ColaDiet].</span></span> <span data-ttu-id="3603a-145">如果資料分割 3 合併到資料分割 2，則所產生的資料分割 (資料分割 2) 中的資料是正確的，且 Cube 資料是精確的。</span><span class="sxs-lookup"><span data-stu-id="3603a-145">If Partition 3 is merged into Partition 2, the data in the resulting partition (Partition 2) is correct and the cube data is accurate.</span></span> <span data-ttu-id="3603a-146">不過，在處理資料分割 2 時，其內容可能是由產品層級之成員的父成員來決定。</span><span class="sxs-lookup"><span data-stu-id="3603a-146">However, when Partition 2 is processed, its content may be determined by the parent of the members at the product level.</span></span> <span data-ttu-id="3603a-147">這個父成員 [SoftDrinks] 也包含資料分割 1 的產品 [ColaFull]。</span><span class="sxs-lookup"><span data-stu-id="3603a-147">This parent, [SoftDrinks], also includes [ColaFull], the product in Partition 1.</span></span> <span data-ttu-id="3603a-148">處理資料分割 2 時會將所有飲料的資料載入資料分割，包括 [ColaFull] 在內。</span><span class="sxs-lookup"><span data-stu-id="3603a-148">Processing Partition 2 loads the partition with data for all soft drinks, including [ColaFull].</span></span> <span data-ttu-id="3603a-149">於是 Cube 會包含 [ColaFull] 的重複資料，並傳回不正確資料給使用者。</span><span class="sxs-lookup"><span data-stu-id="3603a-149">The cube then contains duplicate data for [ColaFull] and returns incorrect data to end users.</span></span>  
  
 <span data-ttu-id="3603a-150">**解決方案**</span><span class="sxs-lookup"><span data-stu-id="3603a-150">**The Solution**</span></span>  
  
 <span data-ttu-id="3603a-151">解決方法是更新 `Source` 屬性，您可以調整 WHERE 子句或具名查詢，或者手動合併基礎事實資料表中的資料，以在分割區範圍擴充的情況下，確保後續處理正確。</span><span class="sxs-lookup"><span data-stu-id="3603a-151">The solution is to update the `Source` property, adjusting either the WHERE clause or named query, or manually merging data from the underlying fact tables, to ensure that subsequent processing is accurate given the expanded scope of the partition.</span></span>  
  
 <span data-ttu-id="3603a-152">在這個範例中，將資料分割 3 合併到資料分割 2 之後，您可以在所產生的資料分割 2 中提供篩選，例如 ("Product" = 'ColaDecaf' OR "Product" = 'ColaDiet')，來指定只從事實資料表擷取關於 [ColaDecaf] 和 [ColaDiet] 的資料，而屬於 [ColaFull] 的資料將被排除在外。</span><span class="sxs-lookup"><span data-stu-id="3603a-152">In this example, after merging Partition 3 into Partition 2, you can provide a filter such as ("Product" = 'ColaDecaf' OR "Product" = 'ColaDiet') in the resulting Partition 2 to specify that only data about [ColaDecaf] and [ColaDiet] be extracted from the fact table, and the data pertaining to [ColaFull] be excluded.</span></span> <span data-ttu-id="3603a-153">或者，您可以在建立資料分割 2 和資料分割 3 時指定篩選，這些篩選便會在合併過程中進行結合。</span><span class="sxs-lookup"><span data-stu-id="3603a-153">Alternatively, you can specify filters for Partition 2 and Partition 3 when they are created, and these filters will be combined during the merger process.</span></span> <span data-ttu-id="3603a-154">不論是哪一種情況，在處理分割區之後，Cube 都不會包含重複的資料。</span><span class="sxs-lookup"><span data-stu-id="3603a-154">In either case, after the partition is processed the cube does not contain duplicate data.</span></span>  
  
 <span data-ttu-id="3603a-155">**結論**</span><span class="sxs-lookup"><span data-stu-id="3603a-155">**The Conclusion**</span></span>  
  
 <span data-ttu-id="3603a-156">合併分割區之後，請務必檢查 `Source` 以確認篩選對於合併的資料是正確的。</span><span class="sxs-lookup"><span data-stu-id="3603a-156">After you merge partitions, always check the `Source` to verify the filter is correct for the merged data.</span></span> <span data-ttu-id="3603a-157">如果您的分割區一開始包含 Q1、Q2 和 Q3 的歷程記錄資料，且您現在想合併 Q4，則必須調整篩選以加入 Q4。</span><span class="sxs-lookup"><span data-stu-id="3603a-157">If you started with a partition that included historical data for Q1, Q2, and Q3, and you now merge Q4, you must adjust the filter to include Q4.</span></span> <span data-ttu-id="3603a-158">否則，分割區的後續處理將產生錯誤的結果。</span><span class="sxs-lookup"><span data-stu-id="3603a-158">Otherwise, subsequent processing of the partition will yield erroneous results.</span></span> <span data-ttu-id="3603a-159">此結果對於 Q4 而言將不正確。</span><span class="sxs-lookup"><span data-stu-id="3603a-159">It will not be correct for Q4.</span></span>  
  
##  <a name="special-considerations-for-partitions-segmented-by-fact-table-or-named-query"></a><a name="bkmk_fact"></a><span data-ttu-id="3603a-160">依事實資料表或命名查詢分割之資料分割的特殊考慮</span><span class="sxs-lookup"><span data-stu-id="3603a-160">Special considerations for partitions segmented by fact table or named query</span></span>  
 <span data-ttu-id="3603a-161">除了查詢之外，也可依資料表或具名查詢分割分割區。</span><span class="sxs-lookup"><span data-stu-id="3603a-161">In addition to queries, partitions can also be segmented by table or named query.</span></span> <span data-ttu-id="3603a-162">如果來源分割區和目標分割區使用資料來源或資料來源檢視中的相同事實資料表，`Source` 屬性會在合併分割區之後生效。</span><span class="sxs-lookup"><span data-stu-id="3603a-162">If the source partition and target partition use the same fact table in a data source or data source view, the `Source` property is valid after merging partitions.</span></span> <span data-ttu-id="3603a-163">它會指定適合結果分割區的事實資料表資料。</span><span class="sxs-lookup"><span data-stu-id="3603a-163">It specifies the fact table data that is appropriate to the resulting partition.</span></span> <span data-ttu-id="3603a-164">由於事實資料表中已存在結果分割區所需的事實，因此不需要修改 `Source` 屬性。</span><span class="sxs-lookup"><span data-stu-id="3603a-164">Because the facts that are required for the resulting partition are present in the fact table, no modification to the `Source` property is necessary.</span></span>  
  
 <span data-ttu-id="3603a-165">使用多個事實資料表或具名查詢中資料的分割區需要執行額外的工作。</span><span class="sxs-lookup"><span data-stu-id="3603a-165">Partitions using data from multiple fact tables or named queries require additional work.</span></span> <span data-ttu-id="3603a-166">您必須手動將來源分割區的事實資料表中的事實，合併到目標分割區的事實資料表。</span><span class="sxs-lookup"><span data-stu-id="3603a-166">You must manually merge the facts from the fact table of the source partition into the fact table of the target partition.</span></span>  
  
 <span data-ttu-id="3603a-167">或者，您可以將合併分割區的來源變更為具名查詢，傳回兩個不同事實資料表的內容。</span><span class="sxs-lookup"><span data-stu-id="3603a-167">Alternatively, you can change the source for the merged partition to a named query that returns the contents of two separate fact tables.</span></span> <span data-ttu-id="3603a-168">如果未執行此手動步驟，則事實資料表不會包含完整資訊。</span><span class="sxs-lookup"><span data-stu-id="3603a-168">If this manual step is not performed, the fact table does not contain complete information.</span></span>  
  
 <span data-ttu-id="3603a-169">基於相同理由，從具名查詢取得分割資料的分割區也需要更新。</span><span class="sxs-lookup"><span data-stu-id="3603a-169">For the same reason, partitions obtaining segmented data from named queries also require updating.</span></span> <span data-ttu-id="3603a-170">合併的分割區現在必須具有具名查詢，以傳回先前從個別具名查詢取得的合併結果集。</span><span class="sxs-lookup"><span data-stu-id="3603a-170">The combined partition must now have a named query that returns the combined result set that was previously obtained from the separate named queries.</span></span>  
  
## <a name="partition-storage-considerations-molap"></a><span data-ttu-id="3603a-171">分割區儲存考量：MOLAP</span><span class="sxs-lookup"><span data-stu-id="3603a-171">Partition storage considerations: MOLAP</span></span>  
 <span data-ttu-id="3603a-172">合併 MOLAP 分割區時，也會合併分割區的多維度結構中儲存的事實。</span><span class="sxs-lookup"><span data-stu-id="3603a-172">When MOLAP partitions are merged, the facts stored in the multidimensional structures of the partitions are also merged.</span></span> <span data-ttu-id="3603a-173">這會產生內部完整和一致的分割區。</span><span class="sxs-lookup"><span data-stu-id="3603a-173">This results in an internally complete and consistent partition.</span></span> <span data-ttu-id="3603a-174">不過，MOLAP 分割區中儲存的事實，只是事實資料表中之事實的副本。</span><span class="sxs-lookup"><span data-stu-id="3603a-174">However, the facts stored in MOLAP partitions are copies of facts in the fact table.</span></span> <span data-ttu-id="3603a-175">後續處理分割區時，將會刪除多維度結構中的事實 (僅限完整和重新整理的情況)，並從分割區的資料來源和篩選所指定的事實資料表複製資料。</span><span class="sxs-lookup"><span data-stu-id="3603a-175">When the partition is subsequently processed, the facts in the multidimensional structure are deleted (only for full and refresh) and data is copied from the fact table as specified by the data source and filter for the partition.</span></span> <span data-ttu-id="3603a-176">如果來源分割區使用的事實資料表不同於目標分割區，則必須手動合併來源和目標分割區的事實資料表，確保處理結果分割區時有完整的資料集可用。</span><span class="sxs-lookup"><span data-stu-id="3603a-176">If the source partition uses a different fact table from the target partition, the fact table of the source partition must be manually merged with the fact table of the target partition to ensure that a complete set of data is available when the resulting partition is processed.</span></span> <span data-ttu-id="3603a-177">如果兩個分割區以不同的具名查詢為基礎，情況亦同。</span><span class="sxs-lookup"><span data-stu-id="3603a-177">This applies as well if the two partitions were based on different named queries.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="3603a-178">具有不完整事實資料表的合併 MOLAP 分割區包含一份內部合併的事實資料表資料副本，並且在處理之前會正確地運作。</span><span class="sxs-lookup"><span data-stu-id="3603a-178">A merged MOLAP partition with an incomplete fact table contains an internally merged copy of fact table data and operates correctly until it is processed.</span></span>  
  
## <a name="partition-storage-considerations-holap-and-rolap-partitions"></a><span data-ttu-id="3603a-179">分割區儲存考量：HOLAP 和 ROLAP 分割區</span><span class="sxs-lookup"><span data-stu-id="3603a-179">Partition storage considerations: HOLAP and ROLAP Partitions</span></span>  
 <span data-ttu-id="3603a-180">合併具有不同的事實資料表的 HOLAP 或 ROLAP 分割區時，不會自動合併事實資料表。</span><span class="sxs-lookup"><span data-stu-id="3603a-180">When HOLAP or ROLAP partitions that have different fact tables are merged, the fact tables are not automatically merged.</span></span> <span data-ttu-id="3603a-181">除非手動合併事實資料表，否則結果分割區只能使用與目標分割區相關聯的事實資料表。</span><span class="sxs-lookup"><span data-stu-id="3603a-181">Unless the fact tables are manually merged, only the fact table associated with the target partition is available to the resulting partition.</span></span> <span data-ttu-id="3603a-182">結果分割區中的向下鑽研無法使用與來源分割區相關聯的事實，而且在處理分割區時，彙總也不會從無法使用的資料表中摘要資料。</span><span class="sxs-lookup"><span data-stu-id="3603a-182">Facts associated with the source partition are not available for drilldown in the resulting partition, and when the partition is processed, aggregations do not summarize data from the unavailable table.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="3603a-183">具有不完整事實資料表的合併 HOLAP 或 ROLAP 分割區，包含正確的彙總及不完整的事實。</span><span class="sxs-lookup"><span data-stu-id="3603a-183">A merged HOLAP or ROLAP partition with an incomplete fact table contains accurate aggregations, but incomplete facts.</span></span> <span data-ttu-id="3603a-184">參考遺漏事實的查詢會傳回錯誤資料。</span><span class="sxs-lookup"><span data-stu-id="3603a-184">Queries that refer to missing facts return incorrect data.</span></span> <span data-ttu-id="3603a-185">處理分割區時，彙總只計算可用的事實。</span><span class="sxs-lookup"><span data-stu-id="3603a-185">When the partition is processed, aggregations are computed only from available facts.</span></span>  
  
 <span data-ttu-id="3603a-186">無法使用的事實不存在很可能無法被發現，直到使用者嘗試向下鑽研到無法使用之事實資料表中的事實，或從無法使用的資料表中執行查詢而需要事實時才會被發現。</span><span class="sxs-lookup"><span data-stu-id="3603a-186">The absence of unavailable facts might not be noticed unless a user attempts to drill down to a fact in the unavailable table or executes a query that requires a fact from the unavailable table.</span></span> <span data-ttu-id="3603a-187">由於合併過程中會結合彙總，只根據彙總的查詢會傳回正確資料，但其他查詢則可能會傳回不正確的資料。</span><span class="sxs-lookup"><span data-stu-id="3603a-187">Because aggregations are combined during the merge process, queries whose results are based only on aggregations return accurate data, whereas other queries may return inaccurate data.</span></span> <span data-ttu-id="3603a-188">即使在處理結果分割區後，來自無法使用之事實資料表的遺漏資料可能仍未被發現，特別是如果它只代表結合之資料的一小部份時。</span><span class="sxs-lookup"><span data-stu-id="3603a-188">Even after the resulting partition is processed, the missing data from the unavailable fact table may not be noticed, especially if it represents only a small portion of the combined data.</span></span>  
  
 <span data-ttu-id="3603a-189">事實資料表可以在合併分割區之前或之後合併。</span><span class="sxs-lookup"><span data-stu-id="3603a-189">Fact tables can be merged before or after merging the partitions.</span></span> <span data-ttu-id="3603a-190">然而，只有在兩個作業都完成後，彙總才能正確地代表基礎事實。</span><span class="sxs-lookup"><span data-stu-id="3603a-190">However, the aggregations will not accurately represent the underlying facts until both operations have been completed.</span></span> <span data-ttu-id="3603a-191">當使用者未連接到包含這些分割區的 Cube 時，建議您合併存取不同事實資料表的 HOLAP 或 ROLAP 分割區。</span><span class="sxs-lookup"><span data-stu-id="3603a-191">It is recommended that you merge HOLAP or ROLAP partitions that access different fact tables when users are not connected to the cube that contains these partitions.</span></span>  
  
##  <a name="how-to-merge-partitions-using-ssms"></a><a name="bkmk_partitionSSMS"></a><span data-ttu-id="3603a-192">如何使用 SSMS 合併分割區</span><span class="sxs-lookup"><span data-stu-id="3603a-192">How to merge partitions using SSMS</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="3603a-193">合併分割區之前，請先複製資料篩選資訊 (通常是根據 SQL 查詢篩選的 WHERE 子句)。</span><span class="sxs-lookup"><span data-stu-id="3603a-193">Before merging partitions, first copy the data filter information (often, the WHERE clause for filters based on SQL queries).</span></span> <span data-ttu-id="3603a-194">在完成合併之後，您應該更新包含累積事實資料之分割區的 Partition Source 屬性。</span><span class="sxs-lookup"><span data-stu-id="3603a-194">Later, after the merge is completed, you should update the Partition Source property of the partition containing the accumulated fact data.</span></span>  
  
1.  <span data-ttu-id="3603a-195">在物件總管中，展開包含您要合併的資料分割之 Cube 的 [量值群組]\*\*\*\* 節點，然後展開 [資料分割]\*\*\*\*，再以滑鼠右鍵按一下合併作業的目標或目的地資料分割。</span><span class="sxs-lookup"><span data-stu-id="3603a-195">In Object Explorer, expand the **Measure Groups** node of the cube containing the partitions that you want to merge, expand **Partitions**, right-click the partition that is the target or destination of the merge operation.</span></span> <span data-ttu-id="3603a-196">例如，如果您要將季度事實資料移至儲存年度事實資料的分割區，請選取包含年度事實資料的分割區。</span><span class="sxs-lookup"><span data-stu-id="3603a-196">For example, if you are moving quarterly fact data to a partition that stores annual fact data, select the partition that contains the annual fact data.</span></span>  
  
2.  <span data-ttu-id="3603a-197">按一下 [**合併**資料分割] 以開啟 [\*\*合併資料分割 \<partition name> \*\* ] 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="3603a-197">Click **Merge Partitions** to open the **Merge Partition \<partition name>** dialog box.</span></span>  
  
3.  <span data-ttu-id="3603a-198">在 [來源資料分割]\*\*\*\* 下，選取要與目標資料分割合併之每個來源資料分割旁的核取方塊，然後按一下 [確定]\*\*\*\*。</span><span class="sxs-lookup"><span data-stu-id="3603a-198">Under **Source Partitions**, select the check box next to each source partition that you want to merge with the target partition, and click **OK**.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="3603a-199">當來源合併到目標分割區之後，會立即刪除來源分割區。</span><span class="sxs-lookup"><span data-stu-id="3603a-199">Source partitions are immediately deleted after the source is merged into the target partition.</span></span> <span data-ttu-id="3603a-200">完成合併之後，請重新整理 [分割區] 資料夾以更新其內容。</span><span class="sxs-lookup"><span data-stu-id="3603a-200">Refresh the Partitions folder to update its contents after the merge is completed.</span></span>  
  
4.  <span data-ttu-id="3603a-201">以滑鼠右鍵按一下包含累積資料的資料分割，然後選取 [屬性]\*\*\*\*。</span><span class="sxs-lookup"><span data-stu-id="3603a-201">Right-click the partition containing the accumulated data and select **Properties**.</span></span>  
  
5.  <span data-ttu-id="3603a-202">開啟 `Source` 屬性並修改 WHERE 子句，使其包含剛才合併的分割區資料。</span><span class="sxs-lookup"><span data-stu-id="3603a-202">Open the `Source` property and modify the WHERE clause so that it includes the partition data you just merged.</span></span> <span data-ttu-id="3603a-203">回想一下，此 `Source` 屬性不會自動更新。</span><span class="sxs-lookup"><span data-stu-id="3603a-203">Recall that the `Source` property is not updated automatically.</span></span> <span data-ttu-id="3603a-204">如果您重新處理而未先更新 `Source` ，您可能無法取得所有預期的資料。</span><span class="sxs-lookup"><span data-stu-id="3603a-204">If you reprocess without first updating the `Source`, you might not get all of the expected data.</span></span>  
  
##  <a name="how-to-merge-partitions-using-xmla"></a><a name="bkmk_partitionsXMLA"></a> <span data-ttu-id="3603a-205">如何使用 XMLA 合併分割區</span><span class="sxs-lookup"><span data-stu-id="3603a-205">How to merge partitions using XMLA</span></span>  
 <span data-ttu-id="3603a-206">如需詳細資訊，請參閱此主題：[合併資料分割 &#40;XMLA&#41;](../multidimensional-models-scripting-language-assl-xmla/merging-partitions-xmla.md)。</span><span class="sxs-lookup"><span data-stu-id="3603a-206">See this topic for information, [Merging Partitions &#40;XMLA&#41;](../multidimensional-models-scripting-language-assl-xmla/merging-partitions-xmla.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="3603a-207">另請參閱</span><span class="sxs-lookup"><span data-stu-id="3603a-207">See Also</span></span>  
 <span data-ttu-id="3603a-208">[處理 Analysis Services 物件](processing-analysis-services-objects.md) </span><span class="sxs-lookup"><span data-stu-id="3603a-208">[Processing Analysis Services Objects](processing-analysis-services-objects.md) </span></span>  
 <span data-ttu-id="3603a-209">[分割區 &#40;Analysis Services 多維度資料&#41;](../multidimensional-models-olap-logical-cube-objects/partitions-analysis-services-multidimensional-data.md) </span><span class="sxs-lookup"><span data-stu-id="3603a-209">[Partitions &#40;Analysis Services - Multidimensional Data&#41;](../multidimensional-models-olap-logical-cube-objects/partitions-analysis-services-multidimensional-data.md) </span></span>  
 <span data-ttu-id="3603a-210">[建立和管理本機資料分割 &#40;Analysis Services&#41;](create-and-manage-a-local-partition-analysis-services.md) </span><span class="sxs-lookup"><span data-stu-id="3603a-210">[Create and Manage a Local Partition &#40;Analysis Services&#41;](create-and-manage-a-local-partition-analysis-services.md) </span></span>  
 <span data-ttu-id="3603a-211">[建立和管理遠端資料分割 &#40;Analysis Services&#41;](create-and-manage-a-remote-partition-analysis-services.md) </span><span class="sxs-lookup"><span data-stu-id="3603a-211">[Create and Manage a Remote Partition &#40;Analysis Services&#41;](create-and-manage-a-remote-partition-analysis-services.md) </span></span>  
 <span data-ttu-id="3603a-212">[設定分割區回寫](set-partition-writeback.md) </span><span class="sxs-lookup"><span data-stu-id="3603a-212">[Set Partition Writeback](set-partition-writeback.md) </span></span>  
 <span data-ttu-id="3603a-213">[可寫入的磁碟分割](../multidimensional-models-olap-logical-cube-objects/partitions-write-enabled-partitions.md) </span><span class="sxs-lookup"><span data-stu-id="3603a-213">[Write-Enabled Partitions](../multidimensional-models-olap-logical-cube-objects/partitions-write-enabled-partitions.md) </span></span>  
 [<span data-ttu-id="3603a-214">設定維度及分割區的字串存放區</span><span class="sxs-lookup"><span data-stu-id="3603a-214">Configure String Storage for Dimensions and Partitions</span></span>](configure-string-storage-for-dimensions-and-partitions.md)  
  
  
