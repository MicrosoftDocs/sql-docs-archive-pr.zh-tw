---
title: " (SSAS 表格式) 的 DirectQuery 部署案例 |Microsoft Docs"
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: 2aaf5cb8-294b-4031-94b3-fe605d7fc4c7
author: minewiskan
ms.author: owend
ms.openlocfilehash: 2c90d90b40686b5953e26853ed9f53dcfd157f0f
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87606487"
---
# <a name="directquery-deployment-scenarios-ssas-tabular"></a><span data-ttu-id="2f901-102">DirectQuery 部署案例 (SSAS 表格式)</span><span class="sxs-lookup"><span data-stu-id="2f901-102">DirectQuery Deployment Scenarios (SSAS Tabular)</span></span>
  <span data-ttu-id="2f901-103">本主題提供 DirectQuery 模型設計和部署程序的逐步解說。</span><span class="sxs-lookup"><span data-stu-id="2f901-103">This topic provides a walkthrough of the design and deployment process for DirectQuery models.</span></span> <span data-ttu-id="2f901-104">您可以設定 DirectQuery 只使用關聯式資料 (僅限 DirectQuery)，或者您可以將此模型設定為在使用快取資料與僅限關聯式資料之間切換 (混合模式)。</span><span class="sxs-lookup"><span data-stu-id="2f901-104">You can configure DirectQuery to use relational data only (DirectQuery only), or you can configure the model to switch between using cached data only or relational data only (hybrid mode).</span></span> <span data-ttu-id="2f901-105">本主題說明這兩個模式的實作程序，並描述查詢結果中的可能差異 (視模型和安全性組態而定)。</span><span class="sxs-lookup"><span data-stu-id="2f901-105">This topic explains the implementation process for both modes, and describes possible differences in query results depending on the mode and the security configuration.</span></span>  
  
 [<span data-ttu-id="2f901-106">設計和部署步驟</span><span class="sxs-lookup"><span data-stu-id="2f901-106">Design and Deployment Steps</span></span>](#bkmk_DQProcedure)  
  
 [<span data-ttu-id="2f901-107">比較 DirectQuery 組態</span><span class="sxs-lookup"><span data-stu-id="2f901-107">Comparing DirectQuery Configurations</span></span>](#bkmk_Configurations)  
  
##  <a name="design-and-deployment-steps"></a><a name="bkmk_DQProcedure"></a><span data-ttu-id="2f901-108">設計和部署步驟</span><span class="sxs-lookup"><span data-stu-id="2f901-108">Design and Deployment Steps</span></span>  
 <span data-ttu-id="2f901-109">**步驟1。建立解決方案**</span><span class="sxs-lookup"><span data-stu-id="2f901-109">**Step 1. Create the solution**</span></span>  
  
 <span data-ttu-id="2f901-110">不論您使用哪種模式，您都必須檢閱有關可用於 DirectQuery 模型中之資料的限制資訊。</span><span class="sxs-lookup"><span data-stu-id="2f901-110">Regardless of which mode you will use, you must review the information that describes limitations on the data that can be used in DirectQuery models.</span></span> <span data-ttu-id="2f901-111">例如，所有用於模型和報表的資料都必須來自單一 SQL Server 資料庫。</span><span class="sxs-lookup"><span data-stu-id="2f901-111">For example, all the data used in your model and reports must come from a single SQL Server database.</span></span> <span data-ttu-id="2f901-112">如需詳細資訊，請參閱 [DirectQuery 模式 &#40;SSAS 表格式&#41;](tabular-models/directquery-mode-ssas-tabular.md)。</span><span class="sxs-lookup"><span data-stu-id="2f901-112">For more information, see [DirectQuery Mode &#40;SSAS Tabular&#41;](tabular-models/directquery-mode-ssas-tabular.md).</span></span>  
  
 <span data-ttu-id="2f901-113">您也可以檢閱量值和導出資料行的限制，並判斷您打算使用的公式是否與 DirectQuery 模式相容。</span><span class="sxs-lookup"><span data-stu-id="2f901-113">Also, review the limitations on measures and calculated columns, and determine whether the formulas you intend to use are compatible with DirectQuery mode.</span></span> <span data-ttu-id="2f901-114">您可能需要移除或修改下列元素：</span><span class="sxs-lookup"><span data-stu-id="2f901-114">You might need to remove or modify the following elements:</span></span>  
  
-   <span data-ttu-id="2f901-115">不支援導出資料行。</span><span class="sxs-lookup"><span data-stu-id="2f901-115">Calculated columns are not supported.</span></span>  
  
-   <span data-ttu-id="2f901-116">不能使用複製-貼上的資料。</span><span class="sxs-lookup"><span data-stu-id="2f901-116">Copy-pasted data cannot be used.</span></span> <span data-ttu-id="2f901-117">如果您匯入 PowerPivot 模型來開始啟動方案，請務必先刪除連結資料表然後再匯入方案，因為此資料無法被刪除而且會阻擋 DirectQuery 驗證。</span><span class="sxs-lookup"><span data-stu-id="2f901-117">If you import a PowerPivot model to jumpstart your solution, be sure to delete linked tables before importing the solution, as this data cannot be deleted and will block DirectQuery validation.</span></span>  
  
 <span data-ttu-id="2f901-118">**步驟2。在模型設計師中啟用 DirectQuery 模式**</span><span class="sxs-lookup"><span data-stu-id="2f901-118">**Step 2. Enable DirectQuery mode in the model designer**</span></span>  
  
 <span data-ttu-id="2f901-119">依預設，DirectQuery 為停用狀態。</span><span class="sxs-lookup"><span data-stu-id="2f901-119">By default, DirectQuery is disabled.</span></span> <span data-ttu-id="2f901-120">因此，您必須設定設計環境來支援 DirectQuery 模式。</span><span class="sxs-lookup"><span data-stu-id="2f901-120">Therefore, you must configure the design environment to support DirectQuery mode.</span></span>  
  
 <span data-ttu-id="2f901-121">以滑鼠右鍵按一下方案總管中的 [ **model.bim** ] 節點，並將 [ **DirectQuery 模式]** 屬性設定為 `On` 。</span><span class="sxs-lookup"><span data-stu-id="2f901-121">Right-click the **Model.bim** node in Solution Explorer and set the property, **DirectQuery Mode**, to `On`.</span></span>  
  
 <span data-ttu-id="2f901-122">您可以隨時開啟 DirectQuery，但是若要確保您不會建立與 DirectQuery 模式不相容的資料行或公式，我們建議您從一開始就啟用 DirectQuery 模式。</span><span class="sxs-lookup"><span data-stu-id="2f901-122">You can turn on DirectQuery at any time; however, to ensure that you do not create columns or formulas that are incompatible with DirectQuery mode, we recommend that you enable DirectQuery mode right from the beginning.</span></span>  
  
 <span data-ttu-id="2f901-123">最初，即使是 DirectQuery 模型也一定會在記憶體中建立。</span><span class="sxs-lookup"><span data-stu-id="2f901-123">Initially, even DirectQuery models are always created in memory.</span></span> <span data-ttu-id="2f901-124">工作空間資料庫的預設查詢模式也會設定為 **[搭配使用 DirectQuery 和 In-Memory]**。</span><span class="sxs-lookup"><span data-stu-id="2f901-124">The default query mode for the workspace database is also set to **DirectQuery with In-Memory**.</span></span> <span data-ttu-id="2f901-125">這個混和工作模式可讓您使用匯入資料的快取，以便在模型設計過程中提高效能，同時根據 DirectQuery 需求來驗證此模型。</span><span class="sxs-lookup"><span data-stu-id="2f901-125">This hybrid working mode lets you use the cache of imported data for improved performance during the model design process, while validating the model against DirectQuery requirements.</span></span>  
  
 <span data-ttu-id="2f901-126">**步驟3。解決驗證錯誤**</span><span class="sxs-lookup"><span data-stu-id="2f901-126">**Step 3. Resolve validation errors**</span></span>  
  
 <span data-ttu-id="2f901-127">如果您在開啟 DirectQuery 時或在新增資料或公式時發生驗證錯誤，請開啟 Visual Studio **[錯誤清單]**，然後執行必要動作。</span><span class="sxs-lookup"><span data-stu-id="2f901-127">If you get validation errors when you turn DirectQuery on, or when you add new data or formulas, open the Visual Studio **Error List**, and then take the required actions.</span></span>  
  
-   <span data-ttu-id="2f901-128">如錯誤訊息所述，變更 DirectQuery 模式的所有必要屬性設定。</span><span class="sxs-lookup"><span data-stu-id="2f901-128">Change any required property settings for DirectQuery mode, as described in the error messages.</span></span>  
  
-   <span data-ttu-id="2f901-129">移除導出資料行。</span><span class="sxs-lookup"><span data-stu-id="2f901-129">Remove calculated columns.</span></span> <span data-ttu-id="2f901-130">如果您需要特定量值的匯出資料行，您一律可以使用[關聯式查詢設計](relational-query-designer-ssas.md)工具來建立資料行，&#40;[資料表匯入] wizard 中提供的 SSAS&#41;。</span><span class="sxs-lookup"><span data-stu-id="2f901-130">If you require a calculated column for a particular measure, you can always create the column by using the [Relational Query Designer &#40;SSAS&#41;](relational-query-designer-ssas.md) provided in the Table Import wizard.</span></span>  
  
-   <span data-ttu-id="2f901-131">修改或刪除與 DirectQuery 模式不相容的公式。</span><span class="sxs-lookup"><span data-stu-id="2f901-131">Modify or remove formulas that are incompatible with DirectQuery mode.</span></span> <span data-ttu-id="2f901-132">如果計算需要使用特定函數，請考慮透過 Transact-SQL 來提供對應項目的方法。</span><span class="sxs-lookup"><span data-stu-id="2f901-132">If you require a particular function for a calculation, consider ways that you could provide an equivalent by using Transact-SQL.</span></span>  
  
-   <span data-ttu-id="2f901-133">視需要新增資料。</span><span class="sxs-lookup"><span data-stu-id="2f901-133">Add data as needed.</span></span>  <span data-ttu-id="2f901-134">如果您的模型之前使用複製-貼上資料或是來自 SQL Server 以外之提供者的資料，您可以在現有的連接中建立新的檢視表和衍生的資料行，或者使用分散式查詢。</span><span class="sxs-lookup"><span data-stu-id="2f901-134">If your model previously used copy-paste data or data from providers other than SQL Server, you can create new views and derived columns within the existing connection, or use distributed queries.</span></span>  <span data-ttu-id="2f901-135">DirectQuery 模型中使用的所有資料都必須可以透過單一 SQL Server 資料來源來存取。</span><span class="sxs-lookup"><span data-stu-id="2f901-135">All data used in a DirectQuery model must be accessible via a single SQL Server data source.</span></span>  
  
 <span data-ttu-id="2f901-136">**步驟4。在模型上設定用來回應查詢的慣用方法**</span><span class="sxs-lookup"><span data-stu-id="2f901-136">**Step 4. Set the preferred method for answering queries on the model**</span></span>  
  
|||  
|-|-|  
|<span data-ttu-id="2f901-137">**僅限 DirectQuery**</span><span class="sxs-lookup"><span data-stu-id="2f901-137">**DirectQuery only**</span></span>|<span data-ttu-id="2f901-138">將此屬性設定為 **[DirectQuery]**。</span><span class="sxs-lookup"><span data-stu-id="2f901-138">Set the property to **DirectQuery**.</span></span>|  
|<span data-ttu-id="2f901-139">**混合模式**</span><span class="sxs-lookup"><span data-stu-id="2f901-139">**Hybrid mode**</span></span>|<span data-ttu-id="2f901-140">將此屬性設定為 **[搭配使用 In-Memory 和 DirectQuery]** 或 **[搭配使用 DirectQuery 和 In-Memory]**。</span><span class="sxs-lookup"><span data-stu-id="2f901-140">Set the property to **In-Memory With DirectQuery** or **DirectQuery With In-Memory**.</span></span><br /><br /> <span data-ttu-id="2f901-141">稍後您可以變更這個值來使用不同的喜好設定。</span><span class="sxs-lookup"><span data-stu-id="2f901-141">You can change this value later to use a different preference.</span></span><br /><br /> <span data-ttu-id="2f901-142">請注意，用戶端可以覆寫連接字串中的慣用方法。</span><span class="sxs-lookup"><span data-stu-id="2f901-142">Note that clients can override the preferred method in the connection string.</span></span>|  
  
 <span data-ttu-id="2f901-143">**步驟5。指定 DirectQuery 資料分割**</span><span class="sxs-lookup"><span data-stu-id="2f901-143">**Step 5. Specify the DirectQuery partition**</span></span>  
  
|||  
|-|-|  
|<span data-ttu-id="2f901-144">**僅限 DirectQuery**</span><span class="sxs-lookup"><span data-stu-id="2f901-144">**DirectQuery only**</span></span>|<span data-ttu-id="2f901-145">選擇性。</span><span class="sxs-lookup"><span data-stu-id="2f901-145">Optional.</span></span> <span data-ttu-id="2f901-146">僅限 DirectQuery 模型不需要資料分割。</span><span class="sxs-lookup"><span data-stu-id="2f901-146">A DirectQuery only model has no need for a partition.</span></span><br /><br /> <span data-ttu-id="2f901-147">但是，如果您在設計階段於模型中建立資料分割，請記得只有一個資料分割可當做資料來源使用。</span><span class="sxs-lookup"><span data-stu-id="2f901-147">However, if you created partitions in the model during the design phase, remember that only one partition can be used as the data source.</span></span> <span data-ttu-id="2f901-148">根據預設，您建立的第一個資料分割將會當做 DirectQuery 資料分割使用。</span><span class="sxs-lookup"><span data-stu-id="2f901-148">By default the first partition you created will be used as the DirectQuery partition.</span></span><br /><br /> <span data-ttu-id="2f901-149">若要確保模型所需的所有資料都可以從 DirectQuery 資料分割取得，請選擇 DirectQuery 資料分割並編輯 SQL 陳述式來取得整個資料集。</span><span class="sxs-lookup"><span data-stu-id="2f901-149">To ensure that all the data required by the model is available from the DirectQuery partition, choose a DirectQuery partition and edit the SQL statement to get the entire data set.</span></span>|  
|<span data-ttu-id="2f901-150">**混合模式**</span><span class="sxs-lookup"><span data-stu-id="2f901-150">**Hybrid mode**</span></span>|<span data-ttu-id="2f901-151">如果模型中的任何資料表有多個資料分割，您必須選擇單一資料分割當做 *「DirectQuery 資料分割」*(DirectQuery Partition)。</span><span class="sxs-lookup"><span data-stu-id="2f901-151">If any table in your model has multiple partitions, you must choose a single partition as the *DirectQuery partition*.</span></span> <span data-ttu-id="2f901-152">如果您未指派資料分割，則根據預設，之前建立的第一個資料分割將會當做 DirectQuery 資料分割使用。</span><span class="sxs-lookup"><span data-stu-id="2f901-152">If you do not assign a partition, by default, the first partition that was created will be used as the DirectQuery partition.</span></span><br /><br /> <span data-ttu-id="2f901-153">在 DirectQuery 除外的所有資料分割上設定處理選項。</span><span class="sxs-lookup"><span data-stu-id="2f901-153">Set processing options on all partitions except the DirectQuery.</span></span> <span data-ttu-id="2f901-154">通常絕對不會處理 DirectQuery 資料分割，因為資料是透過關聯式來源傳遞。</span><span class="sxs-lookup"><span data-stu-id="2f901-154">Typically the DirectQuery partition is never processed, because the data is passed through from the relational source.</span></span><br /><br /> <span data-ttu-id="2f901-155">如需詳細資訊，請參閱[&#40;SSAS 表格式&#41;的資料分割和 DirectQuery 模式](tabular-models/define-partitions-in-directquery-models-ssas-tabular.md)。</span><span class="sxs-lookup"><span data-stu-id="2f901-155">For more information, see [Partitions and DirectQuery Mode &#40;SSAS Tabular&#41;](tabular-models/define-partitions-in-directquery-models-ssas-tabular.md).</span></span>|  
  
 <span data-ttu-id="2f901-156">**步驟6。設定模擬**</span><span class="sxs-lookup"><span data-stu-id="2f901-156">**Step 6. Configure impersonation**</span></span>  
  
 <span data-ttu-id="2f901-157">只有 DirectQuery 模型才支援模擬。</span><span class="sxs-lookup"><span data-stu-id="2f901-157">Impersonation is supported only for DirectQuery models.</span></span> <span data-ttu-id="2f901-158">模擬選項 **[模擬設定]** 會定義在檢視指定的 SQL Server 資料來源資料時使用的認證。</span><span class="sxs-lookup"><span data-stu-id="2f901-158">The impersonation option, **Impersonation Settings**, defines the credentials that are used when viewing data from the specified SQL Server data source.</span></span>  
  
|||  
|-|-|  
|<span data-ttu-id="2f901-159">**僅限 DirectQuery**</span><span class="sxs-lookup"><span data-stu-id="2f901-159">**DirectQuery only**</span></span>|<span data-ttu-id="2f901-160">針對  **[模擬設定]** 屬性，指定將用於連接至 SQL Server 資料來源的帳戶。</span><span class="sxs-lookup"><span data-stu-id="2f901-160">For the  **Impersonation Settings** property, specify the account that will be used to connect to the SQL Server data source.</span></span><br /><br /> <span data-ttu-id="2f901-161">如果您使用 **ImpersonateCurrentUser**值，則裝載此模型的 [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] 執行個體會將此模型之目前使用者的認證傳遞給 SQL Server 資料庫。</span><span class="sxs-lookup"><span data-stu-id="2f901-161">If you use the value, **ImpersonateCurrentUser**, the instance of [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] that hosts the model will pass the credentials of the current user of the model to the SQL Server database.</span></span>|  
|<span data-ttu-id="2f901-162">**混合模式**</span><span class="sxs-lookup"><span data-stu-id="2f901-162">**Hybrid mode**</span></span>|<span data-ttu-id="2f901-163">針對 **[模擬設定]** 屬性，指定將用於存取 SQL Server 資料來源資料的帳戶。</span><span class="sxs-lookup"><span data-stu-id="2f901-163">For the **Impersonation Settings** property, specify the account that will be used to access the data in the SQL Server data source.</span></span><br /><br /> <span data-ttu-id="2f901-164">此設定不影響用於處理模型所用之快取的認證。</span><span class="sxs-lookup"><span data-stu-id="2f901-164">This setting does not affect the credentials that are used to process the cache used by the model.</span></span>|  
  
 <span data-ttu-id="2f901-165">**步驟7：部署模型**</span><span class="sxs-lookup"><span data-stu-id="2f901-165">**Step 7. Deploy the model**</span></span>  
  
 <span data-ttu-id="2f901-166">當您準備好要部署模型時，請開啟 Visual Studio 的 [**專案**] 功能表，然後選取 [**屬性**]。</span><span class="sxs-lookup"><span data-stu-id="2f901-166">When you are ready to deploy the model, open the **Project** menu of Visual Studio, and select **Properties**.</span></span> <span data-ttu-id="2f901-167">將 **[QueryMode]** 屬性設定為下表所述的其中一個值：</span><span class="sxs-lookup"><span data-stu-id="2f901-167">Set the **QueryMode** property to one of the values described in the following table:</span></span>  
  
 <span data-ttu-id="2f901-168">如需詳細資訊，請參閱[從 SQL Server Data Tools 部署 &#40;SSAS 表格式&#41;](tabular-models/deploy-from-sql-server-data-tools-ssas-tabular.md)。</span><span class="sxs-lookup"><span data-stu-id="2f901-168">For more information, see [Deploy From SQL Server Data Tools &#40;SSAS Tabular&#41;](tabular-models/deploy-from-sql-server-data-tools-ssas-tabular.md).</span></span>  
  
|||  
|-|-|  
|<span data-ttu-id="2f901-169">**僅限 DirectQuery**</span><span class="sxs-lookup"><span data-stu-id="2f901-169">**DirectQuery only**</span></span>|<span data-ttu-id="2f901-170">**DirectQueryOnly**</span><span class="sxs-lookup"><span data-stu-id="2f901-170">**DirectQueryOnly**</span></span><br /><br /> <span data-ttu-id="2f901-171">因為您已經指定僅限 DirectQuery，所以模型中繼資料會部署至伺服器，但是不會處理模型。</span><span class="sxs-lookup"><span data-stu-id="2f901-171">Because you have specified Direct Query only, the metadata of the model is deployed to the server, but the model is not processed.</span></span><br /><br /> <span data-ttu-id="2f901-172">請注意，工作空間資料庫使用的快取不會自動遭到刪除。</span><span class="sxs-lookup"><span data-stu-id="2f901-172">Note that the cache that was used by the workspace database is not automatically deleted.</span></span> <span data-ttu-id="2f901-173">如果您想要確保使用者無法看到快取資料，最好清除設計階段快取。</span><span class="sxs-lookup"><span data-stu-id="2f901-173">If you want to ensure that users are not able to see the cached data, you might wish to clear the design-time cache.</span></span> <span data-ttu-id="2f901-174">如需詳細資訊，請參閱[清除 Analysis Services](instances/clear-the-analysis-services-caches.md)快取。</span><span class="sxs-lookup"><span data-stu-id="2f901-174">For more information, see [Clear the Analysis Services Caches](instances/clear-the-analysis-services-caches.md).</span></span>|  
|<span data-ttu-id="2f901-175">**混合模式**</span><span class="sxs-lookup"><span data-stu-id="2f901-175">**Hybrid mode**</span></span>|<span data-ttu-id="2f901-176">**[搭配使用 DirectQuery 和 In-Memory]**</span><span class="sxs-lookup"><span data-stu-id="2f901-176">**DirectQuery with In-Memory**</span></span><br /><br /> <span data-ttu-id="2f901-177">**使用 DirectQuery 的記憶體內部**</span><span class="sxs-lookup"><span data-stu-id="2f901-177">**In-Memory with DirectQuery**</span></span><br /><br /> <span data-ttu-id="2f901-178">這兩個值都可讓您視需要使用快取或關聯式資料來源。</span><span class="sxs-lookup"><span data-stu-id="2f901-178">Both of these values allow you to use either the cache or the relational data source as necessary.</span></span> <span data-ttu-id="2f901-179">此順序定義在回應模型查詢時預設使用的資料來源。</span><span class="sxs-lookup"><span data-stu-id="2f901-179">The order defines which data source is used by default when answering queries against the model.</span></span><br /><br /> <span data-ttu-id="2f901-180">在混合模式中，必須在模型中繼資料部署至伺服器的同時處理快取。</span><span class="sxs-lookup"><span data-stu-id="2f901-180">In a hybrid mode, the cache must be processed at the same time that the model metadata is deployed to the server.</span></span><br /><br /> <span data-ttu-id="2f901-181">在部署後可以變更此設定。</span><span class="sxs-lookup"><span data-stu-id="2f901-181">You can change this setting after deployment.</span></span>|  
  
 <span data-ttu-id="2f901-182">**步驟8。確認已部署的模型**</span><span class="sxs-lookup"><span data-stu-id="2f901-182">**Step 8. Verify deployed model**</span></span>  
  
 <span data-ttu-id="2f901-183">在 [!INCLUDE[ssManStudioFull](../includes/ssmanstudiofull-md.md)]中，開啟部署模型的 [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] 執行個體。</span><span class="sxs-lookup"><span data-stu-id="2f901-183">In [!INCLUDE[ssManStudioFull](../includes/ssmanstudiofull-md.md)], open the instance of [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] where you deployed the model.</span></span> <span data-ttu-id="2f901-184">以滑鼠右鍵按一下資料庫名稱，然後選取 **[屬性]**。</span><span class="sxs-lookup"><span data-stu-id="2f901-184">Right-click the name of the database and select **Properties**.</span></span>  
  
-   <span data-ttu-id="2f901-185">**[DirectQueryMode]** 屬性是在定義部署屬性時設定的。</span><span class="sxs-lookup"><span data-stu-id="2f901-185">The property, **DirectQueryMode**, was set when you defined the deployment properties.</span></span>  
  
-   <span data-ttu-id="2f901-186">**[資料來源模擬資訊]** 屬性是在定義使用者模擬選項時設定的。</span><span class="sxs-lookup"><span data-stu-id="2f901-186">The property, **Data Source Impersonation Info**, was set when you defined the user impersonation options.</span></span> <span data-ttu-id="2f901-187">如需詳細資訊，請參閱[設定模擬選項 &#40;SSAS - 多維度&#41;](multidimensional-models/set-impersonation-options-ssas-multidimensional.md)。</span><span class="sxs-lookup"><span data-stu-id="2f901-187">For more information, see [Set Impersonation Options &#40;SSAS - Multidimensional&#41;](multidimensional-models/set-impersonation-options-ssas-multidimensional.md).</span></span>  
  
-   <span data-ttu-id="2f901-188">部署模型之後，您隨時可以變更這些屬性。</span><span class="sxs-lookup"><span data-stu-id="2f901-188">You can change these properties any time after the model has been deployed.</span></span>  
  
##  <a name="comparing-directquery-options"></a><a name="bkmk_Configurations"></a><span data-ttu-id="2f901-189">比較 DirectQuery 選項</span><span class="sxs-lookup"><span data-stu-id="2f901-189">Comparing DirectQuery Options</span></span>  
 <span data-ttu-id="2f901-190">**僅限 DirectQuery**</span><span class="sxs-lookup"><span data-stu-id="2f901-190">**DirectQuery Only**</span></span>  
 <span data-ttu-id="2f901-191">在您想要確保單一資料來源時，或者您的資料太大而無法放入記憶體中時，這是慣用選項。</span><span class="sxs-lookup"><span data-stu-id="2f901-191">This option is preferred when you want to guarantee a single source of data, or when your data is too large to fit in memory.</span></span> <span data-ttu-id="2f901-192">如果您使用非常大的關聯式資料來源，可以在設計階段透過使用某個資料子集來建立模型。</span><span class="sxs-lookup"><span data-stu-id="2f901-192">If you are working with a very large relational data source, during design time you can create the model by using some subset of the data.</span></span> <span data-ttu-id="2f901-193">當您在僅限 DirectQuery 模式下部署模型時，可以編輯資料來源定義來包含所有必要的資料。</span><span class="sxs-lookup"><span data-stu-id="2f901-193">When you deploy the model in DirectQuery only mode, you can edit the data source definition to include all the required data.</span></span>  
  
 <span data-ttu-id="2f901-194">如果您想要使用關聯式資料來源提供的安全性，以控制使用者對資料的存取，這也是慣用選項。</span><span class="sxs-lookup"><span data-stu-id="2f901-194">This option is also preferred if you want to use the security provided by the relational data source to control user access to data.</span></span> <span data-ttu-id="2f901-195">對於快取的表格式模型，您還可以使用 [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] 角色控制資料存取，但是儲存在快取中的資料必須也受到保護。</span><span class="sxs-lookup"><span data-stu-id="2f901-195">With cached tabular models, you can also use [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] roles to control data access, but the data stored in the cache must also be secured.</span></span> <span data-ttu-id="2f901-196">如果您的安全性內容要求應該永遠不快取資料，則應該永遠使用此選項。</span><span class="sxs-lookup"><span data-stu-id="2f901-196">You should always use this option if your security context requires that data should never be cached.</span></span>  
  
 <span data-ttu-id="2f901-197">下表描述僅限 DirectQuery 模式的可能部署結果：</span><span class="sxs-lookup"><span data-stu-id="2f901-197">The following table describes the possible deployment outcomes for DirectQuery only mode:</span></span>  
  
|||  
|-|-|  
|<span data-ttu-id="2f901-198">**無快取的 DirectQuery**</span><span class="sxs-lookup"><span data-stu-id="2f901-198">**DirectQuery with no cache**</span></span>|<span data-ttu-id="2f901-199">沒有資料會載入到快取中。</span><span class="sxs-lookup"><span data-stu-id="2f901-199">No data is loaded into the cache.</span></span> <span data-ttu-id="2f901-200">模型永遠不會處理。</span><span class="sxs-lookup"><span data-stu-id="2f901-200">The model can never be processed.</span></span><br /><br /> <span data-ttu-id="2f901-201">模型只能透過支援 DAX 查詢的用戶端進行查詢。</span><span class="sxs-lookup"><span data-stu-id="2f901-201">The model can only be queried by using clients that support DAX queries.</span></span> <span data-ttu-id="2f901-202">查詢結果永遠是從原始資料來源傳回。</span><span class="sxs-lookup"><span data-stu-id="2f901-202">Query results are always returned from the original data source.</span></span><br /><br /> <span data-ttu-id="2f901-203">**DirectQueryMode** = `On`</span><span class="sxs-lookup"><span data-stu-id="2f901-203">**DirectQueryMode** = `On`</span></span><br /><br /> <span data-ttu-id="2f901-204">**QueryMode**  = **DirectQuery**</span><span class="sxs-lookup"><span data-stu-id="2f901-204">**QueryMode** = **DirectQuery**</span></span>|  
|<span data-ttu-id="2f901-205">**DirectQuery 並且查詢僅針對快取**</span><span class="sxs-lookup"><span data-stu-id="2f901-205">**DirectQuery with queries against cache only**</span></span>|<span data-ttu-id="2f901-206">部署失敗。</span><span class="sxs-lookup"><span data-stu-id="2f901-206">Deployment fails.</span></span> <span data-ttu-id="2f901-207">不支援這樣的設定。</span><span class="sxs-lookup"><span data-stu-id="2f901-207">This configuration is not supported.</span></span><br /><br /> <span data-ttu-id="2f901-208">**DirectQueryMode** = `On`</span><span class="sxs-lookup"><span data-stu-id="2f901-208">**DirectQueryMode** = `On`</span></span><br /><br /> <span data-ttu-id="2f901-209">**QueryMode**  = **記憶體**內部</span><span class="sxs-lookup"><span data-stu-id="2f901-209">**QueryMode** = **In-Memory**</span></span>|  
  
 <span data-ttu-id="2f901-210">**混合模式**</span><span class="sxs-lookup"><span data-stu-id="2f901-210">**Hybrid mode**</span></span>  
 <span data-ttu-id="2f901-211">部署混合模式的模型有許多好處：您可以根據需要從 SQL Server 資料來源取得最新資料，但保留快取讓您能夠使用記憶體中的資料，在設計報表或測試模型時增進效能。</span><span class="sxs-lookup"><span data-stu-id="2f901-211">Deploying your model in a hybrid mode has many advantages: you can get up-to-date data from the SQL Server data source if needed, but preserving the cache gives you the ability to work with data in memory for faster performance while designing reports or testing the model.</span></span>  
  
 <span data-ttu-id="2f901-212">如果您的模型非常大，DirectQuery 混和模式也會非常實用。</span><span class="sxs-lookup"><span data-stu-id="2f901-212">A DirectQuery hybrid mode is also useful if your model is very large.</span></span> <span data-ttu-id="2f901-213">與其讓使用者取得過時資料或讓模型無法使用，您可以在處理進行中時將模型切換為 DirectQuery 模式。</span><span class="sxs-lookup"><span data-stu-id="2f901-213">Rather than have users get stale data or have the model be unavailable while the cache is processed, you can switch the model to DirectQuery mode while processing is in progress.</span></span> <span data-ttu-id="2f901-214">使用者可能會感覺到效能稍慢，但將能夠直接從關聯式存放區取得資料，確保結果是最新狀態。</span><span class="sxs-lookup"><span data-stu-id="2f901-214">Users might experience slightly slower performance but they would be able to get data directly from the relational store, ensuring that results were up-to-date.</span></span>  
  
 <span data-ttu-id="2f901-215">下表比較各個 DirectQuery 選項組合的部署結果。</span><span class="sxs-lookup"><span data-stu-id="2f901-215">The following table compares the deployment outcome in each of the combinations of DirectQuery options.</span></span>  
  
|||  
|-|-|  
|<span data-ttu-id="2f901-216">**快取為慣用的混合模式**</span><span class="sxs-lookup"><span data-stu-id="2f901-216">**Hybrid mode with cache preferred**</span></span>|<span data-ttu-id="2f901-217">可以處理此模型，並且可以將資料載入至快取中。</span><span class="sxs-lookup"><span data-stu-id="2f901-217">The model can be processed and data can be loaded into the cache.</span></span> <span data-ttu-id="2f901-218">查詢預設使用快取。</span><span class="sxs-lookup"><span data-stu-id="2f901-218">Queries use the cache by default.</span></span>  <span data-ttu-id="2f901-219">如果用戶端想要使用 DirectQuery 來源，必須在連接字串中插入參數。</span><span class="sxs-lookup"><span data-stu-id="2f901-219">If a client wants to use the DirectQuery source, a parameter must be inserted in the connection string.</span></span><br /><br /> <span data-ttu-id="2f901-220">**DirectQueryMode** = `On`</span><span class="sxs-lookup"><span data-stu-id="2f901-220">**DirectQueryMode** = `On`</span></span><br /><br /> <span data-ttu-id="2f901-221">**QueryMode**  = **使用 DirectQuery 的記憶體**內部</span><span class="sxs-lookup"><span data-stu-id="2f901-221">**QueryMode** = **In-Memory with DirectQuery**</span></span>|  
|<span data-ttu-id="2f901-222">**DirectQuery 為慣用的混合模式**</span><span class="sxs-lookup"><span data-stu-id="2f901-222">**Hybrid mode with DirectQuery preferred**</span></span>|<span data-ttu-id="2f901-223">會處理模型，並且可以將資料載入至快取中。</span><span class="sxs-lookup"><span data-stu-id="2f901-223">The model is processed and data can be loaded into the cache.</span></span> <span data-ttu-id="2f901-224">但是，查詢預設使用 DirectQuery。</span><span class="sxs-lookup"><span data-stu-id="2f901-224">However, queries use DirectQuery by default.</span></span> <span data-ttu-id="2f901-225">如果用戶端想要使用快取資料，必須在連接字串中插入參數。</span><span class="sxs-lookup"><span data-stu-id="2f901-225">If a client wants to use the cached data, a parameter must be inserted in the connection string.</span></span> <span data-ttu-id="2f901-226">如果模型中的資料表已分割，快取的主要資料分割也要設定為 **[搭配使用 In-Memory 和 DirectQuery]**。</span><span class="sxs-lookup"><span data-stu-id="2f901-226">If the tables in the model are partitioned, the principal partition of the cache is also set to **In-Memory with DirectQuery**.</span></span><br /><br /> <span data-ttu-id="2f901-227">**DirectQueryMode** = `On`</span><span class="sxs-lookup"><span data-stu-id="2f901-227">**DirectQueryMode** = `On`</span></span><br /><br /> <span data-ttu-id="2f901-228">**QueryMode**  = **具有記憶體**內部的 DirectQuery</span><span class="sxs-lookup"><span data-stu-id="2f901-228">**QueryMode** = **DirectQuery with In-Memory**</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="2f901-229">另請參閱</span><span class="sxs-lookup"><span data-stu-id="2f901-229">See Also</span></span>  
 <span data-ttu-id="2f901-230">[&#40;SSAS 表格式&#41;的 DirectQuery 模式](tabular-models/directquery-mode-ssas-tabular.md) </span><span class="sxs-lookup"><span data-stu-id="2f901-230">[DirectQuery Mode &#40;SSAS Tabular&#41;](tabular-models/directquery-mode-ssas-tabular.md) </span></span>  
 [<span data-ttu-id="2f901-231">表格式模型資料存取</span><span class="sxs-lookup"><span data-stu-id="2f901-231">Tabular Model Data Access</span></span>](tabular-models/tabular-model-data-access.md)  
  
  
