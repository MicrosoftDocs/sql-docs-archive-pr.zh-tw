---
title: 第5課：建立關聯性 |Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: abac1a00-f827-4c3e-a473-6db5c8a3a66f
author: minewiskan
ms.author: owend
ms.openlocfilehash: f622f88d4d400fedf24e99059eda94882b1bcc3f
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87703382"
---
# <a name="lesson-5-create-relationships"></a><span data-ttu-id="b523b-102">第 5 課：建立關聯性</span><span class="sxs-lookup"><span data-stu-id="b523b-102">Lesson 5: Create Relationships</span></span>
  <span data-ttu-id="b523b-103">在這一課，您將驗證匯入資料時自動建立的關聯性，以及在不同資料表之間加入新的關聯性。</span><span class="sxs-lookup"><span data-stu-id="b523b-103">In this lesson, you will verify the relationships that were created automatically when you imported data and add new relationships between different tables.</span></span> <span data-ttu-id="b523b-104">關聯性是在兩個資料表之間的一種連接，這種連接會建立這兩個資料表中資料相互關聯的方式。</span><span class="sxs-lookup"><span data-stu-id="b523b-104">A relationship is a connection between two tables that establishes how the data in those tables should be correlated.</span></span> <span data-ttu-id="b523b-105">例如，[產品] 資料表和 [產品子類別目錄] 資料表的關聯性是以每個產品都屬於某個子類別目錄為基礎。</span><span class="sxs-lookup"><span data-stu-id="b523b-105">For example, the Product table and the Product Subcategory table have a relationship based on the fact that each product belongs to a subcategory.</span></span> <span data-ttu-id="b523b-106">如需詳細資訊，請參閱[關聯性 &#40;SSAS 表格式&#41;](tabular-models/relationships-ssas-tabular.md)。</span><span class="sxs-lookup"><span data-stu-id="b523b-106">To learn more, see [Relationships &#40;SSAS Tabular&#41;](tabular-models/relationships-ssas-tabular.md).</span></span>  
  
 <span data-ttu-id="b523b-107">這堂課的預估完成時間：**10 分鐘**</span><span class="sxs-lookup"><span data-stu-id="b523b-107">Estimated time to complete this lesson: **10 minutes**</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="b523b-108">必要條件</span><span class="sxs-lookup"><span data-stu-id="b523b-108">Prerequisites</span></span>  
 <span data-ttu-id="b523b-109">本主題是表格式模型教學課程的一部分，請依序完成。</span><span class="sxs-lookup"><span data-stu-id="b523b-109">This topic is part of a tabular modeling tutorial, which should be completed in order.</span></span> <span data-ttu-id="b523b-110">在執行本課中的工作之前，您應已完成上一課： [第 3 課：重新命名資料行](rename-columns.md)。</span><span class="sxs-lookup"><span data-stu-id="b523b-110">Before performing the tasks in this lesson, you should have completed the previous lesson: [Lesson 3: Rename Columns](rename-columns.md).</span></span>  
  
## <a name="review-existing-relationships-and-add-new-relationships"></a><span data-ttu-id="b523b-111">檢閱現有的關聯性並加入新的關聯性</span><span class="sxs-lookup"><span data-stu-id="b523b-111">Review Existing Relationships and Add New Relationships</span></span>  
 <span data-ttu-id="b523b-112">當您使用 [資料表匯入精靈] 匯入資料時，便會從 AdventureWorksDW 資料庫匯入七個資料表。</span><span class="sxs-lookup"><span data-stu-id="b523b-112">When you imported data by using the Table Import Wizard, you imported seven tables from the AdventureWorksDW database.</span></span> <span data-ttu-id="b523b-113">一般而言，如果您從關聯式來源匯入資料，現有的關聯性會與資料一起自動匯入。</span><span class="sxs-lookup"><span data-stu-id="b523b-113">Generally, if you import data from a relational source, existing relationships are automatically imported together with the data.</span></span> <span data-ttu-id="b523b-114">不過，在繼續製作模型之前，您應該確認資料表之間的關聯性已正確建立。</span><span class="sxs-lookup"><span data-stu-id="b523b-114">However, before you proceed with authoring your model you should verify those relationships between tables were created properly.</span></span> <span data-ttu-id="b523b-115">在這個教學課程中，您會另外加入三個新的關聯性。</span><span class="sxs-lookup"><span data-stu-id="b523b-115">For this tutorial, you will also add three new relationships.</span></span>  
  
#### <a name="to-review-existing-relationships"></a><span data-ttu-id="b523b-116">檢閱現有的關聯性</span><span class="sxs-lookup"><span data-stu-id="b523b-116">To review existing relationships</span></span>  
  
1.  <span data-ttu-id="b523b-117">在 [!INCLUDE[ssBIDevStudio](../includes/ssbidevstudio-md.md)] 中，按一下 [模型]\*\*\*\* 功能表，然後指向 [模型檢視]\*\*\*\*，再按一下 [圖表檢視]\*\*\*\*。</span><span class="sxs-lookup"><span data-stu-id="b523b-117">In [!INCLUDE[ssBIDevStudio](../includes/ssbidevstudio-md.md)], click on the **Model** menu, then point to **Model View**, and then click **Diagram View**.</span></span>  
  
     <span data-ttu-id="b523b-118">模型設計師現在會出現在 [圖表檢視] 中，這是一種圖形化格式，會顯示您匯入的所有資料表，而且資料表之間會線條。</span><span class="sxs-lookup"><span data-stu-id="b523b-118">The model designer now appears in Diagram View, a graphical format displaying all of the tables you imported with lines between them.</span></span> <span data-ttu-id="b523b-119">資料表之間的線條表示匯入資料時自動建立的關聯性。</span><span class="sxs-lookup"><span data-stu-id="b523b-119">The lines between tables indicate the relationships that were automatically created when you imported the data.</span></span>  
  
     <span data-ttu-id="b523b-120">使用模型設計師右上方的 [迷你地圖] 控制項即可調整檢視，以便包含更多資料表。</span><span class="sxs-lookup"><span data-stu-id="b523b-120">Use the minimap controls in the upper-right corner of the model designer to adjust the view to include as many of the tables as possible.</span></span> <span data-ttu-id="b523b-121">您也可以按一下並拖曳資料表至不同位置、讓資料表彼此更靠近，或是以特定次序排列資料表。</span><span class="sxs-lookup"><span data-stu-id="b523b-121">You can also click and drag tables to different locations, bringing tables closer together, or putting them in a particular order.</span></span> <span data-ttu-id="b523b-122">移動資料表不會影響資料表之間已存在的關聯性。</span><span class="sxs-lookup"><span data-stu-id="b523b-122">Moving tables does not affect the relationships already between the tables.</span></span> <span data-ttu-id="b523b-123">若要檢視特定資料表中的所有資料行，可按一下並拖曳資料表邊緣，將它展開或縮小。</span><span class="sxs-lookup"><span data-stu-id="b523b-123">To view all of the columns in a particular table, click and drag on a table edge to expand or make it smaller.</span></span>  
  
2.  <span data-ttu-id="b523b-124">按一下 [客戶]\*\*\*\* 資料表和 [地理位置]\*\*\*\* 資料表之間的實線。</span><span class="sxs-lookup"><span data-stu-id="b523b-124">Click on the solid line between the **Customer** table and the **Geography** table.</span></span> <span data-ttu-id="b523b-125">這兩個資料表之間的實線說明這個關聯性為作用中狀態，也就是說，這是在計算 DAX 公式時預設使用的關聯性。</span><span class="sxs-lookup"><span data-stu-id="b523b-125">The solid line between these two tables show this relationship is active, that is, it is used by default when calculating DAX formulas.</span></span>  
  
     <span data-ttu-id="b523b-126">請注意，[客戶]\*\*\*\* 資料表中的 [地理位置 ID]\*\*\*\* 資料行和 [地理位置]\*\*\*\* 資料表中的 [地理位置 ID]\*\*\*\* 資料行現在都出現在某一個方塊內。</span><span class="sxs-lookup"><span data-stu-id="b523b-126">Notice the **Geography Id** column in the **Customer** table and the **Geography Id** column in the **Geography** table now both each appear within a box.</span></span> <span data-ttu-id="b523b-127">這表示關聯性中使用這些資料行。</span><span class="sxs-lookup"><span data-stu-id="b523b-127">This shows these are the columns used in the relationship.</span></span> <span data-ttu-id="b523b-128">關聯性的屬性現在也會出現在 [**屬性**] 視窗中。</span><span class="sxs-lookup"><span data-stu-id="b523b-128">The relationship's properties now also appear in the **Properties** window.</span></span>  
  
    > [!TIP]  
    >  <span data-ttu-id="b523b-129">除了在圖表視圖中使用模型設計師之外，您也可以使用 [**管理關聯性**] 對話方塊，以資料表格式顯示所有資料表之間的關聯性。</span><span class="sxs-lookup"><span data-stu-id="b523b-129">In addition to using the model designer in diagram view, you can also use the **Manage Relationships** dialog box to show the relationships between all tables in a table format.</span></span> <span data-ttu-id="b523b-130">按一下 [資料表]\*\*\*\* 功能表，然後按一下 [管理關聯性]\*\*\*\*。</span><span class="sxs-lookup"><span data-stu-id="b523b-130">Click on the **Table** menu, and then click **Manage Relationships**.</span></span> <span data-ttu-id="b523b-131">[管理關聯性]\*\*\*\* 對話方塊會顯示匯入資料時自動建立的關聯性。</span><span class="sxs-lookup"><span data-stu-id="b523b-131">The **Manage Relationships** dialog box shows the relationships that were automatically created when you imported data.</span></span>  
  
3.  <span data-ttu-id="b523b-132">在圖表視圖中使用模型設計師，或在 [**管理關聯性**] 對話方塊中，確認從 AdventureWorksDW 資料庫匯入每個資料表時所建立的下列關聯性：</span><span class="sxs-lookup"><span data-stu-id="b523b-132">Use the model designer in diagram view, or the **Manage Relationships** dialog box, to verify the following relationships were created when each of the tables were imported from the AdventureWorksDW database:</span></span>  
  
    |<span data-ttu-id="b523b-133">使用中</span><span class="sxs-lookup"><span data-stu-id="b523b-133">Active</span></span>|<span data-ttu-id="b523b-134">資料表</span><span class="sxs-lookup"><span data-stu-id="b523b-134">Table</span></span>|<span data-ttu-id="b523b-135">相關查閱資料表</span><span class="sxs-lookup"><span data-stu-id="b523b-135">Related Lookup Table</span></span>|  
    |------------|-----------|--------------------------|  
    |<span data-ttu-id="b523b-136">是</span><span class="sxs-lookup"><span data-stu-id="b523b-136">Yes</span></span>|<span data-ttu-id="b523b-137">**客戶 [地理位置 ID]**</span><span class="sxs-lookup"><span data-stu-id="b523b-137">**Customer [Geography Id]**</span></span>|<span data-ttu-id="b523b-138">**地理位置 [地理位置 ID]**</span><span class="sxs-lookup"><span data-stu-id="b523b-138">**Geography [Geography Id]**</span></span>|  
    |<span data-ttu-id="b523b-139">是</span><span class="sxs-lookup"><span data-stu-id="b523b-139">Yes</span></span>|<span data-ttu-id="b523b-140">**產品 [產品子類別目錄 ID]**</span><span class="sxs-lookup"><span data-stu-id="b523b-140">**Product [Product Subcategory Id]**</span></span>|<span data-ttu-id="b523b-141">**產品子類別目錄 [產品子類別目錄 ID]**</span><span class="sxs-lookup"><span data-stu-id="b523b-141">**Product Subcategory [Product Subcategory Id]**</span></span>|  
    |<span data-ttu-id="b523b-142">是</span><span class="sxs-lookup"><span data-stu-id="b523b-142">Yes</span></span>|<span data-ttu-id="b523b-143">**產品子類別目錄 [產品類別目錄 ID]**</span><span class="sxs-lookup"><span data-stu-id="b523b-143">**Product Subcategory [Product Category Id]**</span></span>|<span data-ttu-id="b523b-144">**產品類別目錄 [產品類別目錄 ID]**</span><span class="sxs-lookup"><span data-stu-id="b523b-144">**Product Category [Product Category Id]**</span></span>|  
    |<span data-ttu-id="b523b-145">是</span><span class="sxs-lookup"><span data-stu-id="b523b-145">Yes</span></span>|<span data-ttu-id="b523b-146">**網際網路銷售 [客戶 ID]**</span><span class="sxs-lookup"><span data-stu-id="b523b-146">**Internet Sales [Customer Id]**</span></span>|<span data-ttu-id="b523b-147">**客戶 [客戶 ID]**</span><span class="sxs-lookup"><span data-stu-id="b523b-147">**Customer [Customer Id]**</span></span>|  
    |<span data-ttu-id="b523b-148">是</span><span class="sxs-lookup"><span data-stu-id="b523b-148">Yes</span></span>|<span data-ttu-id="b523b-149">**網際網路銷售 [產品 ID]**</span><span class="sxs-lookup"><span data-stu-id="b523b-149">**Internet Sales [Product Id]**</span></span>|<span data-ttu-id="b523b-150">**產品 [產品 ID]**</span><span class="sxs-lookup"><span data-stu-id="b523b-150">**Product [Product Id]**</span></span>|  
  
 <span data-ttu-id="b523b-151">如果上表中的任何關聯性遺失，請確認您的模型中包含下列資料表：客戶、日期、地理位置、產品、產品類別目錄、產品子類別目錄和網際網路銷售。</span><span class="sxs-lookup"><span data-stu-id="b523b-151">If any of the relationships in the table above are missing, verify that your model includes the following tables: Customer, Date, Geography, Product, Product Category, Product Subcategory, and Internet Sales.</span></span> <span data-ttu-id="b523b-152">如果是在不同時間從相同的資料來源連線匯入資料表，則不會建立這些資料表之間的關聯性，必須手動建立。</span><span class="sxs-lookup"><span data-stu-id="b523b-152">If tables from the same data source connection are imported at separate times, any relationships between those tables will not be created and must be created manually.</span></span>  
  
 <span data-ttu-id="b523b-153">在某些情況下，您可能需要在模型中的資料表之間建立額外的關聯性，以支援特定的商務邏輯。</span><span class="sxs-lookup"><span data-stu-id="b523b-153">In some cases, you may need to create additional relationships between tables in your model to support certain business logic.</span></span> <span data-ttu-id="b523b-154">在這個教學課程中，您需要在 [網際網路銷售] 資料表和 [日期] 資料表之間建立三項額外的關聯性。</span><span class="sxs-lookup"><span data-stu-id="b523b-154">For this tutorial, you need to create three additional relationships between the Internet Sales table and the Date table.</span></span>  
  
#### <a name="to-add-new-relationships-between-tables"></a><span data-ttu-id="b523b-155">若要在資料表之間加入新的關聯性</span><span class="sxs-lookup"><span data-stu-id="b523b-155">To add new relationships between tables</span></span>  
  
1.  <span data-ttu-id="b523b-156">在模型設計師的 [網際網路銷售]\*\*\*\* 資料表中，按住 [訂單日期]\*\*\*\* 資料行，將資料指標拖曳至 [日期]\*\*\*\* 資料表中的 [日期]\*\*\*\* 資料行，然後放開。</span><span class="sxs-lookup"><span data-stu-id="b523b-156">In the model designer, in the **Internet Sales** table, click and hold on the **Order Date** column, then drag the cursor to the **Date** column in the **Date** table, and then release.</span></span>  
  
     <span data-ttu-id="b523b-157">此時會出現一條實線，表示您已在 [網際網路銷售]\*\*\*\* 資料表的 [訂單日期]\*\*\*\* 資料行和 [日期]\*\*\*\* 資料表的 [日期]\*\*\*\* 資料行之間建立了使用中的關聯性。</span><span class="sxs-lookup"><span data-stu-id="b523b-157">A solid line appears showing you have created an active relationship between the **Order Date** column in the **Internet Sales** table and the **Date** column in the **Date** table.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="b523b-158">建立關聯性時，主要資料表和相關查詢資料表的次序會自動正確排列。</span><span class="sxs-lookup"><span data-stu-id="b523b-158">When creating relationships, the order between the primary table and the related lookup table is automatically put in the correct order.</span></span>  
  
2.  <span data-ttu-id="b523b-159">在 [網際網路銷售]\*\*\*\* 資料表中，按住 [到期日]\*\*\*\* 資料行，將資料指標拖曳至 [日期]\*\*\*\* 資料表中的 [日期]\*\*\*\* 資料行，然後放開。</span><span class="sxs-lookup"><span data-stu-id="b523b-159">In the **Internet Sales** table, click and hold on the **Due Date** column, then drag the cursor to the **Date** column in the **Date** table, and then release.</span></span>  
  
     <span data-ttu-id="b523b-160">此時會出現一條虛線，表示您已在 [網際網路銷售]\*\*\*\* 資料表的 [到期日]\*\*\*\* 資料行和 [日期]\*\*\*\* 資料表的 [日期]\*\*\*\* 資料行之間建立了非使用中的關聯性。</span><span class="sxs-lookup"><span data-stu-id="b523b-160">A dotted line appears showing you have created an inactive relationship between the **Due Date** column in the **Internet Sales** table and the **Date** column in the **Date** table.</span></span> <span data-ttu-id="b523b-161">您在資料表之間可以有多個關聯性，但一次只能有一個關聯性是作用中。</span><span class="sxs-lookup"><span data-stu-id="b523b-161">You can have multiple relationships between tables, but only one relationship can be active at a time.</span></span>  
  
3.  <span data-ttu-id="b523b-162">最後，再建立一項關聯性；在 [網際網路銷售]\*\*\*\* 資料表中，按住 [出貨日期]\*\*\*\* 資料行，將資料指標拖曳至 [日期]\*\*\*\* 資料表中的 [日期]\*\*\*\* 資料行，然後放開。</span><span class="sxs-lookup"><span data-stu-id="b523b-162">Finally, create one more relationship; in the **Internet Sales** table, click and hold on the **Ship Date** column, then drag the cursor to the **Date** column in the **Date** table, and then release.</span></span>  
  
     <span data-ttu-id="b523b-163">此時會出現一條虛線，表示您已在 [網際網路銷售]\*\*\*\* 資料表的 [出貨日期]\*\*\*\* 資料行和 [日期]\*\*\*\* 資料表的 [日期]\*\*\*\* 資料行之間建立了非使用中的關聯性。</span><span class="sxs-lookup"><span data-stu-id="b523b-163">A dotted line appears showing you have created an inactive relationship between the **Ship Date** column in the **Internet Sales** table and the **Date** column in the **Date** table.</span></span>  
  
## <a name="next-step"></a><span data-ttu-id="b523b-164">後續步驟</span><span class="sxs-lookup"><span data-stu-id="b523b-164">Next Step</span></span>  
 <span data-ttu-id="b523b-165">若要繼續進行這一課，請前往下一課： [第 6 課：建立導出資料行](lesson-5-create-calculated-columns.md)。</span><span class="sxs-lookup"><span data-stu-id="b523b-165">To continue this lesson, go to the next lesson: [Lesson 6: Create Calculated Columns](lesson-5-create-calculated-columns.md).</span></span>  
  
  
