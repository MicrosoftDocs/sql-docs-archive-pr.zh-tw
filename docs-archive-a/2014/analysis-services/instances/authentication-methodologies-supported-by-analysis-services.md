---
title: Analysis Services 支援的驗證方法 |Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: b7aee903-d33a-4c20-86c2-aa013a50949f
author: minewiskan
ms.author: owend
ms.openlocfilehash: e3ce8dfc47b2c57fcc8ae336160ff81f87a8a157
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87596398"
---
# <a name="authentication-methodologies-supported-by-analysis-services"></a><span data-ttu-id="9b91d-102">Analysis Services 支援的驗證方法</span><span class="sxs-lookup"><span data-stu-id="9b91d-102">Authentication methodologies supported by Analysis Services</span></span>
  <span data-ttu-id="9b91d-103">從用戶端應用程式到 Analysis Services 執行個體的連接需要 Windows 驗證 (整合式)。</span><span class="sxs-lookup"><span data-stu-id="9b91d-103">Connections from a client application to an Analysis Services instance require Windows authentication (integrated).</span></span> <span data-ttu-id="9b91d-104">您可以使用下列任何一種方法來提供 Windows 使用者識別：</span><span class="sxs-lookup"><span data-stu-id="9b91d-104">You can provide a Windows user identity using any of the following methods:</span></span>  
  
-   <span data-ttu-id="9b91d-105">NTLM</span><span class="sxs-lookup"><span data-stu-id="9b91d-105">NTLM</span></span>  
  
-   <span data-ttu-id="9b91d-106">Kerberos (請參閱 [設定 Analysis Services 進行 Kerberos 限制委派](configure-analysis-services-for-kerberos-constrained-delegation.md))</span><span class="sxs-lookup"><span data-stu-id="9b91d-106">Kerberos (see [Configure Analysis Services for Kerberos constrained delegation](configure-analysis-services-for-kerberos-constrained-delegation.md))</span></span>  
  
-   <span data-ttu-id="9b91d-107">連接字串的 EffectiveUserName</span><span class="sxs-lookup"><span data-stu-id="9b91d-107">EffectiveUserName on the connection string</span></span>  
  
-   <span data-ttu-id="9b91d-108">基本或匿名 (需要 HTTP 存取的組態)</span><span class="sxs-lookup"><span data-stu-id="9b91d-108">Basic or Anonymous (requires configuration for HTTP access)</span></span>  
  
-   <span data-ttu-id="9b91d-109">預存認證</span><span class="sxs-lookup"><span data-stu-id="9b91d-109">Stored credentials</span></span>  
  
 <span data-ttu-id="9b91d-110">請注意，由於不支援宣告驗證，</span><span class="sxs-lookup"><span data-stu-id="9b91d-110">Notice that Claims authentication is not supported.</span></span> <span data-ttu-id="9b91d-111">因此您不能使用 Windows 的宣告 Token 存取 Analysis Services。</span><span class="sxs-lookup"><span data-stu-id="9b91d-111">You cannot use a Windows Claims token to access Analysis Services.</span></span> <span data-ttu-id="9b91d-112">Analysis Services 用戶端程式庫只能與 Windows 安全性主體搭配使用。</span><span class="sxs-lookup"><span data-stu-id="9b91d-112">The Analysis Services client libraries only work with Windows security principles.</span></span> <span data-ttu-id="9b91d-113">如果您的 BI 方案包括宣告識別，則需要每位使用者的 Windows 識別陰影帳戶，或使用預存認證來存取 Analysis Services 資料。</span><span class="sxs-lookup"><span data-stu-id="9b91d-113">If your BI solution includes claims identities, you will need Windows identity shadow accounts for each user, or use stored credentials to access Analysis Services data.</span></span>  
  
 <span data-ttu-id="9b91d-114">如需 BI 和 Analysis Services 驗證流程的詳細資訊，請參閱 [Microsoft BI Authentication and Identity Delegation](https://go.microsoft.com/fwlink/?LinkID=286576)(Microsoft BI 驗證及識別委派)。</span><span class="sxs-lookup"><span data-stu-id="9b91d-114">For more information about BI and Analysis Services authentication flows, see [Microsoft BI Authentication and Identity Delegation](https://go.microsoft.com/fwlink/?LinkID=286576).</span></span>  
  
##  <a name="understanding-your-authentication-alternatives"></a><a name="bkmk_auth"></a> <span data-ttu-id="9b91d-115">了解您的驗證替代方案</span><span class="sxs-lookup"><span data-stu-id="9b91d-115">Understanding your authentication alternatives</span></span>  
 <span data-ttu-id="9b91d-116">連接到 Analysis Services 資料庫需要 Windows 使用者或群組識別以及相關聯的權限。</span><span class="sxs-lookup"><span data-stu-id="9b91d-116">Connecting to an Analysis Services database requires a Windows user or group identity and associated permissions.</span></span> <span data-ttu-id="9b91d-117">此識別可能是一般用途的登入，由需要檢視報表的任何人使用，但是比較可能的案例包含個別使用者的識別。</span><span class="sxs-lookup"><span data-stu-id="9b91d-117">The identity might be a general purpose login used by anyone who needs to view a report, but a more likely scenario includes the identity of individual users.</span></span>  
  
 <span data-ttu-id="9b91d-118">表格式或多維度模型通常具有不同的資料存取層級 (依物件或資料本身)，端視提出要求的對象而定。</span><span class="sxs-lookup"><span data-stu-id="9b91d-118">Often, a tabular or multidimensional model will have different levels of data access, by object or within the data itself, based on who is making the request.</span></span> <span data-ttu-id="9b91d-119">為了符合此需求，您可以使用 NTLM、Kerberos、EffectiveUserName 或基本驗證。</span><span class="sxs-lookup"><span data-stu-id="9b91d-119">To meet this requirement, you can use NTLM, Kerberos, EffectiveUserName, or Basic authentication.</span></span> <span data-ttu-id="9b91d-120">上述所有技術都會提供一種透過每個連接傳入不同使用者識別的方法。</span><span class="sxs-lookup"><span data-stu-id="9b91d-120">All of these techniques offer an approach for passing in different user identities with each connection.</span></span> <span data-ttu-id="9b91d-121">不過，這些選擇大部分會受限於單躍點限制。</span><span class="sxs-lookup"><span data-stu-id="9b91d-121">However, most of these choices are subject to a single hop limitation.</span></span> <span data-ttu-id="9b91d-122">只有含有委派的 Kerberos 允許原始使用者識別跨多個電腦連接流向遠端伺服器上的後端資料存放區。</span><span class="sxs-lookup"><span data-stu-id="9b91d-122">Only Kerberos with delegation allows the original user identity to flow across multiple computer connections to a backend data store on a remote server.</span></span>  
  
 <span data-ttu-id="9b91d-123">**NTLM**</span><span class="sxs-lookup"><span data-stu-id="9b91d-123">**NTLM**</span></span>  
  
 <span data-ttu-id="9b91d-124">對於指定 `SSPI=Negotiate`的連接而言，NTLM 是 Kerberos 網域控制站無法使用時所用的備份驗證子系統。</span><span class="sxs-lookup"><span data-stu-id="9b91d-124">For connections that specify `SSPI=Negotiate`, NTLM is the backup authentication subsystem used when a Kerberos domain controller is not available.</span></span> <span data-ttu-id="9b91d-125">在 NTLM 底下，只要要求是從用戶端到伺服器的直接連接、要求連接的人員擁有資源的權限，而且用戶端與伺服器電腦位於相同的網域中，任何使用者或用戶端應用程式都可以存取伺服器資源。</span><span class="sxs-lookup"><span data-stu-id="9b91d-125">Under NTLM, any user or client application can access a server resource as long as the request is a direct connection from a client to the server, the person requesting the connection has permission to the resource, and the client and server computers are in the same domain.</span></span>  
  
 <span data-ttu-id="9b91d-126">在多層式方案中，NLTM 的單躍點限制可能是主要的條件約束。</span><span class="sxs-lookup"><span data-stu-id="9b91d-126">In multi-tier solutions, the single hop restriction of NLTM can be a major constraint.</span></span> <span data-ttu-id="9b91d-127">雖然可以在一部遠端伺服器上完全模擬提出要求的使用者識別，但是卻無法連接到其他伺服器。</span><span class="sxs-lookup"><span data-stu-id="9b91d-127">The user identity making the request can be impersonated on exactly one remote server, but travels no further.</span></span> <span data-ttu-id="9b91d-128">如果目前的作業需要多部電腦上執行的服務，您就必須將 Kerberos 限制委派設定為重複使用後端伺服器上的安全性 Token。</span><span class="sxs-lookup"><span data-stu-id="9b91d-128">If the current operation requires services running on multiple computers, you will need to configure Kerberos constrained delegation to reuse the security token on backend servers.</span></span> <span data-ttu-id="9b91d-129">或者，您也可以使用預存認證或基本驗證來傳入透過單躍點連線的新識別資訊。</span><span class="sxs-lookup"><span data-stu-id="9b91d-129">Alternatively, you can use stored credentials or Basic authentication to pass in new identity information over a single hop connection.</span></span>  
  
 <span data-ttu-id="9b91d-130">**Kerberos 驗證和 Kerberos 限制委派**</span><span class="sxs-lookup"><span data-stu-id="9b91d-130">**Kerberos Authentication and Kerberos Constrained Delegation**</span></span>  
  
 <span data-ttu-id="9b91d-131">Kerberos 驗證是 Active Directory 網域中 Windows 整合式安全性的基礎。</span><span class="sxs-lookup"><span data-stu-id="9b91d-131">Kerberos authentication is the basis of Windows integrated security in Active Directory domains.</span></span> <span data-ttu-id="9b91d-132">如同 NTLM，除非您啟用委派，否則 Kerberos 底下的模擬會限制為單躍點。</span><span class="sxs-lookup"><span data-stu-id="9b91d-132">As with NTLM, impersonation under Kerberos is limited to a single hop unless you enable delegation.</span></span>  
  
 <span data-ttu-id="9b91d-133">為了支援多躍點連接，Kerberos 會同時提供限制與非限制委派，但是在大部分情況下，限制委派會被視為安全性最佳作法。</span><span class="sxs-lookup"><span data-stu-id="9b91d-133">To support multi-hop connections, Kerberos provides both constrained and unconstrained delegation, but for most scenarios, constrained delegation is considered a security best practice.</span></span> <span data-ttu-id="9b91d-134">限制委派會允許服務將使用者識別的安全性 Token 傳遞至遠端電腦上指定的下層服務。</span><span class="sxs-lookup"><span data-stu-id="9b91d-134">Constrained delegation allows a service to pass the security token of the user identity to a designated down-level service on a remote computer.</span></span> <span data-ttu-id="9b91d-135">若為多層應用程式，將使用者識別從中介層應用程式伺服器委派至後端資料庫 (例如 Analysis Services) 是常見的需求。</span><span class="sxs-lookup"><span data-stu-id="9b91d-135">For multi-tier applications, delegating a user identity from a middle tier application server to a backend database such as Analysis Services is a common requirement.</span></span> <span data-ttu-id="9b91d-136">例如，根據使用者識別傳回不同資料的表格式或多維度模型會需要來自中介層服務的識別委派，避免讓使用者重新輸入認證，或以其他方式取得安全性認證。</span><span class="sxs-lookup"><span data-stu-id="9b91d-136">For example, a tabular or multidimensional model that returns different data based on user identity would require identity delegation from a middle tier service to avoid having the user re-enter credentials, or getting security credentials some other way.</span></span>  
  
 <span data-ttu-id="9b91d-137">限制委派需要在 Active Directory 中進行其他組態設定，好讓位於要求傳送和接收端的服務明確獲得委派的授權。</span><span class="sxs-lookup"><span data-stu-id="9b91d-137">Constrained delegation requires additional configuration in Active Directory, where services on both the sending and receiving end of the request are explicitly authorized for delegation.</span></span> <span data-ttu-id="9b91d-138">雖然這樣會事先產生組態設定成本，不過一旦設定服務之後，密碼更新就會在 Active Directory 中獨立管理。</span><span class="sxs-lookup"><span data-stu-id="9b91d-138">Although there are configuration costs up front, once the service is configured, password updates are managed independently in Active Directory.</span></span> <span data-ttu-id="9b91d-139">您不需要更新應用程式的預存帳戶資訊，但是如果使用以下描述的預存認證選項，則必須自行更新。</span><span class="sxs-lookup"><span data-stu-id="9b91d-139">You do not need to update stored account information in applications, as you would if using the stored credentials option described further on.</span></span>  
  
 <span data-ttu-id="9b91d-140">如需設定 Analysis Services 進行限制委派的詳細資訊，請參閱 [設定 Analysis Services 進行 Kerberos 限制委派](configure-analysis-services-for-kerberos-constrained-delegation.md)。</span><span class="sxs-lookup"><span data-stu-id="9b91d-140">For more information about configuring Analysis Services for constrained delegation, see [Configure Analysis Services for Kerberos constrained delegation](configure-analysis-services-for-kerberos-constrained-delegation.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="9b91d-141">Windows Server 2012 支援跨網域的限制委派。</span><span class="sxs-lookup"><span data-stu-id="9b91d-141">Windows Server 2012 supports constrained delegation across domains.</span></span> <span data-ttu-id="9b91d-142">相較之下，在較低功能層級的網域 (例如 Windows Server 2008 或 2008 R2) 中設定 Kerberos 限制委派會要求用戶端與伺服器電腦都必須是相同網域的成員。</span><span class="sxs-lookup"><span data-stu-id="9b91d-142">In contrast, configuring Kerberos constrained delegation in domains at lower functional levels, such as Windows Server 2008 or 2008 R2, require both client and server computers to be members of the same domain.</span></span>  
  
 <span data-ttu-id="9b91d-143">**EffectiveUserName**</span><span class="sxs-lookup"><span data-stu-id="9b91d-143">**EffectiveUserName**</span></span>  
  
 <span data-ttu-id="9b91d-144">EffectiveUserName 是將識別資訊傳遞至 Analysis Services 所用的連接字串屬性。</span><span class="sxs-lookup"><span data-stu-id="9b91d-144">EffectiveUserName is a connection string property used for passing identity information to Analysis Services.</span></span> <span data-ttu-id="9b91d-145">PowerPivot for SharePoint 會用它將使用者活動記錄在使用記錄檔中。</span><span class="sxs-lookup"><span data-stu-id="9b91d-145">PowerPivot for SharePoint uses it to record user activity in the usage logs.</span></span> <span data-ttu-id="9b91d-146">Excel Services 和 PerformancePoint Services 可以用它來擷取 SharePoint 活頁簿或儀表板所使用的資料。</span><span class="sxs-lookup"><span data-stu-id="9b91d-146">Excel Services and PerformancePoint Services can use it to retrieve data used by workbooks or dashboards in SharePoint.</span></span> <span data-ttu-id="9b91d-147">它也可以用於針對 Analysis Services 執行個體執行作業的自訂應用程式或指令碼中。</span><span class="sxs-lookup"><span data-stu-id="9b91d-147">It can also be used in custom applications or scripts that perform operations on an Analysis Services instance.</span></span>  
  
 <span data-ttu-id="9b91d-148">如需在 SharePoint 中使用 EffectiveUserName 的詳細資訊，請參閱 [Use Analysis Services EffectiveUserName in SharePoint Server 2010](https://go.microsoft.com/fwlink/?LinkId=311905)(在 SharePoint Server 2010 中使用 Analysis Services EffectiveUserName)。</span><span class="sxs-lookup"><span data-stu-id="9b91d-148">For more information about using EffectiveUserName in SharePoint, see [Use Analysis Services EffectiveUserName in SharePoint Server 2010](https://go.microsoft.com/fwlink/?LinkId=311905).</span></span>  
  
 <span data-ttu-id="9b91d-149">**基本驗證和匿名使用者**</span><span class="sxs-lookup"><span data-stu-id="9b91d-149">**Basic Authentication and Anonymous User**</span></span>  
  
 <span data-ttu-id="9b91d-150">基本驗證提供了第四種替代方案，讓您以特定使用者的身分連接到後端伺服器。</span><span class="sxs-lookup"><span data-stu-id="9b91d-150">Basic authentication provides yet a fourth alternative for connecting to a backend server as a specific user.</span></span> <span data-ttu-id="9b91d-151">使用基本驗證時，Windows 使用者名稱和密碼會透過連接字串傳遞，並導入其他連線加密需求，確保機密資訊在傳輸時受到保護。</span><span class="sxs-lookup"><span data-stu-id="9b91d-151">Using Basic authentication, the Windows user name and password are passed on the connection string, introducing additional wire encryption requirements to ensure sensitive information is protected while in transit.</span></span> <span data-ttu-id="9b91d-152">使用基本驗證的重要優點在於，驗證要求可以跨越網域界限。</span><span class="sxs-lookup"><span data-stu-id="9b91d-152">An important advantage to using Basic authentication is that the authentication request can cross domain boundaries.</span></span>  
  
 <span data-ttu-id="9b91d-153">如果是匿名驗證，您可以將匿名使用者識別設定為特定 Windows 使用者帳戶 (預設為 IUSR_GUEST) 或應用程式集區識別。</span><span class="sxs-lookup"><span data-stu-id="9b91d-153">For Anonymous authentication, you can set the anonymous user identity to a specific Windows user account (IUSR_GUEST by default) or an application pool identity.</span></span> <span data-ttu-id="9b91d-154">匿名使用者帳戶將用於 Analysis Services 連接，而且必須擁有 Analysis Services 執行個體的資料存取權限。</span><span class="sxs-lookup"><span data-stu-id="9b91d-154">The anonymous user account will be used on the Analysis Services connection, and must have data access permissions on the Analysis Services instance.</span></span> <span data-ttu-id="9b91d-155">當您使用這種方法時，只有與匿名帳戶相關聯的使用者識別會用於連接。</span><span class="sxs-lookup"><span data-stu-id="9b91d-155">When you use this approach, only the user identity associated with the Anonymous account is used on the connection.</span></span> <span data-ttu-id="9b91d-156">如果您的應用程式需要其他識別管理，您就必須選擇其他方法，或是使用您所提供的識別管理解決方案來補充。</span><span class="sxs-lookup"><span data-stu-id="9b91d-156">If your application requires additional identity management, you will need to choose one of the other approaches, or supplement with an identity management solution that you provide.</span></span>  
  
 <span data-ttu-id="9b91d-157">只有當您設定 Analysis Services 進行 HTTP 存取，並且使用 IIS 和 msmdpump.dll 來建立連接時，才能使用基本和匿名驗證。</span><span class="sxs-lookup"><span data-stu-id="9b91d-157">Basic and Anonymous are available only when you configure Analysis Services for HTTP access, using IIS and the msmdpump.dll to establish the connection.</span></span> <span data-ttu-id="9b91d-158">如需詳細資訊，請參閱 [設定 Internet Information Services &#40;IIS&#41; 8.0 上 Analysis Services 的 HTTP 存取](configure-http-access-to-analysis-services-on-iis-8-0.md)(Microsoft BI 驗證及識別委派)。</span><span class="sxs-lookup"><span data-stu-id="9b91d-158">For more information, see [Configure HTTP Access to Analysis Services on Internet Information Services &#40;IIS&#41; 8.0](configure-http-access-to-analysis-services-on-iis-8-0.md).</span></span>  
  
 <span data-ttu-id="9b91d-159">**預存認證**</span><span class="sxs-lookup"><span data-stu-id="9b91d-159">**Stored Credentials**</span></span>  
  
 <span data-ttu-id="9b91d-160">大部分中介層應用程式服務都能夠儲存使用者名稱和密碼，然後再用來從下層資料存放區 (例如 Analysis Services 或 SQL Server 關聯式引擎) 擷取資料。</span><span class="sxs-lookup"><span data-stu-id="9b91d-160">Most middle tier application services include functionality for storing a user name and password subsequently used to retrieve data from a down-level data store, such as Analysis Services or the SQL Server relational engine.</span></span> <span data-ttu-id="9b91d-161">因此，預存認證提供了第五種替代方案，可用於擷取資料。</span><span class="sxs-lookup"><span data-stu-id="9b91d-161">As such, stored credentials provide a fifth alternative for retrieving data.</span></span> <span data-ttu-id="9b91d-162">這種方法的限制包括將使用者名稱和密碼保持在最新狀態的相關維護負擔，以及將單一識別用於連接的作法。</span><span class="sxs-lookup"><span data-stu-id="9b91d-162">Limitations with this approach include maintenance overhead associated with keeping user names and passwords up to date, and the use of a single identity on the connection.</span></span> <span data-ttu-id="9b91d-163">如果您的方案需要原始呼叫端的識別，則預存認證就不會是可行的替代方案。</span><span class="sxs-lookup"><span data-stu-id="9b91d-163">If your solution requires the identity of the original caller, then stored credentials would not be a viable alternative.</span></span>  
  
 <span data-ttu-id="9b91d-164">如需預存認證的詳細資訊，請參閱[建立、修改及刪除共用資料來源 &#40;SSRS&#41;](../../reporting-services/report-data/create-modify-and-delete-shared-data-sources-ssrs.md) 和 [Use Excel Services with Secure Store Service in SharePoint Server 2013](https://go.microsoft.com/fwlink/?LinkID=309869) (在 SharePoint Server 2013 中使用 Excel Services 搭配 Secure Store Service)。</span><span class="sxs-lookup"><span data-stu-id="9b91d-164">For more information about stored credentials, see [Create, Modify, and Delete Shared Data Sources &#40;SSRS&#41;](../../reporting-services/report-data/create-modify-and-delete-shared-data-sources-ssrs.md) and [Use Excel Services with Secure Store Service in SharePoint Server 2013](https://go.microsoft.com/fwlink/?LinkID=309869).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="9b91d-165">另請參閱</span><span class="sxs-lookup"><span data-stu-id="9b91d-165">See Also</span></span>  
 <span data-ttu-id="9b91d-166">[使用模擬搭配傳輸安全性](https://go.microsoft.com/fwlink/?LinkId=311727) </span><span class="sxs-lookup"><span data-stu-id="9b91d-166">[Using Impersonation with Transport Security](https://go.microsoft.com/fwlink/?LinkId=311727) </span></span>  
 <span data-ttu-id="9b91d-167">[在 Internet Information Services &#40;IIS&#41; 8.0 上設定 Analysis Services 的 HTTP 存取](configure-http-access-to-analysis-services-on-iis-8-0.md) </span><span class="sxs-lookup"><span data-stu-id="9b91d-167">[Configure HTTP Access to Analysis Services on Internet Information Services &#40;IIS&#41; 8.0](configure-http-access-to-analysis-services-on-iis-8-0.md) </span></span>  
 <span data-ttu-id="9b91d-168">[設定 Kerberos 限制委派的 Analysis Services](configure-analysis-services-for-kerberos-constrained-delegation.md) </span><span class="sxs-lookup"><span data-stu-id="9b91d-168">[Configure Analysis Services for Kerberos constrained delegation](configure-analysis-services-for-kerberos-constrained-delegation.md) </span></span>  
 <span data-ttu-id="9b91d-169">[Analysis Services 實例的 SPN 註冊](spn-registration-for-an-analysis-services-instance.md) </span><span class="sxs-lookup"><span data-stu-id="9b91d-169">[SPN registration for an Analysis Services instance](spn-registration-for-an-analysis-services-instance.md) </span></span>  
 [<span data-ttu-id="9b91d-170">連接到 Analysis Services</span><span class="sxs-lookup"><span data-stu-id="9b91d-170">Connect to Analysis Services</span></span>](connect-to-analysis-services.md)  
  
  
