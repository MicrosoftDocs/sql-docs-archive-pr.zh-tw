---
title: 執行緒集區屬性 |Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
helpviewer_keywords:
- PriorityRatio property
- threads [Analysis Services]
- MinThreads property
- NumThreads property
- MaxThreads property
- Concurrency property
ms.assetid: e2697bb6-6d3f-4621-b9fd-575ac39c2185
author: minewiskan
ms.author: owend
ms.openlocfilehash: 3a7c8ab1ae97cc00e7c46060db85fa48eff700ab
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87705529"
---
# <a name="thread-pool-properties"></a><span data-ttu-id="c4d0b-102">執行緒集區屬性</span><span class="sxs-lookup"><span data-stu-id="c4d0b-102">Thread Pool Properties</span></span>
  [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] <span data-ttu-id="c4d0b-103">為許多作業使用多執行緒處理，透過平行執行多個作業改善整體伺服器效能。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-103">uses multi-threading for many operations, improving overall server performance by running multiple jobs in parallel.</span></span> <span data-ttu-id="c4d0b-104">為了更有效率地管理執行緒， [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 使用執行緒集區預先配置執行緒，以使下一個作業有可用的執行緒。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-104">To manage threads more efficiently, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] uses thread pools to preallocate threads and facilitate thread availability for the next job.</span></span>

 <span data-ttu-id="c4d0b-105">每個 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 執行個體各自維護一組執行緒集區。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-105">Each instance of [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] maintains its own set of thread pools.</span></span> <span data-ttu-id="c4d0b-106">表格式執行個體和多維度執行個體使用執行緒集區的方式大不相同。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-106">There are significant differences in how tabular and multidimensional instances use thread pools.</span></span> <span data-ttu-id="c4d0b-107">最重要的差異是，只有多維度方案才會使用 `IOProcess` 執行緒集區。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-107">The most important difference is that only multidimensional solutions use the `IOProcess` thread pool.</span></span> <span data-ttu-id="c4d0b-108">因此，本主題中描述的 `PerNumaNode` 屬性，對表格式執行個體沒有意義。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-108">As such, the `PerNumaNode` property, described in this topic, is not meaningful for Tabular instances.</span></span>

 <span data-ttu-id="c4d0b-109">本主題包含下列幾節：</span><span class="sxs-lookup"><span data-stu-id="c4d0b-109">This topic contains the following sections:</span></span>

-   [<span data-ttu-id="c4d0b-110">Analysis Services 的執行緒管理</span><span class="sxs-lookup"><span data-stu-id="c4d0b-110">Thread Management in Analysis Services</span></span>](#bkmk_threadarch)

-   [<span data-ttu-id="c4d0b-111">執行緒集區屬性參考</span><span class="sxs-lookup"><span data-stu-id="c4d0b-111">Thread Pool Property Reference</span></span>](#bkmk_propref)

-   [<span data-ttu-id="c4d0b-112">將 GroupAffinity 設定為將相似化為執行緒至處理器群組中的處理器</span><span class="sxs-lookup"><span data-stu-id="c4d0b-112">Set GroupAffinity to affinitize threads to processors in a processor group</span></span>](#bkmk_groupaffinity)

-   [<span data-ttu-id="c4d0b-113">設定 PerNumaNode 將 IO 執行緒相似化為 NUMA 節點中的處理器</span><span class="sxs-lookup"><span data-stu-id="c4d0b-113">Set PerNumaNode to affinitize IO threads to processors in a NUMA node</span></span>](#bkmk_pernumanode)

-   [<span data-ttu-id="c4d0b-114">判斷目前的執行緒集區設定</span><span class="sxs-lookup"><span data-stu-id="c4d0b-114">Determine current thread pool settings</span></span>](#bkmk_currentsettings)

-   [<span data-ttu-id="c4d0b-115">相依或相關屬性</span><span class="sxs-lookup"><span data-stu-id="c4d0b-115">Dependent or Related Properties</span></span>](#bkmk_related)

-   [<span data-ttu-id="c4d0b-116">關於 MSMDSRV.INI</span><span class="sxs-lookup"><span data-stu-id="c4d0b-116">About MSMDSRV.INI</span></span>](#bkmk_msmdrsrvini)

> [!NOTE]
>  <span data-ttu-id="c4d0b-117">NUMA 系統上的表格式部署超出本主題的範圍。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-117">Tabular deployment on NUMA systems is out of scope for this topic.</span></span> <span data-ttu-id="c4d0b-118">雖然表格式方案可以在 NUMA 系統上成功部署，但是表格式模型使用之記憶體中資料庫技術的效能特性在高度向上延展的架構上成效有限。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-118">Although tabular solutions can be successfully deployed on NUMA systems, the performance characteristics of the in-memory database technology used by tabular models may show limited benefits on a highly scaled up architectures.</span></span> <span data-ttu-id="c4d0b-119">如需詳細資訊，請參閱 [Analysis Services Case Study: Using Tabular Models in Large-scale Commercial Solutions](https://msdn.microsoft.com/library/dn751533.aspx) (Analysis Services 案例研究：在大規模商業解決方案中使用表格式模型) 和 [Hardware Sizing a Tabular Solution](https://go.microsoft.com/fwlink/?LinkId=330359)(調整表格式解決方案的硬體)。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-119">For more information, see [Analysis Services Case Study: Using Tabular Models in Large-scale Commercial Solutions](https://msdn.microsoft.com/library/dn751533.aspx) and [Hardware Sizing a Tabular Solution](https://go.microsoft.com/fwlink/?LinkId=330359).</span></span>

##  <a name="thread-management-in-analysis-services"></a><a name="bkmk_threadarch"></a><span data-ttu-id="c4d0b-120">Analysis Services 中的執行緒管理</span><span class="sxs-lookup"><span data-stu-id="c4d0b-120">Thread Management in Analysis Services</span></span>
 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] <span data-ttu-id="c4d0b-121">使用多執行緒處理，透過增加平行執行的工作數，利用可用的 CPU 資源。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-121">uses multi-threading to take advantage of the available CPU resources by increasing the number of tasks executing in parallel.</span></span> <span data-ttu-id="c4d0b-122">儲存引擎是多執行緒。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-122">The storage engine is multi-threaded.</span></span> <span data-ttu-id="c4d0b-123">在儲存引擎內執行的多執行緒作業範例包含平行處理物件、處理發送至儲存引擎的個別查詢，或傳回查詢所要求的資料值。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-123">Examples of multi-threaded jobs that execute within the storage engine include processing objects in parallel or handling discrete queries that have been pushed to the storage engine, or returning data values requested by a query.</span></span> <span data-ttu-id="c4d0b-124">公式引擎由於其評估之計算的序列本質，是單一執行緒。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-124">The formula engine, due to the serial nature of the calculations it evaluates, is single threaded.</span></span> <span data-ttu-id="c4d0b-125">每個查詢主要會在單一執行緒上執行，並要求 (且通常需要等候) 儲存引擎傳回資料。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-125">Each query executes primarily on a single thread, requesting and often waiting for data returned by the storage engine.</span></span> <span data-ttu-id="c4d0b-126">查詢執行緒的執行時間較長，並且僅在完成整個查詢之後釋出。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-126">Query threads have longer executions, and are released only after the entire query is completed.</span></span>

 <span data-ttu-id="c4d0b-127">在 [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] 及更新版本上， [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 預設會使用所有可用的邏輯處理器，最多可在執行更高版本 Windows 和 SQL Server 的系統上有 640 個處理器。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-127">By default, on versions [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] and later, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] will use all available logical processors, up to 640 on systems running higher editions of Windows and SQL Server.</span></span> <span data-ttu-id="c4d0b-128">在啟動時，會將 msmdsrv.exe 處理序指派給特定處理器群組，但是經過一段時間後，便可在任何處理器群組中的任何邏輯處理器上排程執行緒。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-128">Upon start up, the msmdsrv.exe process will be assigned to a specific processor group, but over time threads can be scheduled on any logical processor, in any processor group.</span></span>

 <span data-ttu-id="c4d0b-129">使用大量處理器的一個副作用是當查詢和處理負載擴展到大量處理器，且對共用資料結構的競爭增加時，效能有時可能會降低。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-129">One side-effect of using a large number of processors is that you can sometimes experience performance degradation as query and processing loads are spread out across a large number of processors and contention for shared data structures increase.</span></span> <span data-ttu-id="c4d0b-130">在使用 NUMA 架構的高階系統上，特別容易發生這個問題，但在相同硬體上執行多個資料密集應用程式的非 NUMA 系統上，也可能發生這個問題。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-130">This can occur particularly on high-end systems that use NUMA architecture, but also on non-NUMA systems running multiple data intensive applications on the same hardware.</span></span>

 <span data-ttu-id="c4d0b-131">若要減少此問題，您可以設定 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 作業類型與一組特定的邏輯處理器之間的相似性。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-131">To alleviate this problem, you can set affinity between types of [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] operations and a specific set of logical processors.</span></span> <span data-ttu-id="c4d0b-132">`GroupAffinity` 屬性可讓您建立自訂相似性遮罩，指定哪個系統資源用於 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 所管理的每一個執行緒集區類型。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-132">The `GroupAffinity` property lets you create custom affinity masks that specify which system resource to use for each of the thread pool types managed by [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)].</span></span>

 <span data-ttu-id="c4d0b-133">您可以在用於各種 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 工作負載的五個執行緒集區之一設定自訂相似性：</span><span class="sxs-lookup"><span data-stu-id="c4d0b-133">Custom affinity can be set on any of the five thread pools used for various [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] workloads:</span></span>

-   <span data-ttu-id="c4d0b-134">**簡短剖析**  是適用於簡短要求的剖析集區。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-134">**Parsing \ Short**  is a parsing pool for short requests.</span></span> <span data-ttu-id="c4d0b-135">大小符合單一網路訊息的要求視為簡短要求。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-135">Requests that fit within a single network message are considered short.</span></span>

-   <span data-ttu-id="c4d0b-136">**完整剖析**  是適用於大小不符合單一網路訊息之其他所有要求的剖析集區。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-136">**Parsing \ Long**  is a parsing pool for all other requests that do not fit within a single network message.</span></span>

    > [!NOTE]
    >  <span data-ttu-id="c4d0b-137">您可以使用任何剖析集區中的執行緒來執行查詢。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-137">A thread from either parsing pool can be used to execute a query.</span></span> <span data-ttu-id="c4d0b-138">快速執行的查詢 (例如快速探索或取消要求) 有時會立即執行，而不會排入查詢執行緒集區的佇列中。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-138">Queries that execute quickly, such as a fast Discover or Cancel request, are sometimes executed immediately rather than queued to the Query thread pool.</span></span>

-   <span data-ttu-id="c4d0b-139">`Query`這是執行剖析執行緒集區不會處理之所有要求的執行緒集區。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-139">`Query` is the thread pool that executes all requests that are not handled by the parsing thread pool.</span></span> <span data-ttu-id="c4d0b-140">此執行緒集區中的執行緒會執行所有類型的作業，例如探索、DAX、MDX、DMX 和 DDL 命令。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-140">Threads in this thread pool will execute all types of operations, such as Discovers, MDX, DAX, DMX, and DDL commands.</span></span>

-   <span data-ttu-id="c4d0b-141">`IOProcess`用於與多維度引擎中之儲存引擎查詢相關聯的 IO 作業。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-141">`IOProcess` is used for IO jobs associated with storage engine queries in the multidimensional engine.</span></span> <span data-ttu-id="c4d0b-142">這些執行緒完成的工作預期不會相依於其他執行緒。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-142">The work done by these threads is expected to not have dependencies on other threads.</span></span> <span data-ttu-id="c4d0b-143">這些執行緒通常會掃描單一分割區區段，並對區段資料執行篩選和彙總。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-143">These threads will typically be scanning a single segment of a partition and performing filtering and aggregation on the segment data.</span></span> <span data-ttu-id="c4d0b-144">`IOProcess`執行緒對 NUMA 硬體設定特別敏感。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-144">`IOProcess` threads are particularly sensitive to NUMA hardware configurations.</span></span> <span data-ttu-id="c4d0b-145">因此，此執行緒集區有設定 `PerNumaNode` 屬性，可在需要時用來微調效能。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-145">As such, this thread pool has the `PerNumaNode` configuration property which can be used to tune the performance if needed.</span></span>

-   <span data-ttu-id="c4d0b-146">`Process`適用于持續時間較長的儲存引擎工作，包括匯總、索引和認可作業。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-146">`Process` is for longer duration storage engine jobs, including aggregations, indexing, and commit operations.</span></span> <span data-ttu-id="c4d0b-147">ROLAP 儲存模式也會使用處理執行緒集區中的執行緒。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-147">ROLAP storage mode also uses threads from the Processing thread pool.</span></span>

> [!NOTE]
>  <span data-ttu-id="c4d0b-148">雖然 Msmdsrv.ini 在區段中具有線程集 `VertiPaq` 區設定，但 `VertiPaq` \\ `ThreadPool` \\ `GroupAffinity` `ThreadPool` \\ `CPUs` 刻意記載。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-148">Although Msmdsrv.ini has thread pool settings in the `VertiPaq` section, `VertiPaq`\\`ThreadPool`\\`GroupAffinity` and `ThreadPool`\\`CPUs` are purposely undocumented.</span></span> <span data-ttu-id="c4d0b-149">這些屬性目前無法作業，將保留供日後使用。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-149">These properties are currently inoperative and are reserved for future use.</span></span>

 <span data-ttu-id="c4d0b-150">為了服務要求， [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 可能會超過最大執行緒集區限制，並在需要額外的執行緒以執行工作時，要求這些執行緒。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-150">To service requests, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] may exceed the maximum thread pool limit, requesting additional threads if they are necessary to perform the work.</span></span> <span data-ttu-id="c4d0b-151">不過，當執行緒完成執行其工作時，如果目前的執行緒計數大於上限，該執行緒會直接結束，而不會傳回執行緒集區。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-151">However, when a thread finishes executing its task, if the current count of threads is greater than the maximum limit, the thread is simply ended, rather than returned to the thread pool.</span></span>

> [!NOTE]
>  <span data-ttu-id="c4d0b-152">超過最大執行緒集區計數是一項保護措施，只有在發生特定死結狀況時才會起作用。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-152">Exceeding the maximum thread pool count is a protection invoked only when certain deadlock conditions arise.</span></span> <span data-ttu-id="c4d0b-153">若要避免失控的執行緒建立超過上限，執行緒在達到這個上限之後會逐步 (在一小段延遲之後) 建立。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-153">To prevent runaway thread creation beyond the maximum, threads are created gradually (after a short delay) after the maximum limit has been reached.</span></span> <span data-ttu-id="c4d0b-154">超過最大執行緒計數時，可能導致工作執行的速度變慢。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-154">Exceeding maximum thread count can lead to a slowdown in task execution.</span></span> <span data-ttu-id="c4d0b-155">如果效能計數器顯示執行緒計數經常超出執行緒集區大小上限，可能就意味著執行緒集區大小過低而不足以應付系統所要求的並行程度。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-155">If the performance counters show the thread counts are regularly beyond the thread pool maximum size, you might consider that as an indicator that thread pool sizes are too small for the degree of concurrency being requested from the system.</span></span>

 <span data-ttu-id="c4d0b-156">根據預設，執行緒集區大小取決於 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)]，並以核心數目為依據。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-156">By default, thread pool size is determined by [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)], and is based on the number of cores.</span></span> <span data-ttu-id="c4d0b-157">您可以在伺服器啟動之後檢查 msmdsrv.log 檔案，以觀察選取的預設值。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-157">You can observe the selected default values by examining the msmdsrv.log file after server startup.</span></span> <span data-ttu-id="c4d0b-158">當您練習微調效能時，您可以選擇增加執行緒集區及其他屬性的大小，以提升查詢或處理效能。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-158">As a performance tuning exercise, you might choose to increase the size of the thread pool, as well as other properties, to improve query or processing performance.</span></span>

##  <a name="thread-pool-property-reference"></a><a name="bkmk_propref"></a><span data-ttu-id="c4d0b-159">執行緒集區屬性參考</span><span class="sxs-lookup"><span data-stu-id="c4d0b-159">Thread Pool Property Reference</span></span>
 <span data-ttu-id="c4d0b-160">本節描述每個 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 執行個體之 msmdsrv.ini 檔案中的執行緒集區屬性。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-160">This section describes the thread pool properties found in the msmdsrv.ini file of each [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] instance.</span></span> <span data-ttu-id="c4d0b-161">這些屬性的子集也會出現在 SQL Server Management Studio 中。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-161">A subset of these properties also appears in SQL Server Management Studio.</span></span>

 <span data-ttu-id="c4d0b-162">屬性是依照字母順序列出。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-162">Properties are listed in alphabetical order.</span></span>

|<span data-ttu-id="c4d0b-163">名稱</span><span class="sxs-lookup"><span data-stu-id="c4d0b-163">Name</span></span>|<span data-ttu-id="c4d0b-164">類型</span><span class="sxs-lookup"><span data-stu-id="c4d0b-164">Type</span></span>|<span data-ttu-id="c4d0b-165">描述</span><span class="sxs-lookup"><span data-stu-id="c4d0b-165">Description</span></span>|<span data-ttu-id="c4d0b-166">預設</span><span class="sxs-lookup"><span data-stu-id="c4d0b-166">Default</span></span>|<span data-ttu-id="c4d0b-167">指引</span><span class="sxs-lookup"><span data-stu-id="c4d0b-167">Guidance</span></span>|
|----------|----------|-----------------|-------------|--------------|
|`IOProcess` \ `Concurrency`|<span data-ttu-id="c4d0b-168">double</span><span class="sxs-lookup"><span data-stu-id="c4d0b-168">double</span></span>|<span data-ttu-id="c4d0b-169">此為雙精確度浮點數值，決定可以一次佇列之執行緒數目的設定目標演算法。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-169">A double-precision floating point value that determines the algorithm for setting a target on the number of threads that can be queued at one time.</span></span>|<span data-ttu-id="c4d0b-170">2.0</span><span class="sxs-lookup"><span data-stu-id="c4d0b-170">2.0</span></span>|<span data-ttu-id="c4d0b-171">此為進階屬性，除非在 [!INCLUDE[msCoName](../../includes/msconame-md.md)] 技術支援的指導之下，否則不應隨意變更。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-171">An advanced property that you should not change, except under the guidance of [!INCLUDE[msCoName](../../includes/msconame-md.md)] support.</span></span><br /><br /> <span data-ttu-id="c4d0b-172">並行可用來初始化執行緒集區，會透過 Windows 的 I/O 完成通訊埠來實作。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-172">Concurrency is used to initialize thread pools, which are implemented using IO Completion Ports in Windows.</span></span> <span data-ttu-id="c4d0b-173">如需詳細資料，請參閱 [I/O 完成連接埠](https://msdn.microsoft.com/library/windows/desktop/aa365198\(v=vs.85\).aspx) 。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-173">See [I/O Completion Ports](https://msdn.microsoft.com/library/windows/desktop/aa365198\(v=vs.85\).aspx) for details.</span></span><br /><br /> <span data-ttu-id="c4d0b-174">僅適用於多維度模型。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-174">Applies to multidimensional models only.</span></span>|
|`IOProcess` \ `GroupAffinity`|<span data-ttu-id="c4d0b-175">字串</span><span class="sxs-lookup"><span data-stu-id="c4d0b-175">string</span></span>|<span data-ttu-id="c4d0b-176">對應至系統上之處理器群組的十六進位值陣列，可用來設定 IOProcess 執行緒集區中的執行緒與每個處理器群組中的邏輯處理器之相似性。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-176">An array of hexadecimal values that correspond to processor groups on the system, used to set affinity of threads in the IOProcess thread pool to logical processors in each processor group.</span></span>|<span data-ttu-id="c4d0b-177">無</span><span class="sxs-lookup"><span data-stu-id="c4d0b-177">none</span></span>|<span data-ttu-id="c4d0b-178">您可以使用此屬性來建立自訂相似性。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-178">You can use this property to create custom affinities.</span></span> <span data-ttu-id="c4d0b-179">此屬性預設為空白。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-179">The property is empty by default.</span></span><br /><br /> <span data-ttu-id="c4d0b-180">如需詳細資訊，請參閱＜ [設定 GroupAffinity 將執行緒相似化為處理器群組中的處理器](#bkmk_groupaffinity) ＞。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-180">See [Set GroupAffinity to affinitize threads to processors in a processor group](#bkmk_groupaffinity) for details.</span></span><br /><br /> <span data-ttu-id="c4d0b-181">僅適用於多維度模型。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-181">Applies to multidimensional models only.</span></span>|
|`IOProcess` \ `MaxThreads`|<span data-ttu-id="c4d0b-182">int</span><span class="sxs-lookup"><span data-stu-id="c4d0b-182">int</span></span>|<span data-ttu-id="c4d0b-183">此為帶正負號的 32 位元整數，指定要包含在執行緒集區中的執行緒數目上限。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-183">A signed 32-bit integer that specifies the maximum number of threads to include in the thread pool.</span></span>|<span data-ttu-id="c4d0b-184">0</span><span class="sxs-lookup"><span data-stu-id="c4d0b-184">0</span></span>|<span data-ttu-id="c4d0b-185">0 表示由伺服器決定預設值。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-185">0 indicates the server determines the defaults.</span></span> <span data-ttu-id="c4d0b-186">根據預設，伺服器將此值設定為 64，或設定為邏輯處理器數目的 10 倍 (以較高者為準)。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-186">By default, the server either sets this value to 64, or to 10 times the number of logical processors, whichever is higher.</span></span> <span data-ttu-id="c4d0b-187">例如，在具有超執行緒的 4 核心系統上，執行緒集區最多為 80 個執行緒。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-187">For example, on a 4-core system with hyperthreading, the thread pool maximum is 80 threads.</span></span><br /><br /> <span data-ttu-id="c4d0b-188">如果將此值設定為負值，則伺服器會將該值乘以邏輯處理器的數目。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-188">If you set this value to a negative value, the server multiples that value by the number of logical processors.</span></span> <span data-ttu-id="c4d0b-189">例如，若在具有 32 個邏輯處理器的伺服器上設定為 -10，最大值是 320 個執行緒。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-189">For example, when set to -10 on a server having 32 logical processors, the maximum is 320 threads.</span></span><br /><br /> <span data-ttu-id="c4d0b-190">最大值會根據您先前定義的任何自訂相似性遮罩而受限於可用的處理器。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-190">The maximum value is subject to available processors per any custom affinity masks that you previously defined.</span></span> <span data-ttu-id="c4d0b-191">例如，如果您已設定執行緒集區相似性使用 32 個處理器的其中 8 個，而您現在將 MaxThreads 設定為 -10，執行緒集區的上限就是 10 乘以 8，即 80 個執行緒。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-191">For example, if you already set thread pool affinity to use 8 out of 32 processors, and you now set MaxThreads to -10, then the upper bound on the thread pool would 10 times 8, or 80 threads.</span></span><br /><br /> <span data-ttu-id="c4d0b-192">此執行緒集區屬性所使用的實際值會在服務啟動時寫入 msmdsrv 記錄檔。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-192">The actual values used for this thread pool property are written to the msmdsrv log file upon service start up.</span></span><br /><br /> <span data-ttu-id="c4d0b-193">如需微調執行緒集區設定的詳細資訊，請參閱《 [Analysis Services 操作指南](https://msdn.microsoft.com/library/hh226085.aspx)》。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-193">More information about tuning the thread pool settings can be found in the [Analysis Services Operations Guide](https://msdn.microsoft.com/library/hh226085.aspx).</span></span><br /><br /> <span data-ttu-id="c4d0b-194">僅適用於多維度模型。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-194">Applies to multidimensional models only.</span></span>|
|`IOProcess` \ `MinThreads`|<span data-ttu-id="c4d0b-195">int</span><span class="sxs-lookup"><span data-stu-id="c4d0b-195">int</span></span>|<span data-ttu-id="c4d0b-196">此為帶正負號的 32 位元整數，指定要預先配置在執行緒集區中的執行緒數目下限。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-196">A signed 32-bit integer that specifies the minimum number of threads to preallocate for the thread pool.</span></span>|<span data-ttu-id="c4d0b-197">0</span><span class="sxs-lookup"><span data-stu-id="c4d0b-197">0</span></span>|<span data-ttu-id="c4d0b-198">0 表示由伺服器決定預設值。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-198">0 indicates the server determines the defaults.</span></span> <span data-ttu-id="c4d0b-199">預設的最小值是 1。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-199">By default, the minimum is 1.</span></span><br /><br /> <span data-ttu-id="c4d0b-200">如果將此值設定為負值，則伺服器會將該值乘以邏輯處理器的數目。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-200">If you set this value to a negative value, the server multiples that value by the number of logical processors.</span></span><br /><br /> <span data-ttu-id="c4d0b-201">此執行緒集區屬性所使用的實際值會在服務啟動時寫入 msmdsrv 記錄檔。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-201">The actual values used for this thread pool property are written to the msmdsrv log file upon service start up.</span></span><br /><br /> <span data-ttu-id="c4d0b-202">如需微調執行緒集區設定的詳細資訊，請參閱《 [Analysis Services 操作指南](https://msdn.microsoft.com/library/hh226085.aspx)》。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-202">More information about tuning the thread pool settings can be found in the [Analysis Services Operations Guide](https://msdn.microsoft.com/library/hh226085.aspx).</span></span><br /><br /> <span data-ttu-id="c4d0b-203">僅適用於多維度模型。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-203">Applies to multidimensional models only.</span></span>|
|`IOProcess` \ `PerNumaNode`|<span data-ttu-id="c4d0b-204">int</span><span class="sxs-lookup"><span data-stu-id="c4d0b-204">int</span></span>|<span data-ttu-id="c4d0b-205">此為帶正負號的 32 位元整數，決定為 msmdsrv 處理序建立的執行緒集區數目。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-205">A signed 32-bit integer that determines the number of thread pools created for the msmdsrv process.</span></span>|<span data-ttu-id="c4d0b-206">-1</span><span class="sxs-lookup"><span data-stu-id="c4d0b-206">-1</span></span>|<span data-ttu-id="c4d0b-207">有效值為 -1、0、1、2。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-207">Valid values are -1, 0, 1, 2</span></span><br /><br /> <span data-ttu-id="c4d0b-208">-1 = 伺服器根據 NUMA 節點數目選取不同的 IO 執行緒集區策略。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-208">-1 = The server selects a different IO Thread Pool strategy based on the number of NUMA nodes.</span></span> <span data-ttu-id="c4d0b-209">在具有少於 4 個 NUMA 節點的系統上，伺服器行為與 0 相同 (為系統建立一個 IOProcess 執行緒集區)。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-209">On systems having fewer than 4 NUMA nodes, the server behavior is the same as 0 (one IOProcess thread pool is created for the system).</span></span> <span data-ttu-id="c4d0b-210">在具有 4 個 (含) 以上節點的系統上，其行為與 1 相同 (為每個節點建立 IOProcess 執行緒集區)。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-210">On systems having 4 or more nodes, the behavior is the same as 1 (IOProcess thread pools are created for each node).</span></span><br /><br /> <span data-ttu-id="c4d0b-211">0 = 停用每個 NUMA 節點執行緒集區，因此只有一個 IOProcess 執行緒集區供 msmdsrv.exe 處理序使用。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-211">0 = Disables per NUMA node thread pools so that there is only one IOProcess thread pool used by the msmdsrv.exe process.</span></span><br /><br /> <span data-ttu-id="c4d0b-212">1 = 為每個 NUMA 節點啟用一個 IOProcess 執行緒集區。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-212">1 = Enables one IOProcess thread pool per NUMA node.</span></span><br /><br /> <span data-ttu-id="c4d0b-213">2 = 為每個邏輯處理器啟用一個 IOProcess 執行緒集區。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-213">2 = One IOProcess thread pool per logical processor.</span></span> <span data-ttu-id="c4d0b-214">每個執行緒集區中的執行緒會相似化為邏輯處理器的 NUMA 節點，並將理想的處理器設為邏輯處理器。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-214">Threads in each thread pool are affinitized to the NUMA node of the logical processor, with the ideal processor set to the logical processor.</span></span><br /><br /> <span data-ttu-id="c4d0b-215">如需詳細資訊，請參閱＜ [設定 PerNumaNode 將 IO 執行緒相似化為 NUMA 節點中的處理器](#bkmk_pernumanode) ＞。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-215">See [Set PerNumaNode to affinitize IO threads to processors in a NUMA node](#bkmk_pernumanode) for details.</span></span><br /><br /> <span data-ttu-id="c4d0b-216">僅適用於多維度模型。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-216">Applies to multidimensional models only.</span></span>|
|`IOProcess` \ `PriorityRatio`|<span data-ttu-id="c4d0b-217">int</span><span class="sxs-lookup"><span data-stu-id="c4d0b-217">int</span></span>|<span data-ttu-id="c4d0b-218">此為帶正負號的 32 位元整數，可用來確保偶爾執行較低優先權的執行緒，即使較高優先權的佇列不是空的。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-218">A signed 32-bit integer that can be used to ensure that lower priority threads are sometimes executed even when a higher priority queue is not empty.</span></span>|<span data-ttu-id="c4d0b-219">2</span><span class="sxs-lookup"><span data-stu-id="c4d0b-219">2</span></span>|<span data-ttu-id="c4d0b-220">此為進階屬性，除非在 [!INCLUDE[msCoName](../../includes/msconame-md.md)] 技術支援的指導之下，否則不應隨意變更。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-220">An advanced property that you should not change, except under the guidance of [!INCLUDE[msCoName](../../includes/msconame-md.md)] support.</span></span><br /><br /> <span data-ttu-id="c4d0b-221">僅適用於多維度模型。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-221">Applies to multidimensional models only.</span></span>|
|`IOProcess` \ `StackSizeKB`|<span data-ttu-id="c4d0b-222">int</span><span class="sxs-lookup"><span data-stu-id="c4d0b-222">int</span></span>|<span data-ttu-id="c4d0b-223">此為帶正負號的 32 位元整數，可在執行緒執行時用於調整記憶體配置。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-223">A signed 32-bit integer that can be used to adjust memory allocation during thread execution.</span></span>|<span data-ttu-id="c4d0b-224">0</span><span class="sxs-lookup"><span data-stu-id="c4d0b-224">0</span></span>|<span data-ttu-id="c4d0b-225">此為進階屬性，除非在 [!INCLUDE[msCoName](../../includes/msconame-md.md)] 技術支援的指導之下，否則不應隨意變更。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-225">An advanced property that you should not change, except under the guidance of [!INCLUDE[msCoName](../../includes/msconame-md.md)] support.</span></span><br /><br /> <span data-ttu-id="c4d0b-226">僅適用於多維度模型。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-226">Applies to multidimensional models only.</span></span>|
|<span data-ttu-id="c4d0b-227">**Xdr**  \ `Long` \ `Concurrency`</span><span class="sxs-lookup"><span data-stu-id="c4d0b-227">**Parsing**  \ `Long` \ `Concurrency`</span></span>|<span data-ttu-id="c4d0b-228">double</span><span class="sxs-lookup"><span data-stu-id="c4d0b-228">double</span></span>|<span data-ttu-id="c4d0b-229">此為雙精確度浮點數值，決定可以一次佇列之執行緒數目的設定目標演算法。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-229">A double-precision floating point value that determines the algorithm for setting a target on the number of threads that can be queued at one time.</span></span>|<span data-ttu-id="c4d0b-230">2.0</span><span class="sxs-lookup"><span data-stu-id="c4d0b-230">2.0</span></span>|<span data-ttu-id="c4d0b-231">此為進階屬性，除非在 [!INCLUDE[msCoName](../../includes/msconame-md.md)] 技術支援的指導之下，否則不應隨意變更。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-231">An advanced property that you should not change, except under the guidance of [!INCLUDE[msCoName](../../includes/msconame-md.md)] support.</span></span><br /><br /> <span data-ttu-id="c4d0b-232">並行可用來初始化執行緒集區，會透過 Windows 的 I/O 完成通訊埠來實作。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-232">Concurrency is used to initialize thread pools, which are implemented using IO Completion Ports in Windows.</span></span> <span data-ttu-id="c4d0b-233">如需詳細資料，請參閱 [I/O 完成連接埠](https://msdn.microsoft.com/library/windows/desktop/aa365198\(v=vs.85\).aspx) 。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-233">See [I/O Completion Ports](https://msdn.microsoft.com/library/windows/desktop/aa365198\(v=vs.85\).aspx) for details.</span></span>|
|<span data-ttu-id="c4d0b-234">**Xdr**  \ `Long` \ `GroupAffinity`</span><span class="sxs-lookup"><span data-stu-id="c4d0b-234">**Parsing**  \ `Long` \ `GroupAffinity`</span></span>|<span data-ttu-id="c4d0b-235">字串</span><span class="sxs-lookup"><span data-stu-id="c4d0b-235">string</span></span>|<span data-ttu-id="c4d0b-236">對應至系統上之處理器群組的十六進位值陣列，可用來設定剖析執行緒與每個處理器群組中的邏輯處理器之相似性。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-236">An array of hexadecimal values that correspond to processor groups on the system, used to set affinity of parsing threads to logical processors in each processor group.</span></span>|<span data-ttu-id="c4d0b-237">無</span><span class="sxs-lookup"><span data-stu-id="c4d0b-237">none</span></span>|<span data-ttu-id="c4d0b-238">您可以使用此屬性來建立自訂相似性。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-238">You can use this property to create custom affinities.</span></span> <span data-ttu-id="c4d0b-239">此屬性預設為空白。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-239">The property is empty by default.</span></span><br /><br /> <span data-ttu-id="c4d0b-240">如需詳細資訊，請參閱＜ [設定 GroupAffinity 將執行緒相似化為處理器群組中的處理器](#bkmk_groupaffinity) ＞。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-240">See [Set GroupAffinity to affinitize threads to processors in a processor group](#bkmk_groupaffinity) for details.</span></span>|
|<span data-ttu-id="c4d0b-241">**Xdr**  \ `Long` \ `NumThreads`</span><span class="sxs-lookup"><span data-stu-id="c4d0b-241">**Parsing**  \ `Long` \ `NumThreads`</span></span>|<span data-ttu-id="c4d0b-242">int</span><span class="sxs-lookup"><span data-stu-id="c4d0b-242">int</span></span>|<span data-ttu-id="c4d0b-243">此為帶正負號的 32 位元整數屬性，其中會定義可為冗長命令建立的執行緒數目。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-243">A signed 32-bit integer property that defines the number of threads that can be created for long commands.</span></span>|<span data-ttu-id="c4d0b-244">0</span><span class="sxs-lookup"><span data-stu-id="c4d0b-244">0</span></span>|<span data-ttu-id="c4d0b-245">0 表示由伺服器決定預設值。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-245">0 indicates that the server determines the defaults.</span></span> <span data-ttu-id="c4d0b-246">預設行為是將 `NumThreads` 設定為絕對值 4，或設定為邏輯處理器數目的 2 倍 (以較高者為準)。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-246">The default behavior is to set `NumThreads` to an absolute value of 4, or 2 times the number of logical processors, whichever is higher.</span></span><br /><br /> <span data-ttu-id="c4d0b-247">如果將此值設定為負值，則伺服器會將該值乘以邏輯處理器的數目。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-247">If you set this value to a negative value, the server multiples that value by the number of logical processors.</span></span> <span data-ttu-id="c4d0b-248">例如，若在具有 32 個邏輯處理器的伺服器上設定為 -10，最大值是 320 個執行緒。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-248">For example, when set to -10 on a server having 32 logical processors, the maximum is 320 threads.</span></span><br /><br /> <span data-ttu-id="c4d0b-249">最大值會根據您先前定義的任何自訂相似性遮罩而受限於可用的處理器。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-249">The maximum value is subject to available processors per any custom affinity masks that you previously defined.</span></span> <span data-ttu-id="c4d0b-250">例如，如果您已設定執行緒集區相似性使用 32 個處理器的其中 8 個，而您現在將 NumThreads 設定為 -10，執行緒集區的上限就是 10 乘以 8，即 80 個執行緒。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-250">For example, if you already set thread pool affinity to use 8 out of 32 processors, and you now set NumThreads to -10, then the upper bound on the thread pool would 10 times 8, or 80 threads.</span></span><br /><br /> <span data-ttu-id="c4d0b-251">此執行緒集區屬性所使用的實際值會在服務啟動時寫入 msmdsrv 記錄檔。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-251">The actual values used for this thread pool property are written to the msmdsrv log file upon service start up.</span></span>|
|<span data-ttu-id="c4d0b-252">**Xdr**  \ `Long` \ `PriorityRatio`</span><span class="sxs-lookup"><span data-stu-id="c4d0b-252">**Parsing**  \ `Long` \ `PriorityRatio`</span></span>|<span data-ttu-id="c4d0b-253">int</span><span class="sxs-lookup"><span data-stu-id="c4d0b-253">int</span></span>|<span data-ttu-id="c4d0b-254">此為帶正負號的 32 位元整數，可用來確保偶爾執行較低優先權的執行緒，即使較高優先權的佇列不是空的。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-254">A signed 32-bit integer that can be used to ensure that lower priority threads are sometimes executed even when a higher priority queue is not empty.</span></span>|<span data-ttu-id="c4d0b-255">0</span><span class="sxs-lookup"><span data-stu-id="c4d0b-255">0</span></span>|<span data-ttu-id="c4d0b-256">此為進階屬性，除非在 [!INCLUDE[msCoName](../../includes/msconame-md.md)] 技術支援的指導之下，否則不應隨意變更。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-256">An advanced property that you should not change, except under the guidance of [!INCLUDE[msCoName](../../includes/msconame-md.md)] support.</span></span>|
|<span data-ttu-id="c4d0b-257">**Xdr**  \ `Long` \ `StackSizeKB`</span><span class="sxs-lookup"><span data-stu-id="c4d0b-257">**Parsing**  \ `Long` \ `StackSizeKB`</span></span>|<span data-ttu-id="c4d0b-258">int</span><span class="sxs-lookup"><span data-stu-id="c4d0b-258">int</span></span>|<span data-ttu-id="c4d0b-259">此為帶正負號的 32 位元整數，可在執行緒執行時用於調整記憶體配置。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-259">A signed 32-bit integer that can be used to adjust memory allocation during thread execution.</span></span>|<span data-ttu-id="c4d0b-260">0</span><span class="sxs-lookup"><span data-stu-id="c4d0b-260">0</span></span>|<span data-ttu-id="c4d0b-261">此為進階屬性，除非在 [!INCLUDE[msCoName](../../includes/msconame-md.md)] 技術支援的指導之下，否則不應隨意變更。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-261">An advanced property that you should not change, except under the guidance of [!INCLUDE[msCoName](../../includes/msconame-md.md)] support.</span></span>|
|<span data-ttu-id="c4d0b-262">**Xdr**  \ `Short` \ `Concurrency`</span><span class="sxs-lookup"><span data-stu-id="c4d0b-262">**Parsing**  \ `Short` \ `Concurrency`</span></span>|<span data-ttu-id="c4d0b-263">double</span><span class="sxs-lookup"><span data-stu-id="c4d0b-263">double</span></span>|<span data-ttu-id="c4d0b-264">此為雙精確度浮點數值，決定可以一次佇列之執行緒數目的設定目標演算法。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-264">A double-precision floating point value that determines the algorithm for setting a target on the number of threads that can be queued at one time.</span></span>|<span data-ttu-id="c4d0b-265">2.0</span><span class="sxs-lookup"><span data-stu-id="c4d0b-265">2.0</span></span>|<span data-ttu-id="c4d0b-266">此為進階屬性，除非在 [!INCLUDE[msCoName](../../includes/msconame-md.md)] 技術支援的指導之下，否則不應隨意變更。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-266">An advanced property that you should not change, except under the guidance of [!INCLUDE[msCoName](../../includes/msconame-md.md)] support.</span></span><br /><br /> <span data-ttu-id="c4d0b-267">並行可用來初始化執行緒集區，會透過 Windows 的 I/O 完成通訊埠來實作。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-267">Concurrency is used to initialize thread pools, which are implemented using IO Completion Ports in Windows.</span></span> <span data-ttu-id="c4d0b-268">如需詳細資料，請參閱 [I/O 完成連接埠](https://msdn.microsoft.com/library/windows/desktop/aa365198\(v=vs.85\).aspx) 。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-268">See [I/O Completion Ports](https://msdn.microsoft.com/library/windows/desktop/aa365198\(v=vs.85\).aspx) for details.</span></span>|
|<span data-ttu-id="c4d0b-269">**Xdr**  \ `Short` \ `GroupAffinity`</span><span class="sxs-lookup"><span data-stu-id="c4d0b-269">**Parsing**  \ `Short` \ `GroupAffinity`</span></span>|<span data-ttu-id="c4d0b-270">字串</span><span class="sxs-lookup"><span data-stu-id="c4d0b-270">string</span></span>|<span data-ttu-id="c4d0b-271">對應至系統上之處理器群組的十六進位值陣列，可用來設定剖析執行緒與每個處理器群組中的邏輯處理器之相似性。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-271">An array of hexadecimal values that correspond to processor groups on the system, used to set affinity of parsing threads to logical processors in each processor group.</span></span>|<span data-ttu-id="c4d0b-272">無</span><span class="sxs-lookup"><span data-stu-id="c4d0b-272">none</span></span>|<span data-ttu-id="c4d0b-273">您可以使用此屬性來建立自訂相似性。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-273">You can use this property to create custom affinities.</span></span> <span data-ttu-id="c4d0b-274">此屬性預設為空白。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-274">The property is empty by default.</span></span><br /><br /> <span data-ttu-id="c4d0b-275">如需詳細資訊，請參閱＜ [設定 GroupAffinity 將執行緒相似化為處理器群組中的處理器](#bkmk_groupaffinity) ＞。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-275">See [Set GroupAffinity to affinitize threads to processors in a processor group](#bkmk_groupaffinity) for details.</span></span>|
|<span data-ttu-id="c4d0b-276">**Xdr**  \ `Short` \ `NumThreads`</span><span class="sxs-lookup"><span data-stu-id="c4d0b-276">**Parsing**  \ `Short` \ `NumThreads`</span></span>|<span data-ttu-id="c4d0b-277">int</span><span class="sxs-lookup"><span data-stu-id="c4d0b-277">int</span></span>|<span data-ttu-id="c4d0b-278">此為帶正負號的 32 位元整數屬性，其中會定義可為簡短命令建立的執行緒數目。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-278">A signed 32-bit integer property that defines the number of threads that can be created for short commands.</span></span>|<span data-ttu-id="c4d0b-279">0</span><span class="sxs-lookup"><span data-stu-id="c4d0b-279">0</span></span>|<span data-ttu-id="c4d0b-280">0 表示由伺服器決定預設值。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-280">0 indicates that the server determines the defaults.</span></span> <span data-ttu-id="c4d0b-281">預設行為是將 `NumThreads` 設定為絕對值 4，或設定為邏輯處理器數目的 2 倍 (以較高者為準)。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-281">The default behavior is to set `NumThreads` to an absolute value of 4, or 2 times the number of logical processors, whichever is higher.</span></span><br /><br /> <span data-ttu-id="c4d0b-282">如果將此值設定為負值，則伺服器會將該值乘以邏輯處理器的數目。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-282">If you set this value to a negative value, the server multiples that value by the number of logical processors.</span></span> <span data-ttu-id="c4d0b-283">例如，若在具有 32 個邏輯處理器的伺服器上設定為 -10，最大值是 320 個執行緒。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-283">For example, when set to -10 on a server having 32 logical processors, the maximum is 320 threads.</span></span><br /><br /> <span data-ttu-id="c4d0b-284">最大值會根據您先前定義的任何自訂相似性遮罩而受限於可用的處理器。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-284">The maximum value is subject to available processors per any custom affinity masks that you previously defined.</span></span> <span data-ttu-id="c4d0b-285">例如，如果您已設定執行緒集區相似性使用 32 個處理器的其中 8 個，而您現在將 NumThreads 設定為 -10，執行緒集區的上限就是 10 乘以 8，即 80 個執行緒。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-285">For example, if you already set thread pool affinity to use 8 out of 32 processors, and you now set NumThreads to -10, then the upper bound on the thread pool would 10 times 8, or 80 threads.</span></span><br /><br /> <span data-ttu-id="c4d0b-286">此執行緒集區屬性所使用的實際值會在服務啟動時寫入 msmdsrv 記錄檔。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-286">The actual values used for this thread pool property are written to the msmdsrv log file upon service start up.</span></span>|
|<span data-ttu-id="c4d0b-287">**Xdr**  \ `Short` \ `PriorityRatio`</span><span class="sxs-lookup"><span data-stu-id="c4d0b-287">**Parsing**  \ `Short` \ `PriorityRatio`</span></span>|<span data-ttu-id="c4d0b-288">int</span><span class="sxs-lookup"><span data-stu-id="c4d0b-288">int</span></span>|<span data-ttu-id="c4d0b-289">此為帶正負號的 32 位元整數，可用來確保偶爾執行較低優先權的執行緒，即使較高優先權的佇列不是空的。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-289">A signed 32-bit integer that can be used to ensure that lower priority threads are sometimes executed even when a higher priority queue is not empty.</span></span>|<span data-ttu-id="c4d0b-290">0</span><span class="sxs-lookup"><span data-stu-id="c4d0b-290">0</span></span>|<span data-ttu-id="c4d0b-291">此為進階屬性，除非在 [!INCLUDE[msCoName](../../includes/msconame-md.md)] 技術支援的指導之下，否則不應隨意變更。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-291">An advanced property that you should not change, except under the guidance of [!INCLUDE[msCoName](../../includes/msconame-md.md)] support.</span></span>|
|<span data-ttu-id="c4d0b-292">**Xdr**  \ `Short` \ `StackSizeKB`</span><span class="sxs-lookup"><span data-stu-id="c4d0b-292">**Parsing**  \ `Short` \ `StackSizeKB`</span></span>|<span data-ttu-id="c4d0b-293">int</span><span class="sxs-lookup"><span data-stu-id="c4d0b-293">int</span></span>|<span data-ttu-id="c4d0b-294">此為帶正負號的 32 位元整數，可在執行緒執行時用於調整記憶體配置。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-294">A signed 32-bit integer that can be used to adjust memory allocation during thread execution.</span></span>|<span data-ttu-id="c4d0b-295">64 \* 邏輯處理器數目</span><span class="sxs-lookup"><span data-stu-id="c4d0b-295">64 \* logical processors</span></span>|<span data-ttu-id="c4d0b-296">此為進階屬性，除非在 [!INCLUDE[msCoName](../../includes/msconame-md.md)] 技術支援的指導之下，否則不應隨意變更。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-296">An advanced property that you should not change, except under the guidance of [!INCLUDE[msCoName](../../includes/msconame-md.md)] support.</span></span>|
|`Process` \ `Concurrency`|<span data-ttu-id="c4d0b-297">double</span><span class="sxs-lookup"><span data-stu-id="c4d0b-297">double</span></span>|<span data-ttu-id="c4d0b-298">此為雙精確度浮點數值，決定可以一次佇列之執行緒數目的設定目標演算法。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-298">A double-precision floating point value that determines the algorithm for setting a target on the number of threads that can be queued at one time.</span></span>|<span data-ttu-id="c4d0b-299">2.0</span><span class="sxs-lookup"><span data-stu-id="c4d0b-299">2.0</span></span>|<span data-ttu-id="c4d0b-300">此為進階屬性，除非在 [!INCLUDE[msCoName](../../includes/msconame-md.md)] 技術支援的指導之下，否則不應隨意變更。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-300">An advanced property that you should not change, except under the guidance of [!INCLUDE[msCoName](../../includes/msconame-md.md)] support.</span></span><br /><br /> <span data-ttu-id="c4d0b-301">並行可用來初始化執行緒集區，會透過 Windows 的 I/O 完成通訊埠來實作。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-301">Concurrency is used to initialize thread pools, which are implemented using IO Completion Ports in Windows.</span></span> <span data-ttu-id="c4d0b-302">如需詳細資料，請參閱 [I/O 完成連接埠](https://msdn.microsoft.com/library/windows/desktop/aa365198\(v=vs.85\).aspx) 。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-302">See [I/O Completion Ports](https://msdn.microsoft.com/library/windows/desktop/aa365198\(v=vs.85\).aspx) for details.</span></span>|
|`Process` \ `GroupAffinity`|<span data-ttu-id="c4d0b-303">字串</span><span class="sxs-lookup"><span data-stu-id="c4d0b-303">string</span></span>|<span data-ttu-id="c4d0b-304">對應至系統上之處理器群組的十六進位值陣列，可用來設定處理執行緒與每個處理器群組中的邏輯處理器之相似性。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-304">An array of hexadecimal values that correspond to processor groups on the system, used to set affinity of processing threads to logical processors in each processor group.</span></span>|<span data-ttu-id="c4d0b-305">無</span><span class="sxs-lookup"><span data-stu-id="c4d0b-305">none</span></span>|<span data-ttu-id="c4d0b-306">您可以使用此屬性來建立自訂相似性。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-306">You can use this property to create custom affinities.</span></span> <span data-ttu-id="c4d0b-307">此屬性預設為空白。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-307">The property is empty by default.</span></span><br /><br /> <span data-ttu-id="c4d0b-308">如需詳細資訊，請參閱＜ [設定 GroupAffinity 將執行緒相似化為處理器群組中的處理器](#bkmk_groupaffinity) ＞。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-308">See [Set GroupAffinity to affinitize threads to processors in a processor group](#bkmk_groupaffinity) for details.</span></span>|
|`Process` \ `MaxThreads`|<span data-ttu-id="c4d0b-309">int</span><span class="sxs-lookup"><span data-stu-id="c4d0b-309">int</span></span>|<span data-ttu-id="c4d0b-310">此為帶正負號的 32 位元整數，指定要包含在執行緒集區中的執行緒數目上限。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-310">A signed 32-bit integer that specifies the maximum number of threads to include in the thread pool.</span></span>|<span data-ttu-id="c4d0b-311">0</span><span class="sxs-lookup"><span data-stu-id="c4d0b-311">0</span></span>|<span data-ttu-id="c4d0b-312">0 表示由伺服器決定預設值。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-312">0 indicates the server determines the defaults.</span></span> <span data-ttu-id="c4d0b-313">伺服器預設會將此值設為 64 的絕對值或是邏輯處理器數目 (以較高者為準)。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-313">By default, the server either sets this value to an absolute value of 64, or the number of logical processors, whichever is higher.</span></span> <span data-ttu-id="c4d0b-314">例如，在啟用超執行緒的 64 核心系統上 (導致 128 個邏輯處理器)，執行緒集區最多為 128 個執行緒。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-314">For example, on a 64-core system with hyperthreading enabled (resulting in 128 logical processors), the thread pool maximum is 128 threads.</span></span><br /><br /> <span data-ttu-id="c4d0b-315">如果將此值設定為負值，則伺服器會將該值乘以邏輯處理器的數目。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-315">If you set this value to a negative value, the server multiples that value by the number of logical processors.</span></span> <span data-ttu-id="c4d0b-316">例如，若在具有 32 個邏輯處理器的伺服器上設定為 -10，最大值是 320 個執行緒。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-316">For example, when set to -10 on a server having 32 logical processors, the maximum is 320 threads.</span></span><br /><br /> <span data-ttu-id="c4d0b-317">最大值會根據您先前定義的任何自訂相似性遮罩而受限於可用的處理器。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-317">The maximum value is subject to available processors per any custom affinity masks that you previously defined.</span></span> <span data-ttu-id="c4d0b-318">例如，如果您已設定執行緒集區相似性使用 32 個處理器的其中 8 個，而您現在將 MaxThreads 設定為 -10，執行緒集區的上限就是 10 乘以 8，即 80 個執行緒。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-318">For example, if you already set thread pool affinity to use 8 out of 32 processors, and you now set MaxThreads to -10, then the upper bound on the thread pool would 10 times 8, or 80 threads.</span></span><br /><br /> <span data-ttu-id="c4d0b-319">此執行緒集區屬性所使用的實際值會在服務啟動時寫入 msmdsrv 記錄檔。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-319">The actual values used for this thread pool property are written to the msmdsrv log file upon service start up.</span></span><br /><br /> <span data-ttu-id="c4d0b-320">如需微調執行緒集區設定的詳細資訊，請參閱《 [Analysis Services 操作指南](https://msdn.microsoft.com/library/hh226085.aspx)》。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-320">More information about tuning the thread pool settings can be found in the [Analysis Services Operations Guide](https://msdn.microsoft.com/library/hh226085.aspx).</span></span>|
|`Process` \ `MinThreads`|<span data-ttu-id="c4d0b-321">int</span><span class="sxs-lookup"><span data-stu-id="c4d0b-321">int</span></span>|<span data-ttu-id="c4d0b-322">此為帶正負號的 32 位元整數，指定要預先配置在執行緒集區中的執行緒數目下限。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-322">A signed 32-bit integer that specifies the minimum number of threads to preallocate for the thread pool.</span></span>|<span data-ttu-id="c4d0b-323">0</span><span class="sxs-lookup"><span data-stu-id="c4d0b-323">0</span></span>|<span data-ttu-id="c4d0b-324">0 表示由伺服器決定預設值。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-324">0 indicates the server determines the defaults.</span></span> <span data-ttu-id="c4d0b-325">預設的最小值是 1。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-325">By default, the minimum is 1.</span></span><br /><br /> <span data-ttu-id="c4d0b-326">如果將此值設定為負值，則伺服器會將該值乘以邏輯處理器的數目。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-326">If you set this value to a negative value, the server multiples that value by the number of logical processors.</span></span><br /><br /> <span data-ttu-id="c4d0b-327">此執行緒集區屬性所使用的實際值會在服務啟動時寫入 msmdsrv 記錄檔。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-327">The actual values used for this thread pool property are written to the msmdsrv log file upon service start up.</span></span><br /><br /> <span data-ttu-id="c4d0b-328">如需微調執行緒集區設定的詳細資訊，請參閱《 [Analysis Services 操作指南](https://msdn.microsoft.com/library/hh226085.aspx)》。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-328">More information about tuning the thread pool settings can be found in the [Analysis Services Operations Guide](https://msdn.microsoft.com/library/hh226085.aspx).</span></span>|
|`Process` \ `PriorityRatio`|<span data-ttu-id="c4d0b-329">int</span><span class="sxs-lookup"><span data-stu-id="c4d0b-329">int</span></span>|<span data-ttu-id="c4d0b-330">此為帶正負號的 32 位元整數，可用來確保偶爾執行較低優先權的執行緒，即使較高優先權的佇列不是空的。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-330">A signed 32-bit integer that can be used to ensure that lower priority threads are sometimes executed even when a higher priority queue is not empty.</span></span>|<span data-ttu-id="c4d0b-331">2</span><span class="sxs-lookup"><span data-stu-id="c4d0b-331">2</span></span>|<span data-ttu-id="c4d0b-332">此為進階屬性，除非在 [!INCLUDE[msCoName](../../includes/msconame-md.md)] 技術支援的指導之下，否則不應隨意變更。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-332">An advanced property that you should not change, except under the guidance of [!INCLUDE[msCoName](../../includes/msconame-md.md)] support.</span></span>|
|`Process` \ `StackSizeKB`|<span data-ttu-id="c4d0b-333">int</span><span class="sxs-lookup"><span data-stu-id="c4d0b-333">int</span></span>|<span data-ttu-id="c4d0b-334">此為帶正負號的 32 位元整數，可在執行緒執行時用於調整記憶體配置。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-334">A signed 32-bit integer that can be used to adjust memory allocation during thread execution.</span></span>|<span data-ttu-id="c4d0b-335">0</span><span class="sxs-lookup"><span data-stu-id="c4d0b-335">0</span></span>|<span data-ttu-id="c4d0b-336">此為進階屬性，除非在 [!INCLUDE[msCoName](../../includes/msconame-md.md)] 技術支援的指導之下，否則不應隨意變更。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-336">An advanced property that you should not change, except under the guidance of [!INCLUDE[msCoName](../../includes/msconame-md.md)] support.</span></span>|
|`Query`  \ `Concurrency`|<span data-ttu-id="c4d0b-337">double</span><span class="sxs-lookup"><span data-stu-id="c4d0b-337">double</span></span>|<span data-ttu-id="c4d0b-338">此為雙精確度浮點數值，決定可以一次佇列之執行緒數目的設定目標演算法。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-338">A double-precision floating point value that determines the algorithm for setting a target on the number of threads that can be queued at one time.</span></span>|<span data-ttu-id="c4d0b-339">2.0</span><span class="sxs-lookup"><span data-stu-id="c4d0b-339">2.0</span></span>|<span data-ttu-id="c4d0b-340">此為進階屬性，除非在 [!INCLUDE[msCoName](../../includes/msconame-md.md)] 技術支援的指導之下，否則不應隨意變更。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-340">An advanced property that you should not change, except under the guidance of [!INCLUDE[msCoName](../../includes/msconame-md.md)] support.</span></span><br /><br /> <span data-ttu-id="c4d0b-341">並行可用來初始化執行緒集區，會透過 Windows 的 I/O 完成通訊埠來實作。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-341">Concurrency is used to initialize thread pools, which are implemented using IO Completion Ports in Windows.</span></span> <span data-ttu-id="c4d0b-342">如需詳細資料，請參閱 [I/O 完成連接埠](https://msdn.microsoft.com/library/windows/desktop/aa365198\(v=vs.85\).aspx) 。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-342">See [I/O Completion Ports](https://msdn.microsoft.com/library/windows/desktop/aa365198\(v=vs.85\).aspx) for details.</span></span>|
|`Query` \ `GroupAffinity`|<span data-ttu-id="c4d0b-343">字串</span><span class="sxs-lookup"><span data-stu-id="c4d0b-343">string</span></span>|<span data-ttu-id="c4d0b-344">對應至系統上之處理器群組的十六進位值陣列，可用來設定處理執行緒與每個處理器群組中的邏輯處理器之相似性。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-344">An array of hexadecimal values that correspond to processor groups on the system, used to set affinity of processing threads to logical processors in each processor group.</span></span>|<span data-ttu-id="c4d0b-345">無</span><span class="sxs-lookup"><span data-stu-id="c4d0b-345">none</span></span>|<span data-ttu-id="c4d0b-346">您可以使用此屬性來建立自訂相似性。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-346">You can use this property to create custom affinities.</span></span> <span data-ttu-id="c4d0b-347">此屬性預設為空白。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-347">The property is empty by default.</span></span><br /><br /> <span data-ttu-id="c4d0b-348">如需詳細資訊，請參閱＜ [設定 GroupAffinity 將執行緒相似化為處理器群組中的處理器](#bkmk_groupaffinity) ＞。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-348">See [Set GroupAffinity to affinitize threads to processors in a processor group](#bkmk_groupaffinity) for details.</span></span>|
|`Query`  \ `MaxThreads`|<span data-ttu-id="c4d0b-349">int</span><span class="sxs-lookup"><span data-stu-id="c4d0b-349">int</span></span>|<span data-ttu-id="c4d0b-350">此為帶正負號的 32 位元整數，指定要包含在執行緒集區中的執行緒數目上限。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-350">A signed 32-bit integer that specifies the maximum number of threads to include in the thread pool.</span></span>|<span data-ttu-id="c4d0b-351">0</span><span class="sxs-lookup"><span data-stu-id="c4d0b-351">0</span></span>|<span data-ttu-id="c4d0b-352">0 表示由伺服器決定預設值。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-352">0 indicates the server determines the defaults.</span></span> <span data-ttu-id="c4d0b-353">根據預設，伺服器將此值設定為絕對值 10，或設定為邏輯處理器數目的 2 倍 (以較高者為準)。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-353">By default, the server either sets this value to an absolute value of 10, or 2 times the number of logical processors, whichever is higher.</span></span> <span data-ttu-id="c4d0b-354">例如，在具有超執行緒的 4 核心系統上，執行緒數上限為 16。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-354">For example, on a 4-core system with hyperthreading, the maximum thread count is 16.</span></span><br /><br /> <span data-ttu-id="c4d0b-355">如果將此值設定為負值，則伺服器會將該值乘以邏輯處理器的數目。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-355">If you set this value to a negative value, the server multiples that value by the number of logical processors.</span></span> <span data-ttu-id="c4d0b-356">例如，若在具有 32 個邏輯處理器的伺服器上設定為 -10，最大值是 320 個執行緒。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-356">For example, when set to -10 on a server having 32 logical processors, the maximum is 320 threads.</span></span><br /><br /> <span data-ttu-id="c4d0b-357">最大值會根據您先前定義的任何自訂相似性遮罩而受限於可用的處理器。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-357">The maximum value is subject to available processors per any custom affinity masks that you previously defined.</span></span> <span data-ttu-id="c4d0b-358">例如，如果您已設定執行緒集區相似性使用 32 個處理器的其中 8 個，而您現在將 MaxThreads 設定為 -10，執行緒集區的上限就是 10 乘以 8，即 80 個執行緒。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-358">For example, if you already set thread pool affinity to use 8 out of 32 processors, and you now set MaxThreads to -10, then the upper bound on the thread pool would 10 times 8, or 80 threads.</span></span><br /><br /> <span data-ttu-id="c4d0b-359">此執行緒集區屬性所使用的實際值會在服務啟動時寫入 msmdsrv 記錄檔。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-359">The actual values used for this thread pool property are written to the msmdsrv log file upon service start up.</span></span><br /><br /> <span data-ttu-id="c4d0b-360">如需微調執行緒集區設定的詳細資訊，請參閱《 [Analysis Services 操作指南](https://msdn.microsoft.com/library/hh226085.aspx)》。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-360">More information about tuning the thread pool settings can be found in the [Analysis Services Operations Guide](https://msdn.microsoft.com/library/hh226085.aspx).</span></span>|
|`Query` \ `MinThreads`|<span data-ttu-id="c4d0b-361">int</span><span class="sxs-lookup"><span data-stu-id="c4d0b-361">int</span></span>|<span data-ttu-id="c4d0b-362">此為帶正負號的 32 位元整數，指定要預先配置在執行緒集區中的執行緒數目下限。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-362">A signed 32-bit integer that specifies the minimum number of threads to preallocate for the thread pool.</span></span>|<span data-ttu-id="c4d0b-363">0</span><span class="sxs-lookup"><span data-stu-id="c4d0b-363">0</span></span>|<span data-ttu-id="c4d0b-364">0 表示由伺服器決定預設值。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-364">0 indicates the server determines the defaults.</span></span> <span data-ttu-id="c4d0b-365">預設的最小值是 1。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-365">By default, the minimum is 1.</span></span><br /><br /> <span data-ttu-id="c4d0b-366">如果將此值設定為負值，則伺服器會將該值乘以邏輯處理器的數目。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-366">If you set this value to a negative value, the server multiples that value by the number of logical processors.</span></span><br /><br /> <span data-ttu-id="c4d0b-367">此執行緒集區屬性所使用的實際值會在服務啟動時寫入 msmdsrv 記錄檔。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-367">The actual values used for this thread pool property are written to the msmdsrv log file upon service start up.</span></span><br /><br /> <span data-ttu-id="c4d0b-368">如需微調執行緒集區設定的詳細資訊，請參閱《 [Analysis Services 操作指南](https://msdn.microsoft.com/library/hh226085.aspx)》。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-368">More information about tuning the thread pool settings can be found in the [Analysis Services Operations Guide](https://msdn.microsoft.com/library/hh226085.aspx).</span></span>|
|`Query` \ `PriorityRatio`|<span data-ttu-id="c4d0b-369">int</span><span class="sxs-lookup"><span data-stu-id="c4d0b-369">int</span></span>|<span data-ttu-id="c4d0b-370">此為帶正負號的 32 位元整數，可用來確保偶爾執行較低優先權的執行緒，即使較高優先權的佇列不是空的。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-370">A signed 32-bit integer that can be used to ensure that lower priority threads are sometimes executed even when a higher priority queue is not empty.</span></span>|<span data-ttu-id="c4d0b-371">2</span><span class="sxs-lookup"><span data-stu-id="c4d0b-371">2</span></span>|<span data-ttu-id="c4d0b-372">此為進階屬性，除非在 [!INCLUDE[msCoName](../../includes/msconame-md.md)] 技術支援的指導之下，否則不應隨意變更。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-372">An advanced property that you should not change, except under the guidance of [!INCLUDE[msCoName](../../includes/msconame-md.md)] support.</span></span>|
|`Query`  \ `StackSizeKB`|<span data-ttu-id="c4d0b-373">int</span><span class="sxs-lookup"><span data-stu-id="c4d0b-373">int</span></span>|<span data-ttu-id="c4d0b-374">此為帶正負號的 32 位元整數，可在執行緒執行時用於調整記憶體配置。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-374">A signed 32-bit integer that can be used to adjust memory allocation during thread execution.</span></span>|<span data-ttu-id="c4d0b-375">0</span><span class="sxs-lookup"><span data-stu-id="c4d0b-375">0</span></span>|<span data-ttu-id="c4d0b-376">此為進階屬性，除非在 [!INCLUDE[msCoName](../../includes/msconame-md.md)] 技術支援的指導之下，否則不應隨意變更。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-376">An advanced property that you should not change, except under the guidance of [!INCLUDE[msCoName](../../includes/msconame-md.md)] support.</span></span>|

##  <a name="set-groupaffinity-to-affinitize-threads-to-processors-in-a-processor-group"></a><a name="bkmk_groupaffinity"></a> <span data-ttu-id="c4d0b-377">設定 GroupAffinity 將執行緒相似化為處理器群組中的處理器</span><span class="sxs-lookup"><span data-stu-id="c4d0b-377">Set GroupAffinity to affinitize threads to processors in a processor group</span></span>
 <span data-ttu-id="c4d0b-378">`GroupAffinity` 是為了進階微調而提供。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-378">`GroupAffinity` is provided for advanced tuning purposes.</span></span> <span data-ttu-id="c4d0b-379">您可以使用 `GroupAffinity` 屬性設定 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 執行緒集區和特定處理器之間的相似性；但是對於大多數安裝，[!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 可以使用所有可用的邏輯處理器時，執行效果最好。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-379">You can use the `GroupAffinity` property to set affinity between [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] thread pools and specific processors; however, for most installations, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] performs best when it can use all available logical processors.</span></span> <span data-ttu-id="c4d0b-380">因此，預設不會指定群組相似性。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-380">Accordingly, group affinity is unspecified by default.</span></span>

 <span data-ttu-id="c4d0b-381">如果效能測試指出需要 CPU 最佳化，您可以考慮較高層級的方法，例如使用 Windows Server 資源管理員設定邏輯處理器和伺服器處理序之間的相似性。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-381">Should performance testing indicate a need for CPU optimization, you might consider a higher level approach, such as using Windows Server Resource Manager to set affinity between logical processors and a server process.</span></span> <span data-ttu-id="c4d0b-382">這種方式與定義個別執行緒集區的自訂相似性相比，可更容易進行實作與管理。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-382">Such an approach can be simpler to implement and manage than defining custom affinities for individual thread pools.</span></span>

 <span data-ttu-id="c4d0b-383">如果這個方法不夠完善，您可以定義執行緒集區的自訂相似性，達成更大的精確度。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-383">If that approach is insufficient, you can achieve greater precision by defining custom affinities for thread pools.</span></span> <span data-ttu-id="c4d0b-384">大型多核心系統 (NUMA 或非 NUMA) 會因為執行緒集區分佈於太廣泛的處理器範圍而導致降低效能，因此在這些系統上比較可能建議自訂相似性設定。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-384">Customizing affinity settings is more likely to be recommended on large multi-core systems (either NUMA or non-NUMA) experiencing performance degradation due to thread pools spread out over too-wide a range of processors.</span></span> <span data-ttu-id="c4d0b-385">雖然您可以在有少於 64 個邏輯處理器的系統上設定 `GroupAffinity`，但是成效極低，甚至可能會降低效能。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-385">Although you can set `GroupAffinity` on systems having fewer than 64 logical processors, the benefit is negligible and might even degrade performance.</span></span>

> [!NOTE]
>  <span data-ttu-id="c4d0b-386">`GroupAffinity` 是由限制 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 所使用之核心數目的版本所限制。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-386">`GroupAffinity` is constrained by editions that limit the number of cores used by [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)].</span></span> <span data-ttu-id="c4d0b-387">在啟動時，[!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 會使用版本資訊和 `GroupAffinity` 屬性，來計算 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 管理之所有 5 個執行緒集區的相似性遮罩。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-387">At startup, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] uses edition information and the `GroupAffinity` properties to compute affinity masks for each of the 5 thread pools managed by [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)].</span></span> <span data-ttu-id="c4d0b-388">Standard Edition 最多可以使用 16 個核心。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-388">Standard edition can use a maximum of 16 cores.</span></span> <span data-ttu-id="c4d0b-389">如果您在具有超過 16 個核心的大型多核心系統上安裝 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] Standard Edition， [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 只會使用其中 16 個。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-389">If you install [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] standard edition on a large multi-core system that has more than 16 cores, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] will only use 16 of them.</span></span> <span data-ttu-id="c4d0b-390">如果升級舊版的企業執行個體，您最多可以使用 20 個核心。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-390">If you upgrade an Enterprise instance of an earlier version, you will be limited to 20 cores.</span></span> <span data-ttu-id="c4d0b-391">如需有關版本和授權的詳細資訊，請參閱 [SQL Server 2012 授權概觀](https://go.microsoft.com/fwlink/?LinkId=246061)。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-391">For more information about editions and licensing, see [SQL Server 2012 Licensing Overview](https://go.microsoft.com/fwlink/?LinkId=246061).</span></span>

### <a name="syntax"></a><span data-ttu-id="c4d0b-392">語法</span><span class="sxs-lookup"><span data-stu-id="c4d0b-392">Syntax</span></span>
 <span data-ttu-id="c4d0b-393">此值為每個處理器群組的十六進位值，代表 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 配置執行緒給指定執行緒集區時，會先嘗試使用的邏輯處理器。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-393">The value is hexadecimal for each processor group, with the hexadecimal representing the logical processors that [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] attempts to use first when allocating threads for a given thread pool.</span></span>

 <span data-ttu-id="c4d0b-394">**邏輯處理器的位元遮罩**</span><span class="sxs-lookup"><span data-stu-id="c4d0b-394">**Bitmask for Logical Processors**</span></span>

 <span data-ttu-id="c4d0b-395">在一個處理器群組中最多可以有 64 個邏輯處理器。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-395">You can have up to 64 logical processors within a single processor group.</span></span> <span data-ttu-id="c4d0b-396">針對群組中執行緒集區使用 (或不使用) 的每個邏輯處理器，此位元遮罩是 1 (或 0)。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-396">The bitmask is 1 (or 0) for each logical processor in the group that is used (or not used) by a thread pool.</span></span> <span data-ttu-id="c4d0b-397">計算位元遮罩之後，您就可以將十六進位值計算為的值 `GroupAffinity` 。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-397">Once you compute the bitmask, you then calculate the hexadecimal value as the value for `GroupAffinity`.</span></span>

 <span data-ttu-id="c4d0b-398">**多個處理器群組**</span><span class="sxs-lookup"><span data-stu-id="c4d0b-398">**Multiple processor groups**</span></span>

 <span data-ttu-id="c4d0b-399">處理器群組會在系統啟動時決定。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-399">Processor groups are determined on system startup.</span></span> <span data-ttu-id="c4d0b-400">`GroupAffinity`接受逗號分隔清單中每個處理器群組的十六進位值。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-400">`GroupAffinity` accepts hexadecimal values for each processor group in a comma delimited list.</span></span> <span data-ttu-id="c4d0b-401">提供多個處理器群組 (在更高階的系統上最多 10 個) 時，可以透過指定 0x0 略過個別群組。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-401">Given multiple processor groups (up to 10 on higher end systems), you can bypass individual groups by specifying 0x0.</span></span> <span data-ttu-id="c4d0b-402">例如，在具有四個處理器群組 (0、1、2、3) 的系統上，可以透過為第一個和第三個值輸入 0x0，排除群組 0 和 2。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-402">For example, on a system with four processor groups (0, 1, 2, 3), you could exclude groups 0 and 2 by entering 0x0 for the first and third values.</span></span>

 `<GroupAffinity>0x0, 0xFF, 0x0, 0xFF</GroupAffinity>`

### <a name="steps-for-computing-the-processor-affinity-mask"></a><span data-ttu-id="c4d0b-403">計算處理器相似性遮罩的步驟</span><span class="sxs-lookup"><span data-stu-id="c4d0b-403">Steps for computing the processor affinity mask</span></span>
 <span data-ttu-id="c4d0b-404">您可以在 `GroupAffinity` msmdsrv.ini 或 SQL Server Management Studio 的伺服器屬性頁中設定。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-404">You can set `GroupAffinity` in msmdsrv.ini or in server property pages in SQL Server Management Studio.</span></span>

1.  <span data-ttu-id="c4d0b-405">**判斷處理器和處理器群組數目**</span><span class="sxs-lookup"><span data-stu-id="c4d0b-405">**Determine the number of processors and processor groups**</span></span>

     <span data-ttu-id="c4d0b-406">您可以 [從 winsysinternals 下載 Coreinfo 公用程式](https://technet.microsoft.com/sysinternals/cc835722.aspx)。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-406">You can download [Coreinfo utility from winsysinternals](https://technet.microsoft.com/sysinternals/cc835722.aspx).</span></span>

     <span data-ttu-id="c4d0b-407">執行 **coreinfo** 即可從 Logical Processor to Group Map 區段取得這項資訊，</span><span class="sxs-lookup"><span data-stu-id="c4d0b-407">Run **coreinfo** to get this information from the Logical Processor to Group Map section.</span></span> <span data-ttu-id="c4d0b-408">並為每個邏輯處理器分別產生一行。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-408">A separate line is generated for each logical processor.</span></span>

2.  <span data-ttu-id="c4d0b-409">處理器的排序 (由右至左)： `7654 3210`</span><span class="sxs-lookup"><span data-stu-id="c4d0b-409">Sequence the processors, from right to left: `7654 3210`</span></span>

     <span data-ttu-id="c4d0b-410">這個範例只顯示 8 個處理器 (0 至 7)，不過，處理器群組最多可以有 64 個邏輯處理器，而且企業等級的 Windows Server 最多可以有 10 個處理器群組。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-410">The example shows only 8 processors (0 through 7), but a processor group can have a maximum of 64 logical processors, and there can be up to 10 processor groups in an enterprise-class Windows server.</span></span>

3.  <span data-ttu-id="c4d0b-411">**針對您要使用的處理器群組計算位元遮罩**</span><span class="sxs-lookup"><span data-stu-id="c4d0b-411">**Compute the bitmask for the processor groups you want to use**</span></span>

     `7654 3210`

     <span data-ttu-id="c4d0b-412">根據您要排除或包含邏輯處理器，以 0 或 1 取代此數值。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-412">Replace the number with a 0 or 1, depending on whether you want to exclude or include the logical processor.</span></span> <span data-ttu-id="c4d0b-413">在具有八個處理器的系統上，如果您想要針對 Analysis Services 使用處理器 7、6、5、4 和 1，您的計算方式可能會如下所示：</span><span class="sxs-lookup"><span data-stu-id="c4d0b-413">On a system having eight processors, your calculation might look like this if you wanted to use processors 7, 6, 5, 4, and 1 for Analysis Services:</span></span>

     `1111 0010`

4.  <span data-ttu-id="c4d0b-414">**將二進位數字轉換成十六進位值**</span><span class="sxs-lookup"><span data-stu-id="c4d0b-414">**Convert the binary number to a Hex value**</span></span>

     <span data-ttu-id="c4d0b-415">使用計算機或轉換工具將二進位數字轉換成對應的十六進位值。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-415">Using a calculator or conversion tool, convert the binary number to its hexadecimal equivalent.</span></span> <span data-ttu-id="c4d0b-416">在此範例中， `1111 0010` 會轉換成 `0xF2`。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-416">In our example, `1111 0010` converts to `0xF2`.</span></span>

5.  <span data-ttu-id="c4d0b-417">**在 GroupAffinity 屬性中輸入十六進位值**</span><span class="sxs-lookup"><span data-stu-id="c4d0b-417">**Enter the hex value in the GroupAffinity property**</span></span>

     <span data-ttu-id="c4d0b-418">在 msmdsrv.ini 或 Management Studio 的伺服器屬性頁中，將設定 `GroupAffinity` 為步驟4中計算的值。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-418">In msmdsrv.ini or in the server property page in Management Studio, set `GroupAffinity` to the value calculated in step 4.</span></span>

> [!IMPORTANT]
>  <span data-ttu-id="c4d0b-419">設定 `GroupAffinity` 是包含多個步驟的手動工作。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-419">Setting `GroupAffinity` is a manual task encompassing multiple steps.</span></span> <span data-ttu-id="c4d0b-420">計算時 `GroupAffinity` ，請仔細檢查您的計算。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-420">When computing `GroupAffinity`, check your calculations carefully.</span></span> <span data-ttu-id="c4d0b-421">雖然 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 會在整個遮罩無效時傳回錯誤，但有效和無效設定的組合也會導致 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 忽略屬性。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-421">Although [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] will return an error if the entire mask is invalid, a combination of valid and invalid settings results in [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] ignoring the property.</span></span> <span data-ttu-id="c4d0b-422">例如，如果位元遮罩包含額外的值， [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 會忽略這項設定，並使用系統上的所有處理器，</span><span class="sxs-lookup"><span data-stu-id="c4d0b-422">For example, if the bitmask includes extra values, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] ignores the setting, using all processors on the system.</span></span> <span data-ttu-id="c4d0b-423">當發生這個動作時並不會出現任何錯誤或警告來提醒您，但是您可以檢查 msmdsrv.log 檔案來了解實際上是如何設定相似性。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-423">There is no error or warning to alert you when this action occurs, but you can check the msmdsrv.log file to learn how the affinities are actually set.</span></span>

##  <a name="set-pernumanode-to-affinitize-io-threads-to-processors-in-a-numa-node"></a><a name="bkmk_pernumanode"></a><span data-ttu-id="c4d0b-424">將 PerNumaNode 設定為將相似化為 IO 執行緒到 NUMA 節點中的處理器</span><span class="sxs-lookup"><span data-stu-id="c4d0b-424">Set PerNumaNode to affinitize IO threads to processors in a NUMA node</span></span>
 <span data-ttu-id="c4d0b-425">針對多維度 Analysis Services 實例，您可以 `PerNumaNode` 線上程集區上設定， `IOProcess` 以進一步優化執行緒排程和執行。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-425">For multidimensional Analysis Services instances, you can set `PerNumaNode` on the `IOProcess` thread pool to further optimize thread scheduling and execution.</span></span> <span data-ttu-id="c4d0b-426">雖然會 `GroupAffinity` 識別指定執行緒集區所使用的邏輯處理器集合，但藉 `PerNumaNode` 由指定是否要建立多個執行緒集區，進一步相似化為至允許的邏輯處理器的某個子集，會有更進一步的步驟。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-426">Whereas `GroupAffinity` identifies which set of logical processors to use for a given thread pool, `PerNumaNode` goes one step further by specifying whether to create multiple thread pools, further affinitized to some subset of the allowed logical processors.</span></span>

> [!NOTE]
>  <span data-ttu-id="c4d0b-427">在 Windows Server 2012 上，請使用工作管理員來檢視電腦上的 NUMA 節點數目。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-427">On Windows Server 2012, use Task Manager to view the number of NUMA nodes on the computer.</span></span> <span data-ttu-id="c4d0b-428">在工作管理員的 [效能] 索引標籤上選取 **[CPU]** ，再以滑鼠右鍵按一下圖表區域來檢視 NUMA 節點。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-428">In Task Manager, on the Performance tab, select **CPU** and then right-click the graph area to view NUMA nodes.</span></span> <span data-ttu-id="c4d0b-429">或者也可以從 Windows Sysinternals [下載](https://technet.microsoft.com/sysinternals/cc835722.aspx) Coreinfo 公用程式並執行 `coreinfo -n` ，傳回每個節點中的 NUMA 節點與邏輯處理器。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-429">Alternatively, [download](https://technet.microsoft.com/sysinternals/cc835722.aspx) the Coreinfo utility from Windows Sysinternals and run `coreinfo -n` to return NUMA nodes and logical processors in each node.</span></span>

 <span data-ttu-id="c4d0b-430">的有效值為 `PerNumaNode` -1、0、1、2，如本主題的[執行緒集區屬性參考](#bkmk_propref)一節所述。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-430">Valid values for `PerNumaNode` are -1, 0, 1, 2, as described in the [Thread Pool Property Reference](#bkmk_propref) section in this topic.</span></span>

### <a name="default-recommended"></a><span data-ttu-id="c4d0b-431">預設值 (建議)</span><span class="sxs-lookup"><span data-stu-id="c4d0b-431">Default (Recommended)</span></span>
 <span data-ttu-id="c4d0b-432">在具有 NUMA 節點的系統上，我們建議您使用 PerNumaNode=-1 預設值，讓 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 根據節點計數調整執行緒集區數目和執行緒相似性。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-432">On systems having NUMA nodes, we recommend using the default setting of PerNumaNode=-1, allowing [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] to adjust the number of thread pools and their thread affinity based on node count.</span></span> <span data-ttu-id="c4d0b-433">如果系統的節點少於4個， [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 則會執行 = 0 所描述的行為 `PerNumaNode` ，而 `PerNumaNode` = 1 則用於具有4個或更多節點的系統上。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-433">If the system has fewer than 4 nodes, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] implements the behaviors described by `PerNumaNode`=0, whereas `PerNumaNode`=1 is used on systems having 4 or more nodes.</span></span>

### <a name="choosing-a-value"></a><span data-ttu-id="c4d0b-434">選擇值</span><span class="sxs-lookup"><span data-stu-id="c4d0b-434">Choosing a value</span></span>
 <span data-ttu-id="c4d0b-435">您也可以覆寫預設值，使用另一個有效值。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-435">You can also override the default to use another valid value.</span></span>

 <span data-ttu-id="c4d0b-436">**設定 PerNumaNode=0**</span><span class="sxs-lookup"><span data-stu-id="c4d0b-436">**Setting PerNumaNode=0**</span></span>

 <span data-ttu-id="c4d0b-437">系統會忽略 NUMA 節點。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-437">NUMA nodes are ignored.</span></span> <span data-ttu-id="c4d0b-438">只有一個 IOProcess 執行緒集區，而且該執行緒集區中的所有執行緒都會相似化到所有邏輯處理器。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-438">There will be just one IOProcess thread pool, and all threads in that thread pool will be affinitized to all logical processors.</span></span> <span data-ttu-id="c4d0b-439">根據預設 (PerNumaNode=-1)，如果電腦的 NUMA 節點少於 4 個，這是作用的設定值。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-439">By default (where PerNumaNode=-1), this is the operative setting if the computer has fewer than 4 NUMA nodes.</span></span>

 <span data-ttu-id="c4d0b-440">![Numa、處理器和執行緒集區的對應](../media/ssas-threadpool-numaex0.PNG "Numa、處理器和執行緒集區的對應")</span><span class="sxs-lookup"><span data-stu-id="c4d0b-440">![Numa, processor and thread pool correspondence](../media/ssas-threadpool-numaex0.PNG "Numa, processor and thread pool correspondence")</span></span>

 <span data-ttu-id="c4d0b-441">**設定 PerNumaNode=1**</span><span class="sxs-lookup"><span data-stu-id="c4d0b-441">**Setting PerNumaNode=1**</span></span>

 <span data-ttu-id="c4d0b-442">系統會針對每個 NUMA 節點建立 IOProcess 執行緒集區。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-442">IOProcess thread pools are created for each NUMA node.</span></span> <span data-ttu-id="c4d0b-443">使用個別的執行緒集區可改善對本機資源的協調存取，例如 NUMA 節點的本機快取。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-443">Having separate thread pools improves coordinated access to local resources, such as local cache on a NUMA node.</span></span>

 <span data-ttu-id="c4d0b-444">![Numa、處理器和執行緒集區的對應](../media/ssas-threadpool-numaex1.PNG "Numa、處理器和執行緒集區的對應")</span><span class="sxs-lookup"><span data-stu-id="c4d0b-444">![Numa, processor and thread pool correspondence](../media/ssas-threadpool-numaex1.PNG "Numa, processor and thread pool correspondence")</span></span>

 <span data-ttu-id="c4d0b-445">**設定 PerNumaNode=2**</span><span class="sxs-lookup"><span data-stu-id="c4d0b-445">**Setting PerNumaNode=2**</span></span>

 <span data-ttu-id="c4d0b-446">這個設定適用於執行大量 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 工作負載的極高階系統。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-446">This setting is for very high-end systems running intensive [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] workloads.</span></span> <span data-ttu-id="c4d0b-447">此屬性會在其最細微的層級設定 IOProcess 執行緒集區相似性，並在邏輯處理器層級建立及關聯個別的執行緒集區。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-447">This property sets IOProcess thread pool affinity at its most granular level, creating and affinitizing separate thread pools at the logical processor level.</span></span>

 <span data-ttu-id="c4d0b-448">在下列範例中，在具有4個 NUMA 節點和32個邏輯處理器的系統上，將設定 `PerNumaNode` 為2會導致 32 IOProcess 執行緒集區。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-448">In the following example, on a system having 4 NUMA nodes and 32 logical processors, setting `PerNumaNode` to 2 would result in 32 IOProcess thread pools.</span></span> <span data-ttu-id="c4d0b-449">前 8 個執行緒集區中的執行緒會相似化為 NUMA 節點 0 中的所有邏輯處理器，但會將理想的處理器設為 0、1、2，最多 7。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-449">The threads in the first 8 thread pools would be affinitized to all the logical processors in the NUMA node 0, but with the ideal processor set to 0, 1, 2, up to 7.</span></span> <span data-ttu-id="c4d0b-450">後 8 個執行緒集區會相似化為 NUMA 節點 1 中的所有邏輯處理器，並將理想的處理器設為 8、9、10，最多 15，依此類推。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-450">The next 8 thread pools would be affinitized to all the logical processors in NUMA node 1, with the ideal processor set to 8, 9, 10, up to 15, and so on.</span></span>

 <span data-ttu-id="c4d0b-451">![Numa、處理器和執行緒集區的對應](../media/ssas-threadpool-numaex2.PNG "Numa、處理器和執行緒集區的對應")</span><span class="sxs-lookup"><span data-stu-id="c4d0b-451">![Numa, processor and thread pool correspondence](../media/ssas-threadpool-numaex2.PNG "Numa, processor and thread pool correspondence")</span></span>

 <span data-ttu-id="c4d0b-452">在此相似性層級，排程器一律會先嘗試使用偏好的 NUMA 節點中的理想邏輯處理器。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-452">At this level of affinity, the scheduler always attempts to use the ideal logical processor first, within the preferred NUMA node.</span></span> <span data-ttu-id="c4d0b-453">如果邏輯處理器無法使用，排程器會選擇相同節點或相同處理器群組 (如果沒有其他執行緒可用) 中的其他處理器。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-453">If the logical processor is unavailable, the scheduler chooses another processor within the same node, or within the same processor group if no other threads are available.</span></span> <span data-ttu-id="c4d0b-454">如需詳細資訊和範例，請參閱 [Analysis Services 2012 Configuration settings (Wordpress Blog)](https://go.microsoft.com/fwlink/?LinkId=330387)(Analysis Services 2012 組態設定 (Wordpress 部落格))。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-454">For more information and examples, see [Analysis Services 2012 Configuration settings (Wordpress Blog)](https://go.microsoft.com/fwlink/?LinkId=330387).</span></span>

###  <a name="work-distribution-among-ioprocess-threads"></a><a name="bkmk_workdistrib"></a> <span data-ttu-id="c4d0b-455">IOProcess 執行緒中的工作分配</span><span class="sxs-lookup"><span data-stu-id="c4d0b-455">Work distribution among IOProcess threads</span></span>
 <span data-ttu-id="c4d0b-456">當您考慮是否要設定 `PerNumaNode` 屬性時，知道如何 `IOProcess` 使用執行緒，可以協助您做出更明智的決策。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-456">As you consider whether to set the `PerNumaNode` property, knowing how `IOProcess` threads are used can help you make a more informed decision.</span></span>

 <span data-ttu-id="c4d0b-457">回想一下， `IOProcess` 用於與多維度引擎中之儲存引擎查詢相關聯的 IO 作業。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-457">Recall that `IOProcess` is used for IO jobs associated with storage engine queries in the multidimensional engine.</span></span>

 <span data-ttu-id="c4d0b-458">當掃描區段時，此引擎會識別區段所屬的分割區，並且嘗試將區段工作加入分割區所使用的執行緒集區佇列。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-458">When a segment is scanned, the engine identifies the partition to which the segment belongs, and attempts to queue the segment job to the thread pool used by the partition.</span></span> <span data-ttu-id="c4d0b-459">一般而言，屬於分割區的所有區段都會將其工作加入相同執行緒集區的佇列。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-459">In general, all segments belonging to a partition will queue their tasks to the same thread pool.</span></span> <span data-ttu-id="c4d0b-460">在 NUMA 系統上，這個行為特別有利，因為分割區的所有掃描都將使用在本機配置給該 NUMA 節點之檔案系統快取中的記憶體。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-460">On NUMA systems, this behavior is particularly advantageous because all scans for a partition will use memory in the file system cache that is allocated locally to that NUMA node.</span></span>

 <span data-ttu-id="c4d0b-461">下列案例的建議調整有時可以改善 NUMA 系統的查詢效能：</span><span class="sxs-lookup"><span data-stu-id="c4d0b-461">The following scenarios suggest adjustments that can sometimes improve query performance on NUMA systems:</span></span>

-   <span data-ttu-id="c4d0b-462">若為低度資料分割的量值群組 (例如，只有一個資料分割)，增加資料分割數目。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-462">For measure groups that are under-partitioned (for example, having a single partition), increase the number of partitions.</span></span> <span data-ttu-id="c4d0b-463">只使用一個資料分割會導致引擎永遠將工作排入一個執行緒集區 (執行緒集區 0) 的佇列。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-463">Using just one partition will cause the engine to always queue tasks to one thread pool (thread pool 0).</span></span> <span data-ttu-id="c4d0b-464">加入更多分割區可讓引擎使用其他執行緒集區。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-464">Adding more partitions allows the engine to use additional thread pools.</span></span>

     <span data-ttu-id="c4d0b-465">或者，如果您無法建立其他資料分割，請嘗試將 `PerNumaNode` = 0 設定為增加執行緒集區0可用執行緒數目的方式。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-465">Alternatively, if you cannot create additional partitions, try setting `PerNumaNode`=0 as a way to increase the number of threads available to thread pool 0.</span></span>

-   <span data-ttu-id="c4d0b-466">對於區段掃描平均分散到多個分割區的資料庫，將設定 `PerNumaNode` 為1或2可以改善查詢效能，因為它會增加系統所使用的執行緒集區總數 `IOProcess` 。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-466">For databases in which segment scans are evenly distributed across multiple partitions, setting `PerNumaNode` to 1 or 2 can improve query performance because it increases the overall number of `IOProcess` thread pools used by the system.</span></span>

-   <span data-ttu-id="c4d0b-467">針對具有多個分割區，但只掃描一個資料分割的解決方案，請嘗試設定 `PerNumaNode` = 0，以查看它是否能改善效能。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-467">For solutions that have multiple partitions, but only one is heavily scanned, try setting `PerNumaNode`=0 to see if it improves performance.</span></span>

 <span data-ttu-id="c4d0b-468">雖然資料分割和維度掃描都使用 `IOProcess` 執行緒集區，但是維度掃描只會使用執行緒集區0。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-468">Although both partition and dimension scans use the `IOProcess` thread pool, dimension scans only use thread pool 0.</span></span> <span data-ttu-id="c4d0b-469">這樣會導致該執行緒集區中的工作負載稍微分配不平均，但是不平衡的狀態應該是暫時性的，因為維度掃描通常會非常快速且不頻繁。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-469">This can result in a slightly uneven load on that thread pool, but the imbalance should be temporary, as dimension scans tend to be very fast and infrequent.</span></span>

> [!NOTE]
>  <span data-ttu-id="c4d0b-470">當變更伺服器屬性時，請記得組態選項會套用到目前執行個體中執行的所有資料庫。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-470">When changing a server property, remember that the configuration option applies to all databases running on the current instance.</span></span> <span data-ttu-id="c4d0b-471">請選擇有利於最重要的資料庫或最大資料庫數目的設定。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-471">Choose settings that benefit the most important databases, or the greatest number of databases.</span></span> <span data-ttu-id="c4d0b-472">您無法在資料庫層級設定處理器相似性，也無法設定個別分割區與特定處理器之間的相似性。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-472">You cannot set processor affinity at the database level, nor can you set affinity between individual partitions and specific processors.</span></span>

 <span data-ttu-id="c4d0b-473">如需有關工作架構的詳細資訊，請參閱《 [SQL Server 2008 Analysis Services 效能指南](https://www.microsoft.com/download/details.aspx?id=17303)》的第 2.2 節。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-473">For more information about job architecture, see section 2.2 in [SQL Server 2008 Analysis Services Performance Guide](https://www.microsoft.com/download/details.aspx?id=17303).</span></span>

##  <a name="dependent-or-related-properties"></a><a name="bkmk_related"></a><span data-ttu-id="c4d0b-474">相依或相關屬性</span><span class="sxs-lookup"><span data-stu-id="c4d0b-474">Dependent or Related Properties</span></span>
 <span data-ttu-id="c4d0b-475">如[Analysis Services 操作指南](https://msdn.microsoft.com/library/hh226085.aspx)的2.4 一節中所述，如果您增加處理執行緒集區，您應該確定設定和 `CoordinatorExecutionMode` `CoordinatorQueryMaxThreads` 設定都具有可讓您充分利用增加的執行緒集區大小的值。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-475">As explained in section 2.4 of the [Analysis Services Operations Guide](https://msdn.microsoft.com/library/hh226085.aspx), if you increase the processing thread pool, you should make sure that the `CoordinatorExecutionMode` settings, as well as the `CoordinatorQueryMaxThreads` settings, have values that enable you to make full use of the increased thread pool size.</span></span>

 <span data-ttu-id="c4d0b-476">Analysis Services 使用協調器執行緒收集完成處理或查詢要求所需的資料。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-476">Analysis Services uses a coordinator thread for gathering the data needed to complete a processing or query request.</span></span> <span data-ttu-id="c4d0b-477">此協調器會先針對必須處理的每個分割區分別佇列一項作業。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-477">The coordinator first queues up one job for each partition that must be touched.</span></span> <span data-ttu-id="c4d0b-478">根據分割區中必須掃描的區段總數，每項作業會接著繼續將更多作業排入佇列。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-478">Each of those jobs then continues to queue up more jobs, depending on the total number of segments that must be scanned in the partition.</span></span>

 <span data-ttu-id="c4d0b-479">`CoordinatorExecutionMode` 的預設值為 -4，表示每個核心最多 4 個平行作業，限制儲存引擎中 Subcube 要求可平行執行的協調者作業總數。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-479">The default value for `CoordinatorExecutionMode` is -4, meaning a limit of 4 jobs in parallel per core, which constrains the total number of coordinator jobs that can be executed in parallel by a subcube request in the storage engine.</span></span>

 <span data-ttu-id="c4d0b-480">`CoordinatorQueryMaxThreads` 的預設值為 16，限制每個資料分割可平行執行的區段作業數目。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-480">The default value for `CoordinatorQueryMaxThreads` is 16, which limits the number of segment jobs that can be executed in parallel for each partition.</span></span>

##  <a name="determine-current-thread-pool-settings"></a><a name="bkmk_currentsettings"></a><span data-ttu-id="c4d0b-481">判斷目前的執行緒集區設定</span><span class="sxs-lookup"><span data-stu-id="c4d0b-481">Determine current thread pool settings</span></span>
 <span data-ttu-id="c4d0b-482">[!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 會在啟動每項服務時，將目前的執行緒集區設定輸出至 msmdsrv.log 檔案，這些設定包含最小和最大執行緒、處理器相似性遮罩及並行。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-482">At each service startup, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] outputs the current thread pool settings into the msmdsrv.log file, including minimum and maximum threads, processor affinity mask, and concurrency.</span></span>

 <span data-ttu-id="c4d0b-483">下列範例是記錄檔摘錄，在啟用超執行緒的 4 核心系統上，顯示 Query 執行緒集區的預設值 (MinThread=0、MaxThread=0、Concurrency=2)。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-483">The following example is an excerpt from the log file, showing the default settings for the Query thread pool (MinThread=0, MaxThread=0, Concurrency=2), on a 4-core system with hyper-threading enabled.</span></span> <span data-ttu-id="c4d0b-484">相似性遮罩為 0xFF，表示 8 個邏輯處理器。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-484">The affinity mask is 0xFF, indicating 8 logical processors.</span></span> <span data-ttu-id="c4d0b-485">請注意，遮罩前面會附加前置零。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-485">Notice that leading zeros are prepended to the mask.</span></span> <span data-ttu-id="c4d0b-486">您可以忽略前置零。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-486">You can ignore the leading zeros.</span></span>

 `"10/28/2013 9:20:52 AM) Message: The Query thread pool now has 1 minimum threads, 16 maximum threads, and a concurrency of 16.  Its thread pool affinity mask is 0x00000000000000ff. (Source: \\?\C:\Program Files\Microsoft SQL Server\MSAS11.MSSQLSERVER\OLAP\Log\msmdsrv.log, Type: 1, Category: 289, Event ID: 0x4121000A)"`

 <span data-ttu-id="c4d0b-487">請注意，設定 **MinThread** 和 **MaxThread** 的演算法會合併系統組態，特別是處理器數目。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-487">Recall that the algorithm for setting **MinThread** and **MaxThread** incorporates system configuration, particularly the number of processors.</span></span> <span data-ttu-id="c4d0b-488">下列部落格文章提供如何計算值的資訊： [Analysis Services 2012 Configuration settings (Wordpress Blog)](https://go.microsoft.com/fwlink/?LinkId=330387)(Analysis Services 2012 組態設定 (Wordpress 部落格))。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-488">The following blog post offers insights into how the values are calculated: [Analysis Services 2012 Configuration settings (Wordpress Blog)](https://go.microsoft.com/fwlink/?LinkId=330387).</span></span> <span data-ttu-id="c4d0b-489">請注意，後續版本可能會調整這些設定和行為。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-489">Note that these settings and behaviors are subject to adjustment in subsequent releases.</span></span>

 <span data-ttu-id="c4d0b-490">下列清單會針對不同處理器組合顯示其他相似性遮罩設定的範例：</span><span class="sxs-lookup"><span data-stu-id="c4d0b-490">The following list shows examples of other affinity mask settings, for different combinations of processors:</span></span>

-   <span data-ttu-id="c4d0b-491">8 核心系統上處理器 3-2-1-0 的相似性會產生這個位元遮罩 00001111 和十六進位值 0xF</span><span class="sxs-lookup"><span data-stu-id="c4d0b-491">Affinity for processors 3-2-1-0 on an 8 core system results in this bitmask: 00001111, and a hexadecimal value: 0xF</span></span>

-   <span data-ttu-id="c4d0b-492">8 核心系統上處理器 7-6-5-4 的相似性會產生這個位元遮罩 11110000 和十六進位值 0xF0</span><span class="sxs-lookup"><span data-stu-id="c4d0b-492">Affinity for processors 7-6-5-4 on an 8 core system results in this bitmask: 11110000, and a hexadecimal value: 0xF0</span></span>

-   <span data-ttu-id="c4d0b-493">8 核心系統上處理器 5-4-3-2 的相似性會產生這個位元遮罩 00111100 和十六進位值 0x3C</span><span class="sxs-lookup"><span data-stu-id="c4d0b-493">Affinity for processors 5-4-3-2 on an 8 core system results in this bitmask: 00111100, and a hexadecimal value: 0x3C</span></span>

-   <span data-ttu-id="c4d0b-494">8 核心系統上處理器 7-6-1-0 的相似性會產生這個位元遮罩 11000011 和十六進位值 0xC3</span><span class="sxs-lookup"><span data-stu-id="c4d0b-494">Affinity for processors 7-6-1-0 on an 8 core system results in this bitmask: 11000011, and a hexadecimal value: 0xC3</span></span>

 <span data-ttu-id="c4d0b-495">請注意，在具有多個處理器群組的系統上，每個群組會產生個別的相似性遮罩，並以逗號分隔清單來表示。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-495">Recall that on systems having multiple processor groups, a separate affinity mask is generated for each group, in a comma separated list.</span></span>

##  <a name="about-msmdsrvini"></a><a name="bkmk_msmdrsrvini"></a><span data-ttu-id="c4d0b-496">關於 MSMDSRV.INI</span><span class="sxs-lookup"><span data-stu-id="c4d0b-496">About MSMDSRV.INI</span></span>
 <span data-ttu-id="c4d0b-497">msmdsrv.ini 檔案包含 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 執行個體的組態設定，因此會影響在該執行個體上執行的所有資料庫。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-497">The msmdsrv.ini file contains configuration settings for an [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] instance, affecting all databases running on that instance.</span></span> <span data-ttu-id="c4d0b-498">使用伺服器組態屬性不能只最佳化一個資料庫的效能而排除所有其他資料庫。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-498">You cannot use server configuration properties to optimize performance of just one database to the exclusion of all others.</span></span> <span data-ttu-id="c4d0b-499">不過，您可以安裝多個 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 執行個體，並將每個執行個體設定為使用一些屬性，好讓資料庫受益於共用類似的特性或工作負載。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-499">However, you can install multiple instances of [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] and configure each instance to use properties that benefit databases sharing similar characteristics or workloads.</span></span>

 <span data-ttu-id="c4d0b-500">所有伺服器組態屬性都會包含在 msmdsrv.ini 檔案中。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-500">All server configuration properties are included in the msmdsrv.ini file.</span></span> <span data-ttu-id="c4d0b-501">可能需要修改的屬性子集也會出現在 SSMS 等管理工具中。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-501">Subsets of the properties more likely to be modified also appear in administration tools, such as SSMS.</span></span>

 <span data-ttu-id="c4d0b-502">[!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)]之表格式執行個體和多維度執行個體的 msmdsrv.ini 內容相同，</span><span class="sxs-lookup"><span data-stu-id="c4d0b-502">The contents of msmdsrv.ini are identical for both Tabular and Multidimensional instances of [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)].</span></span> <span data-ttu-id="c4d0b-503">但某些設定僅適用於一個模式。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-503">However, some settings apply to one mode only.</span></span> <span data-ttu-id="c4d0b-504">屬性參考文件中會註明這些依據伺服器模式的行為差異。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-504">Differences in behavior based on server mode are noted in property reference documentation.</span></span>

> [!NOTE]
>  <span data-ttu-id="c4d0b-505">如需有關如何設定屬性的指示，請參閱＜ [Configure Server Properties in Analysis Services](server-properties-in-analysis-services.md)＞。</span><span class="sxs-lookup"><span data-stu-id="c4d0b-505">For instructions on how to set properties, see [Configure Server Properties in Analysis Services](server-properties-in-analysis-services.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="c4d0b-506">另請參閱</span><span class="sxs-lookup"><span data-stu-id="c4d0b-506">See Also</span></span>
 <span data-ttu-id="c4d0b-507">[關於進程和執行緒](/windows/desktop/ProcThread/about-processes-and-threads)[多處理器](/windows/desktop/ProcThread/multiple-processors)[處理器群組](/windows/desktop/ProcThread/processor-groups) [Analysis Services SQL Server 2012 中的執行緒集區變更](https://blogs.msdn.com/b/psssql/archive/2012/01/31/analysis-services-thread-pool-changes-in-sql-server-2012.aspx) [Analysis Services 2012 設定 (Wordpress Blog) ](https://go.microsoft.com/fwlink/?LinkId=330387) [支援超過64個處理器的系統](https://msdn.microsoft.com/library/windows/hardware/gg463349.aspx)SQL Server [2008 R2 Analysis Services 操作指南](https://go.microsoft.com/fwlink/?LinkID=225539)</span><span class="sxs-lookup"><span data-stu-id="c4d0b-507">[About Processes and Threads](/windows/desktop/ProcThread/about-processes-and-threads) [Multiple Processors](/windows/desktop/ProcThread/multiple-processors) [Processor Groups](/windows/desktop/ProcThread/processor-groups) [Analysis Services Thread Pool Changes in SQL Server 2012](https://blogs.msdn.com/b/psssql/archive/2012/01/31/analysis-services-thread-pool-changes-in-sql-server-2012.aspx) [Analysis Services 2012 Configuration settings (Wordpress Blog)](https://go.microsoft.com/fwlink/?LinkId=330387) [Supporting Systems That Have More Than 64 Processors](https://msdn.microsoft.com/library/windows/hardware/gg463349.aspx) [SQL Server 2008 R2 Analysis Services Operations Guide](https://go.microsoft.com/fwlink/?LinkID=225539)</span></span>


