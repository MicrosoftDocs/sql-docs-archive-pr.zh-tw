---
title: 遺漏值 (Analysis Services-資料採礦) |Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
helpviewer_keywords:
- attributes [data mining]
- MISSING_VALUE_SUBSTITUTION
- MissingValueSubstitution property
- MISSING_VALUE_SUBSTITUTION parameter
- null values [Analysis Services]
- coding [Data Mining]
ms.assetid: 2b34abdc-7ed4-4ec1-8780-052a704d6dbe
author: minewiskan
ms.author: owend
ms.openlocfilehash: 91bc709d61c786c165711cfdb31ff696456997ff
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87596945"
---
# <a name="missing-values-analysis-services---data-mining"></a><span data-ttu-id="43498-102">遺漏值 (Analysis Services - 資料採礦)</span><span class="sxs-lookup"><span data-stu-id="43498-102">Missing Values (Analysis Services - Data Mining)</span></span>
  <span data-ttu-id="43498-103">正確地處理  *「遺漏值」* (Missing value) 是有效模型中很重要的一部分。</span><span class="sxs-lookup"><span data-stu-id="43498-103">Handling  *missing values* correctly is an important part of effective modeling.</span></span> <span data-ttu-id="43498-104">本節描述何謂遺漏值，以及您在建立資料採礦結構及採礦模型時，可用來處理遺漏值的 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 功能。</span><span class="sxs-lookup"><span data-stu-id="43498-104">This section explains what missing values are, and describes the features provided in [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] to work with missing values when building data mining structures and mining models.</span></span>  
  
## <a name="definition-of-missing-values-in-data-mining"></a><span data-ttu-id="43498-105">資料採礦中遺漏值的定義</span><span class="sxs-lookup"><span data-stu-id="43498-105">Definition of Missing Values in Data Mining</span></span>  
 <span data-ttu-id="43498-106">遺漏值可能代表許多不同的情況。</span><span class="sxs-lookup"><span data-stu-id="43498-106">A missing value can signify a number of different things.</span></span> <span data-ttu-id="43498-107">可能是欄位不適用、事件未發生或資料無法使用。</span><span class="sxs-lookup"><span data-stu-id="43498-107">Perhaps the field was not applicable, the event did not happen, or the data was not available.</span></span> <span data-ttu-id="43498-108">輸入資料的人員可能不知道正確的值，或者未注意欄位是否填入。</span><span class="sxs-lookup"><span data-stu-id="43498-108">It could be that the person who entered the data did not know the right value, or did not care if a field was not filled in.</span></span>  
  
 <span data-ttu-id="43498-109">不過，在很多資料採礦的案例中，遺漏值會提供很重要的資訊。</span><span class="sxs-lookup"><span data-stu-id="43498-109">However, there are many data mining scenarios in which missing values provide important information.</span></span> <span data-ttu-id="43498-110">遺漏值的意義是絕大多數取決於內容。</span><span class="sxs-lookup"><span data-stu-id="43498-110">The meaning of the missing values depends largely on context.</span></span> <span data-ttu-id="43498-111">例如，遺漏發票明細中的日期值和缺少資料行中的員工雇用日期，兩者意義明顯不同。</span><span class="sxs-lookup"><span data-stu-id="43498-111">For example, a missing value for the date in a list of invoices has a meaning substantially different from the lack of a date in column that indicates an employee hire date.</span></span> <span data-ttu-id="43498-112">一般而言， [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 會將遺漏值視為具有資訊價值，並調整機率以在計算中併入遺漏值。</span><span class="sxs-lookup"><span data-stu-id="43498-112">Generally, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] treats missing values as informative and adjusts the probabilities to incorporate the missing values into its calculations.</span></span> <span data-ttu-id="43498-113">這麼做可確保模型的平衡，而不會賦予現有的案例過重的加權。</span><span class="sxs-lookup"><span data-stu-id="43498-113">By doing so, you can ensure that models are balanced and do not weight existing cases too heavily.</span></span>  
  
 <span data-ttu-id="43498-114">因此， [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 提供了兩種截然不同的機制，用於管理和計算遺漏的值。</span><span class="sxs-lookup"><span data-stu-id="43498-114">Therefore, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] provides two distinctly different mechanisms for managing and calculating missing values.</span></span> <span data-ttu-id="43498-115">第一種方法是控制採礦結構層級的空值處理。</span><span class="sxs-lookup"><span data-stu-id="43498-115">The first method controls the handling of nulls at the level of the mining structure.</span></span> <span data-ttu-id="43498-116">第二種方法則依據每個演算法的實作而有所不同，不過通常是定義遺漏值的處理方式以及在模型中允許空值的計算方式。</span><span class="sxs-lookup"><span data-stu-id="43498-116">The second method differs in implementation for each algorithm, but generally defines how missing values are processed and counted in models that permit null values.</span></span>  
  
## <a name="specifying-handling-of-nulls"></a><span data-ttu-id="43498-117">指定空值的處理</span><span class="sxs-lookup"><span data-stu-id="43498-117">Specifying Handling of Nulls</span></span>  
 <span data-ttu-id="43498-118">在資料來源中，很多情形都代表遺漏值，如：空值、試算表中的空白資料格、N/A 或其他代碼值，或任何假造的值 (如 9999)。</span><span class="sxs-lookup"><span data-stu-id="43498-118">In your data source, missing values might be represented in many ways: as nulls, as empty cells in a spreadsheet, as the value N/A or some other code, or as an artificial value such as 9999.</span></span> <span data-ttu-id="43498-119">不過基於資料採礦的目的，只會將空值視為遺漏的值。</span><span class="sxs-lookup"><span data-stu-id="43498-119">However, for purposes of data mining, only nulls are considered missing values.</span></span> <span data-ttu-id="43498-120">若您的資料含有預留位置值而非空值，這就可能會影響模型的結果，因此您應該將其取代為空值，或盡可能推斷出正確的值。</span><span class="sxs-lookup"><span data-stu-id="43498-120">If your data contains placeholder values instead of nulls, they can affect the results of the model, so you should replace them with nulls or infer correct values if possible.</span></span> <span data-ttu-id="43498-121">有多種工具可用來推斷及填入適當的值，例如 SQL Server Integration Services 中的查閱轉換或資料設定檔工作，或是 Data Mining Add-Ins for Excel 中提供的 Fill By Example 工具。</span><span class="sxs-lookup"><span data-stu-id="43498-121">There are a variety of tools that you can use to infer and fill in appropriate values, such as the Lookup transformation or the Data Profiler task in SQL Server Integration Services, or the Fill By Example tool provided in the Data Mining Add-Ins for Excel.</span></span>  
  
 <span data-ttu-id="43498-122">若您正在建立模型的工作指出資料行絕對不能有遺漏值，則您在定義採礦結構時，應該在資料行中套用 `NOT_NULL` 模型旗標。</span><span class="sxs-lookup"><span data-stu-id="43498-122">If the task that you are modeling specifies that a column must never have missing values, you should apply the `NOT_NULL` modeling flag to the column when you define the mining structure.</span></span> <span data-ttu-id="43498-123">此旗標表示若沒有適當的值時，處理就會失敗。</span><span class="sxs-lookup"><span data-stu-id="43498-123">This flag indicates that processing should fail if a case does not have an appropriate value.</span></span> <span data-ttu-id="43498-124">如果在處理模型時發生此錯誤，您可以記錄錯誤，並採取步驟來修正提供給模型的資料。</span><span class="sxs-lookup"><span data-stu-id="43498-124">If this error occurs when processing a model, you can log the error and take steps to correct the data that is supplied to the model.</span></span>  
  
## <a name="calculation-of-the-missing-state"></a><span data-ttu-id="43498-125">遺漏狀態計算</span><span class="sxs-lookup"><span data-stu-id="43498-125">Calculation of the Missing State</span></span>  
 <span data-ttu-id="43498-126">對資料採礦演算法而言，遺漏值也具有資訊價值。</span><span class="sxs-lookup"><span data-stu-id="43498-126">To the data mining algorithm, missing values are informative.</span></span> <span data-ttu-id="43498-127">在案例資料表中，`Missing` 與其他狀態一樣是有效的狀態；</span><span class="sxs-lookup"><span data-stu-id="43498-127">In case tables, `Missing` is a valid state like any other.</span></span> <span data-ttu-id="43498-128">此外，資料採礦模型也可以使用其他值來預測是否遺漏了值。</span><span class="sxs-lookup"><span data-stu-id="43498-128">Moreover, a data mining model can use other values to predict whether a value is missing.</span></span> <span data-ttu-id="43498-129">換句話說，遺漏值這件事並不等於錯誤。</span><span class="sxs-lookup"><span data-stu-id="43498-129">In other words, the fact that a value is missing is not an error.</span></span>  
  
 <span data-ttu-id="43498-130">當您建立採礦模型時，`Missing` 狀態會自動加入模型以供所有離散資料行使用。</span><span class="sxs-lookup"><span data-stu-id="43498-130">When you create a mining model, a `Missing` state is automatically added to the model for all discrete columns.</span></span> <span data-ttu-id="43498-131">例如，若 [性別] 輸入資料行含有「男」和「女」兩種可能值，則第三個值會自動加入以代表 `Missing` 值，而顯示資料行所有值散發的長條圖一定會包含具有 `Missing` 值的案例計數。</span><span class="sxs-lookup"><span data-stu-id="43498-131">For example, if the input column [Gender] contains two possible values, Male and Female, a third value is automatically added to represent the `Missing` value, and the histogram that shows the distribution of all values for the column always includes a count of the cases with `Missing` values.</span></span> <span data-ttu-id="43498-132">如果「性別」資料行未遺漏任何值，則長條圖會顯示在 0 個案例中找到「遺漏」狀態。</span><span class="sxs-lookup"><span data-stu-id="43498-132">If the Gender column is not missing any values, the histogram shows that the Missing state is found in 0 cases.</span></span>  
  
 <span data-ttu-id="43498-133">預設包含 `Missing` 狀態是合乎常理的，因為資料可能並不具備所有可能值的範例，而且您也不想只因為資料中沒有範例而讓模型排除可能的值。</span><span class="sxs-lookup"><span data-stu-id="43498-133">The rationale for including the `Missing` state by default becomes clear when you consider that your data might not have examples of all possible values, and you would not want the model to exclude the possibility just because there was no example in the data.</span></span> <span data-ttu-id="43498-134">例如，如果某個店家的銷售資料顯示已購買特定產品的所有客戶剛好都是女性，您不會想建立一個模型來預測只有女性可能會購買該產品。</span><span class="sxs-lookup"><span data-stu-id="43498-134">For example, if sales data for a store showed that all customers who purchased a certain product happened to be women, you would not want to create a model that predicts that only women could purchase the product.</span></span> <span data-ttu-id="43498-135">相反地，會 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 為額外的未知值新增預留位置，稱為 `Missing` ，以容納可能的其他狀態。</span><span class="sxs-lookup"><span data-stu-id="43498-135">Instead, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] adds a placeholder for the extra unknown value, called `Missing`, as a way of accommodating possible other states.</span></span>  
  
 <span data-ttu-id="43498-136">例如，下表顯示針對 Bike Buyer 教學課程所建立的決策樹模型中 (All) 節點的值散發。</span><span class="sxs-lookup"><span data-stu-id="43498-136">For example, the following table shows the distribution of values for the (All) node in the decision tree model created for the Bike Buyer tutorial.</span></span> <span data-ttu-id="43498-137">在範例案例中，[Bike Buyer] 資料行是可預測的屬性，其中 1 代表「是」，而 0 代表「否」。</span><span class="sxs-lookup"><span data-stu-id="43498-137">In the example scenario, the [Bike Buyer] column is the predictable attribute, where 1 indicates "Yes" and 0 indicates "No".</span></span>  
  
|<span data-ttu-id="43498-138">值</span><span class="sxs-lookup"><span data-stu-id="43498-138">Value</span></span>|<span data-ttu-id="43498-139">案例</span><span class="sxs-lookup"><span data-stu-id="43498-139">Cases</span></span>|  
|-----------|-----------|  
|<span data-ttu-id="43498-140">0</span><span class="sxs-lookup"><span data-stu-id="43498-140">0</span></span>|<span data-ttu-id="43498-141">9296</span><span class="sxs-lookup"><span data-stu-id="43498-141">9296</span></span>|  
|<span data-ttu-id="43498-142">1</span><span class="sxs-lookup"><span data-stu-id="43498-142">1</span></span>|<span data-ttu-id="43498-143">9098</span><span class="sxs-lookup"><span data-stu-id="43498-143">9098</span></span>|  
|<span data-ttu-id="43498-144">Missing</span><span class="sxs-lookup"><span data-stu-id="43498-144">Missing</span></span>|<span data-ttu-id="43498-145">0</span><span class="sxs-lookup"><span data-stu-id="43498-145">0</span></span>|  
  
 <span data-ttu-id="43498-146">此散發顯示大約一半的客戶已購買腳踏車，另一半則沒有。</span><span class="sxs-lookup"><span data-stu-id="43498-146">This distribution shows that about half of the customers have purchased a bike, and half have not.</span></span> <span data-ttu-id="43498-147">這個特定資料集非常清楚，因此每個案例在 [Bike Buyer] 資料行中都有一個值，而 `Missing` 值為 0。</span><span class="sxs-lookup"><span data-stu-id="43498-147">This particular data set is very clean; therefore, every case has a value in the [Bike Buyer] column, and the count of `Missing` values is 0.</span></span> <span data-ttu-id="43498-148">不過，如果任何案例在 [自行車購買者] 欄位中都有 null [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 值，就會將該資料列計為具有值的案例 `Missing` 。</span><span class="sxs-lookup"><span data-stu-id="43498-148">However, if any case had a null in the [Bike Buyer] field, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] would count that row as a case with a `Missing` value.</span></span>  
  
 <span data-ttu-id="43498-149">如果輸入是連續的資料行，則模型會將屬性的兩個可能狀態製為表格：`Existing` 和 `Missing`。</span><span class="sxs-lookup"><span data-stu-id="43498-149">If the input is a continuous column, the model tabulates two possible states for the attribute: `Existing` and `Missing`.</span></span> <span data-ttu-id="43498-150">換言之，資料行會包含某個數值類型的值或不包含任何值。</span><span class="sxs-lookup"><span data-stu-id="43498-150">In other words, either the column contains a value of some numeric data type, or it contains no value.</span></span> <span data-ttu-id="43498-151">對於擁有值的案例，模型會計算平均標準差以及其他有用的統計資料。</span><span class="sxs-lookup"><span data-stu-id="43498-151">For cases that have a value, the model calculates mean, standard deviation, and other meaningful statistics.</span></span> <span data-ttu-id="43498-152">對於沒有值的案例，模型則會提供 `Missing` 值的計數並據此調整預測。</span><span class="sxs-lookup"><span data-stu-id="43498-152">For cases that have no value, the model provides a count of the `Missing` vales and adjusts predictions accordingly.</span></span> <span data-ttu-id="43498-153">調整預測的方法會根據演算法而異，相關說明請見下一章節。</span><span class="sxs-lookup"><span data-stu-id="43498-153">The method for adjusting the prediction differs depending on the algorithm and is described in the following section.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="43498-154">對於巢狀資料表中的屬性而言，遺漏值沒有很高的資訊價值。</span><span class="sxs-lookup"><span data-stu-id="43498-154">For attributes in a nested table, missing values are not informative.</span></span> <span data-ttu-id="43498-155">例如，如果客戶尚未購買產品，則巢狀的 **Products** 資料表就不會有對應該產品的資料列，採礦模型也不會為遺漏的產品建立屬性。</span><span class="sxs-lookup"><span data-stu-id="43498-155">For example, if a customer has not purchased a product, the nested **Products** table would not have a row corresponding to that product, and the mining model would not create an attribute for the missing product.</span></span> <span data-ttu-id="43498-156">不過，如果您對尚未購買特定產品的客戶感興趣，可以藉由在模型篩選中使用 NOT EXISTS 陳述式，建立會針對巢狀資料表中不存在的產品進行篩選的模型。</span><span class="sxs-lookup"><span data-stu-id="43498-156">However, if you are interested in customers who have not purchased certain products, you can create a model that is filtered on the non-existence of the products in the nested table, by using a NOT EXISTS statement in the model filter.</span></span> <span data-ttu-id="43498-157">如需詳細資訊，請參閱 [將篩選套用至採礦模型](apply-a-filter-to-a-mining-model.md)。</span><span class="sxs-lookup"><span data-stu-id="43498-157">For more information, see [Apply a Filter to a Mining Model](apply-a-filter-to-a-mining-model.md).</span></span>  
  
## <a name="adjusting-probability-for-missing-states"></a><span data-ttu-id="43498-158">調整遺漏狀態的機率</span><span class="sxs-lookup"><span data-stu-id="43498-158">Adjusting Probability for Missing States</span></span>  
 <span data-ttu-id="43498-159">除了計算值以外， [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 也可以計算整個資料集中任何值的機率。</span><span class="sxs-lookup"><span data-stu-id="43498-159">In addition to counting values, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] calculates the probability of any value across the data set.</span></span> <span data-ttu-id="43498-160">`Missing` 值的情況也是如此。</span><span class="sxs-lookup"><span data-stu-id="43498-160">The same is true for the `Missing` value.</span></span> <span data-ttu-id="43498-161">例如，下列資料表顯示前述範例中案例的機率：</span><span class="sxs-lookup"><span data-stu-id="43498-161">For example, the following table shows the probabilities for the cases in the previous example:</span></span>  
  
|<span data-ttu-id="43498-162">值</span><span class="sxs-lookup"><span data-stu-id="43498-162">Value</span></span>|<span data-ttu-id="43498-163">案例</span><span class="sxs-lookup"><span data-stu-id="43498-163">Cases</span></span>|<span data-ttu-id="43498-164">機率</span><span class="sxs-lookup"><span data-stu-id="43498-164">Probability</span></span>|  
|-----------|-----------|-----------------|  
|<span data-ttu-id="43498-165">0</span><span class="sxs-lookup"><span data-stu-id="43498-165">0</span></span>|<span data-ttu-id="43498-166">9296</span><span class="sxs-lookup"><span data-stu-id="43498-166">9296</span></span>|<span data-ttu-id="43498-167">50.55%</span><span class="sxs-lookup"><span data-stu-id="43498-167">50.55%</span></span>|  
|<span data-ttu-id="43498-168">1</span><span class="sxs-lookup"><span data-stu-id="43498-168">1</span></span>|<span data-ttu-id="43498-169">9098</span><span class="sxs-lookup"><span data-stu-id="43498-169">9098</span></span>|<span data-ttu-id="43498-170">49.42%</span><span class="sxs-lookup"><span data-stu-id="43498-170">49.42%</span></span>|  
|<span data-ttu-id="43498-171">Missing</span><span class="sxs-lookup"><span data-stu-id="43498-171">Missing</span></span>|<span data-ttu-id="43498-172">0</span><span class="sxs-lookup"><span data-stu-id="43498-172">0</span></span>|<span data-ttu-id="43498-173">0.03%</span><span class="sxs-lookup"><span data-stu-id="43498-173">0.03%</span></span>|  
  
 <span data-ttu-id="43498-174">當案例數為 0 時，`Missing` 值的機率計算為 0.03% 可能看起來很奇怪。</span><span class="sxs-lookup"><span data-stu-id="43498-174">It may seem odd that the probability of the `Missing` value is calculated as 0.03%, when the number of cases is 0.</span></span> <span data-ttu-id="43498-175">事實上，這個行為是經過設計的，代表可讓模型正常處理未知值的調整。</span><span class="sxs-lookup"><span data-stu-id="43498-175">In fact, this behavior is by design, and represents an adjustment that lets the model handle unknown values gracefully.</span></span>  
  
 <span data-ttu-id="43498-176">一般而言，機率是由理想案例除以所有可能案例來計算。</span><span class="sxs-lookup"><span data-stu-id="43498-176">In general, probability is calculated as the favorable cases divided by all possible cases.</span></span> <span data-ttu-id="43498-177">在此案例中，演算法會計算符合特定條件 ([Bike Buyer] = 1 或 [Bike Buyer] = 0) 的案例總和，然後將該數目除以資料列的總計。</span><span class="sxs-lookup"><span data-stu-id="43498-177">In this example, the algorithm computes the sum of the cases that meet a particular condition ([Bike Buyer] = 1, or [Bike Buyer] = 0), and divides that number by the total count of rows.</span></span> <span data-ttu-id="43498-178">不過，為了計算 `Missing` 案例，所以會在所有可能案例數中加入 1。</span><span class="sxs-lookup"><span data-stu-id="43498-178">However, to account for the `Missing` cases, 1 is added to the number of all possible cases.</span></span> <span data-ttu-id="43498-179">結果是未知案例的機率不再為零，但為很小的數目，代表狀態僅為不太可能，而非不可能。</span><span class="sxs-lookup"><span data-stu-id="43498-179">As a result, the probability for the unknown case is no longer zero, but a very small number, indicating that the state is merely improbable, not impossible.</span></span>  
  
 <span data-ttu-id="43498-180">加入這個微小的 `Missing` 值並不會變更預測器的結果，但可以為歷程記錄資料不支援所有可能結果的案例建立更好的模型。</span><span class="sxs-lookup"><span data-stu-id="43498-180">The addition of the small `Missing` value does not change the outcome of the predictor; however, it enables better modeling in scenarios where the historical data does not include all possible outcomes.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="43498-181">資料採礦提供者處理遺漏值的方式各有不同。</span><span class="sxs-lookup"><span data-stu-id="43498-181">Data mining providers differ in the way they handle missing values.</span></span> <span data-ttu-id="43498-182">例如，某些提供者假設巢狀資料行中的遺漏資料是疏鬆的表示，但非巢狀資料行中的遺漏資料則是隨機遺漏。</span><span class="sxs-lookup"><span data-stu-id="43498-182">For example, some providers assume that missing data in a nested column is sparse representation, but that missing data in a non-nested column is missing at random.</span></span>  
  
 <span data-ttu-id="43498-183">如果您確定資料中已指定了所有結果而想避免調整機率，則應該在採礦結構中的資料行上設定 NOT_NULL 模型旗標。</span><span class="sxs-lookup"><span data-stu-id="43498-183">If you are certain that all outcomes are specified in your data and want to prevent probabilities from being adjusted, you should set the NOT_NULL modeling flag on the column in the mining structure.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="43498-184">每種演算法 (包括您從協力廠商外掛程式取得的自訂演算法) 在處理遺漏值的方式上也各不相同。</span><span class="sxs-lookup"><span data-stu-id="43498-184">Each algorithm, including custom algorithms that you may have obtained from a third-party plug-in, can handle missing values differently.</span></span>  
  
### <a name="special-handling-of-missing-values-in-decision-tree-models"></a><span data-ttu-id="43498-185">在決策樹模型中對遺漏值的特別處理</span><span class="sxs-lookup"><span data-stu-id="43498-185">Special Handling of Missing Values in Decision Tree Models</span></span>  
 <span data-ttu-id="43498-186">Microsoft 決策樹演算法計算遺漏值機率的方法與其他演算法不同。</span><span class="sxs-lookup"><span data-stu-id="43498-186">The Microsoft Decision Trees algorithm calculates probabilities for missing values differently than in other algorithms.</span></span> <span data-ttu-id="43498-187">決策樹演算法不是只會在案例總數上加 1，而是會使用有些許不同的公式來調整 `Missing` 狀態。</span><span class="sxs-lookup"><span data-stu-id="43498-187">Instead of just adding 1 to the total number of cases, the decision trees algorithm adjusts for the `Missing` state by using a slightly different formula.</span></span>  
  
 <span data-ttu-id="43498-188">在決策樹模型中，`Missing` 狀態的機率計算方式如下：</span><span class="sxs-lookup"><span data-stu-id="43498-188">In a decision tree model, the probability of the `Missing` state is calculated as follows:</span></span>  
  
 <span data-ttu-id="43498-189">StateProbability = (NodePriorProbability)\* (StateSupport + 1) / (NodeSupport + TotalStates)</span><span class="sxs-lookup"><span data-stu-id="43498-189">StateProbability = (NodePriorProbability)\* (StateSupport + 1) / (NodeSupport + TotalStates)</span></span>  
  
 <span data-ttu-id="43498-190">此外，在 [!INCLUDE[ssASCurrent](../../includes/ssascurrent-md.md)]中，決策樹演算法會提供額外的調整，以協助演算法補償模型具有的篩選，這些篩選可能會導致在定型期間排除許多狀態。</span><span class="sxs-lookup"><span data-stu-id="43498-190">Moreover, in [!INCLUDE[ssASCurrent](../../includes/ssascurrent-md.md)], the Decision Trees algorithm provides an additional adjustment that helps the algorithm compensate for the presence of filters on the model, which may result in many states to be excluded during training.</span></span>  
  
 <span data-ttu-id="43498-191">在 [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]中，如果某狀態存在於定型期間，但在特定節點中剛好沒有任何支援，則會進行標準調整。</span><span class="sxs-lookup"><span data-stu-id="43498-191">In [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], if a state is present during training but just happens to have zero support in a certain node, the standard adjustment is made.</span></span> <span data-ttu-id="43498-192">不過，如果在定型期間都沒有遇到某狀態，則演算法會將機率設為剛好為零。</span><span class="sxs-lookup"><span data-stu-id="43498-192">However, if a state is never encountered during training, the algorithm sets the probability to exactly zero.</span></span> <span data-ttu-id="43498-193">這項調整不只會套用至 `Missing` 狀態，也會套用至存在於定型資料、但因為模型篩選而沒有任何支援的其他狀態。</span><span class="sxs-lookup"><span data-stu-id="43498-193">This adjustment applies not only to the `Missing` state, but also to other states that exist in the training data but have zero support as result of model filtering.</span></span>  
  
 <span data-ttu-id="43498-194">這項額外的調整產生下列公式：</span><span class="sxs-lookup"><span data-stu-id="43498-194">This additional adjustment results in the following formula:</span></span>  
  
 <span data-ttu-id="43498-195">如果狀態在定型集中沒有任何支援，則 StateProbability = 0.0。</span><span class="sxs-lookup"><span data-stu-id="43498-195">StateProbability = 0.0 if that state has 0 support in the training set</span></span>  
  
 <span data-ttu-id="43498-196">ELSE StateProbability = (NodePriorProbability)\* (StateSupport + 1) / (NodeSupport + TotalStatesWithNonZeroSupport)</span><span class="sxs-lookup"><span data-stu-id="43498-196">ELSE StateProbability = (NodePriorProbability)\* (StateSupport + 1) / (NodeSupport + TotalStatesWithNonZeroSupport)</span></span>  
  
 <span data-ttu-id="43498-197">這項調整的結果是可以維持樹狀目錄的穩定性。</span><span class="sxs-lookup"><span data-stu-id="43498-197">The net effect of this adjustment is to maintain the stability of the tree.</span></span>  
  
## <a name="related-tasks"></a><span data-ttu-id="43498-198">相關工作</span><span class="sxs-lookup"><span data-stu-id="43498-198">Related Tasks</span></span>  
 <span data-ttu-id="43498-199">下列主題提供有關如何處理遺漏值的詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="43498-199">The following topics provide more information about how to handle missing values.</span></span>  
  
|<span data-ttu-id="43498-200">工作</span><span class="sxs-lookup"><span data-stu-id="43498-200">Tasks</span></span>|<span data-ttu-id="43498-201">連結</span><span class="sxs-lookup"><span data-stu-id="43498-201">Links</span></span>|  
|-----------|-----------|  
|<span data-ttu-id="43498-202">將旗標加入個別模型資料行，以控制遺漏值的處理</span><span class="sxs-lookup"><span data-stu-id="43498-202">Add flags to individual model columns to control handling of missing values</span></span>|[<span data-ttu-id="43498-203">檢視或變更模型旗標 &#40;資料採礦&#41;</span><span class="sxs-lookup"><span data-stu-id="43498-203">View or Change Modeling Flags &#40;Data Mining&#41;</span></span>](modeling-flags-data-mining.md)|  
|<span data-ttu-id="43498-204">設定採礦模型的屬性以控制遺漏值的處理</span><span class="sxs-lookup"><span data-stu-id="43498-204">Set properties on a mining model to control handling of missing values</span></span>|[<span data-ttu-id="43498-205">變更採礦模型的屬性</span><span class="sxs-lookup"><span data-stu-id="43498-205">Change the Properties of a Mining Model</span></span>](change-the-properties-of-a-mining-model.md)|  
|<span data-ttu-id="43498-206">了解如何在 DMX 中指定模型旗標</span><span class="sxs-lookup"><span data-stu-id="43498-206">Learn how to specify modeling flags in DMX</span></span>|[<span data-ttu-id="43498-207">模型旗標 &#40;DMX&#41;</span><span class="sxs-lookup"><span data-stu-id="43498-207">Modeling Flags &#40;DMX&#41;</span></span>](/sql/dmx/modeling-flags-dmx)|  
|<span data-ttu-id="43498-208">改變採礦結構處理遺漏值的方式</span><span class="sxs-lookup"><span data-stu-id="43498-208">Alter the way that the mining structure handles missing values</span></span>|[<span data-ttu-id="43498-209">變更採礦結構的屬性</span><span class="sxs-lookup"><span data-stu-id="43498-209">Change the Properties of a Mining Structure</span></span>](change-the-properties-of-a-mining-structure.md)|  
  
## <a name="see-also"></a><span data-ttu-id="43498-210">另請參閱</span><span class="sxs-lookup"><span data-stu-id="43498-210">See Also</span></span>  
 <span data-ttu-id="43498-211">[&#40;Analysis Services 的採礦模型內容-資料採礦&#41;](mining-model-content-analysis-services-data-mining.md) </span><span class="sxs-lookup"><span data-stu-id="43498-211">[Mining Model Content &#40;Analysis Services - Data Mining&#41;](mining-model-content-analysis-services-data-mining.md) </span></span>  
 [<span data-ttu-id="43498-212">模型旗標 &#40;資料採礦&#41;</span><span class="sxs-lookup"><span data-stu-id="43498-212">Modeling Flags &#40;Data Mining&#41;</span></span>](modeling-flags-data-mining.md)  
  
  
