---
title: 資料分割和 DirectQuery 模式 (SSAS 表格式) |Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: 5f179ba9-6efb-46ae-90e5-945bbfddb719
author: minewiskan
ms.author: owend
ms.openlocfilehash: 5957ed919f15a5c7f39c3c78133786ae6687a2d2
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87598523"
---
# <a name="partitions-and-directquery-mode-ssas-tabular"></a><span data-ttu-id="74fbf-102">資料分割和 DirectQuery 模式 (SSAS 表格式)</span><span class="sxs-lookup"><span data-stu-id="74fbf-102">Partitions and DirectQuery Mode (SSAS Tabular)</span></span>
  <span data-ttu-id="74fbf-103">本節說明如何在 DirectQuery 模型中使用資料分割。</span><span class="sxs-lookup"><span data-stu-id="74fbf-103">This section explains how partitions are used in DirectQuery models.</span></span> <span data-ttu-id="74fbf-104">如需表格式模型中之資料分割的更一般資訊，請參閱 [資料分割 &#40;SSAS 表格式&#41;](partitions-ssas-tabular.md)。</span><span class="sxs-lookup"><span data-stu-id="74fbf-104">For more general information about partitions in tabular models, see [Partitions &#40;SSAS Tabular&#41;](partitions-ssas-tabular.md).</span></span>  
  
 <span data-ttu-id="74fbf-105">如需如何變更所使用之資料分割的指示，或查看資料分割的相關資訊，請參閱[&#40;SSAS 表格式&#41;變更 DirectQuery 資料分割](../change-the-directquery-partition-ssas-tabular.md)。</span><span class="sxs-lookup"><span data-stu-id="74fbf-105">For instructions on how to change the partition that is used, or view information about the partition, see [Change the DirectQuery Partition &#40;SSAS Tabular&#41;](../change-the-directquery-partition-ssas-tabular.md).</span></span>  
  
## <a name="using-partitions-in-directquery-mode"></a><span data-ttu-id="74fbf-106">在 DirectQuery 模式中使用資料分割</span><span class="sxs-lookup"><span data-stu-id="74fbf-106">Using Partitions in DirectQuery Mode</span></span>  
 <span data-ttu-id="74fbf-107">您必須針對每一個資料表指定當做 DirectQuery 資料來源使用的單一資料分割。</span><span class="sxs-lookup"><span data-stu-id="74fbf-107">For each table, you must specify a single partition to use as the DirectQuery data source.</span></span>  <span data-ttu-id="74fbf-108">如果有多個資料分割，當您將模型切換為啟用 DirectQuery 模式時，根據預設，資料表中建立的第一個資料分割會標示為 DirectQuery 資料分割。</span><span class="sxs-lookup"><span data-stu-id="74fbf-108">If there are multiple partitions, when you switch the model to enable DirectQuery mode, by default the first partition that was created in the table is flagged as the DirectQuery partition.</span></span> <span data-ttu-id="74fbf-109">可以在稍後透過使用 [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)]中的資料分割管理員來變更此設定。</span><span class="sxs-lookup"><span data-stu-id="74fbf-109">You can change this later by using the Partition Manager in [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)].</span></span>  
  
 <span data-ttu-id="74fbf-110">為什麼在 DirectQuery 模式下只允許單一資料分割？</span><span class="sxs-lookup"><span data-stu-id="74fbf-110">Why allow only a single partition in DirectQuery mode?</span></span>  
  
 <span data-ttu-id="74fbf-111">在表格式模型中 (就如同 OLAP 模型一樣)，資料表的資料分割是由 SQL 查詢所定義。</span><span class="sxs-lookup"><span data-stu-id="74fbf-111">In tabular models (as in OLAP models), the partitions of a table are defined by SQL queries.</span></span> <span data-ttu-id="74fbf-112">建立資料分割定義的開發人員會負責確保資料分割不會重疊。</span><span class="sxs-lookup"><span data-stu-id="74fbf-112">The developer who creates the partition definition is responsible for ensuring that partitions do not overlap.</span></span> <span data-ttu-id="74fbf-113">Analysis Services 不會檢查記錄是屬於一個資料分割還是多個資料分割。</span><span class="sxs-lookup"><span data-stu-id="74fbf-113">Analysis Services does not check whether records belong in one or multiple partitions.</span></span>  
  
 <span data-ttu-id="74fbf-114">快取表格式模型中資料分割有相同的行為。</span><span class="sxs-lookup"><span data-stu-id="74fbf-114">Partitions in a cached tabular model behave the same way.</span></span> <span data-ttu-id="74fbf-115">如果您使用記憶體中的模型，在存取快取時，會對每個資料分割評估 DAX 公式，並且合併結果。</span><span class="sxs-lookup"><span data-stu-id="74fbf-115">If you are using an in-memory model, while the cache is being accessed, DAX formulas are evaluated for each partition, and the results are combined.</span></span> <span data-ttu-id="74fbf-116">但是當表格式模型使用 DirectQuery 模式時，無法評估多個資料分割、合併結果，以及將其轉換為 SQL 陳述式以傳送到關聯式資料存放區。</span><span class="sxs-lookup"><span data-stu-id="74fbf-116">However, when a tabular model uses DirectQuery mode, it would be impossible to evaluate multiple partitions, combine the results, and convert that into a SQL statement for sending to the relational data store.</span></span> <span data-ttu-id="74fbf-117">這樣做可能會導致無法接受的效能損失，以及在彙總結果時可能發生的不精確性。</span><span class="sxs-lookup"><span data-stu-id="74fbf-117">Doing so could lead to unacceptable loss of performance, as well as potential inaccuracies as the results are aggregated.</span></span>  
  
 <span data-ttu-id="74fbf-118">因此，對於在 DirectQuery 模式中回答的查詢，伺服器會使用已標示為主要資料分割的單一資料分割來存取 DirectQuery，稱為「DirectQuery 資料分割」\*\*。</span><span class="sxs-lookup"><span data-stu-id="74fbf-118">Therefore, for queries answered in DirectQuery mode, the server uses a single partition that has been marked as the primary partition for DirectQuery access, called the *DirectQuery partition*.</span></span>  <span data-ttu-id="74fbf-119">在這個分割區定義中指定的 SQL 查詢，會定義一組完整的資料，用來回答 DirectQuery 模式中的查詢。</span><span class="sxs-lookup"><span data-stu-id="74fbf-119">The SQL query specified in the definition of this partition defines the complete set of data that can be used to answer queries in DirectQuery mode.</span></span>  
  
 <span data-ttu-id="74fbf-120">如果您未明確定義資料分割，則引擎只是發出 SQL 查詢至整個關聯式資料來源、執行 DAX 公式規定的任何以集合為基礎的作業，並且傳回查詢結果。</span><span class="sxs-lookup"><span data-stu-id="74fbf-120">If you do not explicitly define a partition, the engine simply issues a SQL query to the entire relational data source, performs any set-based operations dictated by the DAX formula, and returns the query results.</span></span>  
  
 <span data-ttu-id="74fbf-121">如果您在資料表中有多個資料分割，並且選取某個資料分割當做 DirectQuery 資料分割，則預設會將所有其他資料分割標示為僅供記憶體中使用。</span><span class="sxs-lookup"><span data-stu-id="74fbf-121">If you have multiple partitions in a table, and select one partition as the DirectQuery partition, by default all other partitions are marked as being for in-memory use only.</span></span>  
  
## <a name="partitions-in-cached-models-and-in-directquery-models"></a><span data-ttu-id="74fbf-122">快取模型和 DirectQuery 模型中的資料分割</span><span class="sxs-lookup"><span data-stu-id="74fbf-122">Partitions in Cached Models and in DirectQuery Models</span></span>  
 <span data-ttu-id="74fbf-123">當您設定 DirectQuery 資料分割時，您必須為此資料分割指定處理選項。</span><span class="sxs-lookup"><span data-stu-id="74fbf-123">When you configure a DirectQuery partition, you must specify processing options for the partition.</span></span>  
  
 <span data-ttu-id="74fbf-124">DirectQuery 資料分割有兩個處理選項。</span><span class="sxs-lookup"><span data-stu-id="74fbf-124">There are two processing options for the DirectQuery partition.</span></span> <span data-ttu-id="74fbf-125">若要設定這個屬性，請在 [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] 或 [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] 中使用 [資料分割管理員]\*\*\*\*，然後選取 [處理選項]\*\*\*\* 屬性。</span><span class="sxs-lookup"><span data-stu-id="74fbf-125">To set this property, use the **Partition Manager** in [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)], or [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], and select the **Processing Option** property.</span></span> <span data-ttu-id="74fbf-126">下表列出這個屬性的值，並描述當每個值在連接字串上結合 DirectQueryUsage 屬性使用時的影響：</span><span class="sxs-lookup"><span data-stu-id="74fbf-126">The following table lists the values of this property, and describes the effects of each value when combined with the DirectQueryUsage property on the connection string:</span></span>  
  
|<span data-ttu-id="74fbf-127">**DirectQueryUsage**屬性</span><span class="sxs-lookup"><span data-stu-id="74fbf-127">**DirectQueryUsage** property</span></span>|<span data-ttu-id="74fbf-128">[處理選項]\*\*\*\* 屬性</span><span class="sxs-lookup"><span data-stu-id="74fbf-128">**Processing Option** property</span></span>|<span data-ttu-id="74fbf-129">注意</span><span class="sxs-lookup"><span data-stu-id="74fbf-129">Notes</span></span>|  
|-----------------------------------|------------------------------------|-----------|  
|<span data-ttu-id="74fbf-130">DirectQuery</span><span class="sxs-lookup"><span data-stu-id="74fbf-130">DirectQuery</span></span>|<span data-ttu-id="74fbf-131">永不處理這個資料分割</span><span class="sxs-lookup"><span data-stu-id="74fbf-131">Never process this partition</span></span>|<span data-ttu-id="74fbf-132">當模型使用僅限 DirectQuery 時，不需要進行處理。</span><span class="sxs-lookup"><span data-stu-id="74fbf-132">When the model is using DirectQuery only, processing is never necessary.</span></span><br /><br /> <span data-ttu-id="74fbf-133">在混合模型中，您可以將 DirectQuery 資料分割設定為永遠不會處理。</span><span class="sxs-lookup"><span data-stu-id="74fbf-133">In hybrid models, you can configure the DirectQuery partition to never be processed.</span></span> <span data-ttu-id="74fbf-134">例如，如果您正在對一個非常大的資料集進行操作，並且不想要將完整結果新增至快取，則可以指定 DirectQuery 資料分割包含資料表中所有其他資料分割結果的聯集，然後永遠不處理聯集。</span><span class="sxs-lookup"><span data-stu-id="74fbf-134">For example, if you are operating over a very large data set and do not want the full results added to the cache, you can specify that the DirectQuery partition include the union of results for all other partitions in the table, and then never process the union.</span></span> <span data-ttu-id="74fbf-135">傳送至關聯式資料來源的查詢不會受到影響，並且對快取資料執行的查詢會合併來自其他資料分割的資料。</span><span class="sxs-lookup"><span data-stu-id="74fbf-135">Queries that go to the relational source will not be affected, and queries against cached data will combine data from the other partitions</span></span>|  
|<span data-ttu-id="74fbf-136">搭配使用 InMemory 和 DirectQuery</span><span class="sxs-lookup"><span data-stu-id="74fbf-136">InMemory With DirectQuery</span></span>|<span data-ttu-id="74fbf-137">允許處理資料分割</span><span class="sxs-lookup"><span data-stu-id="74fbf-137">Allow partition to be processed</span></span>|<span data-ttu-id="74fbf-138">如果模型使用混合模式，您應該針對記憶體中查詢和 DirectQuery 資料來源的查詢使用相同資料分割。</span><span class="sxs-lookup"><span data-stu-id="74fbf-138">If the model is using hybrid mode, you should use the same partition for queries against the in-memory and queries against the DirectQuery data source.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="74fbf-139">另請參閱</span><span class="sxs-lookup"><span data-stu-id="74fbf-139">See Also</span></span>  
 [<span data-ttu-id="74fbf-140">資料分割 &#40;SSAS 表格式&#41;</span><span class="sxs-lookup"><span data-stu-id="74fbf-140">Partitions &#40;SSAS Tabular&#41;</span></span>](partitions-ssas-tabular.md)  
  
  
