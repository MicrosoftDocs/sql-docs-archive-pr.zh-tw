---
title: " (SSAS 表格式) 的 DirectQuery 模式 |Microsoft Docs"
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
f1_keywords:
- sql12.asvs.bidtoolset.realtime.f1
ms.assetid: 45ad2965-05ec-4fb1-a164-d8060b562ea5
author: minewiskan
ms.author: owend
ms.openlocfilehash: ceb58c211b52c1fbd184aafe316e5ea77d364529
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87687245"
---
# <a name="directquery-mode-ssas-tabular"></a><span data-ttu-id="cfaef-102">DirectQuery 模式 (SSAS 表格式)</span><span class="sxs-lookup"><span data-stu-id="cfaef-102">DirectQuery Mode (SSAS Tabular)</span></span>
  <span data-ttu-id="cfaef-103">Analysis Services 可讓您使用*DirectQuery 模式*直接從關係資料庫系統抓取資料和匯總，從表格式模型中取出資料和建立報表。</span><span class="sxs-lookup"><span data-stu-id="cfaef-103">Analysis Services lets you retrieve data and create reports from a tabular model by retrieving data and aggregates directly from a relational database system, using *DirectQuery mode*.</span></span> <span data-ttu-id="cfaef-104">此主題介紹僅存在於記憶體中的標準表格式模型和可查詢關聯式資料來源的表格式模型之間的差異，並且說明如何撰寫和部署要在 DirectQuery 模式下使用的模型。</span><span class="sxs-lookup"><span data-stu-id="cfaef-104">This topic introduces the differences between standard tabular models that reside only in memory and tabular models that can query a relational data source, and explains how you can author and deploy a model for use in DirectQuery mode.</span></span>  
  
 <span data-ttu-id="cfaef-105">本主題的章節：</span><span class="sxs-lookup"><span data-stu-id="cfaef-105">Sections in this topic:</span></span>  
  
-   [<span data-ttu-id="cfaef-106">DirectQuery 模式的優點</span><span class="sxs-lookup"><span data-stu-id="cfaef-106">Benefits of DirectQuery Mode</span></span>](#bkmk_Benefits)  
  
-   [<span data-ttu-id="cfaef-107">撰寫要用於 DirectQuery 模式的模型</span><span class="sxs-lookup"><span data-stu-id="cfaef-107">Authoring Models for Use with DirectQuery Mode</span></span>](#bkmk_Design)  
  
    -   [<span data-ttu-id="cfaef-108">DirectQuery 模型的資料來源</span><span class="sxs-lookup"><span data-stu-id="cfaef-108">Data Sources for DirectQuery Models</span></span>](directquery-mode-ssas-tabular.md#bkmk_DataSources)  
  
    -   [<span data-ttu-id="cfaef-109">DirectQuery 模式的驗證和設計限制</span><span class="sxs-lookup"><span data-stu-id="cfaef-109">Validation and Design Restrictions for DirectQuery Mode</span></span>](#bkmk_Validation)  
  
    -   [<span data-ttu-id="cfaef-110">DirectQuery 模型的公式相容性</span><span class="sxs-lookup"><span data-stu-id="cfaef-110">Formula Compatibility for DirectQuery Models</span></span>](#bkmk_FormulaCompat)  
  
    -   [<span data-ttu-id="cfaef-111">DirectQuery 模式的安全性</span><span class="sxs-lookup"><span data-stu-id="cfaef-111">Security in DirectQuery Mode</span></span>](#bkmk_Security)  
  
    -   [<span data-ttu-id="cfaef-112">DirectQuery 模式的安全性</span><span class="sxs-lookup"><span data-stu-id="cfaef-112">Security in DirectQuery Mode</span></span>](#bkmk_Security)  
  
-   [<span data-ttu-id="cfaef-113">DirectQuery 屬性</span><span class="sxs-lookup"><span data-stu-id="cfaef-113">DirectQuery Properties</span></span>](#bkmk_PropertyList)  
  
-   [<span data-ttu-id="cfaef-114">相關主題和工作</span><span class="sxs-lookup"><span data-stu-id="cfaef-114">Related Topics and Tasks</span></span>](#bkmk_related_tasks)  
  
##  <a name="benefits-of-directquery-mode"></a><a name="bkmk_Benefits"></a><span data-ttu-id="cfaef-115">DirectQuery 模式的優點</span><span class="sxs-lookup"><span data-stu-id="cfaef-115">Benefits of DirectQuery Mode</span></span>  
 <span data-ttu-id="cfaef-116">根據預設，表格式模型會使用記憶體中快取來儲存和查詢資料。</span><span class="sxs-lookup"><span data-stu-id="cfaef-116">By default, tabular models use an in-memory cache to store and query data.</span></span> <span data-ttu-id="cfaef-117">因為表格式模型使用存在於記憶體中的資料，所以即使是複雜查詢也可以非常快速地執行。</span><span class="sxs-lookup"><span data-stu-id="cfaef-117">Because tabular models use data that resides in memory, even complex queries can be incredibly fast.</span></span> <span data-ttu-id="cfaef-118">但是，使用快取資料有些缺點：</span><span class="sxs-lookup"><span data-stu-id="cfaef-118">However, there are some drawbacks to using cached data:</span></span>  
  
-   <span data-ttu-id="cfaef-119">來源資料變更時不會重新整理資料。</span><span class="sxs-lookup"><span data-stu-id="cfaef-119">Data is not refreshed when the source data changes.</span></span> <span data-ttu-id="cfaef-120">您必須處理模型，以便對資料進行更新。</span><span class="sxs-lookup"><span data-stu-id="cfaef-120">You must process the model to get updates to the data.</span></span>  
  
-   <span data-ttu-id="cfaef-121">在您關閉裝載模型的電腦時，快取將保存到磁碟中，並且在您載入模型或開啟 PowerPivot 檔案時必須重新開啟。</span><span class="sxs-lookup"><span data-stu-id="cfaef-121">When you turn off the computer that hosts the model, the cache is saved to disk and must be reopened when you load the model or open the PowerPivot file.</span></span> <span data-ttu-id="cfaef-122">儲存和載入作業可能很耗時。</span><span class="sxs-lookup"><span data-stu-id="cfaef-122">The save and load operations can be time-consuming.</span></span>  
  
 <span data-ttu-id="cfaef-123">反之，DirectQuery 模式使用儲存在 SQL Server 資料庫中的資料。</span><span class="sxs-lookup"><span data-stu-id="cfaef-123">In contrast, DirectQuery mode uses data that is stored in a SQL Server database.</span></span>  <span data-ttu-id="cfaef-124">通常，在您撰寫模型時會將全部資料或少量樣本資料匯入至快取中，並且在您部署模型時指定用於模型查詢的資料來源應該是 SQL Server，而非快取資料。</span><span class="sxs-lookup"><span data-stu-id="cfaef-124">Generally, you import all or a small sample of the data into the cache while authoring the model, and when you deploy the model, you specify that the data source for queries against the model should be SQL Server, not the cached data.</span></span> <span data-ttu-id="cfaef-125"> 會將資料的任何 DAX 查詢轉譯為針對指定之關聯式資料來源的對等 SQL 陳述式。</span><span class="sxs-lookup"><span data-stu-id="cfaef-125">Any DAX queries on the data are translated by [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] into equivalent SQL statements against the specified relational data source.</span></span>  
  
 <span data-ttu-id="cfaef-126">使用 DirectQuery 模式部署模型有許多優點：</span><span class="sxs-lookup"><span data-stu-id="cfaef-126">There are many advantages to deploying a model using DirectQuery mode:</span></span>  
  
-   <span data-ttu-id="cfaef-127">以下的資料集可能會有模型：資料集過大而無法納入 Analysis Services 伺服器上的記憶體。</span><span class="sxs-lookup"><span data-stu-id="cfaef-127">It is possible to have a model over data sets that are too large to fit in memory on the Analysis Services server.</span></span>  
  
-   <span data-ttu-id="cfaef-128">資料確保是最新的，並且沒有必須維護另一份資料複本的額外管理負擔。</span><span class="sxs-lookup"><span data-stu-id="cfaef-128">The data is guaranteed to be up-to-date, and there is no extra management overhead of having to maintain a separate copy of the data.</span></span> <span data-ttu-id="cfaef-129">基礎來源資料的變更可立即反映在對資料模型的查詢中。</span><span class="sxs-lookup"><span data-stu-id="cfaef-129">Changes to the underlying source data can be immediately reflected in queries against the data model.</span></span>  
  
-   <span data-ttu-id="cfaef-130">DirectQuery 可以利用提供者端的查詢加速功能，例如 xVelocity 記憶體最佳化的資料行索引提供的加速功能。</span><span class="sxs-lookup"><span data-stu-id="cfaef-130">DirectQuery can take advantage of provider-side query acceleration, such as that provided by xVelocity memory optimized column indexes.</span></span>  
  
-   <span data-ttu-id="cfaef-131">後端資料庫強制執行的任何安全性保證會透過資料列層級安全性來強制執行。</span><span class="sxs-lookup"><span data-stu-id="cfaef-131">Any security enforced by the back-end database is guaranteed to be enforced, using row-level security.</span></span> <span data-ttu-id="cfaef-132">反之，如果您使用快取資料，可能很難確保能夠以伺服器上保護資料的相同方式來保護快取的安全。</span><span class="sxs-lookup"><span data-stu-id="cfaef-132">In contrast, if you are using cached data, it can be difficult to ensure that the cache is secured exactly as on the server.</span></span>  
  
-   <span data-ttu-id="cfaef-133">如果模型包含可能需要多個查詢的複雜公式，Analysis Services 可以執行最佳化，以確保對後端資料庫執行之查詢的查詢計畫將盡可能有效率。</span><span class="sxs-lookup"><span data-stu-id="cfaef-133">If the model contains complex formulas that might require multiple queries, Analysis Services can perform optimization to ensure that the query plan for the query executed against the back-end database will be as efficient as possible.</span></span>  
  
##  <a name="authoring-models-for-use-with-directquery-mode"></a><a name="bkmk_Design"></a><span data-ttu-id="cfaef-134">撰寫用於 DirectQuery 模式的模型</span><span class="sxs-lookup"><span data-stu-id="cfaef-134">Authoring Models for Use with DirectQuery Mode</span></span>  
 <span data-ttu-id="cfaef-135">表格式模型是使用模型設計師 [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] 所撰寫。</span><span class="sxs-lookup"><span data-stu-id="cfaef-135">Tabular models are authored by using the model designer [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)].</span></span> <span data-ttu-id="cfaef-136">模型設計師會在記憶體中建立所有模型，這表示在模型化時，如果資料太大而無法放入記憶體中，您應該只將資料子集匯入至工作空間資料庫使用的快取中。</span><span class="sxs-lookup"><span data-stu-id="cfaef-136">The model designer creates all models in memory, which means that when you are modeling, if your data is too large to fit into memory, you should import only a subset of data into the cache used by the workspace database.</span></span>  
  
 <span data-ttu-id="cfaef-137">在您準備切換至 DirectQuery 模式時，您可以變更啟用 DirectQuery 模式的屬性。</span><span class="sxs-lookup"><span data-stu-id="cfaef-137">When you are ready to switch to DirectQuery mode, you can change a property that enables DirectQuery mode.</span></span> <span data-ttu-id="cfaef-138">如需詳細資訊，請參閱[啟用 DirectQuery 設計模式 &#40;SSAS 表格式&#41;](enable-directquery-mode-in-ssdt.md)。</span><span class="sxs-lookup"><span data-stu-id="cfaef-138">For more information, see [Enable DirectQuery Design Mode &#40;SSAS Tabular&#41;](enable-directquery-mode-in-ssdt.md).</span></span>  
  
 <span data-ttu-id="cfaef-139">在您執行此作業時，模型設計師會自動將工作空間資料庫設定為以混合模式執行，讓您可以繼續使用快取資料。</span><span class="sxs-lookup"><span data-stu-id="cfaef-139">When you do this, the model designer automatically configures the workspace database to run in a hybrid mode that lets you continue to work with the cached data.</span></span> <span data-ttu-id="cfaef-140">模型設計師也會通知您模型中與 DirectQuery 模式不相容的任何功能。</span><span class="sxs-lookup"><span data-stu-id="cfaef-140">The model designer will also notify you of any features in your model that are incompatible with DirectQuery mode.</span></span> <span data-ttu-id="cfaef-141">下列清單摘要說明應牢記的主要需求：</span><span class="sxs-lookup"><span data-stu-id="cfaef-141">The following list summarizes the main requirements to keep in mind:</span></span>  
  
-   <span data-ttu-id="cfaef-142">**資料來源：** DirectQuery 模型只能使用單一 SQL Server 資料來源中的資料。</span><span class="sxs-lookup"><span data-stu-id="cfaef-142">**Data sources:** DirectQuery models can only use data from a single SQL Server data source.</span></span> <span data-ttu-id="cfaef-143">如果已經為模型啟用 DirectQuery 模式，您將無法在模型設計師中使用任何其他資料類型，包括複製-貼上作業所加入的資料表。</span><span class="sxs-lookup"><span data-stu-id="cfaef-143">When DirectQuery mode has been turned on for a model, you can use no other types of data in the model designer, including tables added by copy-paste operations.</span></span> <span data-ttu-id="cfaef-144">所有其他匯入選項都已停用。</span><span class="sxs-lookup"><span data-stu-id="cfaef-144">All other import options are disabled.</span></span> <span data-ttu-id="cfaef-145">查詢中包含的任何資料表都必須是 SQL Server 資料來源的一部分。</span><span class="sxs-lookup"><span data-stu-id="cfaef-145">Any tables included in a query must be part of the SQL Server data source.</span></span> <span data-ttu-id="cfaef-146">如需詳細資訊，請參閱[DirectQuery 模型的資料來源](directquery-mode-ssas-tabular.md#bkmk_DataSources)。</span><span class="sxs-lookup"><span data-stu-id="cfaef-146">See [Data Sources for DirectQuery Models](directquery-mode-ssas-tabular.md#bkmk_DataSources)for more information.</span></span>  
  
-   <span data-ttu-id="cfaef-147">**支援計算結果欄：** DirectQuery 模型不支援計算結果欄。</span><span class="sxs-lookup"><span data-stu-id="cfaef-147">**Support for calculated columns:** Calculated columns are not supported for DirectQuery models.</span></span> <span data-ttu-id="cfaef-148">但是，您可以建立量值和 KPI，以操作資料集。</span><span class="sxs-lookup"><span data-stu-id="cfaef-148">However, you can create measures and KPIs, which operate over sets of data.</span></span> <span data-ttu-id="cfaef-149">如需詳細資訊，請參閱[驗證](#bkmk_Validation)一節。</span><span class="sxs-lookup"><span data-stu-id="cfaef-149">See the section on [validation](#bkmk_Validation) for more information.</span></span>  
  
-   <span data-ttu-id="cfaef-150">**DAX 函數的有限使用：** 某些 DAX 函數不能在 DirectQuery 模式下使用，因此您必須以其他函數取代它們，或使用資料來源中的衍生資料行來建立值。</span><span class="sxs-lookup"><span data-stu-id="cfaef-150">**Limited use of DAX functions:** Some DAX functions cannot be used in DirectQuery mode, so you must replace them with other functions, or create the values using derived columns in the data source.</span></span> <span data-ttu-id="cfaef-151">當您所建立的公式與 DirectQuery 模式不相容時，模型設計師會針對任何引發的錯誤提供設計階段驗證。</span><span class="sxs-lookup"><span data-stu-id="cfaef-151">The model designer provides design-time validation for any errors that arise when you create formulas that are incompatible with DirectQuery mode.</span></span> <span data-ttu-id="cfaef-152">如需詳細資訊，請參閱下列各節：[驗證](#bkmk_Validation)。</span><span class="sxs-lookup"><span data-stu-id="cfaef-152">See the following sections for more information: [Validation](#bkmk_Validation).</span></span>  
  
-   <span data-ttu-id="cfaef-153">**公式相容性：** 在某些已知情況下，相較于只使用關聯式資料存放區的 DirectQuery 模型，相同的公式可能會在快取或混合式模型中傳回不同的結果。</span><span class="sxs-lookup"><span data-stu-id="cfaef-153">**Formula compatibility:** In certain known cases, the same formula can return different results in a cached or hybrid model compared to a DirectQuery model that uses only the relational data store.</span></span> <span data-ttu-id="cfaef-154">這些差異是由於 xVelocity 記憶體中分析引擎 (VertiPaq) 和 SQL Server 之間的語意差異所導致。</span><span class="sxs-lookup"><span data-stu-id="cfaef-154">These differences are a consequence of the semantic differences between the xVelocity in-memory analytics (VertiPaq) engine and SQL Server.</span></span> <span data-ttu-id="cfaef-155">如需這些差異的詳細資訊，請參閱這一節：[公式相容性](#bkmk_FormulaCompat)。</span><span class="sxs-lookup"><span data-stu-id="cfaef-155">For more information about these differences, see this section: [Formula Compatibility](#bkmk_FormulaCompat).</span></span>  
  
-   <span data-ttu-id="cfaef-156">**安全性：** 您可以使用不同的方法來保護模型，視其部署方式而定。</span><span class="sxs-lookup"><span data-stu-id="cfaef-156">**Security:** You can use different methods to secure models depending on how they are deployed.</span></span> <span data-ttu-id="cfaef-157">表格式模型的快取資料是使用 Analysis Services 執行個體的安全性模型來確保安全。</span><span class="sxs-lookup"><span data-stu-id="cfaef-157">Cached data for tabular models is secured by using the security model of the Analysis Services instance.</span></span> <span data-ttu-id="cfaef-158">您可以使用角色確保 DirectQuery 模型的安全，但是也可以使用關聯式資料存放區中定義的安全性。</span><span class="sxs-lookup"><span data-stu-id="cfaef-158">DirectQuery models can be secured by using roles, but you can also use security defined in the relational data store.</span></span> <span data-ttu-id="cfaef-159">您可以設定模型，好讓開啟以僅限 DirectQuery 模型為基礎之報表的使用者只能看到他們在 SQL Server 中的權限下允許看到的資料。</span><span class="sxs-lookup"><span data-stu-id="cfaef-159">The model can be configured so that users who open a report based on a DirectQuery-only model can see only the data that is allowed to them under their permissions in SQL Server.</span></span> <span data-ttu-id="cfaef-160">如需詳細資訊，請參閱本節：[安全性](#bkmk_Security)。</span><span class="sxs-lookup"><span data-stu-id="cfaef-160">See this section for more information: [Security](#bkmk_Security).</span></span>  
  
-   <span data-ttu-id="cfaef-161">**用戶端限制：** 當模型處於 DirectQuery 模式時，只能使用 DAX 進行查詢。</span><span class="sxs-lookup"><span data-stu-id="cfaef-161">**Client restrictions:** When a model is in DirectQuery mode, it can only be queried by using DAX.</span></span> <span data-ttu-id="cfaef-162">不能使用 MDX 來建立查詢。</span><span class="sxs-lookup"><span data-stu-id="cfaef-162">You cannot use MDX to create queries.</span></span> <span data-ttu-id="cfaef-163">這表示您不能使用 Excel Pivot Client，因為 Excel 會使用 MDX。</span><span class="sxs-lookup"><span data-stu-id="cfaef-163">This means that you cannot use the Excel Pivot Client, because Excel uses MDX.</span></span>  
  
     <span data-ttu-id="cfaef-164">不過， [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] 如果您使用 DAX 資料表查詢當做 XMLA Execute 語句的一部分，您可以在中針對 DirectQuery 模型建立查詢。如需詳細資訊，請參閱 [Dax 查詢語法參考] (/dax/dax-syntax-reference</span><span class="sxs-lookup"><span data-stu-id="cfaef-164">However, you can create queries against a DirectQuery model in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] if you use a DAX table query as part of an XMLA Execute statement, For more information, see [DAX Query Syntax Reference](/dax/dax-syntax-reference</span></span>
  
 <span data-ttu-id="cfaef-165">在您解決了所有設計問題並且測試模型之後，就可以進行部署。</span><span class="sxs-lookup"><span data-stu-id="cfaef-165">When you have resolved all the design issues and tested your model, you are ready for deployment.</span></span> <span data-ttu-id="cfaef-166">此時，您可以設定回應模型查詢的慣用方法。</span><span class="sxs-lookup"><span data-stu-id="cfaef-166">At this point, you can set the preferred method for answering queries against the model.</span></span> <span data-ttu-id="cfaef-167">您希望使用者有存取快取的權限，還是永遠只使用關聯式資料來源？</span><span class="sxs-lookup"><span data-stu-id="cfaef-167">Do you want users to have access to the cache, or always use only the relational data source?</span></span>  
  
 <span data-ttu-id="cfaef-168">如果您在*混合式模式*中部署模型，則快取仍然可供使用，而且可用於查詢。</span><span class="sxs-lookup"><span data-stu-id="cfaef-168">If you deploy the model in a *hybrid mode*, the cache is still available and can be used for queries.</span></span> <span data-ttu-id="cfaef-169">混合模式為您提供許多選項：</span><span class="sxs-lookup"><span data-stu-id="cfaef-169">A hybrid mode provides you with many options:</span></span>  
  
-   <span data-ttu-id="cfaef-170">在快取和關聯式資料來源都可用時，您可以設定慣用連接方法，但最終還是由用戶端控制所使用的資料來源 (利用 DirectQueryMode 連接字串屬性)。</span><span class="sxs-lookup"><span data-stu-id="cfaef-170">When both the cache and the relational data source are available, you can set the preferred connection method, but ultimately the client controls which source is used, using the DirectQueryMode connection string property.</span></span>  
  
-   <span data-ttu-id="cfaef-171">您還可以在快取上設定資料分割，以便永遠不處理用於 DirectQuery 模式的主要資料分割，並且主要資料分割必須永遠參考關聯式資料來源。</span><span class="sxs-lookup"><span data-stu-id="cfaef-171">You can also configure partitions on the cache in such a way that the primary partition used for DirectQuery mode is never processed and must always reference the relational source.</span></span> <span data-ttu-id="cfaef-172">有許多方法可以使用資料分割來最佳化模型設計和報表體驗。</span><span class="sxs-lookup"><span data-stu-id="cfaef-172">There are many ways to use partitions to optimize the model design and reporting experience.</span></span> <span data-ttu-id="cfaef-173">如需詳細資訊，請參閱[&#40;SSAS 表格式&#41;的資料分割和 DirectQuery 模式](define-partitions-in-directquery-models-ssas-tabular.md)。</span><span class="sxs-lookup"><span data-stu-id="cfaef-173">For more information, see [Partitions and DirectQuery Mode &#40;SSAS Tabular&#41;](define-partitions-in-directquery-models-ssas-tabular.md).</span></span>  
  
-   <span data-ttu-id="cfaef-174">部署模型之後，您可以變更慣用連接方法。</span><span class="sxs-lookup"><span data-stu-id="cfaef-174">After the model has been deployed, you can change the preferred connection method.</span></span> <span data-ttu-id="cfaef-175">例如，您可以使用混合模式來進行測試，並且只在全面測試了使用該模型的所有報表或查詢後，才將模型切換到 **[僅限 DirectQuery]** 模式。</span><span class="sxs-lookup"><span data-stu-id="cfaef-175">For example, you might use a hybrid mode for testing, and switch the model over to **DirectQuery only** mode only after thoroughly testing any reports or queries that use the model.</span></span> <span data-ttu-id="cfaef-176">如需詳細資訊，請參閱 [設定或變更 DirectQuery 的慣用連接方法](../set-or-change-the-preferred-connection-method-for-directquery.md)。</span><span class="sxs-lookup"><span data-stu-id="cfaef-176">For more information, see [Set or Change the Preferred Connection Method for DirectQuery](../set-or-change-the-preferred-connection-method-for-directquery.md).</span></span>  
  
###  <a name="data-sources-for-directquery-models"></a><a name="bkmk_DataSources"></a><span data-ttu-id="cfaef-177">DirectQuery 模型的資料來源</span><span class="sxs-lookup"><span data-stu-id="cfaef-177">Data Sources for DirectQuery Models</span></span>  
 <span data-ttu-id="cfaef-178">當您將設計環境變更為啟用 DirectQuery 模式之後，系統會立即對工作空間資料庫的資料來源進行驗證，以確保它們來自單一 SQL Server 資料來源。</span><span class="sxs-lookup"><span data-stu-id="cfaef-178">As soon as you change the design environment to enable DirectQuery mode, the data sources for the workspace database are validated to ensure that they come from a single SQL Server data source.</span></span> <span data-ttu-id="cfaef-179">DirectQuery 模型中不允許來自其他資料來源的資料，包括複製-貼上的資料。</span><span class="sxs-lookup"><span data-stu-id="cfaef-179">Data from other sources, including copy-pasted data, is not allowed in DirectQuery models.</span></span>  
  
 <span data-ttu-id="cfaef-180">如果您想要在 DirectQuery 模式下使用模型，則必須確保報表所需的所有資料都儲存在指定的 SQL Server 資料庫中。</span><span class="sxs-lookup"><span data-stu-id="cfaef-180">If you intend to use the model in DirectQuery mode, you must ensure that all the data you need for reporting is stored in the specified SQL Server database.</span></span> <span data-ttu-id="cfaef-181">如果該來源中未提供模型化所需的資料，請考慮使用 Integration Services 或其他資料倉儲工具，將資料匯入至做為 DirectQuery 資料來源的 SQL Server 資料庫中。</span><span class="sxs-lookup"><span data-stu-id="cfaef-181">If the data you need for modeling is not available in that source, consider use of Integration Services or other data warehousing tools to import the data into a SQL Server database that serves as the DirectQuery data source.</span></span>  
  
###  <a name="validation-and-design-restrictions-for-directquery-mode"></a><a name="bkmk_Validation"></a><span data-ttu-id="cfaef-182">DirectQuery 模式的驗證和設計限制</span><span class="sxs-lookup"><span data-stu-id="cfaef-182">Validation and Design Restrictions for DirectQuery Mode</span></span>  
 <span data-ttu-id="cfaef-183">當您撰寫要在 DirectQuery 模式下使用的模型時，最初必須將某些部分的資料載入快取中。</span><span class="sxs-lookup"><span data-stu-id="cfaef-183">When you author a model for use in DirectQuery mode, you must initially load some portion of the data into the cache.</span></span> <span data-ttu-id="cfaef-184">如果您最終使用的資料太大而無法放入記憶體中，您可以使用 [資料表匯入嚮導] 中的 [**預覽 & 篩選**] 選項來選取資料的子集，或撰寫 SQL 腳本來取得您想要的資料。</span><span class="sxs-lookup"><span data-stu-id="cfaef-184">If the data you will eventually use is too large to fit into memory, you can use the **Preview & Filter** option in the Table Import wizard to select a subset of data, or write a SQL script to get the data that you want.</span></span>  
  
> [!WARNING]  
>  <span data-ttu-id="cfaef-185">因為 DirectQuery 模式不支援使用導出資料行，所以如果您有想要合併或執行其他作業的資料行，則應該預先規劃，並在資料匯入查詢或指令碼中建立資料行定義。</span><span class="sxs-lookup"><span data-stu-id="cfaef-185">Because DirectQuery mode does not support the use of calculated columns, if there are columns that you wish to combine or perform other operations on, you should plan ahead and create the column definition as part of your data import query or script.</span></span>  
  
 <span data-ttu-id="cfaef-186">若要檢視和解決驗證錯誤，請在 **中開啟** [錯誤清單] [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="cfaef-186">To view and resolve validation errors, open the **Error List** in [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)].</span></span> <span data-ttu-id="cfaef-187">導致無法使用 DirectQuery 模式的嚴重錯誤會顯示在 [**錯誤**] 索引標籤上。您必須先修正這些錯誤，然後再變更為 DirectQuery 模式。</span><span class="sxs-lookup"><span data-stu-id="cfaef-187">Critical errors that prevent use of DirectQuery mode are displayed on the **Errors** tab. You must fix these errors before changing to DirectQuery mode.</span></span> <span data-ttu-id="cfaef-188">比較難解決的驗證錯誤通常與 DirectQuery 模式不支援的公式相關。</span><span class="sxs-lookup"><span data-stu-id="cfaef-188">The validation errors that are more difficult to resolve typically are related to formulas that are not supported in DirectQuery mode.</span></span> <span data-ttu-id="cfaef-189">如需公式和計算結果欄相關錯誤的總覽，請參閱[公式相容性](#bkmk_FormulaCompat)一節。</span><span class="sxs-lookup"><span data-stu-id="cfaef-189">See the section, [Formula Compatibility](#bkmk_FormulaCompat), for an overview of errors related to formulas and calculated columns.</span></span>  
  
 <span data-ttu-id="cfaef-190">下列清單描述在撰寫要用於 DirectQuery 存取的模型時應注意的其他考量事項：</span><span class="sxs-lookup"><span data-stu-id="cfaef-190">The following list describes other considerations to keep in mind when authoring a model for DirectQuery access:</span></span>  
  
-   <span data-ttu-id="cfaef-191">即使處於 *「僅限 DirectQuery」* 模式，報表中的結果也會根據正在檢視結果的使用者的安全性內容而改變。</span><span class="sxs-lookup"><span data-stu-id="cfaef-191">When in *DirectQuery only* mode, the results in a report can vary depending on the security context of the user who is viewing the results.</span></span> <span data-ttu-id="cfaef-192">您應該以不同的認證對模型進行測試，以確保使用者得到預期結果。</span><span class="sxs-lookup"><span data-stu-id="cfaef-192">You should test models with different credentials to ensure that users get the expected results.</span></span>  
  
-   <span data-ttu-id="cfaef-193">如果您將模型設定為以混合模式操作，允許使用快取或來自 SQL Server 的資料，則應該了解連接到每一個資料來源的用戶端可能會看到不同結果 (根據連接字串中指定的模式而定)。</span><span class="sxs-lookup"><span data-stu-id="cfaef-193">If you configure a model to operate in hybrid mode, which allows the use of either the cache or data from SQL Server, you should be aware of the possibility that clients connecting to each source might see different results, depending on the mode specified in the connection string.</span></span> <span data-ttu-id="cfaef-194">如果您需要確保報表使用者只看到來自 SQL Server 的資料，則必須清除快取或將模型變更為 DirectQueryOnly。</span><span class="sxs-lookup"><span data-stu-id="cfaef-194">If you need to ensure that your report users see only data from SQL Server, you must clear the cache or change the model to DirectQueryOnly.</span></span>  
  
###  <a name="formula-compatibility-for-directquery-models"></a><a name="bkmk_FormulaCompat"></a><span data-ttu-id="cfaef-195">DirectQuery 模型的公式相容性</span><span class="sxs-lookup"><span data-stu-id="cfaef-195">Formula Compatibility for DirectQuery Models</span></span>  
 <span data-ttu-id="cfaef-196">某些模型可能包含 DirectQuery 模式所不支援的公式，因此必須對模型進行重新設計，以防止驗證錯誤。</span><span class="sxs-lookup"><span data-stu-id="cfaef-196">Some models might contain formulas that are not supported in DirectQuery mode, and the model must be redesigned to prevent validation errors.</span></span> <span data-ttu-id="cfaef-197">DirectQuery 模式所支援之公式的限制包含下列：</span><span class="sxs-lookup"><span data-stu-id="cfaef-197">Restrictions on formulas that are supported in DirectQuery mode include the following:</span></span>  
  
-   <span data-ttu-id="cfaef-198">任何表格式模型在啟用 DirectQuery 模式後都不支援導出資料行，甚至是混合模型也不支援。</span><span class="sxs-lookup"><span data-stu-id="cfaef-198">Calculated columns are not supported in any tabular model that has DirectQuery mode enabled, not even hybrid models.</span></span> <span data-ttu-id="cfaef-199">如果模型需要導出資料行，請考慮在匯入定義中使用 Transact-SQL，將這些導出資料行轉換為衍生的資料行。</span><span class="sxs-lookup"><span data-stu-id="cfaef-199">If you need calculated columns for a model, consider converting them to derived columns by using Transact-SQL in your import definition.</span></span>  
  
-   <span data-ttu-id="cfaef-200">DirectQuery 模型支援在量值中使用 DAX 公式，量值會轉換為針對關聯式資料存放區、以集合為基礎的運算。</span><span class="sxs-lookup"><span data-stu-id="cfaef-200">DirectQuery models do support the use of DAX formulas for use in measures, which are converted to set-based operations against the relational data store.</span></span> <span data-ttu-id="cfaef-201">支援透過使用隱含量值建立的所有量值。</span><span class="sxs-lookup"><span data-stu-id="cfaef-201">All measures that you create by using implicit measures are supported.</span></span>  
  
-   <span data-ttu-id="cfaef-202">並非所有函數都受支援。</span><span class="sxs-lookup"><span data-stu-id="cfaef-202">Not all functions are supported.</span></span> <span data-ttu-id="cfaef-203">因為在查詢 DirectQuery 模型時 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 會將所有 DAX 公式和量值定義都轉換為 SQL 陳述式，所以包含無法轉換為 Transact-SQL 之元素的任何公式都會觸發模型驗證錯誤。</span><span class="sxs-lookup"><span data-stu-id="cfaef-203">Because [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] converts all DAX formulas and measure definitions into SQL statements when querying a DirectQuery model, any formula containing elements that cannot be converted into Transact-SQL will trigger validation errors on the model.</span></span> <span data-ttu-id="cfaef-204">例如，不支援時間智慧函數。</span><span class="sxs-lookup"><span data-stu-id="cfaef-204">For example, time intelligence functions are not supported.</span></span> <span data-ttu-id="cfaef-205">即使支援的函數可能會有不同的行為，例如統計函數。</span><span class="sxs-lookup"><span data-stu-id="cfaef-205">Even functions that are supported might behave differently, such as statistical functions.</span></span> <span data-ttu-id="cfaef-206">如需相容性問題的完整清單，請參閱[DirectQuery 模式中的公式相容性](../dax-formula-compatibility-in-directquery-mode-ssas-2014.md)。</span><span class="sxs-lookup"><span data-stu-id="cfaef-206">For a complete list of compatibility issues, see [Formula Compatibility in DirectQuery Mode](../dax-formula-compatibility-in-directquery-mode-ssas-2014.md).</span></span>  
  
-   <span data-ttu-id="cfaef-207">在您將模型切換至 DirectQuery 模式時，模型中的公式可能會通過驗證，但在對快取和關聯式資料存放區執行時，則會傳回不同的結果。</span><span class="sxs-lookup"><span data-stu-id="cfaef-207">Some formulas in the model might validate when you switch the model to DirectQuery mode, but return different results when executed against the cache vs. the relational data store.</span></span> <span data-ttu-id="cfaef-208">這是因為對快取的計算使用 xVelocity 記憶體中分析引擎 (VertiPaq) 的語意，其中包含用於模擬 Excel 行為的許多功能，而針對儲存在關聯式資料存放區之資料的查詢則需要使用 SQL Server 的語意。</span><span class="sxs-lookup"><span data-stu-id="cfaef-208">This is because calculations against the cache use the semantics of the xVelocity in-memory analytics (VertiPaq) engine, which contains many features meant to emulate the behavior of Excel, whereas queries against data stored in the relational data store necessarily use the semantics of SQL Server.</span></span> <span data-ttu-id="cfaef-209">如需在模型部署為即時時可能會傳回不同結果的 DAX 函數清單，請參閱[DirectQuery 模式中的公式相容性](../dax-formula-compatibility-in-directquery-mode-ssas-2014.md)。</span><span class="sxs-lookup"><span data-stu-id="cfaef-209">For a list of DAX functions that might return different results when the model is deployed to real-time, see [Formula Compatibility in DirectQuery Mode](../dax-formula-compatibility-in-directquery-mode-ssas-2014.md).</span></span>  
  
###  <a name="connecting-to-directquery-models"></a><a name="bkmk_Connecting"></a><span data-ttu-id="cfaef-210">連接到 DirectQuery 模型</span><span class="sxs-lookup"><span data-stu-id="cfaef-210">Connecting to DirectQuery Models</span></span>  
 <span data-ttu-id="cfaef-211">使用 MDX 當做查詢語言的用戶端不能連接到使用 DirectQuery 模式的模型。</span><span class="sxs-lookup"><span data-stu-id="cfaef-211">Clients that use MDX as the query language cannot connect to models that use DirectQuery mode.</span></span> <span data-ttu-id="cfaef-212">例如，如果您嘗試針對 DirectQuery 模型建立 MDX 查詢，則會出現錯誤，表示找不到或尚未處理 Cube。</span><span class="sxs-lookup"><span data-stu-id="cfaef-212">For example, if you attempt to create an MDX query against a DirectQuery model, you will get an error indicating that the cube cannot be found, or has not been processed.</span></span> <span data-ttu-id="cfaef-213">您可以使用 [!INCLUDE[ssCrescent](../../includes/sscrescent-md.md)]、DAX 公式或 XMLA 查詢來針對 DirectQuery 模型建立查詢。</span><span class="sxs-lookup"><span data-stu-id="cfaef-213">You can create queries against DirectQuery models by using [!INCLUDE[ssCrescent](../../includes/sscrescent-md.md)], DAX formulas, or XMLA queries.</span></span> <span data-ttu-id="cfaef-214">如需如何針對表格式模型執行特定查詢的詳細資訊，請參閱[表格式模型資料存取](tabular-model-data-access.md)。</span><span class="sxs-lookup"><span data-stu-id="cfaef-214">For more information about how you can perform ad hoc queries against tabular models, see [Tabular Model Data Access](tabular-model-data-access.md).</span></span>  
  
 <span data-ttu-id="cfaef-215">如果您正在使用混合模型，可以藉由指定連接字串屬性 DirectQueryMode 來指定使用者是連接到快取還是使用 DirectQuery 資料。</span><span class="sxs-lookup"><span data-stu-id="cfaef-215">If you are using a hybrid model, you can specify whether users connect to the cache or use DirectQuery data by specifying the connection string property, DirectQueryMode.</span></span>  
  
###  <a name="security-in-directquery-mode"></a><a name="bkmk_Security"></a><span data-ttu-id="cfaef-216">DirectQuery 模式中的安全性</span><span class="sxs-lookup"><span data-stu-id="cfaef-216">Security in DirectQuery Mode</span></span>  
 <span data-ttu-id="cfaef-217">在模型撰寫過程中，您會指定用於擷取來源資料的權限。</span><span class="sxs-lookup"><span data-stu-id="cfaef-217">During model authoring, you specify the permissions that are used to retrieve the source data.</span></span> <span data-ttu-id="cfaef-218">通常這是您自己的認證或是用於開發的帳戶。</span><span class="sxs-lookup"><span data-stu-id="cfaef-218">This will often be your own credentials, or an account used for development.</span></span> <span data-ttu-id="cfaef-219">但是，在模型切換為使用 DirectQuery 模式時，安全性內容更為複雜：</span><span class="sxs-lookup"><span data-stu-id="cfaef-219">However, when you switch the model to use DirectQuery mode, the security context is more complex:</span></span>  
  
-   <span data-ttu-id="cfaef-220">考慮使用者是否具有存取關聯式資料存放區資料的必要層級。</span><span class="sxs-lookup"><span data-stu-id="cfaef-220">Consider whether users have the necessary level of access to the data in the relational data store.</span></span>  
  
-   <span data-ttu-id="cfaef-221">根據使用者的安全性內容，查看相同模型或報表的使用者可能會看到不同的資料。</span><span class="sxs-lookup"><span data-stu-id="cfaef-221">Users who view the same model or report might see different data, depending on the user's security context.</span></span>  
  
-   <span data-ttu-id="cfaef-222">如果已保留模型快取，則會使用 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 安全性模型 (角色) 來保護快取的安全。</span><span class="sxs-lookup"><span data-stu-id="cfaef-222">If the model cache has been preserved, the cache is secured using the [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] security model (roles).</span></span> <span data-ttu-id="cfaef-223">快取可能包含模型設計師有權看到、但使用者無權看到的資料。</span><span class="sxs-lookup"><span data-stu-id="cfaef-223">The cache might contain data that the model designer is privileged to see but the user is not.</span></span> <span data-ttu-id="cfaef-224">模型和報表設計師應該清除快取，或透過角色控制存取權限來保護這些資料。</span><span class="sxs-lookup"><span data-stu-id="cfaef-224">Model and report designers should either clear the cache, or secure this data by controlling access via roles.</span></span>  
  
-   <span data-ttu-id="cfaef-225">連接到資料來源時，回應來自快取之查詢的模型不能模擬目前的使用者。</span><span class="sxs-lookup"><span data-stu-id="cfaef-225">A model that answers queries from the cache cannot impersonate the current user when connecting to the data source.</span></span> <span data-ttu-id="cfaef-226">如果要在連接到資料來源時模擬目前的使用者，您必須使用 DirectQuery 模式。</span><span class="sxs-lookup"><span data-stu-id="cfaef-226">If you want to impersonate the current user when connecting to the data source, you must use DirectQuery mode.</span></span>  
  
-   <span data-ttu-id="cfaef-227">如果您的報表模型需要安全性，您有兩個選擇：使用 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 角色，或者對資料來源設定資料列層級權限。</span><span class="sxs-lookup"><span data-stu-id="cfaef-227">If your report model requires security, you have two options: you can either use [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] roles, or you can set row-level permissions on the data source.</span></span> <span data-ttu-id="cfaef-228">關聯式資料來源中的安全性是用於控制對資料表的存取權限，並且不支援資料行層級安全性。</span><span class="sxs-lookup"><span data-stu-id="cfaef-228">Security in the relational data source is used to control access to tables, and column-level security is not supported.</span></span> <span data-ttu-id="cfaef-229">因此，如果某個區域中的使用者無權檢視來自不同區域的銷售數字，則包含根據 Sales 資料表之量值的報表將傳回空白或錯誤。</span><span class="sxs-lookup"><span data-stu-id="cfaef-229">Therefore, if users in one region do not have permission to view sales figures from different regions, a report that includes a measure based on the Sales table would return blanks or an error.</span></span>  
  
 <span data-ttu-id="cfaef-230">模擬設定屬性會指定當您使用 DirectQuery 連接到模型時所使用的認證，這適用於僅限 DirectQuery 模型或是使用 DirectQuery 回應查詢的混合模型。</span><span class="sxs-lookup"><span data-stu-id="cfaef-230">The impersonation settings property specifies the credentials used when you are connecting to a model using DirectQuery, either for a DirectQuery only model or for a hybrid model answering queries using DirectQuery.</span></span> <span data-ttu-id="cfaef-231">此屬性有下列值：</span><span class="sxs-lookup"><span data-stu-id="cfaef-231">The property has the following values:</span></span>  
  
 <span data-ttu-id="cfaef-232">**預設值**</span><span class="sxs-lookup"><span data-stu-id="cfaef-232">**Default**</span></span>  
 <span data-ttu-id="cfaef-233">使用匯入精靈中指定的認證來連接到資料來源。</span><span class="sxs-lookup"><span data-stu-id="cfaef-233">Uses the credentials specified in the import wizard to connect to the data source.</span></span> <span data-ttu-id="cfaef-234">這可以是特定的 Windows 使用者或服務帳戶。</span><span class="sxs-lookup"><span data-stu-id="cfaef-234">This can be a specific Windows user or the service account.</span></span>  
  
 `ImpersonateCurrentUser`  
 <span data-ttu-id="cfaef-235">使用目前使用者的認證來連接到資料來源。</span><span class="sxs-lookup"><span data-stu-id="cfaef-235">Uses the credentials of the current user to connect to the data source.</span></span>  
  
 <span data-ttu-id="cfaef-236">如需如何設定這些屬性的詳細資訊，請參閱[DirectQuery 部署案例 &#40;SSAS 表格式&#41;](../directquery-deployment-scenarios-ssas-tabular.md)。</span><span class="sxs-lookup"><span data-stu-id="cfaef-236">For information on how to set these properties, see [DirectQuery Deployment Scenarios &#40;SSAS Tabular&#41;](../directquery-deployment-scenarios-ssas-tabular.md).</span></span>  
  
##  <a name="directquery-properties"></a><a name="bkmk_PropertyList"></a><span data-ttu-id="cfaef-237">DirectQuery 屬性</span><span class="sxs-lookup"><span data-stu-id="cfaef-237">DirectQuery Properties</span></span>  
 <span data-ttu-id="cfaef-238">下表列出可以在 [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)] 和 [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] 中設定的一些屬性，以便啟用 DirectQuery 及控制模型查詢所用的資料來源。</span><span class="sxs-lookup"><span data-stu-id="cfaef-238">The following table lists the properties that you can set in [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)], and in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], to enable DirectQuery and to control the source of data used for queries against the model.</span></span>  
  
|<span data-ttu-id="cfaef-239">屬性名稱</span><span class="sxs-lookup"><span data-stu-id="cfaef-239">Property name</span></span>|<span data-ttu-id="cfaef-240">描述</span><span class="sxs-lookup"><span data-stu-id="cfaef-240">Description</span></span>|  
|-------------------|-----------------|  
|<span data-ttu-id="cfaef-241">**DirectQueryMode 屬性**</span><span class="sxs-lookup"><span data-stu-id="cfaef-241">**DirectQueryMode property**</span></span>|<span data-ttu-id="cfaef-242">此屬性會在模型設計師中啟用 DirectQuery 模式。</span><span class="sxs-lookup"><span data-stu-id="cfaef-242">This property enables use of DirectQuery mode in the model designer.</span></span> <span data-ttu-id="cfaef-243">您必須將此屬性設定為 `On`，才能變更任何其他 DirectQuery 屬性。</span><span class="sxs-lookup"><span data-stu-id="cfaef-243">You must set this property to `On` to change any of the other DirectQuery properties.</span></span><br /><br /> <span data-ttu-id="cfaef-244">如需詳細資訊，請參閱[啟用 DirectQuery 設計模式 &#40;SSAS 表格式&#41;](enable-directquery-mode-in-ssdt.md)。</span><span class="sxs-lookup"><span data-stu-id="cfaef-244">For more information, see [Enable DirectQuery Design Mode &#40;SSAS Tabular&#41;](enable-directquery-mode-in-ssdt.md).</span></span>|  
|<span data-ttu-id="cfaef-245">**QueryMode 屬性**</span><span class="sxs-lookup"><span data-stu-id="cfaef-245">**QueryMode property**</span></span>|<span data-ttu-id="cfaef-246">此屬性指定 DirectQuery 模型的預設查詢方法。當您部署模型時，在模型設計師中設定此屬性，但稍後可以覆寫該屬性。</span><span class="sxs-lookup"><span data-stu-id="cfaef-246">This property specifies the default query method for a DirectQuery model, You set this property in the model designer when you deploy the model, but you can override it later.</span></span> <span data-ttu-id="cfaef-247">此屬性有下列值：</span><span class="sxs-lookup"><span data-stu-id="cfaef-247">The property has these values:</span></span><br /><br /> <span data-ttu-id="cfaef-248">**DirectQuery** ：此設定會指定模型的所有查詢都應該只使用關聯式資料來源。</span><span class="sxs-lookup"><span data-stu-id="cfaef-248">**DirectQuery** - This setting specifies all queries to the model should use the relational data source only.</span></span><br /><br /> <span data-ttu-id="cfaef-249">**搭配使用 DirectQuery 和 InMemory** ：根據預設，此設定會指定應該透過關聯式來源來回應查詢，除非在用戶端的連接字串中指定其他項目。</span><span class="sxs-lookup"><span data-stu-id="cfaef-249">**DirectQuery with In-Memory** - This setting specifies, by default, queries should be answered by using the relational source, unless otherwise specified in the connection string from the client.</span></span><br /><br /> <span data-ttu-id="cfaef-250">**InMemory** ：此設定會指定僅透過快取來回應查詢。</span><span class="sxs-lookup"><span data-stu-id="cfaef-250">**In-Memory** - This setting specifies  queries should be answered by using the cache only.</span></span><br /><br /> <span data-ttu-id="cfaef-251">**搭配使用 InMemory 和 DirectQuery** ：根據預設，此設定會指定</span><span class="sxs-lookup"><span data-stu-id="cfaef-251">**In-Memory with DirectQuery** - This setting specifies, by default.</span></span> <span data-ttu-id="cfaef-252">應該透過快取來回應查詢，除非在用戶端的連接字串中指定其他項目。</span><span class="sxs-lookup"><span data-stu-id="cfaef-252">queries should be answered by using the cache, unless otherwise specified in the connection string from the client.</span></span><br /><br /> <br /><br /> <span data-ttu-id="cfaef-253">如需詳細資訊，請參閱 [設定或變更 DirectQuery 的慣用連接方法](../set-or-change-the-preferred-connection-method-for-directquery.md)。</span><span class="sxs-lookup"><span data-stu-id="cfaef-253">For more information, see [Set or Change the Preferred Connection Method for DirectQuery](../set-or-change-the-preferred-connection-method-for-directquery.md).</span></span>|  
|<span data-ttu-id="cfaef-254">**DirectQueryMode 屬性**</span><span class="sxs-lookup"><span data-stu-id="cfaef-254">**DirectQueryMode property**</span></span>|<span data-ttu-id="cfaef-255">在部署模型之後，您可以透過在 [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] 中變更此屬性，變更 DirectQuery 模型的慣用查詢資料來源。</span><span class="sxs-lookup"><span data-stu-id="cfaef-255">After the model has been deployed, you can change the preferred query data source for a DirectQuery model, by changing this property in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]</span></span><br /><br /> <span data-ttu-id="cfaef-256">與上一個屬性相似，此屬性指定模型的預設資料來源，而且有下列值：</span><span class="sxs-lookup"><span data-stu-id="cfaef-256">Like the previous property, this property specifies the default data source for the model, and has these values:</span></span><br /><br /> <span data-ttu-id="cfaef-257">**InMemory**：查詢只能使用快取。</span><span class="sxs-lookup"><span data-stu-id="cfaef-257">**InMemory**: Queries can use the cache only.</span></span><br /><br /> <span data-ttu-id="cfaef-258">**DirectQuerywithInMemory**：根據預設，查詢會使用關聯式資料來源，除非在用戶端的連接字串中指定另一個。</span><span class="sxs-lookup"><span data-stu-id="cfaef-258">**DirectQuerywithInMemory**: Queries use the relational data source by default, unless otherwise specified in the connection string from the client.</span></span><br /><br /> <span data-ttu-id="cfaef-259">**InMemorywithDirectQuery**：查詢預設會使用快取，除非在用戶端的連接字串中指定另一個。</span><span class="sxs-lookup"><span data-stu-id="cfaef-259">**InMemorywithDirectQuery**: Queries use the cache by default, unless otherwise specified in the connection string from the client.</span></span><br /><br /> <span data-ttu-id="cfaef-260"> (**DirectQuery**：查詢只使用關聯式資料來源。</span><span class="sxs-lookup"><span data-stu-id="cfaef-260">(**DirectQuery**: Queries use the relational data source only.</span></span><br /><br /> <br /><br /> <span data-ttu-id="cfaef-261">如需詳細資訊，請參閱 [設定或變更 DirectQuery 的慣用連接方法](../set-or-change-the-preferred-connection-method-for-directquery.md)。</span><span class="sxs-lookup"><span data-stu-id="cfaef-261">For more information, see [Set or Change the Preferred Connection Method for DirectQuery](../set-or-change-the-preferred-connection-method-for-directquery.md).</span></span>|  
|<span data-ttu-id="cfaef-262">**模擬設定屬性**</span><span class="sxs-lookup"><span data-stu-id="cfaef-262">**Impersonation Settings property**</span></span>|<span data-ttu-id="cfaef-263">此屬性定義在查詢時連接至 SQL Server 資料來源所用的認證。</span><span class="sxs-lookup"><span data-stu-id="cfaef-263">This property defines the credentials used to connect to the SQL Server data source at query time.</span></span> <span data-ttu-id="cfaef-264">您可以在模型設計師中設定此屬性，並且可以稍後在部署模型後變更值。</span><span class="sxs-lookup"><span data-stu-id="cfaef-264">You can set this property in the model designer, and you can change the value later, after the model has been deployed.</span></span><br /><br /> <span data-ttu-id="cfaef-265">請注意，這些認證只用於回應對關聯式資料存放區的查詢；它們不同於處理混合模型快取所用的認證。</span><span class="sxs-lookup"><span data-stu-id="cfaef-265">Note that these credentials are used only for answering queries against the relational data store; they are not the same as the credentials used for processing the cache of a hybrid model.</span></span><br /><br /> <span data-ttu-id="cfaef-266">當模型只用於記憶體中時，不能使用模擬。</span><span class="sxs-lookup"><span data-stu-id="cfaef-266">Impersonation cannot be used when the model is used within memory only.</span></span> <span data-ttu-id="cfaef-267">`ImpersonateCurrentUser` 設定無效，除非模型正在使用 DirectQuery 模式。</span><span class="sxs-lookup"><span data-stu-id="cfaef-267">The setting `ImpersonateCurrentUser`, is invalid unless the model is using DirectQuery mode.</span></span>|  
  
 <span data-ttu-id="cfaef-268">此外，如果您的模型包含資料分割，您必須選擇一個資料分割做為 DirectQuery 模式查詢的來源。</span><span class="sxs-lookup"><span data-stu-id="cfaef-268">Additionally, if your model includes partitions, you must choose one partition to use as the source for queries in DirectQuery mode.</span></span> <span data-ttu-id="cfaef-269">如需詳細資訊，請參閱[&#40;SSAS 表格式&#41;的資料分割和 DirectQuery 模式](define-partitions-in-directquery-models-ssas-tabular.md)。</span><span class="sxs-lookup"><span data-stu-id="cfaef-269">For more information, see [Partitions and DirectQuery Mode &#40;SSAS Tabular&#41;](define-partitions-in-directquery-models-ssas-tabular.md).</span></span>  
  
##  <a name="related-topics-and-tasks"></a><a name="bkmk_related_tasks"></a><span data-ttu-id="cfaef-270">相關主題和工作</span><span class="sxs-lookup"><span data-stu-id="cfaef-270">Related Topics and Tasks</span></span>  
  
|<span data-ttu-id="cfaef-271">主題</span><span class="sxs-lookup"><span data-stu-id="cfaef-271">Topic</span></span>|<span data-ttu-id="cfaef-272">描述</span><span class="sxs-lookup"><span data-stu-id="cfaef-272">Description</span></span>|  
|-----------|-----------------|  
|[<span data-ttu-id="cfaef-273">資料分割和 DirectQuery 模式 &#40;SSAS 表格式&#41;</span><span class="sxs-lookup"><span data-stu-id="cfaef-273">Partitions and DirectQuery Mode &#40;SSAS Tabular&#41;</span></span>](define-partitions-in-directquery-models-ssas-tabular.md)|<span data-ttu-id="cfaef-274">描述如何在設定 DirectQuery 模式的模型中使用資料分割。</span><span class="sxs-lookup"><span data-stu-id="cfaef-274">Describes how partitions are used in models configured for DirectQuery mode.</span></span>|  
|[<span data-ttu-id="cfaef-275">DirectQuery 模式中的 DAX 公式相容性</span><span class="sxs-lookup"><span data-stu-id="cfaef-275">DAX Formula Compatibility in DirectQuery Mode</span></span>](../dax-formula-compatibility-in-directquery-mode-ssas-2014.md)|<span data-ttu-id="cfaef-276">描述可在設定 DirectQuery 模式的模型中使用之公式的限制和相容性需求。</span><span class="sxs-lookup"><span data-stu-id="cfaef-276">Describes restrictions and compatibility requirements on the formulas that you can use in models configured for DirectQuery mode.</span></span>|  
|[<span data-ttu-id="cfaef-277">&#40;SSAS 表格式&#41;啟用 DirectQuery 設計模式</span><span class="sxs-lookup"><span data-stu-id="cfaef-277">Enable DirectQuery Design Mode &#40;SSAS Tabular&#41;</span></span>](enable-directquery-mode-in-ssdt.md)|<span data-ttu-id="cfaef-278">描述如何變更設計階段環境，好讓它支援使用 DirectQuery 模式。</span><span class="sxs-lookup"><span data-stu-id="cfaef-278">Describes how you can change the design-time environment so that it supports using DirectQuery mode</span></span>|  
|[<span data-ttu-id="cfaef-279">變更 DirectQuery 資料分割 &#40;SSAS 表格式&#41;</span><span class="sxs-lookup"><span data-stu-id="cfaef-279">Change the DirectQuery Partition &#40;SSAS Tabular&#41;</span></span>](../change-the-directquery-partition-ssas-tabular.md)|<span data-ttu-id="cfaef-280">描述如何變更 DirectQuery 資料分割。</span><span class="sxs-lookup"><span data-stu-id="cfaef-280">Describes how to change the DirectQuery partition.</span></span>|  
|[<span data-ttu-id="cfaef-281">設定或變更 DirectQuery 的慣用連接方法</span><span class="sxs-lookup"><span data-stu-id="cfaef-281">Set or Change the Preferred Connection Method for DirectQuery</span></span>](../set-or-change-the-preferred-connection-method-for-directquery.md)|<span data-ttu-id="cfaef-282">描述如何針對設定 DirectQuery 的模型來設定或變更連接方法。</span><span class="sxs-lookup"><span data-stu-id="cfaef-282">Describes how to set or change the connection method for models configured for DirectQuery.</span></span>|  
|[<span data-ttu-id="cfaef-283">&#40;SSAS 表格式&#41;的 DirectQuery 部署案例</span><span class="sxs-lookup"><span data-stu-id="cfaef-283">DirectQuery Deployment Scenarios &#40;SSAS Tabular&#41;</span></span>](../directquery-deployment-scenarios-ssas-tabular.md)|<span data-ttu-id="cfaef-284">描述 DirectQuery 部署案例。</span><span class="sxs-lookup"><span data-stu-id="cfaef-284">Describes DirectQuery deployment scenarios.</span></span>|  
|[<span data-ttu-id="cfaef-285">為表格式模型資料庫設定 In-Memory 或 DirectQuery 存取</span><span class="sxs-lookup"><span data-stu-id="cfaef-285">Configure In-Memory or DirectQuery Access for a Tabular Model Database</span></span>](enable-directquery-mode-in-ssms.md)|<span data-ttu-id="cfaef-286">了解 DirectQuery 組態</span><span class="sxs-lookup"><span data-stu-id="cfaef-286">Understand DirectQuery configurations</span></span>|  
|[<span data-ttu-id="cfaef-287">清除 Analysis Services 快取</span><span class="sxs-lookup"><span data-stu-id="cfaef-287">Clear the Analysis Services Caches</span></span>](../instances/clear-the-analysis-services-caches.md)|<span data-ttu-id="cfaef-288">清除表格式模型的快取</span><span class="sxs-lookup"><span data-stu-id="cfaef-288">Clear the cache of the tabular model</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="cfaef-289">另請參閱</span><span class="sxs-lookup"><span data-stu-id="cfaef-289">See Also</span></span>  
 <span data-ttu-id="cfaef-290">[SSAS 表格式 &#40;的資料分割&#41;](partitions-ssas-tabular.md) </span><span class="sxs-lookup"><span data-stu-id="cfaef-290">[Partitions &#40;SSAS Tabular&#41;](partitions-ssas-tabular.md) </span></span>  
 <span data-ttu-id="cfaef-291">[&#40;SSAS 表格式&#41;的表格式模型專案](tabular-model-projects-ssas-tabular.md) </span><span class="sxs-lookup"><span data-stu-id="cfaef-291">[Tabular Model Projects &#40;SSAS Tabular&#41;](tabular-model-projects-ssas-tabular.md) </span></span>  
 [<span data-ttu-id="cfaef-292">在 Excel 中進行分析 &#40;SSAS 表格式&#41;</span><span class="sxs-lookup"><span data-stu-id="cfaef-292">Analyze in Excel &#40;SSAS Tabular&#41;</span></span>](analyze-in-excel-ssas-tabular.md)  
