---
title: SQL Server Distributed Replay |Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: tools-other
ms.topic: conceptual
helpviewer_keywords:
- Distributed Replay
- SQL Server Distributed Replay
ms.assetid: 58ef7016-b105-42c2-90a0-364f411849a4
author: stevestein
ms.author: sstein
ms.openlocfilehash: b832cb8a8d8a38815b13b82a7af8eefc2fb81427
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87686650"
---
# <a name="sql-server-distributed-replay"></a><span data-ttu-id="41adc-102">SQL Server Distributed Replay</span><span class="sxs-lookup"><span data-stu-id="41adc-102">SQL Server Distributed Replay</span></span>
  <span data-ttu-id="41adc-103">[!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Distributed Replay 功能可協助您評定未來 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 升級的影響。</span><span class="sxs-lookup"><span data-stu-id="41adc-103">The [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Distributed Replay feature helps you assess the impact of future [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] upgrades.</span></span> <span data-ttu-id="41adc-104">您也可以使用它來協助評估硬體和作業系統升級以及 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 微調的影響。</span><span class="sxs-lookup"><span data-stu-id="41adc-104">You can also use it to help assess the impact of hardware and operating system upgrades, and [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] tuning.</span></span>

## <a name="benefits-of-distributed-replay"></a><span data-ttu-id="41adc-105">Distributed Replay 的優點</span><span class="sxs-lookup"><span data-stu-id="41adc-105">Benefits of Distributed Replay</span></span>
 <span data-ttu-id="41adc-106">與 [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)]相似之處在於，您可以使用 Distributed Replay，針對已升級的測試環境重新執行擷取的追蹤。</span><span class="sxs-lookup"><span data-stu-id="41adc-106">Similar to [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)], you can use Distributed Replay to replay a captured trace against an upgraded test environment.</span></span> <span data-ttu-id="41adc-107">而與 [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)]不同的是，Distributed Replay 不限於從單一電腦重新執行工作負載。</span><span class="sxs-lookup"><span data-stu-id="41adc-107">Unlike [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)], Distributed Replay is not limited to replaying the workload from a single computer.</span></span>

 <span data-ttu-id="41adc-108">Distributed Replay 提供比 [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)]更容易擴充的方案。</span><span class="sxs-lookup"><span data-stu-id="41adc-108">Distributed Replay offers a more scalable solution than [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)].</span></span> <span data-ttu-id="41adc-109">您可以使用 Distributed Replay，從多部電腦重新執行工作負載，並有效地模擬關鍵任務的工作負載。</span><span class="sxs-lookup"><span data-stu-id="41adc-109">With Distributed Replay, you can replay a workload from multiple computers and better simulate a mission-critical workload.</span></span>

 <span data-ttu-id="41adc-110">[!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Distributed Replay 功能可以使用多部電腦來重新執行追蹤資料，並模擬任務關鍵性工作負載。</span><span class="sxs-lookup"><span data-stu-id="41adc-110">The [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Distributed Replay feature can use multiple computers to replay trace data and simulate a mission-critical workload.</span></span> <span data-ttu-id="41adc-111">您可以使用 Distributed Replay 進行應用程式相容性測試、效能測試或容量計畫。</span><span class="sxs-lookup"><span data-stu-id="41adc-111">Use Distributed Replay for application compatibility testing, performance testing, or capacity planning.</span></span>

## <a name="when-to-use-distributed-replay"></a><span data-ttu-id="41adc-112">使用 Distributed Replay 的時機</span><span class="sxs-lookup"><span data-stu-id="41adc-112">When to Use Distributed Replay</span></span>
 [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)] <span data-ttu-id="41adc-113">和 Distributed Replay 所提供的功能有部分重疊。</span><span class="sxs-lookup"><span data-stu-id="41adc-113">and Distributed Replay provide some overlap in functionality.</span></span>

 <span data-ttu-id="41adc-114">您可以使用 [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)] 針對已升級的測試環境重新執行擷取的追蹤。</span><span class="sxs-lookup"><span data-stu-id="41adc-114">You may use [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)] to replay a captured trace against an upgraded test environment.</span></span> <span data-ttu-id="41adc-115">您也可以分析重新執行結果，以便尋找可能的功能與效能不相容。</span><span class="sxs-lookup"><span data-stu-id="41adc-115">You can also analyze the replay results to look for potential functional and performance incompatibilities.</span></span> <span data-ttu-id="41adc-116">不過， [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)] 只能從單一電腦重新執行工作負載。</span><span class="sxs-lookup"><span data-stu-id="41adc-116">However, [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)] can only replay a workload from a single computer.</span></span> <span data-ttu-id="41adc-117">重新執行具有許多使用中並行連線或高輸送量的密集型 OLTP 應用程式時， [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)] 可能會變成資源瓶頸。</span><span class="sxs-lookup"><span data-stu-id="41adc-117">When replaying an intensive OLTP application that has many active concurrent connections or high throughput, [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)] can become a resource bottleneck.</span></span>

 <span data-ttu-id="41adc-118">Distributed Replay 提供比 [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)]更容易擴充的方案。</span><span class="sxs-lookup"><span data-stu-id="41adc-118">Distributed Replay offers a more scalable solution than [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)].</span></span> <span data-ttu-id="41adc-119">您可以使用 Distributed Replay，從多部電腦重新執行工作負載，並有效地模擬關鍵任務工作負載。</span><span class="sxs-lookup"><span data-stu-id="41adc-119">Use Distributed Replay to replay a workload from multiple computers and better simulate a mission-critical workload.</span></span>

 <span data-ttu-id="41adc-120">下表將描述使用每項工具的時機。</span><span class="sxs-lookup"><span data-stu-id="41adc-120">The following table describes when to use each tool.</span></span>

|<span data-ttu-id="41adc-121">工具</span><span class="sxs-lookup"><span data-stu-id="41adc-121">Tool</span></span>|<span data-ttu-id="41adc-122">使用時機...</span><span class="sxs-lookup"><span data-stu-id="41adc-122">Use When...</span></span>|
|----------|---------------|
|[!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)]|<span data-ttu-id="41adc-123">您想要在單一電腦上使用傳統的重新執行機制。</span><span class="sxs-lookup"><span data-stu-id="41adc-123">You want to use the conventional replay mechanism on a single computer.</span></span> <span data-ttu-id="41adc-124">尤其，您需要逐行偵錯功能，例如 [步驟]、[執行至資料指標處] 及 [切換中斷點] 命令。</span><span class="sxs-lookup"><span data-stu-id="41adc-124">In particular, you need line-by-line debugging capabilities, such as the **Step**, **Run to Cursor**, and **Toggle Breakpoint** commands.</span></span><br /><br /> <span data-ttu-id="41adc-125">您想要重新執行 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 追蹤。</span><span class="sxs-lookup"><span data-stu-id="41adc-125">You want to replay an [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] trace.</span></span>|
|<span data-ttu-id="41adc-126">Distributed Replay</span><span class="sxs-lookup"><span data-stu-id="41adc-126">Distributed Replay</span></span>|<span data-ttu-id="41adc-127">您想要評估應用程式相容性。</span><span class="sxs-lookup"><span data-stu-id="41adc-127">You want to evaluate application compatibility.</span></span> <span data-ttu-id="41adc-128">例如，您想要測試 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 和作業系統升級狀況、硬體升級或索引微調。</span><span class="sxs-lookup"><span data-stu-id="41adc-128">For example, you want to test [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] and operating system upgrade scenarios, hardware upgrades, or index tuning.</span></span><br /><br /> <span data-ttu-id="41adc-129">擷取之追蹤中的並行過高，導致單一重新執行用戶端無法充分模擬它。</span><span class="sxs-lookup"><span data-stu-id="41adc-129">The concurrency in the captured trace is so high that a single replay client cannot sufficiently simulate it.</span></span>|

## <a name="distributed-replay-concepts"></a><span data-ttu-id="41adc-130">Distributed Replay 概念</span><span class="sxs-lookup"><span data-stu-id="41adc-130">Distributed Replay Concepts</span></span>
 <span data-ttu-id="41adc-131">下列元件構成 Distributed Replay 環境：</span><span class="sxs-lookup"><span data-stu-id="41adc-131">The following components make up the Distributed Replay environment:</span></span>

-   <span data-ttu-id="41adc-132">**Distributed Replay 管理工具**：主控台應用程式， `DReplay.exe` 用來與 Distributed Replay controller 通訊。</span><span class="sxs-lookup"><span data-stu-id="41adc-132">**Distributed Replay administration tool**: A console application, `DReplay.exe`, used to communicate with the distributed replay controller.</span></span> <span data-ttu-id="41adc-133">您可以使用管理工具來控制分散式重新執行。</span><span class="sxs-lookup"><span data-stu-id="41adc-133">Use the administration tool to control the distributed replay.</span></span>

-   <span data-ttu-id="41adc-134">**Distributed Replay Controller**：執行 Windows 服務且名為 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Distributed Replay Controller 的電腦。</span><span class="sxs-lookup"><span data-stu-id="41adc-134">**Distributed Replay controller**: A computer running the Windows service named [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Distributed Replay controller.</span></span> <span data-ttu-id="41adc-135">Distributed Replay Controller 可協調 Distributed Replay Client 的動作。</span><span class="sxs-lookup"><span data-stu-id="41adc-135">The Distributed Replay controller orchestrates the actions of the distributed replay clients.</span></span> <span data-ttu-id="41adc-136">每個 Distributed Replay 環境都只能有一個 Controller 執行個體。</span><span class="sxs-lookup"><span data-stu-id="41adc-136">There can only be one controller instance in each Distributed Replay environment.</span></span>

-   <span data-ttu-id="41adc-137">**Distributed Replay Client**：一或多部執行 Windows 服務且名為 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Distributed Replay Client 的 (實體或虛擬) 電腦。</span><span class="sxs-lookup"><span data-stu-id="41adc-137">**Distributed Replay clients**: One or more computers (physical or virtual) running the Windows service named [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Distributed Replay client.</span></span> <span data-ttu-id="41adc-138">Distributed Replay Client 會共同運作以模擬 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]執行個體的工作負載。</span><span class="sxs-lookup"><span data-stu-id="41adc-138">The Distributed Replay clients work together to simulate workloads against an instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="41adc-139">每個 Distributed Replay 環境中可以有一個或多個用戶端。</span><span class="sxs-lookup"><span data-stu-id="41adc-139">There can be one or more clients in each Distributed Replay environment.</span></span>

-   <span data-ttu-id="41adc-140">**目標伺服器**：Distributed Replay Client 可用來重新執行追蹤資料的 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 執行個體。</span><span class="sxs-lookup"><span data-stu-id="41adc-140">**Target server**: An instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] that the Distributed Replay clients can use to replay trace data.</span></span> <span data-ttu-id="41adc-141">我們建議您將目標伺服器放置於測試環境中。</span><span class="sxs-lookup"><span data-stu-id="41adc-141">We recommend that the target server be located in a test environment.</span></span>

 <span data-ttu-id="41adc-142">Distributed Replay 管理工具、Controller 及 Client 可以安裝在不同的電腦上，也可以安裝在同一部電腦上。</span><span class="sxs-lookup"><span data-stu-id="41adc-142">The Distributed Replay administration tool, controller, and client can be installed on different computers or the same computer.</span></span> <span data-ttu-id="41adc-143">在同一部電腦上，只能執行一個 Distributed Replay Controller 或 Client 服務的執行個體。</span><span class="sxs-lookup"><span data-stu-id="41adc-143">There can be only one instance of the Distributed Replay controller or client service that is running on the same computer.</span></span>

 <span data-ttu-id="41adc-144">下圖顯示 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Distributed Replay 實體架構：</span><span class="sxs-lookup"><span data-stu-id="41adc-144">The following figure shows the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Distributed Replay physical architecture:</span></span>

 <span data-ttu-id="41adc-145">![Distributed Replay 架構](../../database-engine/media/distributedreplayarch.gif "Distributed Replay 架構")</span><span class="sxs-lookup"><span data-stu-id="41adc-145">![Distributed Replay Architecture](../../database-engine/media/distributedreplayarch.gif "Distributed Replay Architecture")</span></span>

## <a name="distributed-replay-tasks"></a><span data-ttu-id="41adc-146">Distributed Replay 工作</span><span class="sxs-lookup"><span data-stu-id="41adc-146">Distributed Replay Tasks</span></span>

|<span data-ttu-id="41adc-147">工作描述</span><span class="sxs-lookup"><span data-stu-id="41adc-147">Task Description</span></span>|<span data-ttu-id="41adc-148">主題</span><span class="sxs-lookup"><span data-stu-id="41adc-148">Topic</span></span>|
|----------------------|-----------|
|<span data-ttu-id="41adc-149">描述如何設定 Distributed Replay。</span><span class="sxs-lookup"><span data-stu-id="41adc-149">Describes how to configure Distributed Replay.</span></span>|[<span data-ttu-id="41adc-150">設定 Distributed Replay</span><span class="sxs-lookup"><span data-stu-id="41adc-150">Configure Distributed Replay</span></span>](configure-distributed-replay.md)|
|<span data-ttu-id="41adc-151">描述如何準備輸入追蹤資料。</span><span class="sxs-lookup"><span data-stu-id="41adc-151">Describes how to prepare the input trace data.</span></span>|[<span data-ttu-id="41adc-152">準備輸入追蹤資料</span><span class="sxs-lookup"><span data-stu-id="41adc-152">Prepare the Input Trace Data</span></span>](prepare-the-input-trace-data.md)|
|<span data-ttu-id="41adc-153">描述如何重新執行追蹤資料。</span><span class="sxs-lookup"><span data-stu-id="41adc-153">Describes how to replay trace data.</span></span>|[<span data-ttu-id="41adc-154">重新執行追蹤資料</span><span class="sxs-lookup"><span data-stu-id="41adc-154">Replay Trace Data</span></span>](replay-trace-data.md)|
|<span data-ttu-id="41adc-155">描述如何檢閱 Distributed Replay 追蹤資料結果。</span><span class="sxs-lookup"><span data-stu-id="41adc-155">Describes how to review the Distributed Replay trace data results.</span></span>|[<span data-ttu-id="41adc-156">檢閱重新執行的結果</span><span class="sxs-lookup"><span data-stu-id="41adc-156">Review the Replay Results</span></span>](review-the-replay-results.md)|
|<span data-ttu-id="41adc-157">描述如何使用管理工具來起始、監視和取消控制器上的作業。</span><span class="sxs-lookup"><span data-stu-id="41adc-157">Describes how to use the administration tool to initiate, monitor, and cancel operations on the controller.</span></span>|[<span data-ttu-id="41adc-158">管理工具命令列選項 &#40;Distributed Replay Utility&#41;</span><span class="sxs-lookup"><span data-stu-id="41adc-158">Administration Tool Command-line Options &#40;Distributed Replay Utility&#41;</span></span>](administration-tool-command-line-options-distributed-replay-utility.md)|

## <a name="see-also"></a><span data-ttu-id="41adc-159">另請參閱</span><span class="sxs-lookup"><span data-stu-id="41adc-159">See Also</span></span>
 <span data-ttu-id="41adc-160">[SQL Server Distributed Replay 論壇](https://social.technet.microsoft.com/Forums/sl/sqldru/)[使用 Distributed Replay 來負載測試您的 SQL Server-第2部分](https://docs.microsoft.com/archive/blogs/msdn/mspfe/using-distributed-replay-to-load-test-your-sql-serverpart-2)[使用 Distributed Replay 負載測試您的 SQL Server-第1部分](https://docs.microsoft.com/archive/blogs/batuhanyildiz/using-distributed-replay-to-load-test-your-sql-serverpart-1)</span><span class="sxs-lookup"><span data-stu-id="41adc-160">[SQL Server Distributed Replay Forum](https://social.technet.microsoft.com/Forums/sl/sqldru/) [Using Distributed Replay to Load Test Your SQL Server - Part 2](https://docs.microsoft.com/archive/blogs/msdn/mspfe/using-distributed-replay-to-load-test-your-sql-serverpart-2) [Using Distributed Replay to Load Test Your SQL Server - Part 1](https://docs.microsoft.com/archive/blogs/batuhanyildiz/using-distributed-replay-to-load-test-your-sql-serverpart-1)</span></span>


