---
title: 2014 SQL Server 的新功能 |Microsoft Docs
ms.custom: ''
ms.date: 12/10/2019
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: install
ms.topic: conceptual
helpviewer_keywords:
- new features [SQL Server]
- SQL Server, what's new
- SQL Server 2008 what's new
- what's new [SQL Server]
- sql server 2014 sp1
- sql server 2014 sp2
ms.assetid: 6a428023-e3cc-4626-a88a-4c13ccbd7db0
author: rothja
ms.author: jroth
ms.openlocfilehash: 787a9c1cb22af1ef04b933012517fcce46cccef5
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87705941"
---
# <a name="whats-new-in-sql-server-2014"></a><span data-ttu-id="54f8a-102">SQL Server 2014 的新功能</span><span class="sxs-lookup"><span data-stu-id="54f8a-102">What's New in SQL Server 2014</span></span>

<span data-ttu-id="54f8a-103">本主題摘要說明中新功能的詳細連結，並摘要說明下列各項 [!INCLUDE[ssSQL14](../includes/sssql14-md.md)] 的服務套件[!INCLUDE[ssSQL14](../includes/sssql14-md.md)]</span><span class="sxs-lookup"><span data-stu-id="54f8a-103">This topic summarizes detailed links to new features in [!INCLUDE[ssSQL14](../includes/sssql14-md.md)] and summarizes services packs for [!INCLUDE[ssSQL14](../includes/sssql14-md.md)]</span></span>  
 
<span data-ttu-id="54f8a-104">**試試看：** ![Azure 虛擬機器小型 ](./media/what-s-new-in-sql-server-2016/azure-virtual-machine-small.png) 擁有 azure 帳戶嗎？</span><span class="sxs-lookup"><span data-stu-id="54f8a-104">**Try it out:** ![Azure Virtual Machine small](./media/what-s-new-in-sql-server-2016/azure-virtual-machine-small.png)     Have an Azure account?</span></span>  <span data-ttu-id="54f8a-105">前往 https://ms.portal.azure.com/?flight=1#create/Microsoft.SQLServer2014sp1EnterpriseWindowsServer2012R2 以啟動已安裝 SQL Server 2014 Service Pack 1 (SP1) 的虛擬機器。</span><span class="sxs-lookup"><span data-stu-id="54f8a-105">Go to https://ms.portal.azure.com/?flight=1#create/Microsoft.SQLServer2014sp1EnterpriseWindowsServer2012R2 to spin up a Virtual Machine with SQL Server 2014 Service Pack 1 (SP1) already installed.</span></span>

> [!TIP]
> <span data-ttu-id="54f8a-106">如需 SQL Server 2014 的首頁檔頁面，[請按一下這裡](../index.yml)。</span><span class="sxs-lookup"><span data-stu-id="54f8a-106">[Click here](../index.yml) for the home documentation page of SQL Server 2014.</span></span>

<!--
Do not let this file's filename fool you.
This filename contains "2016", but nevertheless...
This file, at this exact GitHub path, is dedicated to SQL Server version 2014.
-->

## <a name="whats-new-articles"></a><span data-ttu-id="54f8a-107">新功能文章</span><span class="sxs-lookup"><span data-stu-id="54f8a-107">What's New articles</span></span>

-   [<span data-ttu-id="54f8a-108">資料庫引擎的新 &#40;&#41;</span><span class="sxs-lookup"><span data-stu-id="54f8a-108">What's New &#40;Database Engine&#41;</span></span>](../database-engine/whats-new-in-sql-server-2016.md)  
  
-   [<span data-ttu-id="54f8a-109">Analysis Services 和商業智慧的新功能</span><span class="sxs-lookup"><span data-stu-id="54f8a-109">What's New in Analysis Services and Business Intelligence</span></span>](https://docs.microsoft.com/analysis-services/what-s-new-in-analysis-services)  
  
-   [<span data-ttu-id="54f8a-110">SQL Server 安裝的新增功能</span><span class="sxs-lookup"><span data-stu-id="54f8a-110">What's New in SQL Server Installation</span></span>](install/what-s-new-in-sql-server-installation.md)  
  
 <span data-ttu-id="54f8a-111">**[!INCLUDE[ssSQL14](../includes/sssql14-md.md)]尚未對下列功能引進重要的新功能：**</span><span class="sxs-lookup"><span data-stu-id="54f8a-111">**[!INCLUDE[ssSQL14](../includes/sssql14-md.md)] has not introduced significant new features to the following features:**</span></span>  
  
-   [<span data-ttu-id="54f8a-112">Integration Services 的新 &#40;&#41;</span><span class="sxs-lookup"><span data-stu-id="54f8a-112">What's New &#40;Integration Services&#41;</span></span>](../integration-services/what-s-new-in-integration-services-in-sql-server-2016.md)  
  
-   [<span data-ttu-id="54f8a-113">Reporting Services 的新 &#40;&#41;</span><span class="sxs-lookup"><span data-stu-id="54f8a-113">What's New &#40;Reporting Services&#41;</span></span>](../reporting-services/what-s-new-reporting-services.md)  
  
## <a name="sssql14-service-pack-1-sp1"></a>[!INCLUDE[ssSQL14](../includes/sssql14-md.md)] <span data-ttu-id="54f8a-114">Service Pack 1 (SP1)</span><span class="sxs-lookup"><span data-stu-id="54f8a-114">Service Pack 1 (SP1)</span></span>
[!INCLUDE[ssSQL14](../includes/sssql14-md.md)] <span data-ttu-id="54f8a-115">(SP1) 並未引進重要的新功能。</span><span class="sxs-lookup"><span data-stu-id="54f8a-115">(SP1) did not introduce significant new features.</span></span>
-  <span data-ttu-id="54f8a-116">[SQL Server 2014 Service Pack 1 版本資訊](https://support.microsoft.com/kb/3058865)。</span><span class="sxs-lookup"><span data-stu-id="54f8a-116">[SQL Server 2014 Service Pack 1 release information](https://support.microsoft.com/kb/3058865).</span></span>
-  <span data-ttu-id="54f8a-117">[ ![ 下載 Microsoft SQL Server 2014 的 service pack 1](./media/what-s-new-in-sql-server-2016/download.png)](https://www.microsoft.com/download/details.aspx?id=46694) [下載 service pack 1 （適用于 Microsoft SQL Server 2014](https://www.microsoft.com/download/details.aspx?id=46694)）。</span><span class="sxs-lookup"><span data-stu-id="54f8a-117">[![Download Service Pack 1 for Microsoft SQL Server 2014](./media/what-s-new-in-sql-server-2016/download.png)](https://www.microsoft.com/download/details.aspx?id=46694) [Download Service Pack 1 for Microsoft SQL Server 2014](https://www.microsoft.com/download/details.aspx?id=46694).</span></span>


## <a name="sssql14-service-pack-2-sp2"></a>[!INCLUDE[ssSQL14](../includes/sssql14-md.md)]<span data-ttu-id="54f8a-118">Service Pack 2 (SP2) </span><span class="sxs-lookup"><span data-stu-id="54f8a-118">Service Pack 2 (SP2)</span></span>
- <span data-ttu-id="54f8a-119">[SQL Server 2014 Service Pack 2 版本資訊](https://support.microsoft.com/kb/3171021)。</span><span class="sxs-lookup"><span data-stu-id="54f8a-119">[SQL Server 2014 Service Pack 2 release information](https://support.microsoft.com/kb/3171021).</span></span>
-  <span data-ttu-id="54f8a-120">[ ![ 下載 service pack 2 for Microsoft SQL Server 2014](./media/what-s-new-in-sql-server-2016/download.png)](https://go.microsoft.com/fwlink/?LinkID=821558) [下載 service pack 2 for Microsoft SQL Server 2014](https://go.microsoft.com/fwlink/?LinkID=821558)。</span><span class="sxs-lookup"><span data-stu-id="54f8a-120">[![Download Service Pack 2 for Microsoft SQL Server 2014](./media/what-s-new-in-sql-server-2016/download.png)](https://go.microsoft.com/fwlink/?LinkID=821558) [Download Service Pack 2 for Microsoft SQL Server 2014](https://go.microsoft.com/fwlink/?LinkID=821558).</span></span>
-  <span data-ttu-id="54f8a-121">[ ![ 下載 SQL SERVER 2014 Sp2 功能套件](./media/what-s-new-in-sql-server-2016/download.png)](https://www.microsoft.com/download/details.aspx?id=53164)[下載 SQL Server 2014 sp2 功能套件](https://www.microsoft.com/download/details.aspx?id=53164)。</span><span class="sxs-lookup"><span data-stu-id="54f8a-121">[![Download SQL Server 2014 SP2 Feature Pack](./media/what-s-new-in-sql-server-2016/download.png)](https://www.microsoft.com/download/details.aspx?id=53164) [Download the SQL Server 2014 SP2 Feature Pack](https://www.microsoft.com/download/details.aspx?id=53164).</span></span>

[!INCLUDE[ssSQL14](../includes/sssql14-md.md)] <span data-ttu-id="54f8a-122">(SP2) 包含下列改良功能：</span><span class="sxs-lookup"><span data-stu-id="54f8a-122">(SP2) Includes the following improvements:</span></span>

### <a name="performance-and-scalability-improvements"></a><span data-ttu-id="54f8a-123">效能和擴充性改善</span><span class="sxs-lookup"><span data-stu-id="54f8a-123">Performance and Scalability Improvements</span></span> 
-   <span data-ttu-id="54f8a-124">**自動的軟體 NUMA 分割：** 若使用 [!INCLUDE[ssSQL14](../includes/sssql14-md.md)] SP2，在實例啟動期間開啟追蹤旗標8079時，就會啟用自動軟體 NUMA。</span><span class="sxs-lookup"><span data-stu-id="54f8a-124">**Automatic Soft NUMA partitioning:** With [!INCLUDE[ssSQL14](../includes/sssql14-md.md)] SP2, Automatic Soft NUMA is enabled when Trace Flag 8079 is turned on during instance startup.</span></span> <span data-ttu-id="54f8a-125">在啟動期間啟用追蹤旗標8079時， [!INCLUDE[ssSQL14](../includes/sssql14-md.md)] SP2 會詢問硬體設定，並在報告8個或更多 cpu 的系統上，針對每個 NUMA 節點自動設定軟體 NUMA。</span><span class="sxs-lookup"><span data-stu-id="54f8a-125">When Trace Flag 8079 is enabled during startup, [!INCLUDE[ssSQL14](../includes/sssql14-md.md)] SP2 will interrogate the hardware layout and automatically configure Soft NUMA on systems reporting 8 or more CPUs per NUMA node.</span></span> <span data-ttu-id="54f8a-126">自動、軟 NUMA 行為是超執行緒 (HT/邏輯處理器) 感知。</span><span class="sxs-lookup"><span data-stu-id="54f8a-126">The automatic, soft NUMA behavior is Hyperthread (HT/logical processor) aware.</span></span> <span data-ttu-id="54f8a-127">其他節點的分割和建立可藉由增加接聽程式數目、調整以及網路和加密功能，來調整背景處理的規模。</span><span class="sxs-lookup"><span data-stu-id="54f8a-127">The partitioning and creation of additional nodes scales background processing by increasing the number of listeners, scaling, and network and encryption capabilities.</span></span> <span data-ttu-id="54f8a-128">我們建議您先使用自動軟體 NUMA 測試效能工作負載，再于生產環境中進行調整。</span><span class="sxs-lookup"><span data-stu-id="54f8a-128">We recommend that you first test the performance workload with Auto-Soft NUMA, before tuning it in production.</span></span> <span data-ttu-id="54f8a-129">[如需詳細資訊，請參閱 blog](https://blogs.msdn.microsoft.com/psssql/2016/03/30/sql-2016-it-just-runs-faster-automatic-soft-numa/)。</span><span class="sxs-lookup"><span data-stu-id="54f8a-129">[For more information, see the blog](https://blogs.msdn.microsoft.com/psssql/2016/03/30/sql-2016-it-just-runs-faster-automatic-soft-numa/).</span></span> 
-  <span data-ttu-id="54f8a-130">**動態記憶體物件調整：** [!INCLUDE[ssSQL14](../includes/sssql14-md.md)]SP2 會根據要在新式硬體上調整的節點和核心數目，動態分割記憶體物件。</span><span class="sxs-lookup"><span data-stu-id="54f8a-130">**Dynamic Memory Object Scaling:** [!INCLUDE[ssSQL14](../includes/sssql14-md.md)] SP2 dynamically partitions memory objects based on number of nodes and cores to scale on modern hardware.</span></span> <span data-ttu-id="54f8a-131">動態升級的目標是要自動將安全線程的記憶體物件分割 (CMEMTHREAD) （如果它變成瓶頸）。</span><span class="sxs-lookup"><span data-stu-id="54f8a-131">The goal of dynamic promotion is to automatically partition a thread safe memory object (CMEMTHREAD) if it becomes a bottleneck.</span></span> <span data-ttu-id="54f8a-132">非資料分割的記憶體物件可以依節點動態分割 (資料分割數目等於) 的 NUMA 節點數目。</span><span class="sxs-lookup"><span data-stu-id="54f8a-132">Non-partitioned memory objects can be dynamically partitioned by node (number of partitions equals number of NUMA nodes).</span></span> <span data-ttu-id="54f8a-133">依節點分割的記憶體物件可以由 CPU 進一步分割， (資料分割數目等於) 的 Cpu 數目。</span><span class="sxs-lookup"><span data-stu-id="54f8a-133">Memory objects partitioned by node can by further partitioned by CPU (number of partitions equals number of CPUs).</span></span> <span data-ttu-id="54f8a-134">[如需詳細資訊，請參閱 blog](https://blogs.msdn.microsoft.com/psssql/2016/04/06/sql-2016-it-just-runs-faster-dynamic-memory-object-cmemthread-partitioning/)。</span><span class="sxs-lookup"><span data-stu-id="54f8a-134">[For more information, see the blog](https://blogs.msdn.microsoft.com/psssql/2016/04/06/sql-2016-it-just-runs-faster-dynamic-memory-object-cmemthread-partitioning/).</span></span>
-  <span data-ttu-id="54f8a-135">**DBCC CHECK 命令的 MAXDOP 提示 \* ：** 此改善可解決[connect 意見反應 (468694) ](https://connect.microsoft.com/SQLServer/feedback/details/468694/maxdop-option-in-dbcc-checkdb)。</span><span class="sxs-lookup"><span data-stu-id="54f8a-135">**MAXDOP hint for DBCC CHECK\* commands:** This improvement addresses [connect feedback (468694)](https://connect.microsoft.com/SQLServer/feedback/details/468694/maxdop-option-in-dbcc-checkdb).</span></span> <span data-ttu-id="54f8a-136">您現在可以使用 sp_configure 值以外的 MAXDOP 設定來執行 DBCC CHECKDB。</span><span class="sxs-lookup"><span data-stu-id="54f8a-136">You can now run DBCC CHECKDB with a MAXDOP setting other than the sp_configure value.</span></span> <span data-ttu-id="54f8a-137">如果 MAXDOP 超過使用 Resource Governor 所設定的值，資料庫引擎就會使用 ALTER WORKLOAD GROUP (Transact-SQL) 中所描述的 Resource Governor MAXDOP 值。</span><span class="sxs-lookup"><span data-stu-id="54f8a-137">If MAXDOP exceeds the value configured with Resource Governor, the Database Engine uses the Resource Governor MAXDOP value, described in ALTER WORKLOAD GROUP (Transact-SQL).</span></span> <span data-ttu-id="54f8a-138">當您使用 MAXDOP 查詢提示時，適用所有搭配 max degree of parallelism 組態選項使用的語意規則。</span><span class="sxs-lookup"><span data-stu-id="54f8a-138">All semantic rules used with the max degree of parallelism configuration option are applicable when you use the MAXDOP query hint.</span></span> <span data-ttu-id="54f8a-139">如需詳細資訊，請參閱[DBCC CHECKDB (transact-sql) ](https://msdn.microsoft.com/library/ms176064.aspx)。</span><span class="sxs-lookup"><span data-stu-id="54f8a-139">For more information, see [DBCC CHECKDB (Transact-SQL)](https://msdn.microsoft.com/library/ms176064.aspx).</span></span>
-   <span data-ttu-id="54f8a-140">**為緩衝集區啟用 >8 TB：** [!INCLUDE[ssSQL14](../includes/sssql14-md.md)]SP2 可針對緩衝集區使用提供 128 TB 的虛擬位址空間。</span><span class="sxs-lookup"><span data-stu-id="54f8a-140">**Enable >8 TB for Buffer Pool:** [!INCLUDE[ssSQL14](../includes/sssql14-md.md)] SP2 enables 128 TB of virtual address space for buffer pool usage.</span></span> <span data-ttu-id="54f8a-141">這種改善可讓 SQL Server 緩衝集區在現代化硬體上擴充超過 8 TB。</span><span class="sxs-lookup"><span data-stu-id="54f8a-141">This improvement enables SQL Server Buffer Pool to scale beyond 8 TB on modern hardware.</span></span>
-   <span data-ttu-id="54f8a-142">**SOS_RWLock Spinlock 改善：** SOS_RWLock 是在整個 SQL Server 程式碼基底的各種位置中使用的同步處理原始物件。</span><span class="sxs-lookup"><span data-stu-id="54f8a-142">**SOS_RWLock spinlock Improvement:** The SOS_RWLock is a synchronization primitive used in various places throughout the SQL Server code base.</span></span>  <span data-ttu-id="54f8a-143">顧名思義，程式碼可以有多個共用的 (讀取器) 或單一 (寫入器) 擁有權。</span><span class="sxs-lookup"><span data-stu-id="54f8a-143">As the name implies, the code can have multiple shared (readers) or single (writer) ownership.</span></span> <span data-ttu-id="54f8a-144">這項改善不需要對 SOS_RWLock 進行 spinlock，而是使用與記憶體內部 OLTP 類似的無鎖定技術。</span><span class="sxs-lookup"><span data-stu-id="54f8a-144">This improvement removes the need for spinlock for SOS_RWLock and instead uses lock-free techniques similar to in-memory OLTP.</span></span> <span data-ttu-id="54f8a-145">有了這項變更，許多執行緒就可以同時讀取受 SOS_RWLock 保護的資料結構，而不會彼此封鎖。</span><span class="sxs-lookup"><span data-stu-id="54f8a-145">With this change, many threads can read a data structure protected by SOS_RWLock in parallel, without blocking each other.</span></span> <span data-ttu-id="54f8a-146">這種平行處理可提供更高的擴充性。</span><span class="sxs-lookup"><span data-stu-id="54f8a-146">This parallelization provides increased scalability.</span></span> <span data-ttu-id="54f8a-147">在這項變更之前，spinlock 的執行一次只允許一個執行緒取得 SOS_RWLock，甚至是讀取資料結構。</span><span class="sxs-lookup"><span data-stu-id="54f8a-147">Prior to this change, the spinlock implementation allowed only one thread to acquire the SOS_RWLock at a time, even to read a data structure.</span></span> <span data-ttu-id="54f8a-148">[如需詳細資訊，請參閱 blog](https://blogs.msdn.microsoft.com/psssql/2016/04/07/sql-2016-it-just-runs-faster-sos_rwlock-redesign/)。</span><span class="sxs-lookup"><span data-stu-id="54f8a-148">[For more information, see the blog](https://blogs.msdn.microsoft.com/psssql/2016/04/07/sql-2016-it-just-runs-faster-sos_rwlock-redesign/).</span></span>
-    <span data-ttu-id="54f8a-149">**空間原生實作為：** 在 SP2 中，對空間查詢效能的重大改進是 [!INCLUDE[ssSQL14](../includes/sssql14-md.md)] 透過原生方式來引入。</span><span class="sxs-lookup"><span data-stu-id="54f8a-149">**Spatial Native Implementation:** Significant improvement in spatial query performance is introduced in [!INCLUDE[ssSQL14](../includes/sssql14-md.md)] SP2 through native implementation.</span></span> <span data-ttu-id="54f8a-150">如需詳細資訊，請參閱[知識庫文章 KB3107399](https://support.microsoft.com/kb/3107399)。</span><span class="sxs-lookup"><span data-stu-id="54f8a-150">For more information, see the [knowledge base article KB3107399](https://support.microsoft.com/kb/3107399).</span></span>

### <a name="supportability-and-diagnostics-improvements"></a><span data-ttu-id="54f8a-151">支援性和診斷改善</span><span class="sxs-lookup"><span data-stu-id="54f8a-151">Supportability and Diagnostics Improvements</span></span>
-   <span data-ttu-id="54f8a-152">**資料庫複製：** 複製資料庫是新的 DBCC 命令，藉由複製不含資料的架構和中繼資料，來增強對現有生產資料庫的疑難排解。</span><span class="sxs-lookup"><span data-stu-id="54f8a-152">**Database Cloning:** Clone database is a new DBCC command that enhances troubleshooting existing production databases by cloning the schema and metadata without the data.</span></span> <span data-ttu-id="54f8a-153">複製是使用命令所建立 `DBCC clonedatabase('source_database_name', 'clone_database_name')` 。</span><span class="sxs-lookup"><span data-stu-id="54f8a-153">The clone is created with the command `DBCC clonedatabase('source_database_name', 'clone_database_name')`.</span></span>  <span data-ttu-id="54f8a-154">**注意：** 複製的資料庫不應在生產環境中使用。</span><span class="sxs-lookup"><span data-stu-id="54f8a-154">**Note:** Cloned databases should not be used in production environments.</span></span> <span data-ttu-id="54f8a-155">使用下列命令來判斷資料庫是否已從複製的資料庫產生： `select DATABASEPROPERTYEX('clonedb', 'isClone')` 。</span><span class="sxs-lookup"><span data-stu-id="54f8a-155">Use the following command determine if a database has been generated from a cloned database: `select DATABASEPROPERTYEX('clonedb', 'isClone')`.</span></span> <span data-ttu-id="54f8a-156">傳回值**1**表示資料庫是從 clonedatabase 建立的，而**0**則表示它不是複製。</span><span class="sxs-lookup"><span data-stu-id="54f8a-156">The return value of **1** indicates the database is created from clonedatabase while **0** indicates it is not a clone.</span></span>
-   <span data-ttu-id="54f8a-157">**Tempdb 可支援性：** 新的錯誤記錄檔訊息，指出在啟動 tempdb 檔案的數目，以及 tempdb 資料檔案的大小和自動成長。</span><span class="sxs-lookup"><span data-stu-id="54f8a-157">**Tempdb supportability:**  A new error log message that indicates at start-up both the number of tempdb files, and the size and autogrowth of tempdb data files.</span></span>
-   <span data-ttu-id="54f8a-158">**資料庫立即檔案初始化記錄：** 新的錯誤記錄檔訊息，指出伺服器啟動時，資料庫立即檔案初始化的狀態 (啟用/停用) 。</span><span class="sxs-lookup"><span data-stu-id="54f8a-158">**Database Instant File Initialization Logging:** A new error log message that indicates on server startup, the status of Database Instant File Initialization (enabled/disabled).</span></span>
-   <span data-ttu-id="54f8a-159">呼叫**堆疊中的模組名稱：** 擴充事件 (XEvent) 呼叫堆疊現在包含模組名稱加上位移，而不是絕對位址。</span><span class="sxs-lookup"><span data-stu-id="54f8a-159">**Module names in callstack:** The extended event (XEvent) callstack now includes modules names plus offset, instead of absolute addresses.</span></span>
-   <span data-ttu-id="54f8a-160">累加**式統計資料的新 DMF：** 這種改善解決了[ (797156) 的 connect 意見](https://connect.microsoft.com/SQLServer/feedback/details/797156/display-sys-dm-db-stats-properties-per-partition-for-incremental-statistics)反應，以便追蹤分割層級的累加統計資料。</span><span class="sxs-lookup"><span data-stu-id="54f8a-160">**New DMF for incremental statistics:** This improvement addresses [connect feedback (797156)](https://connect.microsoft.com/SQLServer/feedback/details/797156/display-sys-dm-db-stats-properties-per-partition-for-incremental-statistics) to enable tracking the incremental statistics at the partition level.</span></span> <span data-ttu-id="54f8a-161">引進新的 DMF sys dm_db_incremental_stats_properties，以公開累加統計資料的每個資料分割資訊。</span><span class="sxs-lookup"><span data-stu-id="54f8a-161">A new DMF sys.dm_db_incremental_stats_properties is introduced to expose information per-partition for incremental stats.</span></span>
-   <span data-ttu-id="54f8a-162">**索引使用 DMV 行為已更新：** 這項改善會解決[ (739566) ](https://connect.microsoft.com/SQLServer/feedback/details/739566/rebuilding-an-index-clears-stats-from-sys-dm-db-index-usage-stats)的連線意見反應，而重新建立索引的客戶將*不*會從 sys.databases 中清除任何現有的資料列專案。 dm_db_index_usage_stats 針對該索引。</span><span class="sxs-lookup"><span data-stu-id="54f8a-162">**Index Usage DMV behavior updated:** This improvement addresses [connect feedback (739566)](https://connect.microsoft.com/SQLServer/feedback/details/739566/rebuilding-an-index-clears-stats-from-sys-dm-db-index-usage-stats) from customers where rebuilding an index will *not* clear any existing row entry from sys.dm_db_index_usage_stats for that index.</span></span> <span data-ttu-id="54f8a-163">此行為現在會與 SQL 2008 和 SQL Server 2016 中的相同。</span><span class="sxs-lookup"><span data-stu-id="54f8a-163">The behavior will now be the same as in SQL 2008 and SQL Server 2016.</span></span> <span data-ttu-id="54f8a-164">[如需詳細資訊，請參閱 blog](https://blogs.msdn.microsoft.com/sql_server_team/index-usage-dmv-behavior-updated/)。</span><span class="sxs-lookup"><span data-stu-id="54f8a-164">[For more information, see the blog](https://blogs.msdn.microsoft.com/sql_server_team/index-usage-dmv-behavior-updated/).</span></span>
-   <span data-ttu-id="54f8a-165">**改善診斷 XE 和 dmv 之間的相互關聯：** 這種改善解決了[ (1934583) 的 connect 意見](https://connect.microsoft.com/SQLServer/feedback/details/1934583/extended-events-query-hash-and-query-plan-hash-data-types)反應。</span><span class="sxs-lookup"><span data-stu-id="54f8a-165">**Improved correlation between diagnostics XE and DMVs:** This improvement addresses [connect feedback (1934583)](https://connect.microsoft.com/SQLServer/feedback/details/1934583/extended-events-query-hash-and-query-plan-hash-data-types).</span></span> <span data-ttu-id="54f8a-166">`Query_hash`和 `query_plan_hash` 可用來唯一識別查詢。</span><span class="sxs-lookup"><span data-stu-id="54f8a-166">`Query_hash` and `query_plan_hash` are used for identifying a query uniquely.</span></span> <span data-ttu-id="54f8a-167">DMV 會將其定義為 varbinary(8)，而 XEvent 會將其定義為 UINT64。</span><span class="sxs-lookup"><span data-stu-id="54f8a-167">DMV defines them as varbinary(8), while XEvent defines them as UINT64.</span></span> <span data-ttu-id="54f8a-168">由於 SQL server 沒有「不帶正負號的 Bigint」，因此轉型不一定會運作。</span><span class="sxs-lookup"><span data-stu-id="54f8a-168">Because SQL server does not have "unsigned bigint", casting does not always work.</span></span> <span data-ttu-id="54f8a-169">這種改進引進了新的 XEvent 動作和篩選資料行。</span><span class="sxs-lookup"><span data-stu-id="54f8a-169">This improvement introduces new XEvent action and filter columns.</span></span> <span data-ttu-id="54f8a-170">資料行相當於 `query_hash` 和 `query_plan_hash` ，但它們定義為 INT64。</span><span class="sxs-lookup"><span data-stu-id="54f8a-170">The columns are equivalent to `query_hash` and `query_plan_hash`, except they are defined as INT64.</span></span> <span data-ttu-id="54f8a-171">INT64 定義有助於讓 XE 和 Dmv 之間的查詢相互關聯。</span><span class="sxs-lookup"><span data-stu-id="54f8a-171">The INT64 definition helps to correlate queries between XE and DMVs.</span></span>
-   <span data-ttu-id="54f8a-172">**支援 BULK INSERT 和 BCP 中的 utf-8：** 這種改善解決了[ (370419) 的 connect 意見](https://connect.microsoft.com/SQLServer/feedback/details/370419/bulk-insert-and-bcp-does-not-recognize-codepage-65001)反應。</span><span class="sxs-lookup"><span data-stu-id="54f8a-172">**Support for UTF-8 in BULK INSERT and BCP:** This improvement addresses [connect feedback (370419)](https://connect.microsoft.com/SQLServer/feedback/details/370419/bulk-insert-and-bcp-does-not-recognize-codepage-65001).</span></span> <span data-ttu-id="54f8a-173">BULK INSERT 和 BCP 現在可以匯出或匯入以 UTF-8 字元集編碼的資料。</span><span class="sxs-lookup"><span data-stu-id="54f8a-173">BULK INSERT and BCP can now export or import data that is encoded in the UTF-8 character set.</span></span>
-   <span data-ttu-id="54f8a-174">**每個運算子的查詢執行輕量分析：**「執行程式表」提供計畫中每個運算子的成本資訊。</span><span class="sxs-lookup"><span data-stu-id="54f8a-174">**Lightweight profiling of query execution per-operator:** Showplan provides information on the cost of each operator in the plan.</span></span> <span data-ttu-id="54f8a-175">但是實際的執行時間統計資料僅限於 CPU、i/o 讀取及每個執行緒經過時間的專案。</span><span class="sxs-lookup"><span data-stu-id="54f8a-175">But actual run-time statistics are limited for things such as CPU, I/O Reads, and elapsed time per-thread.</span></span> <span data-ttu-id="54f8a-176">SQL Server 2014 SP2 為執行程式表中的每個運算子引進這些額外的執行時間統計資料。</span><span class="sxs-lookup"><span data-stu-id="54f8a-176">SQL Server 2014 SP2 introduces these additional runtime statistics per operator in the Showplan.</span></span> <span data-ttu-id="54f8a-177">R2 也引進了名為的 XEvent `query_thread_profile` ，協助您進行查詢效能的疑難排解。</span><span class="sxs-lookup"><span data-stu-id="54f8a-177">R2 also introduces an XEvent named `query_thread_profile` to assist the troubleshooting of query performance.</span></span> <span data-ttu-id="54f8a-178">[如需詳細資訊，請參閱 blog](https://blogs.msdn.microsoft.com/sql_server_team/added-per-operator-level-performance-stats-for-query-processing/)。</span><span class="sxs-lookup"><span data-stu-id="54f8a-178">[For more information, see the blog](https://blogs.msdn.microsoft.com/sql_server_team/added-per-operator-level-performance-stats-for-query-processing/).</span></span>
-   <span data-ttu-id="54f8a-179">**變更追蹤清除：** 引進新的預存程式 `sp_flush_CT_internal_table_on_demand` ，以視需要清除變更追蹤內部資料表。</span><span class="sxs-lookup"><span data-stu-id="54f8a-179">**Change Tracking Cleanup:** A new stored procedure `sp_flush_CT_internal_table_on_demand` is introduced to clean the change tracking internal tables on demand.</span></span>
-   <span data-ttu-id="54f8a-180">**AlwaysON 租用超時記錄**已新增租用超時訊息的新記錄功能，以記錄目前時間和預期的更新時間。</span><span class="sxs-lookup"><span data-stu-id="54f8a-180">**AlwaysON Lease Timeout Logging** Added new logging capability for Lease Timeout messages so that the current time and the expected renewal times are logged.</span></span> <span data-ttu-id="54f8a-181">此外，SQL 錯誤記錄檔中會引進關於超時的新訊息。</span><span class="sxs-lookup"><span data-stu-id="54f8a-181">Also a new message was introduced in the SQL Error log regarding the timeouts.</span></span> <span data-ttu-id="54f8a-182">[如需詳細資訊，請參閱 blog](https://blogs.msdn.microsoft.com/alwaysonpro/2016/02/23/improved-alwayson-availability-group-lease-timeout-diagnostics/)。</span><span class="sxs-lookup"><span data-stu-id="54f8a-182">[For more information, see the blog](https://blogs.msdn.microsoft.com/alwaysonpro/2016/02/23/improved-alwayson-availability-group-lease-timeout-diagnostics/).</span></span>
-   <span data-ttu-id="54f8a-183">**在 SQL Server 中抓取輸入緩衝區的新 DMF：** 新的 DMF，用於抓取會話/要求的輸入緩衝區 (sys. dm_exec_input_buffer) 現已推出。</span><span class="sxs-lookup"><span data-stu-id="54f8a-183">**New DMF for retrieving input buffer in SQL Server:** A new DMF for retrieving the input buffer for a session/request (sys.dm_exec_input_buffer) is now available.</span></span> <span data-ttu-id="54f8a-184">這個 DMF 在功能上相當於 DBCC INPUTBUFFER。</span><span class="sxs-lookup"><span data-stu-id="54f8a-184">This DMF is functionally equivalent to DBCC INPUTBUFFER.</span></span> <span data-ttu-id="54f8a-185">[如需詳細資訊，請參閱 blog](https://blogs.msdn.microsoft.com/sql_server_team/new-dmf-for-retrieving-input-buffer-in-sql-server/)。</span><span class="sxs-lookup"><span data-stu-id="54f8a-185">[For more information, see the blog](https://blogs.msdn.microsoft.com/sql_server_team/new-dmf-for-retrieving-input-buffer-in-sql-server/).</span></span>
-   <span data-ttu-id="54f8a-186">**降低低估和非常重要記憶體授與的風險：** 已透過 MIN_GRANT_PERCENT 和 MAX_GRANT_PERCENT，為 Resource Governor 新增了查詢提示。</span><span class="sxs-lookup"><span data-stu-id="54f8a-186">**Mitigation for underestimated and overestimated memory grant:** Added a new query hints for Resource Governor through MIN_GRANT_PERCENT and MAX_GRANT_PERCENT.</span></span> <span data-ttu-id="54f8a-187">這個新的查詢可讓您在執行查詢時利用這些提示，方法是將其記憶體授與上限，以避免記憶體爭用。</span><span class="sxs-lookup"><span data-stu-id="54f8a-187">This new query allows you to leverage these hints while running queries, by capping their memory grants to prevent memory contention.</span></span> <span data-ttu-id="54f8a-188">如需詳細資訊，請參閱[知識庫文章 KB310740](https://support.microsoft.com/kb/3107401)。</span><span class="sxs-lookup"><span data-stu-id="54f8a-188">For more information, see [knowledge base article KB310740](https://support.microsoft.com/kb/3107401).</span></span>
-   <span data-ttu-id="54f8a-189">**較佳的記憶體授與和使用方式診斷：** 已將新的擴充事件 `query_memory_grant_usage` 加入至 SQL Server 的追蹤功能清單中。</span><span class="sxs-lookup"><span data-stu-id="54f8a-189">**Better memory grant and usage diagnostics:** A new extended event named `query_memory_grant_usage` was added to the list of tracing capabilities in SQL Server.</span></span> <span data-ttu-id="54f8a-190">此事件會追蹤要求和授與的記憶體授權。</span><span class="sxs-lookup"><span data-stu-id="54f8a-190">This event tracks memory grants requested and granted.</span></span> <span data-ttu-id="54f8a-191">此事件提供更佳的追蹤和分析功能，可針對任何與記憶體授與相關的查詢執行問題進行疑難排解。</span><span class="sxs-lookup"><span data-stu-id="54f8a-191">This event provides better tracing and analysis capabilities for troubleshooting any query execution issues related to memory grants.</span></span> <span data-ttu-id="54f8a-192">如需詳細資訊，請參閱[知識庫文章 KB3107173](https://support.microsoft.com/kb/3107173)。</span><span class="sxs-lookup"><span data-stu-id="54f8a-192">For more information, see [knowledge base article KB3107173](https://support.microsoft.com/kb/3107173).</span></span>
-   <span data-ttu-id="54f8a-193">**Tempdb 溢出的查詢執行診斷：**-雜湊警告和排序警告現在有額外的資料行可追蹤實體 i/o 統計資料、使用的記憶體和受影響的資料列。</span><span class="sxs-lookup"><span data-stu-id="54f8a-193">**Query execution diagnostics for tempdb spill:**- Hash Warning and Sort Warnings now have additional columns to track physical I/O statistics, memory used, and rows affected.</span></span> <span data-ttu-id="54f8a-194">我們也引進了新的 hash_spill_details 擴充事件。</span><span class="sxs-lookup"><span data-stu-id="54f8a-194">We also introduced a new hash_spill_details extended event.</span></span> <span data-ttu-id="54f8a-195">現在您可以 ([KB3107172](https://support.microsoft.com/kb/3107172)) 追蹤雜湊和排序警告的更細微資訊。</span><span class="sxs-lookup"><span data-stu-id="54f8a-195">Now you can track more granular information for your hash and sort warnings ([KB3107172](https://support.microsoft.com/kb/3107172)).</span></span> <span data-ttu-id="54f8a-196">這項改進現在也會透過 XML 查詢計劃，以新屬性（attribute）的形式公開至 SpillToTempDbType 複雜類型 ([KB3107400](https://support.microsoft.com/kb/3107400)) 。</span><span class="sxs-lookup"><span data-stu-id="54f8a-196">This improvement is also now exposed through the XML Query Plans in the form of a new attribute to the SpillToTempDbType complex type ([KB3107400](https://support.microsoft.com/kb/3107400)).</span></span> <span data-ttu-id="54f8a-197">[設定統計資料] `ON` 現在會顯示排序工作資料表的統計資料。</span><span class="sxs-lookup"><span data-stu-id="54f8a-197">Set statistics `ON` now shows sort worktable statistics.</span></span>
-   <span data-ttu-id="54f8a-198">**針對牽涉到剩餘述詞下推的查詢執行計畫改善診斷：** 現在會在查詢執行計畫中回報實際讀取的資料列，以協助改善查詢效能疑難排解。</span><span class="sxs-lookup"><span data-stu-id="54f8a-198">**Improved diagnostics for query execution plans that involve residual predicate pushdown:** The actual rows read are now reported in the query execution plans, to help improve query performance troubleshooting.</span></span> <span data-ttu-id="54f8a-199">這些資料列不需要分別捕捉 SET STATISTICS IO。</span><span class="sxs-lookup"><span data-stu-id="54f8a-199">These rows negate the need to capture SET STATISTICS IO separately.</span></span> <span data-ttu-id="54f8a-200">這些資料列也可以讓您在查詢計劃中查看與剩餘述詞下推的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="54f8a-200">These rows also allow you to see information related to a residual predicate push-down in a query plan.</span></span> <span data-ttu-id="54f8a-201">如需詳細資訊，請參閱[知識庫文章 KB3107397](https://support.microsoft.com/kb/3107397)。</span><span class="sxs-lookup"><span data-stu-id="54f8a-201">For more information, see [knowledge base article KB3107397](https://support.microsoft.com/kb/3107397).</span></span>


## <a name="additional-information"></a><span data-ttu-id="54f8a-202">其他資訊</span><span class="sxs-lookup"><span data-stu-id="54f8a-202">Additional Information</span></span>  
 [<span data-ttu-id="54f8a-203">SQL Server 2014 資源</span><span class="sxs-lookup"><span data-stu-id="54f8a-203">SQL Server 2014 Resources</span></span>](../index.yml)  
  
 [<span data-ttu-id="54f8a-204">SQL Server 2014 Release Notes</span><span class="sxs-lookup"><span data-stu-id="54f8a-204">SQL Server 2014 Release Notes</span></span>](https://go.microsoft.com/fwlink/p/?linkID=296445)  
  
 [<span data-ttu-id="54f8a-205">SQL Server 2014 資源中心</span><span class="sxs-lookup"><span data-stu-id="54f8a-205">SQL Server 2014 Resource Center</span></span>](https://msdn.microsoft.com/sqlserver/dn135309)  
  
 [<span data-ttu-id="54f8a-206">SQLCat 網站</span><span class="sxs-lookup"><span data-stu-id="54f8a-206">SQLCat Web Site</span></span>](https://go.microsoft.com/fwlink/p/?linkID=220963)  
