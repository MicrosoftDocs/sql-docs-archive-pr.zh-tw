---
title: 容錯移轉叢集執行個體管理及維護 | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- user accounts [SQL Server], failover clustering
- clusters [SQL Server], maintaining
- nodes [Faillover Clustering]
- failover clustering [SQL Server], maintaining
- adding nodes
- virtual servers [SQL Server], removing nodes
- clustered instance of SQL Server
- nodes [Faillover Clustering], removing
- nodes [Faillover Clustering], adding
- service accounts [SQL Server]
- removing nodes
- virtual servers [SQL Server], adding nodes
ms.assetid: 2d5c63e9-8061-45c3-94db-8dd3100b8a91
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 059d052402a1ad486c28a211585022bd67bcf3d2
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87595569"
---
# <a name="failover-cluster-instance-administration-and-maintenance"></a><span data-ttu-id="13670-102">容錯移轉叢集執行個體管理及維護</span><span class="sxs-lookup"><span data-stu-id="13670-102">Failover Cluster Instance Administration and Maintenance</span></span>
  <span data-ttu-id="13670-103">從現有 AlwaysOn 容錯移轉叢集執行個體 (FCI) 中加入或移除節點這類的維護工作是使用 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 安裝程式來完成。</span><span class="sxs-lookup"><span data-stu-id="13670-103">Maintenance tasks like adding or removing nodes from an existing AlwaysOn Failover Cluster Instance (FCI) are accomplished using the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Setup program.</span></span> <span data-ttu-id="13670-104">其他管理工作 (例如變更 IP 位址資源、從特定 FCI 案例復原) 則是使用容錯移轉叢集管理員嵌入式管理單元 (Windows Server 容錯移轉叢集 (WSFC) 服務的嵌入式管理單元) 來完成。</span><span class="sxs-lookup"><span data-stu-id="13670-104">Other administration tasks like changing the IP address resource, recovering from certain FCI scenarios are accomplished using the Failover Cluster Manager snap-in, which is the management snap-in for the Windows Server Failover Clustering (WSFC) service.</span></span>  
  
## <a name="maintaining-a-failover-cluster-instance"></a><span data-ttu-id="13670-105">維護容錯移轉叢集執行個體</span><span class="sxs-lookup"><span data-stu-id="13670-105">Maintaining a Failover Cluster Instance</span></span>  
 <span data-ttu-id="13670-106">安裝 FCI 之後，您可以使用 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 安裝程式變更或修復該叢集。</span><span class="sxs-lookup"><span data-stu-id="13670-106">After you have installed an FCI, you can change or repair it using the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Setup program.</span></span> <span data-ttu-id="13670-107">例如，您可以將額外的節點新增到 FCI、執行 FCI 做為獨立的執行個體，或從 FCI 組態中移除節點。</span><span class="sxs-lookup"><span data-stu-id="13670-107">For example, you can add additional nodes to an FCI, run an FCI as a stand-alone instance, or remove a node from a FCI configuration.</span></span>  
  
### <a name="adding-a-node-to-an-existing-failover-cluster-instance"></a><span data-ttu-id="13670-108">將節點加入現有的容錯移轉叢集執行個體</span><span class="sxs-lookup"><span data-stu-id="13670-108">Adding a Node to an Existing Failover Cluster Instance</span></span>  
 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="13670-109">安裝程式提供維護現有 FCI 的選項。</span><span class="sxs-lookup"><span data-stu-id="13670-109">Setup gives you the option of maintaining an existing FCI.</span></span> <span data-ttu-id="13670-110">如果選擇這個選項，則可以在要加入 FCI 的電腦上執行 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 安裝程式，將其他的節點加入 FCI。</span><span class="sxs-lookup"><span data-stu-id="13670-110">If you choose this option, you can add other nodes to your FCI by running [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Setup on the computer that you want to add to the FCI.</span></span> <span data-ttu-id="13670-111">如需詳細資訊，請參閱[建立新的 SQL Server 容錯移轉叢集 &#40;Setup&#41;](../install/create-a-new-sql-server-failover-cluster-setup.md) 和[在 SQL Server 容錯移轉叢集中加入或移除節點 &#40;Setup&#41;](../install/add-or-remove-nodes-in-a-sql-server-failover-cluster-setup.md)。</span><span class="sxs-lookup"><span data-stu-id="13670-111">For more information, see [Create a New SQL Server Failover Cluster &#40;Setup&#41;](../install/create-a-new-sql-server-failover-cluster-setup.md) and [Add or Remove Nodes in a SQL Server Failover Cluster &#40;Setup&#41;](../install/add-or-remove-nodes-in-a-sql-server-failover-cluster-setup.md).</span></span>  
  
### <a name="removing-a-node-from-an-existing-failover-cluster-instance"></a><span data-ttu-id="13670-112">從現有的容錯移轉叢集執行個體移除節點</span><span class="sxs-lookup"><span data-stu-id="13670-112">Removing a Node from an Existing Failover Cluster Instance</span></span>  
 <span data-ttu-id="13670-113">您可以在要從 FCI 移除的電腦上執行 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 安裝程式，以從 FCI 移除節點。</span><span class="sxs-lookup"><span data-stu-id="13670-113">You can remove a node from an FCI by running [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Setup on the computer that you want to remove from the FCI.</span></span> <span data-ttu-id="13670-114">FCI 內的每個節點都視為與 FCI 上其他節點無相依性的對等，而您可以將任何節點移除。</span><span class="sxs-lookup"><span data-stu-id="13670-114">Each node in an FCI is considered a peer without dependencies on other nodes on the FCI, and you can remove any node.</span></span> <span data-ttu-id="13670-115">損毀的節點即使無法使用也可移除，而且移除程序將不會從無法使用的節點中解除安裝 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 二進位編碼檔案。</span><span class="sxs-lookup"><span data-stu-id="13670-115">A damaged node does not have to be available to be removed, and the removal process does not uninstall the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] binaries from the unavailable node.</span></span> <span data-ttu-id="13670-116">已移除的節點可以隨時再加入 FCI。</span><span class="sxs-lookup"><span data-stu-id="13670-116">A removed node can be added back to a FCI at any time.</span></span> <span data-ttu-id="13670-117">如需詳細資訊，請參閱[在 SQL Server 容錯移轉叢集中新增或移除節點 &#40;安裝程式&#41;](../install/add-or-remove-nodes-in-a-sql-server-failover-cluster-setup.md)。</span><span class="sxs-lookup"><span data-stu-id="13670-117">For more information, see [Add or Remove Nodes in a SQL Server Failover Cluster &#40;Setup&#41;](../install/add-or-remove-nodes-in-a-sql-server-failover-cluster-setup.md).</span></span>  
  
### <a name="changing-service-accounts"></a><span data-ttu-id="13670-118">變更服務帳戶</span><span class="sxs-lookup"><span data-stu-id="13670-118">Changing Service Accounts</span></span>  
 <span data-ttu-id="13670-119">當 FCI 節點關閉或離線時，您不可以變更任何 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 服務帳戶的密碼。</span><span class="sxs-lookup"><span data-stu-id="13670-119">You should not change passwords for any of the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] service accounts when an FCI node is down or offline.</span></span> <span data-ttu-id="13670-120">如果您變更了帳戶密碼，就必須在所有的節點都恢復連線工作時，使用「 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 組態管理員」重新設定密碼。</span><span class="sxs-lookup"><span data-stu-id="13670-120">If you must do this, you must reset the password again by using [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Configuration Manager when all nodes are back online.</span></span>  
  
 <span data-ttu-id="13670-121">如果 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 的服務帳戶並不是叢集中的系統管理員，就無法刪除叢集中任何節點的管理共用。</span><span class="sxs-lookup"><span data-stu-id="13670-121">If the service account for [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] is not an administrator in your cluster, the administrative shares cannot be deleted on any nodes of the cluster.</span></span> <span data-ttu-id="13670-122">叢集中的管理共用必須可供使用， [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 才能運作。</span><span class="sxs-lookup"><span data-stu-id="13670-122">The administrative shares must be available in a cluster for [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] to function.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="13670-123">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 服務帳戶與 WSFC 服務帳戶請不要使用相同的帳戶。</span><span class="sxs-lookup"><span data-stu-id="13670-123">Do not use the same account for the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] service account and the WSFC service account.</span></span> <span data-ttu-id="13670-124">如果變更 WSFC 服務帳戶的密碼， [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 安裝將會失敗。</span><span class="sxs-lookup"><span data-stu-id="13670-124">If the password changes for the WSFC service account, your [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] installation will fail.</span></span>  
  
 <span data-ttu-id="13670-125">在 [!INCLUDE[nextref_longhorn](../../../includes/nextref-longhorn-md.md)]上，服務 SID 用於 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 服務帳戶。</span><span class="sxs-lookup"><span data-stu-id="13670-125">On [!INCLUDE[nextref_longhorn](../../../includes/nextref-longhorn-md.md)], service SIDs are used for [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] service accounts.</span></span> <span data-ttu-id="13670-126">如需詳細資訊，請參閱 [設定 Windows 服務帳戶與權限](../../../database-engine/configure-windows/configure-windows-service-accounts-and-permissions.md)預覽版本升級問題的解答。</span><span class="sxs-lookup"><span data-stu-id="13670-126">For more information, see [Configure Windows Service Accounts and Permissions](../../../database-engine/configure-windows/configure-windows-service-accounts-and-permissions.md).</span></span>  
  
## <a name="administering-a-failover-cluster-instance"></a><span data-ttu-id="13670-127">管理容錯移轉叢集執行個體</span><span class="sxs-lookup"><span data-stu-id="13670-127">Administering a Failover Cluster Instance</span></span>  
  
|<span data-ttu-id="13670-128">工作描述</span><span class="sxs-lookup"><span data-stu-id="13670-128">Task Description</span></span>|<span data-ttu-id="13670-129">主題連結</span><span class="sxs-lookup"><span data-stu-id="13670-129">Topic Link</span></span>|  
|----------------------|----------------|  
|<span data-ttu-id="13670-130">描述如何加入 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 資源的相依性。</span><span class="sxs-lookup"><span data-stu-id="13670-130">Describes how to add dependencies to a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] resource.</span></span>|[<span data-ttu-id="13670-131">加入 SQL Server 資源的相依性</span><span class="sxs-lookup"><span data-stu-id="13670-131">Add Dependencies to a SQL Server Resource</span></span>](add-dependencies-to-a-sql-server-resource.md)|  
|<span data-ttu-id="13670-132">Kerberos 是一種網路驗證通訊協定，可為用戶端/伺服器應用程式提供強大的驗證功能。</span><span class="sxs-lookup"><span data-stu-id="13670-132">Kerberos is a network authentication protocol designed to provide strong authentication for client/server applications.</span></span> <span data-ttu-id="13670-133">Kerberos 可做為交互操作的基礎，並且協助提升整個企業的網路驗證安全性。</span><span class="sxs-lookup"><span data-stu-id="13670-133">Kerberos provides a foundation for interoperability and helps to enhance the security of enterprise-wide network authentication.</span></span> <span data-ttu-id="13670-134">您可以將 Kerberos 驗證搭配 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 獨立執行個體或搭配 AlwaysOn FCI 使用。</span><span class="sxs-lookup"><span data-stu-id="13670-134">You can use Kerberos authentication with [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] stand-alone instances or with AlwaysOn FCIs.</span></span>|<span data-ttu-id="13670-135">[註冊 Kerberos 連接的服務主體名稱](../../../database-engine/configure-windows/register-a-service-principal-name-for-kerberos-connections.md)。</span><span class="sxs-lookup"><span data-stu-id="13670-135">[Register a Service Principal Name for Kerberos Connections](../../../database-engine/configure-windows/register-a-service-principal-name-for-kerberos-connections.md).</span></span>|  
|<span data-ttu-id="13670-136">提供描述如何啟用 Kerberos 驗證之內容的連結</span><span class="sxs-lookup"><span data-stu-id="13670-136">Provides links to content that describes how to enable Kerberos authentication</span></span>||  
|<span data-ttu-id="13670-137">描述用以從 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 容錯移轉叢集失敗中復原的程序。</span><span class="sxs-lookup"><span data-stu-id="13670-137">Describes the procedure used to recover from a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster failure.</span></span>|[<span data-ttu-id="13670-138">從容錯移轉叢集實例失敗復原</span><span class="sxs-lookup"><span data-stu-id="13670-138">Recover from Failover Cluster Instance Failure</span></span>](recover-from-failover-cluster-instance-failure.md)|  
|<span data-ttu-id="13670-139">描述用於變更 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 容錯移轉叢集執行個體之 IP 位址資源的程序。</span><span class="sxs-lookup"><span data-stu-id="13670-139">Describe the procedure used to change the IP address resource for a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster instance.</span></span>|[<span data-ttu-id="13670-140">變更容錯移轉叢集執行個體的 IP 位址</span><span class="sxs-lookup"><span data-stu-id="13670-140">Change the IP Address of a Failover Cluster Instance</span></span>](change-the-ip-address-of-a-failover-cluster-instance.md)|  
  
## <a name="see-also"></a><span data-ttu-id="13670-141">另請參閱</span><span class="sxs-lookup"><span data-stu-id="13670-141">See Also</span></span>  
 <span data-ttu-id="13670-142">[設定 HealthCheckTimeout 屬性設定](configure-healthchecktimeout-property-settings.md) </span><span class="sxs-lookup"><span data-stu-id="13670-142">[Configure HealthCheckTimeout Property Settings](configure-healthchecktimeout-property-settings.md) </span></span>  
 <span data-ttu-id="13670-143">[設定 FailureConditionLevel 屬性設定](configure-failureconditionlevel-property-settings.md) </span><span class="sxs-lookup"><span data-stu-id="13670-143">[Configure FailureConditionLevel Property Settings](configure-failureconditionlevel-property-settings.md) </span></span>  
 [<span data-ttu-id="13670-144">檢視及閱讀容錯移轉叢集執行個體診斷記錄檔</span><span class="sxs-lookup"><span data-stu-id="13670-144">View and Read Failover Cluster Instance Diagnostics Log</span></span>](view-and-read-failover-cluster-instance-diagnostics-log.md)  
  
  
