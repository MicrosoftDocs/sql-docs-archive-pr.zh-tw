---
title: 安裝容錯移轉叢集之前 | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: install
ms.topic: conceptual
helpviewer_keywords:
- clusters [SQL Server], preinstallation checklist
- installing failover clusters
- failover clustering [SQL Server], preinstallation checklist
ms.assetid: a655225d-8c54-4b30-95fd-31f588167899
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 0ec04b567b7970b25aebeffaefc7bafaf1d56691
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87595599"
---
# <a name="before-installing-failover-clustering"></a><span data-ttu-id="c272a-102">安裝容錯移轉叢集之前</span><span class="sxs-lookup"><span data-stu-id="c272a-102">Before Installing Failover Clustering</span></span>
  <span data-ttu-id="c272a-103">安裝 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 容錯移轉叢集之前，您必須先選取硬體以及要執行 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 的作業系統。</span><span class="sxs-lookup"><span data-stu-id="c272a-103">Before you install a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster, you must select the hardware and the operating system on which [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] will run.</span></span> <span data-ttu-id="c272a-104">您也必須設定 Windows Server 容錯移轉叢集 (WSFC)，並檢閱要在容錯移轉叢集上執行之其他軟體的網路、安全性及考量。</span><span class="sxs-lookup"><span data-stu-id="c272a-104">You must also configure Windows Server Failover Clustering (WSFC), and review network, security, and considerations for other software that will run on your failover cluster.</span></span>  
  
 <span data-ttu-id="c272a-105">如果 Windows 叢集有本機磁碟機，而且同一個磁碟機代號在一個或多個叢集節點上也做為共用磁碟機使用時，您無法將 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 安裝在該磁碟機上。</span><span class="sxs-lookup"><span data-stu-id="c272a-105">If a Windows cluster has a local disk drive and the same drive letter is also used on one or more cluster nodes as a shared drive, you cannot install [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] on that drive.</span></span>  
  
 <span data-ttu-id="c272a-106">您可能也想要檢閱下列主題，以進一步了解 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 容錯移轉叢集概念、功能及工作。</span><span class="sxs-lookup"><span data-stu-id="c272a-106">You may also want to review the following topics to learn more about [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover clustering concepts, features and tasks.</span></span>  
  
|<span data-ttu-id="c272a-107">主題說明</span><span class="sxs-lookup"><span data-stu-id="c272a-107">Topic Description</span></span>|<span data-ttu-id="c272a-108">主題</span><span class="sxs-lookup"><span data-stu-id="c272a-108">Topic</span></span>|  
|-----------------------|-----------|  
|<span data-ttu-id="c272a-109">說明 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Windows 容錯移轉叢集概念，並提供連結至相關的內容及工作。</span><span class="sxs-lookup"><span data-stu-id="c272a-109">Describes [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover clustering concepts, and provides links to associated content and tasks.</span></span>|[<span data-ttu-id="c272a-110">AlwaysOn 容錯移轉叢集執行個體 (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="c272a-110">AlwaysOn Failover Cluster Instances (SQL Server)</span></span>](../windows/always-on-failover-cluster-instances-sql-server.md)|  
|<span data-ttu-id="c272a-111">說明 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 容錯移轉原則概念，並提供連結設定容錯移轉原則，以符合您組織的需求。</span><span class="sxs-lookup"><span data-stu-id="c272a-111">Describes [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover policy concepts, and provides links to configuring the failover policy to suit your organizational requirements.</span></span>|[<span data-ttu-id="c272a-112">Failover Policy for Failover Cluster Instances</span><span class="sxs-lookup"><span data-stu-id="c272a-112">Failover Policy for Failover Cluster Instances</span></span>](../windows/failover-policy-for-failover-cluster-instances.md)|  
|<span data-ttu-id="c272a-113">說明如何維護以及您現有的 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 容錯移轉叢集。</span><span class="sxs-lookup"><span data-stu-id="c272a-113">Describes how to maintain and your existing [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster.</span></span>|[<span data-ttu-id="c272a-114">容錯移轉叢集執行個體管理及維護</span><span class="sxs-lookup"><span data-stu-id="c272a-114">Failover Cluster Instance Administration and Maintenance</span></span>](../windows/failover-cluster-instance-administration-and-maintenance.md)|  
|<span data-ttu-id="c272a-115">說明如何在 Windows Server 容錯移轉叢集 (WSFC) 上安裝 [!INCLUDE[ssASnoversion](../../../includes/ssasnoversion-md.md)] 。</span><span class="sxs-lookup"><span data-stu-id="c272a-115">Explains how to install [!INCLUDE[ssASnoversion](../../../includes/ssasnoversion-md.md)] on a Windows Server Failover Cluster (WSFC).</span></span>|[<span data-ttu-id="c272a-116">如何將 SQL Server Analysis Services 叢集化</span><span class="sxs-lookup"><span data-stu-id="c272a-116">How to Cluster SQL Server Analysis Services</span></span>](https://go.microsoft.com/fwlink/p/?LinkId=396548)|  
  
  
  
##  <a name="best-practices"></a><a name="BestPractices"></a> <span data-ttu-id="c272a-117">最佳作法</span><span class="sxs-lookup"><span data-stu-id="c272a-117">Best Practices</span></span>  
  
-   <span data-ttu-id="c272a-118">檢閱 [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)][版本資訊](https://go.microsoft.com/fwlink/?LinkId=296445)</span><span class="sxs-lookup"><span data-stu-id="c272a-118">Review [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)][Release Notes](https://go.microsoft.com/fwlink/?LinkId=296445)</span></span>  
  
-   <span data-ttu-id="c272a-119">安裝必要元件軟體。</span><span class="sxs-lookup"><span data-stu-id="c272a-119">Install prerequisite software.</span></span> <span data-ttu-id="c272a-120">執行安裝程式來安裝或升級至 [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)]之前，請先安裝下列必要元件以縮短安裝時間。</span><span class="sxs-lookup"><span data-stu-id="c272a-120">Before running Setup to install or upgrade to [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)], install the following prerequisites to reduce installation time.</span></span> <span data-ttu-id="c272a-121">您可以在執行安裝程式之前，於每個容錯移轉叢集節點上安裝必要元件軟體，然後重新啟動節點一次。</span><span class="sxs-lookup"><span data-stu-id="c272a-121">You can install prerequisite software on each failover cluster node and then restart nodes once before running Setup.</span></span>  
  
    -   <span data-ttu-id="c272a-122">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 安裝程式將不再安裝 Windows PowerShell。</span><span class="sxs-lookup"><span data-stu-id="c272a-122">Windows PowerShell is no longer installed by [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Setup.</span></span> <span data-ttu-id="c272a-123">Windows PowerShell 2.0 是安裝 [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)][!INCLUDE[ssDE](../../../includes/ssde-md.md)] 元件和 [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] 的必要條件。</span><span class="sxs-lookup"><span data-stu-id="c272a-123">Windows PowerShell 2.0 is a prerequisite for installing [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)][!INCLUDE[ssDE](../../../includes/ssde-md.md)] components and [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)].</span></span> <span data-ttu-id="c272a-124">如果您的電腦沒有 Windows PowerShell 2.0，可以遵循 [Windows Management Framework](https://go.microsoft.com/fwlink/?LinkId=186214) 頁面上的指示啟用此元件。</span><span class="sxs-lookup"><span data-stu-id="c272a-124">If Windows PowerShell 2.0 is not present on your computer, you can enable it by following the instructions on the [Windows Management Framework](https://go.microsoft.com/fwlink/?LinkId=186214) page.</span></span>  
  
    -   <span data-ttu-id="c272a-125">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 安裝程式不再安裝 .NET Framework 3.5 SP1，但是在較舊的 Windows 作業系統上安裝 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 時，可能需要 .NET Framework 3.5 SP1。</span><span class="sxs-lookup"><span data-stu-id="c272a-125">.NET Framework 3.5 SP1 is no longer installed by [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Setup, but may be required while installing [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] on older Windows operating systems.</span></span> <span data-ttu-id="c272a-126">如需詳細資訊，請參閱 [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] [版本](https://go.microsoft.com/fwlink/?LinkId=296445)資訊。</span><span class="sxs-lookup"><span data-stu-id="c272a-126">For more information, see [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)][Release Notes](https://go.microsoft.com/fwlink/?LinkId=296445).</span></span>  
  
    -   <span data-ttu-id="c272a-127">\*\* [!INCLUDE[msCoName](../../../includes/msconame-md.md)] 更新套件：\*\* 為避免在安裝期間因 .NET Framework 4 安裝而重新開機電腦， [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] 安裝程式需要在 [!INCLUDE[msCoName](../../../includes/msconame-md.md)] 電腦上安裝更新。</span><span class="sxs-lookup"><span data-stu-id="c272a-127">**[!INCLUDE[msCoName](../../../includes/msconame-md.md)] Update package:** To avoid computer restart due to .NET Framework 4 installation during setup, [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] setup requires a [!INCLUDE[msCoName](../../../includes/msconame-md.md)] update to be installed on the computer.</span></span>  <span data-ttu-id="c272a-128">如果您是在 Windows 7 SP1 或 [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)] SP2 上安裝 [!INCLUDE[firstref_longhorn](../../../includes/firstref-longhorn-md.md)] ，則會包含這項更新。</span><span class="sxs-lookup"><span data-stu-id="c272a-128">If you are installing [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)] on Windows 7 SP1 or [!INCLUDE[firstref_longhorn](../../../includes/firstref-longhorn-md.md)] SP2 this update is included.</span></span> <span data-ttu-id="c272a-129">如果您是在較舊的 Windows 作業系統上安裝，請從 [Windows Vista 和 Windows Server 2008 上之 .NET Framework 4.0 適用的 Microsoft Update](https://go.microsoft.com/fwlink/?LinkId=198093)下載此更新。</span><span class="sxs-lookup"><span data-stu-id="c272a-129">If you are installing on an older Windows operating system, download it from [Microsoft Update for .NET Framework 4.0 on Windows Vista and Windows Server 2008](https://go.microsoft.com/fwlink/?LinkId=198093).</span></span>  
  
    -   <span data-ttu-id="c272a-130">.NET Framework 4：安裝程式會在叢集作業系統上安裝 .NET Framework 4。</span><span class="sxs-lookup"><span data-stu-id="c272a-130">.NET Framework 4: Setup installs .NET Framework 4 on a clustered operating system.</span></span> <span data-ttu-id="c272a-131">若要縮短安裝時間，您可以考慮在執行安裝程式前先安裝 .NET Framework 4。</span><span class="sxs-lookup"><span data-stu-id="c272a-131">To reduce installation time, you may consider installing .NET Framework 4 before you run Setup.</span></span>  
  
    -   [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="c272a-132">安裝程式支援檔案。</span><span class="sxs-lookup"><span data-stu-id="c272a-132">Setup support files.</span></span> <span data-ttu-id="c272a-133">您可以執行位於 [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] 安裝媒體上的 SqlSupport.msi 以安裝這些檔案。</span><span class="sxs-lookup"><span data-stu-id="c272a-133">You can install these files by running SqlSupport.msi located on your [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] installation media.</span></span>  
  
-   <span data-ttu-id="c272a-134">確認在 WSFC 叢集上未安裝防毒軟體。</span><span class="sxs-lookup"><span data-stu-id="c272a-134">Verify that antivirus software is not installed on your WSFC cluster.</span></span> <span data-ttu-id="c272a-135">如需詳細資訊，請參閱 [!INCLUDE[msCoName](../../../includes/msconame-md.md)] 知識庫文件： [防毒軟體可能會導致叢集服務發生問題](https://go.microsoft.com/fwlink/?LinkId=116986)。</span><span class="sxs-lookup"><span data-stu-id="c272a-135">For more information, see the [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Knowledge Base article, [Antivirus software may cause problems with cluster services](https://go.microsoft.com/fwlink/?LinkId=116986).</span></span>  
  
-   <span data-ttu-id="c272a-136">安裝容錯移轉叢集期間為叢集群組命名時，不可以在叢集群組名稱中使用下列任何字元：</span><span class="sxs-lookup"><span data-stu-id="c272a-136">When naming a cluster group for your failover cluster installation, you must not use any of the following characters in the cluster group name:</span></span>  
  
    -   <span data-ttu-id="c272a-137">小於運算子 (\<)</span><span class="sxs-lookup"><span data-stu-id="c272a-137">Less than operator (\<)</span></span>  
  
    -   <span data-ttu-id="c272a-138">大於運算子 (>)</span><span class="sxs-lookup"><span data-stu-id="c272a-138">Greater than operator (>)</span></span>  
  
    -   <span data-ttu-id="c272a-139">雙引號 (")</span><span class="sxs-lookup"><span data-stu-id="c272a-139">Double quote (")</span></span>  
  
    -   <span data-ttu-id="c272a-140">單引號 (')</span><span class="sxs-lookup"><span data-stu-id="c272a-140">Single quote (')</span></span>  
  
    -   <span data-ttu-id="c272a-141">連字號 (&)</span><span class="sxs-lookup"><span data-stu-id="c272a-141">Ampersand (&)</span></span>  
  
     <span data-ttu-id="c272a-142">此外，請確認現有的叢集群組名稱沒有包含不支援的字元。</span><span class="sxs-lookup"><span data-stu-id="c272a-142">Also verify that existing cluster group names do not contain unsupported characters.</span></span>  
  
-   <span data-ttu-id="c272a-143">確定所有叢集節點已設定相同，包括 COM+、磁碟機代號，以及管理員群組中的使用者。</span><span class="sxs-lookup"><span data-stu-id="c272a-143">Ensure that all cluster nodes are configured identically, including COM+, disk drive letters, and users in the administrators group.</span></span>  
  
-   <span data-ttu-id="c272a-144">驗證您已經清除了所有節點上的系統記錄檔，並已經再次檢視過系統記錄檔。</span><span class="sxs-lookup"><span data-stu-id="c272a-144">Verify that you have cleared the system logs in all nodes and viewed the system logs again.</span></span> <span data-ttu-id="c272a-145">請在繼續下個步驟之前，確認記錄檔完全沒有任何錯誤訊息。</span><span class="sxs-lookup"><span data-stu-id="c272a-145">Ensure that the logs are free of any error messages before continuing.</span></span>  
  
-   <span data-ttu-id="c272a-146">在安裝或更新 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 容錯移轉叢集之前，請停用所有可能在安裝期間使用 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 元件的應用程式和服務，但請將磁碟資源保持為線上的狀態。</span><span class="sxs-lookup"><span data-stu-id="c272a-146">Before you install or update a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster, disable all applications and services that might use [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] components during installation, but leave the disk resources online.</span></span>  
  
-   [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="c272a-147">安裝程式會自動設定 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 叢集群組與位於容錯移轉叢集中之磁碟之間的相依性。</span><span class="sxs-lookup"><span data-stu-id="c272a-147">Setup automatically sets dependencies between the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] cluster group and the disks that will be in the failover cluster.</span></span> <span data-ttu-id="c272a-148">請勿在安裝之前設定磁碟的相依性。</span><span class="sxs-lookup"><span data-stu-id="c272a-148">Do not set dependencies for disks before Setup.</span></span>  
  
    -   <span data-ttu-id="c272a-149">在 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 容錯移轉叢集安裝期間，將會建立 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 網路資源名稱的電腦物件 (Active Directory 電腦帳戶)。</span><span class="sxs-lookup"><span data-stu-id="c272a-149">During [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Failover Cluster installation, computer object (Active Directory computer accounts) for the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Network Resource Name is created.</span></span> <span data-ttu-id="c272a-150">在 [!INCLUDE[firstref_longhorn](../../../includes/firstref-longhorn-md.md)] 叢集中，叢集名稱帳戶 (叢集本身的電腦帳戶) 需要擁有建立電腦物件的權限。</span><span class="sxs-lookup"><span data-stu-id="c272a-150">In a [!INCLUDE[firstref_longhorn](../../../includes/firstref-longhorn-md.md)] cluster, the cluster name account (computer account of the cluster itself) needs to have permissions to create computer objects.</span></span> <span data-ttu-id="c272a-151">如需詳細資訊，請參閱＜ [容錯移轉叢集逐步指南：設定 Active Directory 中的帳戶](https://technet.microsoft.com/library/cc731002\(WS.10\).aspx)＞。</span><span class="sxs-lookup"><span data-stu-id="c272a-151">For more information, see [Configuring Accounts in Active Directory](https://technet.microsoft.com/library/cc731002\(WS.10\).aspx).</span></span>  
  
    -   <span data-ttu-id="c272a-152">如果您使用 SMB 檔案共用做為儲存選項， [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 安裝帳戶必須具有檔案伺服器的 SeSecurityPrivilege。</span><span class="sxs-lookup"><span data-stu-id="c272a-152">If you are using SMB File share as a storage option, the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Setup account must have SeSecurityPrivilege on the file server.</span></span> <span data-ttu-id="c272a-153">若要執行這項操作，請使用檔案伺服器上的 [本機安全性原則] 主控台，將 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 安裝帳戶加入 **[管理稽核及安全性記錄]** 權限。</span><span class="sxs-lookup"><span data-stu-id="c272a-153">To do this, using the Local Security Policy console on the file server, add the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] setup account to **Manage auditing and security log** rights.</span></span>  
  
 
  
##  <a name="verify-your-hardware-solution"></a><a name="Hardware"></a> <span data-ttu-id="c272a-154">驗證硬體方案</span><span class="sxs-lookup"><span data-stu-id="c272a-154">Verify Your Hardware Solution</span></span>  
  
-   <span data-ttu-id="c272a-155">如果叢集方案包括位於不同地點的叢集節點，則必須驗證如網路延遲及共用磁碟支援等其他項目。</span><span class="sxs-lookup"><span data-stu-id="c272a-155">If the cluster solution includes geographically dispersed cluster nodes, additional items like network latency and shared disk support must be verified.</span></span>  
  
    -   <span data-ttu-id="c272a-156">如需有關 [!INCLUDE[firstref_longhorn](../../../includes/firstref-longhorn-md.md)] 和 [!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)]的詳細資訊，請參閱＜ [為容錯移轉叢集驗證硬體](https://go.microsoft.com/fwlink/?LinkId=196817) ＞和＜ [Windows 容錯移轉叢集的支援原則](https://go.microsoft.com/fwlink/?LinkId=196818)＞。</span><span class="sxs-lookup"><span data-stu-id="c272a-156">For more information about [!INCLUDE[firstref_longhorn](../../../includes/firstref-longhorn-md.md)] and [!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)], see [Validating Hardware for a failover cluster](https://go.microsoft.com/fwlink/?LinkId=196817) and [Support Policy for Windows Failover Clusters](https://go.microsoft.com/fwlink/?LinkId=196818).</span></span>  
  
-   <span data-ttu-id="c272a-157">確認要安裝 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 的磁碟未壓縮或加密。</span><span class="sxs-lookup"><span data-stu-id="c272a-157">Verify that the disk where [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] will be installed is not compressed or encrypted.</span></span> <span data-ttu-id="c272a-158">如果您嘗試將 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 安裝到壓縮的磁碟機或加密的磁碟機，則 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 安裝程式會失敗。</span><span class="sxs-lookup"><span data-stu-id="c272a-158">If you attempt to install [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] to a compressed drive or an encrypted drive, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Setup fails.</span></span>  
  
-   <span data-ttu-id="c272a-159">[!INCLUDE[firstref_longhorn](../../../includes/firstref-longhorn-md.md)] 和 [!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)] Advanced Server 及 Datacenter Server Edition 也支援 SAN 組態。</span><span class="sxs-lookup"><span data-stu-id="c272a-159">SAN configurations are also supported on [!INCLUDE[firstref_longhorn](../../../includes/firstref-longhorn-md.md)] and [!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)] Advanced Server and Datacenter Server editions.</span></span> <span data-ttu-id="c272a-160">「Windows Catalog 與硬體相容性清單」的類別目錄 "Cluster/Multi-cluster Device" 會列出一組具有 SAN 功能的儲存裝置，這些裝置已通過測試，並支援可附加多個 WSFC 叢集的 SAN 儲存單位。</span><span class="sxs-lookup"><span data-stu-id="c272a-160">The Windows Catalog and Hardware Compatibility List category "Cluster/Multi-cluster Device" lists the set of SAN-capable storage devices that have been tested and are supported as SAN storage units with multiple WSFC clusters attached.</span></span> <span data-ttu-id="c272a-161">尋找認證的元件後，請執行叢集驗證。</span><span class="sxs-lookup"><span data-stu-id="c272a-161">Run cluster validation after finding the certified components.</span></span>  
  
-   <span data-ttu-id="c272a-162">另外也支援用於安裝資料檔案的 SMB 檔案共用。</span><span class="sxs-lookup"><span data-stu-id="c272a-162">SMB File Share is also supported for installing data files.</span></span> <span data-ttu-id="c272a-163">如需詳細資訊，請參閱 [資料檔案的儲存類型](../../install/hardware-and-software-requirements-for-installing-sql-server.md#StorageTypes)。</span><span class="sxs-lookup"><span data-stu-id="c272a-163">For more information, see [Storage Types for Data Files](../../install/hardware-and-software-requirements-for-installing-sql-server.md#StorageTypes).</span></span>  
  
    > [!WARNING]  
    >  <span data-ttu-id="c272a-164">如果您使用 Windows 檔案伺服器做為 SMB 檔案共用儲存，則 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 安裝帳戶必須具有檔案伺服器的 SeSecurityPrivilege。</span><span class="sxs-lookup"><span data-stu-id="c272a-164">If you are using Windows File Server as a SMB File Share storage, the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Setup account must have SeSecurityPrivilege on the file server.</span></span> <span data-ttu-id="c272a-165">若要執行這項操作，請使用檔案伺服器上的 [本機安全性原則] 主控台，將 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 安裝帳戶加入 **[管理稽核及安全性記錄]** 權限。</span><span class="sxs-lookup"><span data-stu-id="c272a-165">To do this, using the Local Security Policy console on the file server, add the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] setup account to **Manage auditing and security log** rights.</span></span>  
    >   
    >  <span data-ttu-id="c272a-166">如果您要使用 Windows 檔案伺服器以外的 SMB 檔案共用儲存，請洽詢儲存廠商，了解檔案伺服器端的對等設定。</span><span class="sxs-lookup"><span data-stu-id="c272a-166">If you are using SMB file share storage other than Windows File server, please consult the storage vendor for an equivalent setting on the file server side.</span></span>  
  
-   [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="c272a-167">支持掛接點。</span><span class="sxs-lookup"><span data-stu-id="c272a-167">supports mount points.</span></span>  
  
     <span data-ttu-id="c272a-168">掛接的磁碟區 (或掛接點) 可讓您使用單一磁碟機代號來代表許多磁碟或磁碟區。</span><span class="sxs-lookup"><span data-stu-id="c272a-168">A mounted volume, or mount point, allows you to use a single drive letter to refer to many disks or volumes.</span></span> <span data-ttu-id="c272a-169">如果您以磁碟機代號 D: 來代表一般的磁碟或磁碟區，則您可以連接或「掛載」額外的磁碟或磁碟區為磁碟機代號 D: 下的目錄，而不需每一個磁碟或磁碟區都有自己的磁碟機代號。</span><span class="sxs-lookup"><span data-stu-id="c272a-169">If you have a drive letter D: that refers to a regular disk or volume, you can connect or "mount" additional disks or volumes as directories under drive letter D: without the additional disks or volumes requiring drive letters of their own.</span></span>  
  
     <span data-ttu-id="c272a-170">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 容錯移轉叢集的其他掛載點考量：</span><span class="sxs-lookup"><span data-stu-id="c272a-170">Additional mount point considerations for [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover clustering:</span></span>  
  
    -   [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="c272a-171">安裝程式需要已掛載磁碟機的基底磁碟機具有連接的磁碟機代號。</span><span class="sxs-lookup"><span data-stu-id="c272a-171">Setup requires that the base drive of a mounted drive has an associated drive letter.</span></span> <span data-ttu-id="c272a-172">若為容錯移轉叢集安裝，這個基底磁碟機必須是叢集磁碟機。</span><span class="sxs-lookup"><span data-stu-id="c272a-172">For failover cluster installations, this base drive must be a clustered drive.</span></span> <span data-ttu-id="c272a-173">這個版本不支援磁碟區 GUID。</span><span class="sxs-lookup"><span data-stu-id="c272a-173">Volume GUIDs are not supported in this release.</span></span>  
  
    -   <span data-ttu-id="c272a-174">含磁碟機代號的基底磁碟機不能在容錯移轉叢集執行個體之間共用。</span><span class="sxs-lookup"><span data-stu-id="c272a-174">The base drive, the one with the drive letter, cannot be shared among failover cluster instances.</span></span> <span data-ttu-id="c272a-175">這是容錯移轉叢集的正常限制，但不會限制獨立和多執行個體的伺服器。</span><span class="sxs-lookup"><span data-stu-id="c272a-175">This is a normal restriction for failover clusters, but is not a restriction on stand-alone, multi-instance servers.</span></span>  
  
    -   <span data-ttu-id="c272a-176">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 的叢集安裝乃受限於可用的磁碟機代號。</span><span class="sxs-lookup"><span data-stu-id="c272a-176">The clustered installations of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] are limited to the number of available drive letters.</span></span> <span data-ttu-id="c272a-177">假設您針對作業系統只使用一個磁碟機代號，而且其他所有磁碟機代號都可做為正常叢集磁碟機或主控掛載點的叢集磁碟機，則限制為每一容錯移轉叢集最多可有 25 個 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 執行個體。</span><span class="sxs-lookup"><span data-stu-id="c272a-177">Assuming that you use only one drive letter for the operating system, and all other drive letters are available as normal cluster drives or cluster drives hosting mount points, you are limited to a maximum of 25 instances of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] per failover cluster.</span></span>  
  
        > [!TIP]  
        >  <span data-ttu-id="c272a-178">可藉由使用 SMB 檔案共享選項來克服 25 個執行個體的限制。</span><span class="sxs-lookup"><span data-stu-id="c272a-178">The 25 instance limit can be overcome by using SMB file share option.</span></span> <span data-ttu-id="c272a-179">如果您使用 SMB 檔案共用來當成儲存選項，您可以安裝高達 50 個 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 容錯移轉叢集執行個體。</span><span class="sxs-lookup"><span data-stu-id="c272a-179">If you use SMB file share as the storage option, you can install up to 50 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster instances.</span></span>  
  
    -   <span data-ttu-id="c272a-180">不支援在裝載其他磁碟機之後格式化磁碟機。</span><span class="sxs-lookup"><span data-stu-id="c272a-180">Formatting a drive after mounting additional drives is not supported.</span></span>  
  
-   [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="c272a-181">容錯移轉叢集安裝只有在安裝 tempdb 檔時支援本機磁碟。</span><span class="sxs-lookup"><span data-stu-id="c272a-181">failover cluster installation supports Local Disk only for installing the tempdb files.</span></span> <span data-ttu-id="c272a-182">務必確定在所有叢集節點上為 tempdb 資料和記錄檔指定的路徑都是有效的。</span><span class="sxs-lookup"><span data-stu-id="c272a-182">Ensure that the path specified for the tempdb data and log files is valid on all the cluster nodes.</span></span> <span data-ttu-id="c272a-183">在容錯移轉期間，如果容錯移轉目標節點上的 tempdb 目錄無法使用，則 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 資源將無法上線。</span><span class="sxs-lookup"><span data-stu-id="c272a-183">During failover, if the tempdb directories are not available on the failover target node, the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] resource will fail to come online.</span></span> <span data-ttu-id="c272a-184">如需詳細資訊，請參閱 [資料檔案的儲存類型](../../install/hardware-and-software-requirements-for-installing-sql-server.md#StorageTypes) 和 [Database Engine 組態 - 資料目錄](../../install/database-engine-configuration-data-directories.md)。</span><span class="sxs-lookup"><span data-stu-id="c272a-184">For more information, see [Storage Types for Data Files](../../install/hardware-and-software-requirements-for-installing-sql-server.md#StorageTypes) and [Database Engine Configuration - Data Directories](../../install/database-engine-configuration-data-directories.md).</span></span>  
  
-   <span data-ttu-id="c272a-185">如果您在 iSCSI 技術元件上部署 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 容錯移轉叢集，我們建議您小心進行。</span><span class="sxs-lookup"><span data-stu-id="c272a-185">If you deploy a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster on iSCSI technology components, we recommend that you use appropriate caution.</span></span> <span data-ttu-id="c272a-186">如需詳細資訊，請參閱＜ [iSCSI 技術元件對於 SQL Server 的支援](https://go.microsoft.com/fwlink/?LinkId=116960)＞(機器翻譯)。</span><span class="sxs-lookup"><span data-stu-id="c272a-186">For more information, see [Support for SQL Server on iSCSI technology components](https://go.microsoft.com/fwlink/?LinkId=116960).</span></span>  
  
-   <span data-ttu-id="c272a-187">如需詳細資訊，請參閱＜ [Microsoft 叢集的 SQL Server 支援原則](https://go.microsoft.com/fwlink/?LinkId=116958)＞(機器翻譯)。</span><span class="sxs-lookup"><span data-stu-id="c272a-187">For more information, see [SQL Server support policy for Microsoft Clustering](https://go.microsoft.com/fwlink/?LinkId=116958).</span></span>  
  
-   <span data-ttu-id="c272a-188">如需有關適當仲裁磁碟機組態的詳細資訊，請參閱＜ [仲裁磁碟機組態資訊](https://go.microsoft.com/fwlink/?LinkId=196816)＞(機器翻譯)。</span><span class="sxs-lookup"><span data-stu-id="c272a-188">For more information about proper quorum drive configuration, see [Quorum Drive Configuration Information](https://go.microsoft.com/fwlink/?LinkId=196816).</span></span>  
  
-   <span data-ttu-id="c272a-189">若要在 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 來源安裝檔案與叢集位於不同網域時安裝 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 容錯移轉叢集，請將安裝檔案複製到可供 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 容錯移轉叢集使用的目前網域。</span><span class="sxs-lookup"><span data-stu-id="c272a-189">To install a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster when the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] source installation files and the cluster exist on different domains, copy the installation files to the current domain available to the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster.</span></span>  
  
  
  
##  <a name="review-security-considerations"></a><a name="Security"></a> <span data-ttu-id="c272a-190">預覽安全考量</span><span class="sxs-lookup"><span data-stu-id="c272a-190">Review Security Considerations</span></span>  
  
-   <span data-ttu-id="c272a-191">若要使用加密，請利用 WSFC 叢集的完整 DNS 名稱，在 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 容錯移轉叢集中的所有節點上安裝伺服器憑證。</span><span class="sxs-lookup"><span data-stu-id="c272a-191">To use encryption, install the server certificate with the fully qualified DNS name of the WSFC cluster on all nodes in the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster.</span></span> <span data-ttu-id="c272a-192">例如，如果您具有兩個節點的叢集 (節點名稱為 "Test1.DomainName.com" 及 "Test2.DomainName.com")，以及 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 容錯移轉叢集執行個體 (名稱為 "Virtsql")，則您必須取得 "Virtsql.DomainName.com" 的憑證，並將憑證安裝在 test1 及 test2 節點上。</span><span class="sxs-lookup"><span data-stu-id="c272a-192">For example, if you have a two-node cluster, with nodes named "Test1.DomainName.com" and "Test2.DomainName.com" and a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster instance named "Virtsql", you must get a certificate for "Virtsql.DomainName.com" and install the certificate on the test1 and test2 nodes.</span></span> <span data-ttu-id="c272a-193">接著，您可以選取「 **組態管理員」中的** [強制通訊協定加密] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 核取方塊，為您的容錯移轉叢集設定加密。</span><span class="sxs-lookup"><span data-stu-id="c272a-193">Then you can select the **Force protocol encryption** check box on the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Configuration Manager to configure your failover cluster for encryption.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="c272a-194"> 除非您已將憑證安裝在容錯移轉叢集執行個體的所有參與節點上，否則請勿選取 **[強制通訊協定加密]** 核取方塊。</span><span class="sxs-lookup"><span data-stu-id="c272a-194">Do not select the **Force protocol encryption** check box until you have certificates installed on all participating nodes in your failover cluster instance.</span></span>  
  
-   <span data-ttu-id="c272a-195">對於與舊版並存組態的 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 安裝而言， [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 服務必須使用只存在於全域網域群組中的帳戶。</span><span class="sxs-lookup"><span data-stu-id="c272a-195">For [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] installations in side-by-side configurations with previous versions, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] services must use accounts found only in the global domains group.</span></span> <span data-ttu-id="c272a-196">此外， [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 服務所使用的帳戶不能出現在本機的管理員群組中。</span><span class="sxs-lookup"><span data-stu-id="c272a-196">Additionally, accounts used by [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] services must not appear in the local Administrators group.</span></span> <span data-ttu-id="c272a-197">如果沒有遵照這項指導方針進行，將會導致非預期的安全性行為。</span><span class="sxs-lookup"><span data-stu-id="c272a-197">Failure to comply with this guideline will result in unexpected security behavior.</span></span>  
  
-   <span data-ttu-id="c272a-198">若要建立容錯移轉叢集，您必須是擁有下列權限的本機管理員：能夠以服務登入，而且能夠做為容錯移轉叢集執行個體之所有節點上的作業系統的一部分。</span><span class="sxs-lookup"><span data-stu-id="c272a-198">To create a failover cluster, you must be a local administrator with permissions to log on as a service, and to act as part of the operating system on all nodes of the failover cluster instance.</span></span>  
  
-   <span data-ttu-id="c272a-199">在 [!INCLUDE[nextref_longhorn](../../../includes/nextref-longhorn-md.md)]上，系統會自動產生可搭配 [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] 服務使用的服務 SID。</span><span class="sxs-lookup"><span data-stu-id="c272a-199">On [!INCLUDE[nextref_longhorn](../../../includes/nextref-longhorn-md.md)], service SIDs are generated automatically for use with [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] services.</span></span> <span data-ttu-id="c272a-200">如果是從舊版 [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] 升級的 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]容錯移轉叢集執行個體，就會保留現有的網域群組和 ACL 組態。</span><span class="sxs-lookup"><span data-stu-id="c272a-200">For [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] failover cluster instances upgraded from previous versions of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], existing domain groups and ACL configurations will be preserved.</span></span>  
  
-   <span data-ttu-id="c272a-201">網域群組必須與電腦帳戶位在相同的網域內。</span><span class="sxs-lookup"><span data-stu-id="c272a-201">Domain groups must be within the same domain as the machine accounts.</span></span> <span data-ttu-id="c272a-202">例如，如果安裝 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 的電腦是在屬於 MYDOMAIN 子系的 SQLSVR 網域內，則必須指定 SQLSVR 網域中的群組。</span><span class="sxs-lookup"><span data-stu-id="c272a-202">For example, if the machine where [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] will be installed is in the SQLSVR domain which is a child of MYDOMAIN, you must specify a group in the SQLSVR domain.</span></span> <span data-ttu-id="c272a-203">SQLSVR 網域可能會包含 MYDOMAIN 中的使用者帳戶。</span><span class="sxs-lookup"><span data-stu-id="c272a-203">The SQLSVR domain may contain user accounts from MYDOMAIN.</span></span>  
  
-   [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="c272a-204">容錯移轉叢集。</span><span class="sxs-lookup"><span data-stu-id="c272a-204">failover clustering cannot be installed where cluster nodes are domain controllers.</span></span>  
  
-   <span data-ttu-id="c272a-205">檢閱 [Security Considerations for a SQL Server Installation](../../install/security-considerations-for-a-sql-server-installation.md)中的內容。</span><span class="sxs-lookup"><span data-stu-id="c272a-205">Review content in [Security Considerations for a SQL Server Installation](../../install/security-considerations-for-a-sql-server-installation.md).</span></span>  
  
-   <span data-ttu-id="c272a-206">若要以 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]啟用 Kerberos 驗證，請參閱 [知識庫中的](https://support.microsoft.com/kb/319723) 如何使用 SQL Server Kerberos 驗證 [!INCLUDE[msCoName](../../../includes/msconame-md.md)] (機器翻譯)。</span><span class="sxs-lookup"><span data-stu-id="c272a-206">To enable Kerberos authentication with [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], see [How to use Kerberos authentication in SQL Server](https://support.microsoft.com/kb/319723) in the [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Knowledge Base.</span></span>  
  
  
  
##  <a name="review-network-port-and-firewall-considerations"></a><a name="Network"></a> <span data-ttu-id="c272a-207">預覽網絡、通訊埠和防火牆的考量</span><span class="sxs-lookup"><span data-stu-id="c272a-207">Review Network, Port, and Firewall Considerations</span></span>  
  
-   <span data-ttu-id="c272a-208">開始 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 安裝程式之前，請確認您已停用所有私人網路卡的 NetBIOS。</span><span class="sxs-lookup"><span data-stu-id="c272a-208">Verify that you have disabled NetBIOS for all private network cards before beginning [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Setup.</span></span>  
  
-   <span data-ttu-id="c272a-209">您的 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 的網路名稱及 IP 位址不應該用於任何其他目的，如檔案共用。</span><span class="sxs-lookup"><span data-stu-id="c272a-209">The network name and IP address of your [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] should not be used for any other purpose, such as file sharing.</span></span> <span data-ttu-id="c272a-210">如果您想要建立檔案共用資源，請對資源使用不同且唯一網路名稱及 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="c272a-210">If you want to create a file share resource, use a different, unique network name and IP address for the resource.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="c272a-211">建議您不要在資料磁碟機上使用檔案共用，因為它們可能影響 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 的行為及效能。</span><span class="sxs-lookup"><span data-stu-id="c272a-211">We recommend that you do not use file shares on data drives, because they can affect [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] behavior and performance.</span></span>  
  
-   <span data-ttu-id="c272a-212">即使 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 可透過叢集內的 TCP/IP 同時支援具名管道及 TCP/IP 通訊端，但仍然建議您在叢集組態中使用 TCP/IP 通訊端。</span><span class="sxs-lookup"><span data-stu-id="c272a-212">Even though [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] supports both Named Pipes and TCP/IP Sockets over TCP/IP within a cluster, we recommend that you use TCP/IP Sockets in a clustered configuration.</span></span>  
  
-   <span data-ttu-id="c272a-213">請注意，Windows 叢集不支援 ISA 伺服器，因此 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 容錯移轉叢集也不支援它。</span><span class="sxs-lookup"><span data-stu-id="c272a-213">Note that ISA server is not supported on Windows Clustering and consequently is also not supported on [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover clusters.</span></span>  
  
-   <span data-ttu-id="c272a-214">遠端登錄服務必須正常執行。</span><span class="sxs-lookup"><span data-stu-id="c272a-214">The Remote Registry service must be up and running.</span></span>  
  
-   <span data-ttu-id="c272a-215">遠端管理必須已啟用。</span><span class="sxs-lookup"><span data-stu-id="c272a-215">Remote Administration must be enabled.</span></span>  
  
-   <span data-ttu-id="c272a-216">針對 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 通訊埠，請使用 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 組態管理員來檢查您想要解除封鎖之執行個體 TCP/IP 通訊協定的 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 網路組態。</span><span class="sxs-lookup"><span data-stu-id="c272a-216">For the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] port, use [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Configuration Manager to check the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] network configuration for the TCP/IP protocol for the instance you want to unblock.</span></span> <span data-ttu-id="c272a-217">如果您想要在安裝之後使用 TCP 來連接至 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] ，就必須啟用 IPALL 的 TCP 通訊埠。</span><span class="sxs-lookup"><span data-stu-id="c272a-217">You must enable the TCP port for IPALL if you want to connect to [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] using TCP after installation.</span></span> <span data-ttu-id="c272a-218">根據預設，SQL Browser 會接聽 UDP 通訊埠 1434。</span><span class="sxs-lookup"><span data-stu-id="c272a-218">By default, SQL Browser listens on UDP port 1434.</span></span>  
  
-   <span data-ttu-id="c272a-219">容錯移轉叢集安裝程式作業包括檢查網路連結順序的規則。</span><span class="sxs-lookup"><span data-stu-id="c272a-219">Failover cluster Setup operations include a rule that checks network binding order.</span></span> <span data-ttu-id="c272a-220">雖然連結順序看起來可能是正確的，但是您可能已停用或「準刪除」系統上的 NIC 組態。</span><span class="sxs-lookup"><span data-stu-id="c272a-220">Although binding orders might seem correct, you might have disabled or "ghosted" NIC configurations on the system.</span></span> <span data-ttu-id="c272a-221">「準刪除」NIC 組態可能會影響連結順序，而且會導致連結順序規則發出警告。</span><span class="sxs-lookup"><span data-stu-id="c272a-221">"Ghosted" NIC configurations can affect the binding order and cause the binding order rule to issue a warning.</span></span> <span data-ttu-id="c272a-222">若要避免這種情況，請使用下列步驟來識別並移除已停用的網路介面卡：</span><span class="sxs-lookup"><span data-stu-id="c272a-222">To avoid this situation, use the following steps to identify and remove disabled network adapters:</span></span>  
  
    1.  <span data-ttu-id="c272a-223">在命令提示字元中，輸入：set devmgr_Show_Nonpersistent_Devices=1。</span><span class="sxs-lookup"><span data-stu-id="c272a-223">At a command prompt, type: set devmgr_Show_Nonpersistent_Devices=1.</span></span>  
  
    2.  <span data-ttu-id="c272a-224">輸入並執行：start Devmgmt.msc。</span><span class="sxs-lookup"><span data-stu-id="c272a-224">Type and run: start Devmgmt.msc.</span></span>  
  
    3.  <span data-ttu-id="c272a-225">展開網路介面卡的清單。</span><span class="sxs-lookup"><span data-stu-id="c272a-225">Expand the list of network adapters.</span></span> <span data-ttu-id="c272a-226">只有實體介面卡才應該位於此清單中。</span><span class="sxs-lookup"><span data-stu-id="c272a-226">Only the physical adapters should be in the list.</span></span> <span data-ttu-id="c272a-227">如果您擁有已停用的網路介面卡，安裝程式就會針對網路連結順序規則報告失敗。</span><span class="sxs-lookup"><span data-stu-id="c272a-227">If you have a disabled network adapter, Setup will report a failure for the network binding order rule.</span></span> <span data-ttu-id="c272a-228">[控制台]/[網路連線] 也會顯示此介面卡已停用。</span><span class="sxs-lookup"><span data-stu-id="c272a-228">Control Panel/Network Connections will also show that adapter was disabled.</span></span> <span data-ttu-id="c272a-229">確認 [控制台] 中的 [網路設定] 與 devmgmt.msc 顯示相同的已啟用實體配接器清單。</span><span class="sxs-lookup"><span data-stu-id="c272a-229">Confirm that Network Settings in Control Panel shows the same list of enabled physical adapters that devmgmt.msc shows.</span></span>  
  
    4.  <span data-ttu-id="c272a-230">在您執行 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 安裝程式之前，請移除已停用的網路配接器。</span><span class="sxs-lookup"><span data-stu-id="c272a-230">Remove disabled network adapters before you run [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Setup.</span></span>  
  
    5.  <span data-ttu-id="c272a-231">在安裝程式完成之後，請返回 [控制台] 中的 [網路連線] 並停用目前非使用中的任何網路介面卡。</span><span class="sxs-lookup"><span data-stu-id="c272a-231">After Setup finishes, return to Network Connections in Control Panel and disable any network adapters that are not currently in use.</span></span>  
  
  
  
##  <a name="verify-your-operating-system"></a><a name="OS_Support"></a><span data-ttu-id="c272a-232">驗證您的作業系統</span><span class="sxs-lookup"><span data-stu-id="c272a-232">Verify Your Operating System</span></span>  
 <span data-ttu-id="c272a-233">確定您已正確安裝作業系統，而且其設計可支援容錯移轉叢集。</span><span class="sxs-lookup"><span data-stu-id="c272a-233">Make sure that your operating system is installed properly and is designed to support failover clustering.</span></span> <span data-ttu-id="c272a-234">下表是 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 版本及支援這些版本之作業系統的清單。</span><span class="sxs-lookup"><span data-stu-id="c272a-234">The following table is a list of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] editions and the operating systems that support them.</span></span>  
  
|[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="c272a-235">版本</span><span class="sxs-lookup"><span data-stu-id="c272a-235">edition</span></span>|[!INCLUDE[firstref_longhorn](../../../includes/firstref-longhorn-md.md)] <span data-ttu-id="c272a-236">Enterprise</span><span class="sxs-lookup"><span data-stu-id="c272a-236">Enterprise</span></span>|[!INCLUDE[firstref_longhorn](../../../includes/firstref-longhorn-md.md)] <span data-ttu-id="c272a-237">Datacenter Server</span><span class="sxs-lookup"><span data-stu-id="c272a-237">Datacenter Server</span></span>|[!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)] <span data-ttu-id="c272a-238">Enterprise</span><span class="sxs-lookup"><span data-stu-id="c272a-238">Enterprise</span></span>|[!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)] <span data-ttu-id="c272a-239">Datacenter Server</span><span class="sxs-lookup"><span data-stu-id="c272a-239">Datacenter Server</span></span>|  
|---------------------------------------|------------------------------------------------|-------------------------------------------------------|----------------------------------------------|-----------------------------------------------------|  
|[!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)]<span data-ttu-id="c272a-240">Enterprise (64-bit) x64<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="c272a-240">Enterprise (64-bit) x64<sup>1</sup></span></span>|<span data-ttu-id="c272a-241">是</span><span class="sxs-lookup"><span data-stu-id="c272a-241">Yes</span></span>|<span data-ttu-id="c272a-242">是</span><span class="sxs-lookup"><span data-stu-id="c272a-242">Yes</span></span>|<span data-ttu-id="c272a-243">是<sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="c272a-243">Yes<sup>2</sup></span></span>|<span data-ttu-id="c272a-244">是<sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="c272a-244">Yes<sup>2</sup></span></span>|  
|[!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)] <span data-ttu-id="c272a-245">Enterprise (32 位元)</span><span class="sxs-lookup"><span data-stu-id="c272a-245">Enterprise (32-bit)</span></span>|<span data-ttu-id="c272a-246">是</span><span class="sxs-lookup"><span data-stu-id="c272a-246">Yes</span></span>|<span data-ttu-id="c272a-247">是</span><span class="sxs-lookup"><span data-stu-id="c272a-247">Yes</span></span>|||  
|[!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] <span data-ttu-id="c272a-248">Developer (64 位元)</span><span class="sxs-lookup"><span data-stu-id="c272a-248">-bit) Developer (64</span></span>|<span data-ttu-id="c272a-249">是</span><span class="sxs-lookup"><span data-stu-id="c272a-249">Yes</span></span>|<span data-ttu-id="c272a-250">是</span><span class="sxs-lookup"><span data-stu-id="c272a-250">Yes</span></span>|<span data-ttu-id="c272a-251">是 <sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="c272a-251">Yes <sup>2</sup></span></span>|<span data-ttu-id="c272a-252">是 <sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="c272a-252">Yes <sup>2</sup></span></span>|  
|[!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] <span data-ttu-id="c272a-253">Developer (32 位元)</span><span class="sxs-lookup"><span data-stu-id="c272a-253">Developer (32-bit)</span></span>|<span data-ttu-id="c272a-254">是</span><span class="sxs-lookup"><span data-stu-id="c272a-254">Yes</span></span>|<span data-ttu-id="c272a-255">是</span><span class="sxs-lookup"><span data-stu-id="c272a-255">Yes</span></span>|||  
|[!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] <span data-ttu-id="c272a-256">Standard (64 位元)</span><span class="sxs-lookup"><span data-stu-id="c272a-256">Standard (64-bit)</span></span>|<span data-ttu-id="c272a-257">是</span><span class="sxs-lookup"><span data-stu-id="c272a-257">Yes</span></span>|<span data-ttu-id="c272a-258">是</span><span class="sxs-lookup"><span data-stu-id="c272a-258">Yes</span></span>|<span data-ttu-id="c272a-259">是</span><span class="sxs-lookup"><span data-stu-id="c272a-259">Yes</span></span>|<span data-ttu-id="c272a-260">是</span><span class="sxs-lookup"><span data-stu-id="c272a-260">Yes</span></span>|  
|[!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] <span data-ttu-id="c272a-261">Standard (32 位元)</span><span class="sxs-lookup"><span data-stu-id="c272a-261">Standard (32-bit)</span></span>|<span data-ttu-id="c272a-262">是</span><span class="sxs-lookup"><span data-stu-id="c272a-262">Yes</span></span>|<span data-ttu-id="c272a-263">是</span><span class="sxs-lookup"><span data-stu-id="c272a-263">Yes</span></span>|||  
  
 <span data-ttu-id="c272a-264"><sup>1</sup> [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] WOW 模式不支援叢集。</span><span class="sxs-lookup"><span data-stu-id="c272a-264"><sup>1</sup> [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] clusters are not supported in WOW mode.</span></span> <span data-ttu-id="c272a-265">其中包括來自原先安裝在 WOW 中之舊版 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 容錯移轉叢集的升級。</span><span class="sxs-lookup"><span data-stu-id="c272a-265">That includes upgrades from previous versions of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover clusters that were originally installed in WOW.</span></span> <span data-ttu-id="c272a-266">對於這些版本而言，唯一的升級選項就是並存安裝新的版本並進行移轉。</span><span class="sxs-lookup"><span data-stu-id="c272a-266">For those the only upgrade option is to install the new version side by side and migrate.</span></span>  
  
 <span data-ttu-id="c272a-267"><sup>2</sup>支援 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 多重子網容錯移轉叢集。</span><span class="sxs-lookup"><span data-stu-id="c272a-267"><sup>2</sup> Supported for [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] multi-subnet failover clustering.</span></span>  
  
  
  
##  <a name="additional-considerations-for-multi-subnet-configurations"></a><a name="MultiSubnet"></a> <span data-ttu-id="c272a-268">多重子網路組態的其他考量</span><span class="sxs-lookup"><span data-stu-id="c272a-268">Additional Considerations for Multi-Subnet Configurations</span></span>  
 <span data-ttu-id="c272a-269">安裝 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 多重子網路容錯移轉叢集時，請將下列章節描述的需求謹記在心。</span><span class="sxs-lookup"><span data-stu-id="c272a-269">The sections below describe the requirements to keep in mind when installing a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] multi-subnet failover cluster.</span></span> <span data-ttu-id="c272a-270">一個多重子網路設定涉及了多重子網路間的叢集，因此涉及使用多重 IP 位址，及改變 IP 位址資源的相依性。</span><span class="sxs-lookup"><span data-stu-id="c272a-270">A multi-subnet configuration involves clustering across multiple subnets, therefore involves using multiple IP addresses and changes to IP address resource dependencies.</span></span>  
  
### <a name="ssnoversion-edition-and-operating-system-considerations"></a>[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="c272a-271">版本與作業系統考量</span><span class="sxs-lookup"><span data-stu-id="c272a-271">Edition and Operating System Considerations</span></span>  
  
-   <span data-ttu-id="c272a-272">如需支援 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 多重子網路容錯移轉叢集之 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 版本的相關資訊，請參閱 [SQL Server 2014 版本支援的功能](../../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md)。</span><span class="sxs-lookup"><span data-stu-id="c272a-272">For information about the editions of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] that support a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] multi-subnet failover cluster, see [Features Supported by the Editions of SQL Server 2014](../../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span></span>  
  
-   <span data-ttu-id="c272a-273">若要建立 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 多重子網路容錯移轉叢集，您必須先在多重子網路上建立 [!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)] 多站台容錯移轉叢集。</span><span class="sxs-lookup"><span data-stu-id="c272a-273">To create a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] multi-subnet failover cluster, you must first create the [!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)] multi-site failover cluster on multiple subnets.</span></span>  
  
-   [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="c272a-274">容錯移轉叢集相依於 Windows 伺服器容錯移轉叢集，因此如果有容錯移轉時，請確定 IP 相依性條件是有效的。</span><span class="sxs-lookup"><span data-stu-id="c272a-274">failover cluster depends on the Windows Server failover cluster to make sure that the IP dependency conditions are valid if there is a failover.</span></span>  
  
-   [!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)] <span data-ttu-id="c272a-275">需要所有的叢集伺服器都要在相同的 Active Directory 網域。</span><span class="sxs-lookup"><span data-stu-id="c272a-275">requires that all the cluster servers must be in the same Active Directory domain.</span></span> <span data-ttu-id="c272a-276">因此， [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 即使叢集節點存在於不同的子網路中，多重子網路容錯移轉叢集仍需要所有的叢集節點都位於相同的 Active Directory 網域。</span><span class="sxs-lookup"><span data-stu-id="c272a-276">Therefore, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] multi-subnet failover cluster requires that all the cluster nodes be in the same Active Directory domain even if they are in different subnets.</span></span>  
  
#### <a name="ip-address-and-ip-address-resource-dependencies"></a><span data-ttu-id="c272a-277">IP 位址和 IP 位址資源相依性</span><span class="sxs-lookup"><span data-stu-id="c272a-277">IP Address and IP Address Resource Dependencies</span></span>  
  
1.  <span data-ttu-id="c272a-278">在一個多重子網路設定中，IP 位址資源相依性乃設為 OR。</span><span class="sxs-lookup"><span data-stu-id="c272a-278">The IP Address resource dependency is set to OR in a multi-subnet configuration.</span></span> <span data-ttu-id="c272a-279">如需詳細資訊，請參閱[建立新的 SQL Server 容錯移轉叢集 &#40;安裝程式&#41;](create-a-new-sql-server-failover-cluster-setup.md)</span><span class="sxs-lookup"><span data-stu-id="c272a-279">For more information, see [Create a New SQL Server Failover Cluster &#40;Setup&#41;](create-a-new-sql-server-failover-cluster-setup.md)</span></span>  
  
2.  <span data-ttu-id="c272a-280">不支援混合的 AND-OR IP 位址相依性。</span><span class="sxs-lookup"><span data-stu-id="c272a-280">Mixed AND-OR IP address dependencies are not supported.</span></span> <span data-ttu-id="c272a-281">例如， \<IP1> \<IP2> \<IP3> 不支援和或。</span><span class="sxs-lookup"><span data-stu-id="c272a-281">For example, \<IP1> AND \<IP2> OR \<IP3> is not supported.</span></span>  
  
3.  <span data-ttu-id="c272a-282">不支援每個子網路有多個 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="c272a-282">More than one IP address per subnet is not supported.</span></span>  
  
     <span data-ttu-id="c272a-283">如果您決定為相同的子網路設定超過一個 IP 位址，您可能會在 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 啟動時，遇到用戶端連接失敗。</span><span class="sxs-lookup"><span data-stu-id="c272a-283">If you decide to use more than one IP address configured for the same subnet, you may experience client connection failures during [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] startup.</span></span>  
  
#### <a name="related-content"></a><span data-ttu-id="c272a-284">相關內容</span><span class="sxs-lookup"><span data-stu-id="c272a-284">Related Content</span></span>  
 <span data-ttu-id="c272a-285">如需 [!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)] 多站台容錯移轉的詳細資訊，請參閱 [Failover Clusters in Windows Server 2008 R2](https://technet.microsoft.com/library/ff182338\(v=WS.10\).aspx) (Windows Server 2008 R2 的容錯移轉叢集) 和 [Design for a Clustered Service or Application in a Multi-Site Failover Cluster](https://go.microsoft.com/fwlink/?LinkId=177873)(針對多站台容錯移轉叢集中的叢集服務或應用程式進行設計)。</span><span class="sxs-lookup"><span data-stu-id="c272a-285">For more information about [!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)] multi-site failover, see [Windows Server 2008 R2 Failover Clustering Site](https://technet.microsoft.com/library/ff182338\(v=WS.10\).aspx) and [Design for a Clustered Service or Application in a Multi-Site Failover Cluster](https://go.microsoft.com/fwlink/?LinkId=177873).</span></span>  
  
##  <a name="configure-windows-server-failover-cluster"></a><a name="WSFC"></a><span data-ttu-id="c272a-286">設定 Windows Server 容錯移轉叢集</span><span class="sxs-lookup"><span data-stu-id="c272a-286">Configure Windows Server Failover Cluster</span></span>  
  
-   [!INCLUDE[msCoName](../../../includes/msconame-md.md)] <span data-ttu-id="c272a-287">您至少必須在伺服器叢集的一個節點上設定 Cluster Service (WSFC)。</span><span class="sxs-lookup"><span data-stu-id="c272a-287">Cluster Service (WSFC) must be configured on at least one node of your server cluster.</span></span> <span data-ttu-id="c272a-288">您也必須結合 WSFC 一併執行 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Enterprise、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Business Intelligence 或 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Standard。</span><span class="sxs-lookup"><span data-stu-id="c272a-288">You must also run [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Enterprise, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Business Intelligence, or [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Standard in conjunction with WSFC.</span></span> [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="c272a-289">Enterprise 最多支援含有 16 個節點的容錯移轉叢集。</span><span class="sxs-lookup"><span data-stu-id="c272a-289">Enterprise support failover clusters with up to 16 nodes.</span></span> [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="c272a-290">Business Intelligence 和 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Standard 支援兩個節點的容錯移轉叢集。</span><span class="sxs-lookup"><span data-stu-id="c272a-290">Business Intelligence and [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Standard supports two-node failover clusters.</span></span>  
  
-   <span data-ttu-id="c272a-291">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 服務的資源 DLL 會匯出兩個函數，可讓 WSFC 叢集管理員用來檢查 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 資源的可用性。</span><span class="sxs-lookup"><span data-stu-id="c272a-291">The resource DLL for the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] service exports two functions used by WSFC Cluster Manager to check for availability of the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] resource.</span></span> <span data-ttu-id="c272a-292">如需詳細資訊，請參閱 [容錯移轉叢集執行個體的容錯移轉原則](../windows/failover-policy-for-failover-cluster-instances.md)。</span><span class="sxs-lookup"><span data-stu-id="c272a-292">For more information, see [Failover Policy for Failover Cluster Instances](../windows/failover-policy-for-failover-cluster-instances.md).</span></span>  
  
-   <span data-ttu-id="c272a-293">WSFC 必須能夠使用 IsAlive 檢查，驗證容錯移轉叢集執行個體是否正在執行中。</span><span class="sxs-lookup"><span data-stu-id="c272a-293">WSFC must be able to verify that the failover clustered instance is running by using the IsAlive check.</span></span> <span data-ttu-id="c272a-294">這需要使用信任連接來連接到伺服器。</span><span class="sxs-lookup"><span data-stu-id="c272a-294">This requires connecting to the server by using a trusted connection.</span></span> <span data-ttu-id="c272a-295">根據預設，系統不會將執行叢集服務的帳戶設定為叢集中節點上的管理員，而且 BUILTIN\Administrators 群組沒有登入 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]的權限。</span><span class="sxs-lookup"><span data-stu-id="c272a-295">By default, the account that runs the cluster service is not configured as an administrator on nodes in the cluster, and the BUILTIN\Administrators group does not have permission to log into [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="c272a-296">只有當您變更叢集節點上的權限時，這些設定才會變更。</span><span class="sxs-lookup"><span data-stu-id="c272a-296">These settings change only if you change permissions on the cluster nodes.</span></span>  
  
-   <span data-ttu-id="c272a-297">設定網域名稱服務 (DNS) 或 Windows 網際網路名稱服務 (WINS)。</span><span class="sxs-lookup"><span data-stu-id="c272a-297">Configure Domain Name Service (DNS) or Windows Internet Name Service (WINS).</span></span> <span data-ttu-id="c272a-298">DNS 伺服器或 WINS 伺服器必須要在安裝 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 容錯移轉叢集的環境中執行。</span><span class="sxs-lookup"><span data-stu-id="c272a-298">A DNS server or WINS server must be running in the environment where your [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster will be installed.</span></span> [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="c272a-299">安裝程式需要 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] IP 介面虛擬參考的動態網域名稱服務註冊。</span><span class="sxs-lookup"><span data-stu-id="c272a-299">Setup requires dynamic domain name service registration of the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] IP interface virtual reference.</span></span> <span data-ttu-id="c272a-300">DNS 伺服器組態應該要允許叢集節點動態登錄對應至網路名稱的線上 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="c272a-300">DNS server configuration should allow cluster nodes to dynamically register an online IP address map to Network Name.</span></span> <span data-ttu-id="c272a-301">如果無法完成動態註冊，安裝程式會失敗，而且會回復安裝。</span><span class="sxs-lookup"><span data-stu-id="c272a-301">If the dynamic registration cannot be completed, Setup fails and the installation is rolled back.</span></span> <span data-ttu-id="c272a-302">如需詳細資訊，請參閱＜ [此知識庫文件](https://support.microsoft.com/kb/947048)＞(機器翻譯)。</span><span class="sxs-lookup"><span data-stu-id="c272a-302">For more information, see [this knowledgebase article](https://support.microsoft.com/kb/947048)</span></span>  
  
  
  
##  <a name="install-msconame-distributed-transaction-coordinator"></a><a name="MSDTC"></a> <span data-ttu-id="c272a-303">安裝 [!INCLUDE[msCoName](../../../includes/msconame-md.md)] 分散式交易協調器</span><span class="sxs-lookup"><span data-stu-id="c272a-303">Install [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Distributed Transaction Coordinator</span></span>  
 <span data-ttu-id="c272a-304">在容錯移轉叢集上安裝 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 之前，請判斷是否必須建立 [!INCLUDE[msCoName](../../../includes/msconame-md.md)] 分散式交易協調器 (MSDTC) 叢集資源。</span><span class="sxs-lookup"><span data-stu-id="c272a-304">Before installing [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] on a failover cluster, determine whether the [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Distributed Transaction Coordinator (MSDTC) cluster resource must be created.</span></span> <span data-ttu-id="c272a-305">如果您只要安裝 [!INCLUDE[ssDE](../../../includes/ssde-md.md)]，則不需要 MSDTC 叢集資源。</span><span class="sxs-lookup"><span data-stu-id="c272a-305">If you are installing only the [!INCLUDE[ssDE](../../../includes/ssde-md.md)], the MSDTC cluster resource is not required.</span></span> <span data-ttu-id="c272a-306">如果您要安裝 [!INCLUDE[ssDE](../../../includes/ssde-md.md)] 和 SSIS 或工作站元件，或是將要使用分散式交易，則必須安裝 MSDTC。</span><span class="sxs-lookup"><span data-stu-id="c272a-306">If you are installing the [!INCLUDE[ssDE](../../../includes/ssde-md.md)] and SSIS, Workstation Components, or if you will use distributed transactions, you must install MSDTC.</span></span> <span data-ttu-id="c272a-307">請注意，MSDTC 並非僅限 [!INCLUDE[ssASnoversion](../../../includes/ssasnoversion-md.md)]執行個體的必要項目。</span><span class="sxs-lookup"><span data-stu-id="c272a-307">Note that MSDTC is not required for [!INCLUDE[ssASnoversion](../../../includes/ssasnoversion-md.md)]-only instances.</span></span>  
  
 <span data-ttu-id="c272a-308">在 [!INCLUDE[firstref_longhorn](../../../includes/firstref-longhorn-md.md)] 和 [!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)]中，您可以在單一的容錯移轉叢集上安裝 MSDTC 的多個執行個體。</span><span class="sxs-lookup"><span data-stu-id="c272a-308">On [!INCLUDE[firstref_longhorn](../../../includes/firstref-longhorn-md.md)] and [!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)], you can install multiple instances of MSDTC on a single failover cluster.</span></span> <span data-ttu-id="c272a-309">第一個安裝的 MSDTC 執行個體將會是 MSDTC 的叢集預設執行個體。</span><span class="sxs-lookup"><span data-stu-id="c272a-309">The first instance of MSDTC that is installed will be the cluster default instance of MSDTC.</span></span> [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="c272a-310">將會透過自動使用 MSDTC 執行個體的方式，利用已安裝到 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 本機叢集資源群組的 MSDTC 執行個體。</span><span class="sxs-lookup"><span data-stu-id="c272a-310">will take advantage of an instance of MSDTC installed to the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] local cluster resource group by automatically using the instance of MSDTC.</span></span> <span data-ttu-id="c272a-311">但是，個別的應用程式可以對應到叢集上的任何 MSDTC 執行個體。</span><span class="sxs-lookup"><span data-stu-id="c272a-311">However, individual applications can be mapped to any instance of MSDTC on the cluster.</span></span>  
  
 <span data-ttu-id="c272a-312">下列規則會套用至由 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]選擇的 MSDTC 執行個體：</span><span class="sxs-lookup"><span data-stu-id="c272a-312">The following rules are applied for an instance of MSDTC to be chosen by [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]:</span></span>  
  
-   <span data-ttu-id="c272a-313">使用已安裝到本機群組的 MSDTC，或</span><span class="sxs-lookup"><span data-stu-id="c272a-313">Use MSDTC installed to the local group, else</span></span>  
  
-   <span data-ttu-id="c272a-314">使用對應的 MSDTC 執行個體，或</span><span class="sxs-lookup"><span data-stu-id="c272a-314">Use the mapped instance of MSDTC, else</span></span>  
  
-   <span data-ttu-id="c272a-315">使用叢集的預設 MSDTC 執行個體，或</span><span class="sxs-lookup"><span data-stu-id="c272a-315">Use the cluster's default instance of MSDTC, else</span></span>  
  
-   <span data-ttu-id="c272a-316">使用安裝在本機電腦的 MSDTC 執行個體</span><span class="sxs-lookup"><span data-stu-id="c272a-316">Use the local machine's installed instance of MSDTC</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="c272a-317">如果已安裝至 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 本機叢集群組的 MSDTC 執行個體失敗， [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 並不會自動嘗試使用預設叢集執行個體或本機電腦的 MSDTC 執行個體。</span><span class="sxs-lookup"><span data-stu-id="c272a-317">If the MSDTC instance that is installed to the local cluster group of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] fails, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] does not automatically attempt to use the default cluster instance or the local machine instance of MSDTC.</span></span> <span data-ttu-id="c272a-318">您需要從 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 群組完全移除失敗的 MSDTC 執行個體，才能使用其他的 MSDTC 執行個體。</span><span class="sxs-lookup"><span data-stu-id="c272a-318">You would need to completely remove the failed instance of MSDTC from the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] group to use another instance of MSDTC.</span></span> <span data-ttu-id="c272a-319">同樣地，如果您建立 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 的對應，而對應的 MSDTC 執行個體失敗，您的分散式交易也將失敗。</span><span class="sxs-lookup"><span data-stu-id="c272a-319">Likewise, if you create a mapping for [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] and the mapped instance of MSDTC fails, your distributed transactions will also fail.</span></span> <span data-ttu-id="c272a-320">如果您希望 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 使用不同的 MSDTC 執行個體，就必須將 MSDTC 執行個體加入到 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 的本機叢集群組或刪除對應。</span><span class="sxs-lookup"><span data-stu-id="c272a-320">If you want [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] to use a different instance of MSDTC, you must either add an instance of MSDTC to the local cluster group of the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] or delete the mapping.</span></span>  
  
### <a name="configure-msconame-distributed-transaction-coordinator"></a><span data-ttu-id="c272a-321">設定 [!INCLUDE[msCoName](../../../includes/msconame-md.md)] 分散式交易協調器</span><span class="sxs-lookup"><span data-stu-id="c272a-321">Configure [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Distributed Transaction Coordinator</span></span>  
 <span data-ttu-id="c272a-322">安裝作業系統並設定叢集之後，您必須使用「叢集管理員」來設定 MSDTC 以搭配叢集使用。</span><span class="sxs-lookup"><span data-stu-id="c272a-322">After you install the operating system and configure your cluster, you must configure MSDTC to work in a cluster by using the Cluster Administrator.</span></span> <span data-ttu-id="c272a-323">如果無法將 MSDTC 設定為搭配叢集使用，也不會封鎖 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 安裝程式，但如果沒有正確設定 MSDTC，則 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 應用程式功能可能會受到影響。</span><span class="sxs-lookup"><span data-stu-id="c272a-323">Failure to cluster MSDTC will not block [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Setup, but [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] application functionality may be affected if MSDTC is not properly configured.</span></span>  
  
  
  
## <a name="see-also"></a><span data-ttu-id="c272a-324">另請參閱</span><span class="sxs-lookup"><span data-stu-id="c272a-324">See Also</span></span>  
 <span data-ttu-id="c272a-325">[安裝 SQL Server 2014 的硬體和軟體需求](../../install/hardware-and-software-requirements-for-installing-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="c272a-325">[Hardware and Software Requirements for Installing SQL Server 2014](../../install/hardware-and-software-requirements-for-installing-sql-server.md) </span></span>  
 <span data-ttu-id="c272a-326">[檢查 System Configuration Checker 的參數](../../../database-engine/install-windows/check-parameters-for-the-system-configuration-checker.md) </span><span class="sxs-lookup"><span data-stu-id="c272a-326">[Check Parameters for the System Configuration Checker](../../../database-engine/install-windows/check-parameters-for-the-system-configuration-checker.md) </span></span>  
 [<span data-ttu-id="c272a-327">容錯移轉叢集執行個體管理及維護</span><span class="sxs-lookup"><span data-stu-id="c272a-327">Failover Cluster Instance Administration and Maintenance</span></span>](../windows/failover-cluster-instance-administration-and-maintenance.md)  
  
  
