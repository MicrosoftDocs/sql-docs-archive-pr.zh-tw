---
title: " (SSRS 原生模式) 的加密金鑰 |Microsoft Docs"
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: database-engine
ms.topic: conceptual
f1_keywords:
- SQL12.rsconfigtool.encryptionkeypanel.F1
ms.assetid: cc7e6f84-80e1-4b5e-9409-d0e074edd147
author: maggiesMSFT
ms.author: maggies
ms.openlocfilehash: 78e9816a9e779459cd1388c1f7f10257c89b1ae5
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87598191"
---
# <a name="encryption-keys-ssrs-native-mode"></a><span data-ttu-id="8623c-102">加密金鑰 (SSRS 原生模式)</span><span class="sxs-lookup"><span data-stu-id="8623c-102">Encryption Keys (SSRS Native Mode)</span></span>
  <span data-ttu-id="8623c-103">使用 [加密金鑰] 頁面，即可管理用來加密和解密報表伺服器中之資料的對稱金鑰。</span><span class="sxs-lookup"><span data-stu-id="8623c-103">Use the Encryption Keys page to manage the symmetric key that is used to encrypt and decrypt data in a report server.</span></span> <span data-ttu-id="8623c-104">管理加密金鑰是報表伺服器組態之很重要的一部分。</span><span class="sxs-lookup"><span data-stu-id="8623c-104">Managing the encryption keys is an important part of report server configuration.</span></span> <span data-ttu-id="8623c-105">當您建立報表伺服器資料庫時，就會自動建立並套用對稱金鑰。</span><span class="sxs-lookup"><span data-stu-id="8623c-105">The symmetric key is created and applied automatically when you create the report server database.</span></span> <span data-ttu-id="8623c-106">請建立對稱金鑰的備份副本，以便執行例行維護作業。</span><span class="sxs-lookup"><span data-stu-id="8623c-106">Create a backup copy of the symmetric key so that you can perform routine maintenance operations.</span></span> <span data-ttu-id="8623c-107">您必須擁有對稱金鑰的有效副本，才能執行下列維護工作：</span><span class="sxs-lookup"><span data-stu-id="8623c-107">The following maintenance tasks require that you have a valid copy of the symmetric key:</span></span>  
  
-   <span data-ttu-id="8623c-108">變更報表伺服器服務的服務帳戶。</span><span class="sxs-lookup"><span data-stu-id="8623c-108">Changing the service account for the Report Server service.</span></span>  
  
-   <span data-ttu-id="8623c-109">將 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] 安裝移轉到不同的電腦。</span><span class="sxs-lookup"><span data-stu-id="8623c-109">Migrating a [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] installation to a different computer.</span></span>  
  
-   <span data-ttu-id="8623c-110">設定新的報表伺服器執行個體，來共用或使用現有的報表伺服器資料庫。</span><span class="sxs-lookup"><span data-stu-id="8623c-110">Configuring a new report server instance to share or use an existing report server database.</span></span>  
  
 [!INCLUDE[applies](../../includes/applies-md.md)]<span data-ttu-id="8623c-111">[!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)]原生模式。</span><span class="sxs-lookup"><span data-stu-id="8623c-111">[!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] Native mode.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="8623c-112">定期變更 Reporting Services 加密金鑰是安全性最佳作法。</span><span class="sxs-lookup"><span data-stu-id="8623c-112">Periodically changing the Reporting Services encryption key is a security best practice.</span></span> <span data-ttu-id="8623c-113">建議您在進行 Reporting Services 的主要版本升級之後，立即變更金鑰。</span><span class="sxs-lookup"><span data-stu-id="8623c-113">A recommended time to change the key is immediately following a major version upgrade of Reporting Services.</span></span> <span data-ttu-id="8623c-114">在升級之後變更金鑰可將升級循環以外，由變更 Reporting Services 加密金鑰所造成的其他服務中斷減至最少。</span><span class="sxs-lookup"><span data-stu-id="8623c-114">Changing the key after an upgrade minimizes additional service interruption caused by changing the Reporting Services encryption key outside of the upgrade cycle.</span></span>  
  
 <span data-ttu-id="8623c-115">如果您更新了報表伺服器服務的使用者帳戶 (並且使用 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] 組態管理員以外的工具來變更帳戶)，或者如果您將報表伺服器安裝移轉至新的伺服器，就必須還原對稱金鑰。</span><span class="sxs-lookup"><span data-stu-id="8623c-115">Restoring the symmetric key is necessary if you updated the user account of the Report Server service (and you used a tool other than the [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] Configuration Manager to change the account), or if you are migrating a report server installation to a new server.</span></span>  
  
 <span data-ttu-id="8623c-116">為了保護對稱金鑰不受未經授權的存取，將會使用報表伺服器服務的私密金鑰來加密對稱金鑰。</span><span class="sxs-lookup"><span data-stu-id="8623c-116">To protect the symmetric key from unauthorized access, the symmetric key is encrypted using the private key of the Report Server service.</span></span> <span data-ttu-id="8623c-117">只有報表伺服器服務能夠解除鎖定並使用對稱金鑰，以便在報表伺服器資料庫中儲存敏感性資料。</span><span class="sxs-lookup"><span data-stu-id="8623c-117">Only the Report Server service is able to unlock and use the symmetric key to store sensitive data in the report server database.</span></span> <span data-ttu-id="8623c-118">如果您變更報表伺服器服務的識別或者將報表伺服器移轉至新電腦，報表伺服器服務的私密金鑰就無法再解除對稱金鑰的鎖定。</span><span class="sxs-lookup"><span data-stu-id="8623c-118">If you change the identity of the Report Server service, or if you migrate the report server to a new computer, the private key of the Report Server service will no longer be able to unlock the symmetric key.</span></span> <span data-ttu-id="8623c-119">若要還原對稱金鑰的存取，請使用新報表伺服器服務識別的私密金鑰來重新加密對稱金鑰。</span><span class="sxs-lookup"><span data-stu-id="8623c-119">To restore access to the symmetric key, re-encrypt the symmetric key using the private key of the new Report Server service identity.</span></span> <span data-ttu-id="8623c-120">重新加密可藉由還原對稱金鑰這個處理序而進行。</span><span class="sxs-lookup"><span data-stu-id="8623c-120">Restoring the symmetric key is the process by which the re-encryption occurs.</span></span>  
  
 <span data-ttu-id="8623c-121">只有在對稱金鑰與目前用來在報表伺服器資料庫中加密和解密資料的金鑰相同時，才應還原對稱金鑰。</span><span class="sxs-lookup"><span data-stu-id="8623c-121">Only restore a symmetric key if it is the same key that is currently used to encrypt and decrypt data in the report server database.</span></span> <span data-ttu-id="8623c-122">如果還原的對稱金鑰無效，您就無法再存取敏感性資料。</span><span class="sxs-lookup"><span data-stu-id="8623c-122">If you restore a symmetric key that is not valid, you can no longer access sensitive data.</span></span> <span data-ttu-id="8623c-123">在這種情況下，請先刪除金鑰，然後再重新建立。</span><span class="sxs-lookup"><span data-stu-id="8623c-123">In this case, delete and re-create the key.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="8623c-124">刪除和重新建立對稱金鑰的動作無法反轉或恢復。</span><span class="sxs-lookup"><span data-stu-id="8623c-124">The action of deleting and recreating the symmetric key cannot be reversed or undone.</span></span> <span data-ttu-id="8623c-125">刪除或重新建立金鑰可能會對您目前的安裝造成重大的影響。</span><span class="sxs-lookup"><span data-stu-id="8623c-125">Deleting or recreating the key can have important ramifications on your current installation.</span></span> <span data-ttu-id="8623c-126">如果您刪除金鑰，將會一併刪除對稱金鑰所加密的任何現有資料。</span><span class="sxs-lookup"><span data-stu-id="8623c-126">If you delete the key, any existing data encrypted by the symmetric key will also deleted.</span></span> <span data-ttu-id="8623c-127">刪除的資料包括外部報表資料來源的連接字串、預存連接字串和一些訂閱資訊。</span><span class="sxs-lookup"><span data-stu-id="8623c-127">Deleted data includes connection strings to external report data sources, stored connection strings, and some subscription information.</span></span>  
  
 <span data-ttu-id="8623c-128">若要開啟此頁面，請啟動 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] 組態管理員，並在導覽窗格中選取此連結。</span><span class="sxs-lookup"><span data-stu-id="8623c-128">To open this page, start the [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] Configuration Manager and select the link in the navigation pane.</span></span> <span data-ttu-id="8623c-129">如需詳細資訊，請參閱 [Reporting Services 組態管理員 &#40;原生模式&#41;](../../../2014/sql-server/install/reporting-services-configuration-manager-native-mode.md)。</span><span class="sxs-lookup"><span data-stu-id="8623c-129">For more information, see [Reporting Services Configuration Manager &#40;Native Mode&#41;](../../../2014/sql-server/install/reporting-services-configuration-manager-native-mode.md).</span></span>  
  
## <a name="options"></a><span data-ttu-id="8623c-130">選項</span><span class="sxs-lookup"><span data-stu-id="8623c-130">Options</span></span>  
 <span data-ttu-id="8623c-131">**Backup**</span><span class="sxs-lookup"><span data-stu-id="8623c-131">**Backup**</span></span>  
 <span data-ttu-id="8623c-132">將對稱金鑰複製到您指定的檔案。</span><span class="sxs-lookup"><span data-stu-id="8623c-132">Copies the symmetric key to a file that you specify.</span></span> <span data-ttu-id="8623c-133">對稱金鑰絕不會以純文字的方式儲存。</span><span class="sxs-lookup"><span data-stu-id="8623c-133">The symmetric key is never stored in plain text.</span></span> <span data-ttu-id="8623c-134">您必須輸入密碼來保護該檔案。</span><span class="sxs-lookup"><span data-stu-id="8623c-134">You must type a password to protect the file.</span></span>  
  
 <span data-ttu-id="8623c-135">**還原**</span><span class="sxs-lookup"><span data-stu-id="8623c-135">**Restore**</span></span>  
 <span data-ttu-id="8623c-136">將對稱金鑰先前儲存的副本套用到報表伺服器資料庫。</span><span class="sxs-lookup"><span data-stu-id="8623c-136">Applies a previously saved copy of the symmetric key to the report server database.</span></span> <span data-ttu-id="8623c-137">您必須提供密碼來解除鎖定該檔案。</span><span class="sxs-lookup"><span data-stu-id="8623c-137">You must provide the password to unlock the file.</span></span>  
  
 <span data-ttu-id="8623c-138">您目前連接到報表伺服器執行個體之對稱金鑰的先前副本，已用還原的版本加以覆寫。</span><span class="sxs-lookup"><span data-stu-id="8623c-138">The previous copy of the symmetric key for the report server instance you are currently connected to is overwritten by the restored version.</span></span> <span data-ttu-id="8623c-139">還原對稱金鑰之後，您必須初始化使用報表伺服器資料庫的所有報表伺服器。</span><span class="sxs-lookup"><span data-stu-id="8623c-139">After you restore the symmetric key, you must initialize all the report servers that use the report server database.</span></span> <span data-ttu-id="8623c-140">如需初始化報表伺服器的詳細資訊，請參閱[&#40;SSRS Configuration Manager&#41;初始化報表伺服器](../../reporting-services/install-windows/ssrs-encryption-keys-initialize-a-report-server.md)。</span><span class="sxs-lookup"><span data-stu-id="8623c-140">For more information about initializing report servers, see [Initialize a Report Server &#40;SSRS Configuration Manager&#41;](../../reporting-services/install-windows/ssrs-encryption-keys-initialize-a-report-server.md).</span></span>  
  
 <span data-ttu-id="8623c-141">**變更**</span><span class="sxs-lookup"><span data-stu-id="8623c-141">**Change**</span></span>  
 <span data-ttu-id="8623c-142">重新建立對稱金鑰，並重新加密報表伺服器資料庫中的所有加密值。</span><span class="sxs-lookup"><span data-stu-id="8623c-142">Recreates the symmetric key and re-encrypts all encrypted values in the report server database.</span></span> <span data-ttu-id="8623c-143">請務必在重新建立對稱金鑰之前，先停止報表伺服器服務。</span><span class="sxs-lookup"><span data-stu-id="8623c-143">Be sure to stop the Report Server service before recreating the symmetric key.</span></span>  
  
 <span data-ttu-id="8623c-144">在向外延展部署中，對稱金鑰的所有副本都已用較新的版本取代。</span><span class="sxs-lookup"><span data-stu-id="8623c-144">In a scale-out deployment, all copies of the symmetric key are replaced with newer versions.</span></span> <span data-ttu-id="8623c-145">變更對稱金鑰之前，請確定要檢閱已聯結至向外延展部署之伺服器的清單，來確認唯有有效的報表伺服器執行個體，才能夠存取新的金鑰。</span><span class="sxs-lookup"><span data-stu-id="8623c-145">Before changing the symmetric key, be sure to review the list of servers that are joined to the scale-out deployment to verify that only valid report server instances are given access to the new key.</span></span> <span data-ttu-id="8623c-146">成為向外延展部署之一部分的伺服器會列在 **[向外延展部署]** 頁面中。</span><span class="sxs-lookup"><span data-stu-id="8623c-146">The servers that are part of a scale-out deployment are listed in the **Scale-out Deployment** page.</span></span> <span data-ttu-id="8623c-147">重新建立金鑰之前，請先停止部署中每一部報表伺服器上的服務。</span><span class="sxs-lookup"><span data-stu-id="8623c-147">Stop the service on each report server in the deployment before recreating the key.</span></span>  
  
 <span data-ttu-id="8623c-148">請注意，如果您有許多資料來源和訂閱，重新產生對稱金鑰可能是一個長時間執行的處理序。</span><span class="sxs-lookup"><span data-stu-id="8623c-148">Note that regenerating the symmetric key can be a long-running process if you have many data sources and subscriptions.</span></span>  
  
 <span data-ttu-id="8623c-149">**刪除**</span><span class="sxs-lookup"><span data-stu-id="8623c-149">**Delete**</span></span>  
 <span data-ttu-id="8623c-150">刪除對稱金鑰和所有加密的內容，其中包含連接字串和預存認證。</span><span class="sxs-lookup"><span data-stu-id="8623c-150">Deletes the symmetric key and all encrypted content, including connection strings and stored credentials.</span></span> <span data-ttu-id="8623c-151">如果您無法還原對稱金鑰，就應只刪除該金鑰。</span><span class="sxs-lookup"><span data-stu-id="8623c-151">You should only delete the symmetric key if you cannot restore it.</span></span>  
  
 <span data-ttu-id="8623c-152">刪除對稱金鑰之後，您必須重新輸入遺漏的連接字串和報表中的預存認證，以及不再具有這些值的共用資料來源。</span><span class="sxs-lookup"><span data-stu-id="8623c-152">Once you delete the symmetric key, you must re-enter the missing connection strings and stored credentials in the reports and shared data sources that no longer have these values.</span></span> <span data-ttu-id="8623c-153">您也必須更新使用儲存加密資料之傳遞延伸模組的所有訂閱。</span><span class="sxs-lookup"><span data-stu-id="8623c-153">You must also update all subscriptions that use delivery extensions that store encrypted data.</span></span> <span data-ttu-id="8623c-154">其中包含檔案共用傳遞延伸模組，以及使用加密值的任何協力廠商傳遞延伸模組。</span><span class="sxs-lookup"><span data-stu-id="8623c-154">This includes the file share delivery extension and any third-party delivery extension that use encrypted value.</span></span>  
  
 <span data-ttu-id="8623c-155">沒有自動的方式能更新此資訊。</span><span class="sxs-lookup"><span data-stu-id="8623c-155">There is no automated way to update this information.</span></span> <span data-ttu-id="8623c-156">使用預存認證和連接字串的每個報表、訂閱以及共用資料來源，都必須一次更新一個。</span><span class="sxs-lookup"><span data-stu-id="8623c-156">Each report, subscription, and shared data source that uses stored credentials and connection strings must be updated one at a time.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="8623c-157">另請參閱</span><span class="sxs-lookup"><span data-stu-id="8623c-157">See Also</span></span>  
 <span data-ttu-id="8623c-158">[Reporting Services 組態管理員 &#40;SSRS 原生模式的 F1 說明主題&#41;](../../../2014/sql-server/install/reporting-services-configuration-manager-f1-help-topics-ssrs-native-mode.md) </span><span class="sxs-lookup"><span data-stu-id="8623c-158">[Reporting Services Configuration Manager F1 Help Topics &#40;SSRS Native Mode&#41;](../../../2014/sql-server/install/reporting-services-configuration-manager-f1-help-topics-ssrs-native-mode.md) </span></span>  
 <span data-ttu-id="8623c-159">[備份與還原 Reporting Services 加密金鑰](../../reporting-services/install-windows/ssrs-encryption-keys-back-up-and-restore-encryption-keys.md) </span><span class="sxs-lookup"><span data-stu-id="8623c-159">[Back Up and Restore Reporting Services Encryption Keys](../../reporting-services/install-windows/ssrs-encryption-keys-back-up-and-restore-encryption-keys.md) </span></span>  
 <span data-ttu-id="8623c-160">[刪除和重新建立加密金鑰 &#40;SSRS 組態管理員&#41;](../../reporting-services/install-windows/ssrs-encryption-keys-delete-and-re-create-encryption-keys.md) </span><span class="sxs-lookup"><span data-stu-id="8623c-160">[Delete and Re-create Encryption Keys  &#40;SSRS Configuration Manager&#41;](../../reporting-services/install-windows/ssrs-encryption-keys-delete-and-re-create-encryption-keys.md) </span></span>  
 <span data-ttu-id="8623c-161">[將報表伺服器初始化 &#40;SSRS 組態管理員&#41;](../../reporting-services/install-windows/ssrs-encryption-keys-initialize-a-report-server.md) </span><span class="sxs-lookup"><span data-stu-id="8623c-161">[Initialize a Report Server &#40;SSRS Configuration Manager&#41;](../../reporting-services/install-windows/ssrs-encryption-keys-initialize-a-report-server.md) </span></span>  
 [<span data-ttu-id="8623c-162">儲存加密的報表伺服器資料 &#40;SSRS 組態管理員&#41;</span><span class="sxs-lookup"><span data-stu-id="8623c-162">Store Encrypted Report Server Data &#40;SSRS Configuration Manager&#41;</span></span>](../../reporting-services/install-windows/ssrs-encryption-keys-store-encrypted-report-server-data.md)  
  
  
