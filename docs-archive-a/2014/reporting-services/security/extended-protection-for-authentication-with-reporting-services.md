---
title: Reporting Services 的驗證擴充保護 | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: reporting-services-native
ms.topic: conceptual
ms.assetid: eb5c6f4a-3ed5-430b-a712-d5ed4b6b9b2b
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: 66a3cf551b70fa564da3fa47eec015a5bbca7e43
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87688502"
---
# <a name="extended-protection-for-authentication-with-reporting-services"></a><span data-ttu-id="9b318-102">含有 Reporting Services 的驗證擴充保護</span><span class="sxs-lookup"><span data-stu-id="9b318-102">Extended Protection for Authentication with Reporting Services</span></span>
  <span data-ttu-id="9b318-103">「擴充保護」是 [!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows 作業系統最新版本的一組增強功能。</span><span class="sxs-lookup"><span data-stu-id="9b318-103">Extended Protection is a set of enhancements to recent versions of the [!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows operating system.</span></span> <span data-ttu-id="9b318-104">擴充保護會增強認證與驗證受到應用程式保護的方式。</span><span class="sxs-lookup"><span data-stu-id="9b318-104">Extended protection enhances how credentials and authentication can be protected by applications.</span></span> <span data-ttu-id="9b318-105">此功能本身並不會針對認證轉送之類的特定攻擊直接提供保護，但是它會為 [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] 之類的應用程式提供基礎結構，以增強驗證擴充保護。</span><span class="sxs-lookup"><span data-stu-id="9b318-105">The feature itself does not directly provide protection against specific attacks such as credential forwarding, but it provides an infrastructure for applications such as [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] to enforce Extended Protection for Authentication.</span></span>

 <span data-ttu-id="9b318-106">屬於擴充保護一部分的主要驗證增強功能為服務繫結與通道繫結。</span><span class="sxs-lookup"><span data-stu-id="9b318-106">The main authentication enhancements that are part of extended protection are service binding and channel binding.</span></span> <span data-ttu-id="9b318-107">通道繫結使用通道繫結 Token (CBT) 驗證兩點端點之間建立的通道是否未受到危害。</span><span class="sxs-lookup"><span data-stu-id="9b318-107">Channel binding uses a channel binding token (CBT), to verify that the channel established between two end points was not compromised.</span></span> <span data-ttu-id="9b318-108">服務繫結使用服務主要名稱 (SPN) 驗證預期的驗證 Token 目的地。</span><span class="sxs-lookup"><span data-stu-id="9b318-108">Service binding uses Service Principal Names (SPN) to validate the intended destination of authentication tokens.</span></span> <span data-ttu-id="9b318-109">如需擴充保護的詳細背景資訊，請參閱 [Integrated Windows Authentication with Extended Protection](https://go.microsoft.com/fwlink/?LinkId=179922)(具有擴充保護的整合式 Windows 驗證)。</span><span class="sxs-lookup"><span data-stu-id="9b318-109">For more background information about extended protection, see [Integrated Windows Authentication with Extended Protection](https://go.microsoft.com/fwlink/?LinkId=179922).</span></span>

 [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)]<span data-ttu-id="9b318-110">[!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)]支援並強制執行已在作業系統中啟用，且在中設定的擴充保護 [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] 。</span><span class="sxs-lookup"><span data-stu-id="9b318-110">[!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] supports and enforces Extended Protection that has been enabled in the operating system and configured in [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)].</span></span> <span data-ttu-id="9b318-111">依預設， [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] 會接受指定交涉或 NTLM 驗證的要求，因此可以在作業系統與 [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] 擴充保護功能中獲得擴充保護支援。</span><span class="sxs-lookup"><span data-stu-id="9b318-111">By default, [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] accepts requests that specify Negotiate or NTLM authentication and could therefore benefit from Extended Protection support in the operating system and the [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] extended protection features.</span></span>

> [!IMPORTANT]
>  <span data-ttu-id="9b318-112">Windows 預設不會啟用 [擴充保護]。</span><span class="sxs-lookup"><span data-stu-id="9b318-112">By default, Windows does not enable Extended Protection.</span></span> <span data-ttu-id="9b318-113">如需如何在 Windows 中啟用 [擴充保護] 的資訊，請參閱 [驗證延伸保護](https://go.microsoft.com/fwlink/?LinkID=178431)。</span><span class="sxs-lookup"><span data-stu-id="9b318-113">For information about how to enable Extended Protection in Windows, see [Extended Protection for Authentication](https://go.microsoft.com/fwlink/?LinkID=178431).</span></span> <span data-ttu-id="9b318-114">作業系統與用戶端驗證堆疊必須同時支援擴充保護，驗證才會成功。</span><span class="sxs-lookup"><span data-stu-id="9b318-114">Both the operating system and client authentication stack must support Extended Protection so that authentication succeeds.</span></span> <span data-ttu-id="9b318-115">對於舊版作業系統，您可能需要針對完整具備擴充保護的電腦安裝多個更新。</span><span class="sxs-lookup"><span data-stu-id="9b318-115">For older operating systems you may need to install more than one update for a complete, Extended Protection ready computer.</span></span> <span data-ttu-id="9b318-116">如需擴充保護之最近開發狀況的詳細資訊，請參閱 [擴充保護的更新資訊](https://go.microsoft.com/fwlink/?LinkId=183362)。</span><span class="sxs-lookup"><span data-stu-id="9b318-116">For information on recent developments with Extended Protection, see [updated information with Extended Protection](https://go.microsoft.com/fwlink/?LinkId=183362).</span></span>

## <a name="reporting-services-extended-protection-overview"></a><span data-ttu-id="9b318-117">Reporting Services 擴充保護概觀</span><span class="sxs-lookup"><span data-stu-id="9b318-117">Reporting Services Extended Protection Overview</span></span>
 [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)]<span data-ttu-id="9b318-118">[!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)]支援並強制執行已在作業系統中啟用的擴充保護。</span><span class="sxs-lookup"><span data-stu-id="9b318-118">[!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] supports and enforces extended protection that has been enabled in the operating system.</span></span> <span data-ttu-id="9b318-119">如果作業系統不支援擴充保護，或者尚未啟用作業系統中的功能， [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] 擴充保護功能將會無法驗證。</span><span class="sxs-lookup"><span data-stu-id="9b318-119">If the operating system does not support extended protection or the feature in the operating system has not been enabled, the [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] extended protection feature will fail authentication.</span></span> [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] <span data-ttu-id="9b318-120">擴充保護也需要 SSL 憑證。</span><span class="sxs-lookup"><span data-stu-id="9b318-120">Extended Protection also requires an SSL Certificate.</span></span> <span data-ttu-id="9b318-121">如需詳細資訊，請參閱 [在原生模式報表伺服器上設定 SSL 連接](configure-ssl-connections-on-a-native-mode-report-server.md)</span><span class="sxs-lookup"><span data-stu-id="9b318-121">For more information, see [Configure SSL Connections on a Native Mode Report Server](configure-ssl-connections-on-a-native-mode-report-server.md)</span></span>

> [!IMPORTANT]
>  <span data-ttu-id="9b318-122">[!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] 預設為不會啟用 [擴充保護]。</span><span class="sxs-lookup"><span data-stu-id="9b318-122">By default, [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] does not enable Extended Protection.</span></span> <span data-ttu-id="9b318-123">修改 `rsreportserver.config` 組態檔或使用 WMI API 更新組態檔，即可啟用該功能。</span><span class="sxs-lookup"><span data-stu-id="9b318-123">The feature can be enabled by modifying the `rsreportserver.config` configuration file or using WMI APIs to update the configuration file.</span></span> [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)]<span data-ttu-id="9b318-124">[!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] 未提供可修改或檢視擴充保護設定的使用者介面。</span><span class="sxs-lookup"><span data-stu-id="9b318-124">[!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] does not provide a user interface to modify or view extended protection settings.</span></span> <span data-ttu-id="9b318-125">如需詳細資訊，請參閱本主題中的 [組態設定](#ConfigurationSettings) 一節。</span><span class="sxs-lookup"><span data-stu-id="9b318-125">For more information, see the [configuration settings](#ConfigurationSettings) section in this topic.</span></span>

 <span data-ttu-id="9b318-126">因為擴充保護設定變更或進行之設定錯誤所造成的常見問題，不會以明顯的錯誤訊息或對話方塊視窗公開。</span><span class="sxs-lookup"><span data-stu-id="9b318-126">Common issues that occur because of changes in extended protection settings or incorrectly configured settings are not be exposed with obvious error messages or dialog windows.</span></span> <span data-ttu-id="9b318-127">與擴充保護組態和相容性相關的問題會導致驗證失敗，並將錯誤記錄在 [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] 追蹤記錄中。</span><span class="sxs-lookup"><span data-stu-id="9b318-127">Issues related to extended protection configuration and compatibility result in authentication failures and errors in the [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] trace logs.</span></span>

> [!IMPORTANT]
>  <span data-ttu-id="9b318-128">某些資料存取技術可能不支援擴充保護。</span><span class="sxs-lookup"><span data-stu-id="9b318-128">Some data access technologies may not support extended protection.</span></span> <span data-ttu-id="9b318-129">資料存取技術可用於連接 SQL Server 資料來源與 [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] 目錄資料庫。</span><span class="sxs-lookup"><span data-stu-id="9b318-129">A data access technology is used to connect to SQL Server data sources and to the [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] catalog database.</span></span> <span data-ttu-id="9b318-130">無法支援擴充保護的資料存取技術會以下列方式對 [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] 造成影響：</span><span class="sxs-lookup"><span data-stu-id="9b318-130">Failure of a data access technology to support extended protection impacts [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] in the following ways:</span></span>
> 
>  -   <span data-ttu-id="9b318-131">執行 [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] 目錄資料庫的 SQL Server 無法啟用擴充功能，否則報表伺服器將無法成功連接至目錄資料庫，並傳回驗證錯誤。</span><span class="sxs-lookup"><span data-stu-id="9b318-131">The SQL Server that runs the [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] catalog database cannot have extended protection enabled or the report server will not successfully connect to the catalog database and return authentication errors.</span></span>
> -   <span data-ttu-id="9b318-132">當作 [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] 報表資料來源使用的 SQL Servers 無法啟用擴充保護，否則報表伺服器為連接報表資料來源所做的嘗試將會失敗，並傳回驗證錯誤。</span><span class="sxs-lookup"><span data-stu-id="9b318-132">SQL Servers that are used as [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] report data sources cannot have extended protection enabled or tries by the report server to connect to the report data source will fail and return authentication errors.</span></span>
> 
>  <span data-ttu-id="9b318-133">資料存取技術的文件應具有支援擴充保護的資訊。</span><span class="sxs-lookup"><span data-stu-id="9b318-133">The documentation for a data access technology should have information about support for extended protection.</span></span>

### <a name="upgrade"></a><span data-ttu-id="9b318-134">升級</span><span class="sxs-lookup"><span data-stu-id="9b318-134">Upgrade</span></span>

-   <span data-ttu-id="9b318-135">將 [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] 伺服器升級至 [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] 時，會將具有預設值的組態設定加入至 `rsreportserver.config` 檔。</span><span class="sxs-lookup"><span data-stu-id="9b318-135">Upgrading a [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] server to [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] adds configuration settings with default values to the `rsreportserver.config` file.</span></span> <span data-ttu-id="9b318-136">如果設定已經存在， [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] 安裝會將它們保留在檔案中 `rsreportserver.config` 。</span><span class="sxs-lookup"><span data-stu-id="9b318-136">If the settings were already present, the [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] installation will preserve them in the `rsreportserver.config` file.</span></span>

-   <span data-ttu-id="9b318-137">將設定新增至 `rsreportserver.config` 設定檔時，預設行為是讓 [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] 擴充保護功能關閉，而且您必須啟用此功能，如本主題中所述。</span><span class="sxs-lookup"><span data-stu-id="9b318-137">When the configuration settings are added to the `rsreportserver.config` configuration file, the default behavior is for the [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] extended protection feature to be off and you must enable the feature as described in this topic.</span></span> <span data-ttu-id="9b318-138">如需詳細資訊，請參閱本主題中的 [組態設定](#ConfigurationSettings) 一節。</span><span class="sxs-lookup"><span data-stu-id="9b318-138">For more information, see the [configuration settings](#ConfigurationSettings) section in this topic.</span></span>

-   <span data-ttu-id="9b318-139">`RSWindowsExtendedProtectionLevel` 設定的預設值為 `Off`。</span><span class="sxs-lookup"><span data-stu-id="9b318-139">The default value for the setting `RSWindowsExtendedProtectionLevel` is `Off`.</span></span>

-   <span data-ttu-id="9b318-140">`RSWindowsExtendedProtectionScenario` 設定的預設值為 `Proxy`。</span><span class="sxs-lookup"><span data-stu-id="9b318-140">The default value for the setting `RSWindowsExtendedProtectionScenario` is `Proxy`.</span></span>

-   [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] <span data-ttu-id="9b318-141">Upgrade Advisor 不會驗證作業系統或目前安裝的 [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] 是否已啟用擴充保護支援。</span><span class="sxs-lookup"><span data-stu-id="9b318-141">Upgrade Advisor does not verify that the operating system or the current installation of [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] has Extended Protection support enabled.</span></span>

### <a name="what-reporting-services-extended-protection-does-not-cover"></a><span data-ttu-id="9b318-142">Reporting Services 擴充保護不涵蓋的功能</span><span class="sxs-lookup"><span data-stu-id="9b318-142">What Reporting Services extended protection does not cover</span></span>
 <span data-ttu-id="9b318-143">[!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] 擴充保護功能不支援下列功能區與案例：</span><span class="sxs-lookup"><span data-stu-id="9b318-143">The following feature areas and scenarios are not supported by the [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] extended protection feature:</span></span>

-   <span data-ttu-id="9b318-144">[!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] 自訂安全性延伸模組的作者必須將擴充保護的支援加入其自訂安全性延伸模組。</span><span class="sxs-lookup"><span data-stu-id="9b318-144">Authors of [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] custom security extensions must add support for extended protection to their custom security extension.</span></span>

-   <span data-ttu-id="9b318-145">[!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] 安裝所加入或使用的協力廠商元件必須由協力廠商更新，才能支援擴充保護。</span><span class="sxs-lookup"><span data-stu-id="9b318-145">Third-party components added to or used by a [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] installation must be updated by the third-party vendor, to support extended protection.</span></span> <span data-ttu-id="9b318-146">如需詳細資訊，請連絡協力廠商。</span><span class="sxs-lookup"><span data-stu-id="9b318-146">For more information, contact the third-party vendor.</span></span>

## <a name="deployment-scenarios-and-recommendations"></a><span data-ttu-id="9b318-147">部署案例與建議</span><span class="sxs-lookup"><span data-stu-id="9b318-147">Deployment Scenarios and recommendations</span></span>
 <span data-ttu-id="9b318-148">下列案例說明不同的部署與拓撲，以及使用 [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] 擴充保護來保護其安全的建議組態。</span><span class="sxs-lookup"><span data-stu-id="9b318-148">The following scenarios illustrate different deployments and topologies and the recommended configuration to secure them with [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] Extended Protection.</span></span>

### <a name="direct"></a><span data-ttu-id="9b318-149">直接</span><span class="sxs-lookup"><span data-stu-id="9b318-149">Direct</span></span>
 <span data-ttu-id="9b318-150">此案例描述直接連接至報表伺服器，例如內部網路環境。</span><span class="sxs-lookup"><span data-stu-id="9b318-150">This scenario describes directly connecting to a report server, for example, an intranet environment.</span></span>

|<span data-ttu-id="9b318-151">狀況</span><span class="sxs-lookup"><span data-stu-id="9b318-151">Scenario</span></span>|<span data-ttu-id="9b318-152">案例圖表</span><span class="sxs-lookup"><span data-stu-id="9b318-152">Scenario Diagram</span></span>|<span data-ttu-id="9b318-153">如何保護安全</span><span class="sxs-lookup"><span data-stu-id="9b318-153">How to secure</span></span>|
|--------------|----------------------|-------------------|
|<span data-ttu-id="9b318-154">直接 SSL 通訊。</span><span class="sxs-lookup"><span data-stu-id="9b318-154">Direct SSL communication.</span></span><br /><br /> <span data-ttu-id="9b318-155">報表伺服器將會強制執行用戶端到報表伺服器的通道繫結。</span><span class="sxs-lookup"><span data-stu-id="9b318-155">The report server will enforce client to report server Channel Binding.</span></span>|<span data-ttu-id="9b318-156">![RS_ExtendedProtection_DirectSSL](../media/rs-extendedprotection-directssl.gif "RS_ExtendedProtection_DirectSSL")</span><span class="sxs-lookup"><span data-stu-id="9b318-156">![RS_ExtendedProtection_DirectSSL](../media/rs-extendedprotection-directssl.gif "RS_ExtendedProtection_DirectSSL")</span></span><br /><br /> <span data-ttu-id="9b318-157">1) 用戶端應用程式</span><span class="sxs-lookup"><span data-stu-id="9b318-157">1) Client application</span></span><br /><br /> <span data-ttu-id="9b318-158">2) 報表伺服器</span><span class="sxs-lookup"><span data-stu-id="9b318-158">2) Report server</span></span>|<span data-ttu-id="9b318-159">不需要服務繫結，因為 SSL 通道將用於通道繫結。</span><span class="sxs-lookup"><span data-stu-id="9b318-159">Service Binding is not necessary because the SSL channel will be used for Channel Binding.</span></span><br /><br /> <span data-ttu-id="9b318-160">將 `RSWindowsExtendedProtectionLevel` 設定為 `Allow` 或 `Require`。</span><span class="sxs-lookup"><span data-stu-id="9b318-160">Set `RSWindowsExtendedProtectionLevel` to `Allow` or `Require`.</span></span><br /><br /> <span data-ttu-id="9b318-161">將 `RSWindowsExtendedProtectionScenario` 設定為 `Direct`。</span><span class="sxs-lookup"><span data-stu-id="9b318-161">Set `RSWindowsExtendedProtectionScenario` to `Direct`.</span></span>|
|<span data-ttu-id="9b318-162">直接 HTTP 通訊。</span><span class="sxs-lookup"><span data-stu-id="9b318-162">Direct HTTP communication.</span></span> <span data-ttu-id="9b318-163">報表伺服器將會強制執行用戶端到報表伺服器的服務繫結。</span><span class="sxs-lookup"><span data-stu-id="9b318-163">The report server will enforce Client to report server Service Binding.</span></span>|<span data-ttu-id="9b318-164">![RS_ExtendedProtection_Direct](../media/rs-extendedprotection-direct.gif "RS_ExtendedProtection_Direct")</span><span class="sxs-lookup"><span data-stu-id="9b318-164">![RS_ExtendedProtection_Direct](../media/rs-extendedprotection-direct.gif "RS_ExtendedProtection_Direct")</span></span><br /><br /> <span data-ttu-id="9b318-165">1) 用戶端應用程式</span><span class="sxs-lookup"><span data-stu-id="9b318-165">1) Client application</span></span><br /><br /> <span data-ttu-id="9b318-166">2) 報表伺服器</span><span class="sxs-lookup"><span data-stu-id="9b318-166">2) Report server</span></span>|<span data-ttu-id="9b318-167">沒有 SSL 通道，因此無法強制執行通道繫結。</span><span class="sxs-lookup"><span data-stu-id="9b318-167">There is no SSL Channel therefore no enforcement of Channel Binding is possible.</span></span><br /><br /> <span data-ttu-id="9b318-168">服務繫結可以經過驗證，不過，如果沒有自己的通道繫結和服務繫結，它將只能防範基本威脅，而不是完整的防禦。</span><span class="sxs-lookup"><span data-stu-id="9b318-168">Service Binding can be validated, however, it is not a complete defense without Channel binding and Service Binding on its own will only protect from basic threats.</span></span><br /><br /> <span data-ttu-id="9b318-169">將 `RSWindowsExtendedProtectionLevel` 設定為 `Allow` 或 `Require`。</span><span class="sxs-lookup"><span data-stu-id="9b318-169">Set `RSWindowsExtendedProtectionLevel` to `Allow` or `Require`.</span></span><br /><br /> <span data-ttu-id="9b318-170">將 `RSWindowsExtendedProtectionScenario` 設定為 `Any`。</span><span class="sxs-lookup"><span data-stu-id="9b318-170">Set `RSWindowsExtendedProtectionScenario` to `Any`.</span></span>|

### <a name="proxy-and-network-load-balancing"></a><span data-ttu-id="9b318-171">Proxy 與網路負載平衡</span><span class="sxs-lookup"><span data-stu-id="9b318-171">Proxy and Network Load Balancing</span></span>
 <span data-ttu-id="9b318-172">用戶端應用程式所連接的裝置或軟體會執行 SSL 並通過伺服器的認證以進行驗證，例如外部網路、網際網路或安全的內部網路。</span><span class="sxs-lookup"><span data-stu-id="9b318-172">Client applications connect to a device or software that performs SSL and passes through the credentials to the server for authentication, for example, an extranet, Internet, or Secure Intranet.</span></span> <span data-ttu-id="9b318-173">用戶端連接至 Proxy 或所有用戶端都使用 Proxy。</span><span class="sxs-lookup"><span data-stu-id="9b318-173">The client connects to a Proxy or all clients use a proxy.</span></span>

 <span data-ttu-id="9b318-174">這個情況與您使用網路負載平衡 (NLB) 裝置相同。</span><span class="sxs-lookup"><span data-stu-id="9b318-174">The situation is the same when you are using a Network Load Balancing (NLB) device.</span></span>

|<span data-ttu-id="9b318-175">狀況</span><span class="sxs-lookup"><span data-stu-id="9b318-175">Scenario</span></span>|<span data-ttu-id="9b318-176">案例圖表</span><span class="sxs-lookup"><span data-stu-id="9b318-176">Scenario Diagram</span></span>|<span data-ttu-id="9b318-177">如何保護安全</span><span class="sxs-lookup"><span data-stu-id="9b318-177">How to secure</span></span>|
|--------------|----------------------|-------------------|
|<span data-ttu-id="9b318-178">HTTP 通訊。</span><span class="sxs-lookup"><span data-stu-id="9b318-178">HTTP communication.</span></span> <span data-ttu-id="9b318-179">報表伺服器將會強制執行用戶端到報表伺服器的服務繫結。</span><span class="sxs-lookup"><span data-stu-id="9b318-179">The report server will enforce client to report server Service Binding.</span></span>|<span data-ttu-id="9b318-180">![RS_ExtendedProtection_Indirect](../media/rs-extendedprotection-indirect.gif "RS_ExtendedProtection_Indirect")</span><span class="sxs-lookup"><span data-stu-id="9b318-180">![RS_ExtendedProtection_Indirect](../media/rs-extendedprotection-indirect.gif "RS_ExtendedProtection_Indirect")</span></span><br /><br /> <span data-ttu-id="9b318-181">1) 用戶端應用程式</span><span class="sxs-lookup"><span data-stu-id="9b318-181">1) Client application</span></span><br /><br /> <span data-ttu-id="9b318-182">2) 報表伺服器</span><span class="sxs-lookup"><span data-stu-id="9b318-182">2) Report server</span></span><br /><br /> <span data-ttu-id="9b318-183">3) Proxy</span><span class="sxs-lookup"><span data-stu-id="9b318-183">3) Proxy</span></span>|<span data-ttu-id="9b318-184">沒有 SSL 通道，因此無法強制執行通道繫結。</span><span class="sxs-lookup"><span data-stu-id="9b318-184">There is no SSL Channel therefore no enforcement of Channel Binding is possible.</span></span><br /><br /> <span data-ttu-id="9b318-185">將 `RSWindowsExtendedProtectionLevel` 設定為 `Allow` 或 `Require`。</span><span class="sxs-lookup"><span data-stu-id="9b318-185">Set `RSWindowsExtendedProtectionLevel` to `Allow` or `Require`.</span></span><br /><br /> <span data-ttu-id="9b318-186">將 `RSWindowsExtendedProtectionScenario` 設定為 `Any`。</span><span class="sxs-lookup"><span data-stu-id="9b318-186">Set `RSWindowsExtendedProtectionScenario` to `Any`.</span></span><br /><br /> <span data-ttu-id="9b318-187">請注意，您必須將報表伺服器設定為知道 proxy 伺服器的名稱，以確保正確地強制執行服務系結。</span><span class="sxs-lookup"><span data-stu-id="9b318-187">Note that the report server must be configured to know the name of the proxy server to make sure that the service binding is correctly enforced.</span></span>|
|<span data-ttu-id="9b318-188">HTTP 通訊。</span><span class="sxs-lookup"><span data-stu-id="9b318-188">HTTP communication.</span></span><br /><br /> <span data-ttu-id="9b318-189">報表伺服器將會強制執行用戶端到 Proxy 的通道繫結與用戶端到報表伺服器的服務繫結。</span><span class="sxs-lookup"><span data-stu-id="9b318-189">The report server will enforce client to Proxy Channel Binding and client to report server Service Binding.</span></span>|<span data-ttu-id="9b318-190">![RS_ExtendedProtection_Indirect_SSL](../media/rs-extendedprotection-indirect-ssl.gif "RS_ExtendedProtection_Indirect_SSL")</span><span class="sxs-lookup"><span data-stu-id="9b318-190">![RS_ExtendedProtection_Indirect_SSL](../media/rs-extendedprotection-indirect-ssl.gif "RS_ExtendedProtection_Indirect_SSL")</span></span><br /><br /> <span data-ttu-id="9b318-191">1) 用戶端應用程式</span><span class="sxs-lookup"><span data-stu-id="9b318-191">1) Client application</span></span><br /><br /> <span data-ttu-id="9b318-192">2) 報表伺服器</span><span class="sxs-lookup"><span data-stu-id="9b318-192">2) Report server</span></span><br /><br /> <span data-ttu-id="9b318-193">3) Proxy</span><span class="sxs-lookup"><span data-stu-id="9b318-193">3) Proxy</span></span>|<span data-ttu-id="9b318-194">SSL 通道到 Proxy 的連線可以使用，因此可以強制執行 Proxy 的通道繫結。</span><span class="sxs-lookup"><span data-stu-id="9b318-194">SSL channel to proxy is available therefore channel binding to the proxy can be enforced.</span></span><br /><br /> <span data-ttu-id="9b318-195">也可以強制執行服務繫結。</span><span class="sxs-lookup"><span data-stu-id="9b318-195">Service Binding can also be enforced.</span></span><br /><br /> <span data-ttu-id="9b318-196">報表伺服器必須知道 Proxy 名稱，而且報表伺服器管理員應該為該 Proxy 建立一個包含主機標頭的保留 URL，或在 Windows 登錄項目 `BackConnectionHostNames` 中設定 Proxy 名稱。</span><span class="sxs-lookup"><span data-stu-id="9b318-196">The Proxy name must be known to the report server and the report server administrator should either create a URL reservation for it, with a host header or configure the Proxy name in the Windows registry entry `BackConnectionHostNames`.</span></span><br /><br /> <span data-ttu-id="9b318-197">`RSWindowsExtendedProtectionLevel` 到 `Allow` 或 `Require`。</span><span class="sxs-lookup"><span data-stu-id="9b318-197">`RSWindowsExtendedProtectionLevel` to `Allow` or `Require`.</span></span><br /><br /> <span data-ttu-id="9b318-198">將 `RSWindowsExtendedProtectionScenario` 設定為 `Proxy`。</span><span class="sxs-lookup"><span data-stu-id="9b318-198">Set `RSWindowsExtendedProtectionScenario` to `Proxy`.</span></span>|
|<span data-ttu-id="9b318-199">透過安全 Proxy 進行的間接 HTTPS 通訊。</span><span class="sxs-lookup"><span data-stu-id="9b318-199">Indirect HTTPS communication with a secure proxy.</span></span> <span data-ttu-id="9b318-200">報表伺服器將會強制執行用戶端到 Proxy 的通道繫結與用戶端到報表伺服器的服務繫結。</span><span class="sxs-lookup"><span data-stu-id="9b318-200">Report server will enforce client to proxy Channel Binding and Client to report server Service Binding.</span></span>|<span data-ttu-id="9b318-201">![RS_ExtendedProtection_IndirectSSLandHTTPS](../media/rs-extendedprotection-indirectsslandhttps.gif "RS_ExtendedProtection_IndirectSSLandHTTPS")</span><span class="sxs-lookup"><span data-stu-id="9b318-201">![RS_ExtendedProtection_IndirectSSLandHTTPS](../media/rs-extendedprotection-indirectsslandhttps.gif "RS_ExtendedProtection_IndirectSSLandHTTPS")</span></span><br /><br /> <span data-ttu-id="9b318-202">1) 用戶端應用程式</span><span class="sxs-lookup"><span data-stu-id="9b318-202">1) Client application</span></span><br /><br /> <span data-ttu-id="9b318-203">2) 報表伺服器</span><span class="sxs-lookup"><span data-stu-id="9b318-203">2) Report server</span></span><br /><br /> <span data-ttu-id="9b318-204">3) Proxy</span><span class="sxs-lookup"><span data-stu-id="9b318-204">3) Proxy</span></span>|<span data-ttu-id="9b318-205">SSL 通道到 Proxy 的連線可以使用，因此可以強制執行 Proxy 的通道繫結。</span><span class="sxs-lookup"><span data-stu-id="9b318-205">SSL channel to proxy is available therefore channel binding to the proxy can be enforced.</span></span><br /><br /> <span data-ttu-id="9b318-206">也可以強制執行服務繫結。</span><span class="sxs-lookup"><span data-stu-id="9b318-206">Service Binding can also be enforced.</span></span><br /><br /> <span data-ttu-id="9b318-207">報表伺服器必須知道 Proxy 名稱，而且報表伺服器管理員應該為該 Proxy 建立一個包含主機標頭的保留 URL，或在 Windows 登錄項目 `BackConnectionHostNames` 中設定 Proxy 名稱。</span><span class="sxs-lookup"><span data-stu-id="9b318-207">The Proxy name must be known to the report server and the report server administrator should either create a URL reservation for it, with a host header or configure the Proxy name in the Windows registry entry `BackConnectionHostNames`.</span></span><br /><br /> <span data-ttu-id="9b318-208">`RSWindowsExtendedProtectionLevel` 到 `Allow` 或 `Require`。</span><span class="sxs-lookup"><span data-stu-id="9b318-208">`RSWindowsExtendedProtectionLevel` to `Allow` or `Require`.</span></span><br /><br /> <span data-ttu-id="9b318-209">將 `RSWindowsExtendedProtectionScenario` 設定為 `Proxy`。</span><span class="sxs-lookup"><span data-stu-id="9b318-209">Set `RSWindowsExtendedProtectionScenario` to `Proxy`.</span></span>|

### <a name="gateway"></a><span data-ttu-id="9b318-210">閘道</span><span class="sxs-lookup"><span data-stu-id="9b318-210">Gateway</span></span>
 <span data-ttu-id="9b318-211">此案例描述連接至執行 SSL 並驗證使用者之裝置或軟體的用戶端應用程式。</span><span class="sxs-lookup"><span data-stu-id="9b318-211">This scenario describes Client applications connecting to a device or software that performs SSL and authenticates the user.</span></span> <span data-ttu-id="9b318-212">接著，裝置或軟體會模擬使用者內容或不同的使用者內容，之後才對報表伺服器發出要求。</span><span class="sxs-lookup"><span data-stu-id="9b318-212">Then the device or software impersonates the user context or a different user context before it makes a request to the report server.</span></span>

|<span data-ttu-id="9b318-213">狀況</span><span class="sxs-lookup"><span data-stu-id="9b318-213">Scenario</span></span>|<span data-ttu-id="9b318-214">案例圖表</span><span class="sxs-lookup"><span data-stu-id="9b318-214">Scenario Diagram</span></span>|<span data-ttu-id="9b318-215">如何保護安全</span><span class="sxs-lookup"><span data-stu-id="9b318-215">How to secure</span></span>|
|--------------|----------------------|-------------------|
|<span data-ttu-id="9b318-216">間接 HTTP 通訊。</span><span class="sxs-lookup"><span data-stu-id="9b318-216">Indirect HTTP communication.</span></span><br /><br /> <span data-ttu-id="9b318-217">閘道將會強制執行用戶端到閘道的通道繫結。</span><span class="sxs-lookup"><span data-stu-id="9b318-217">Gateway will enforce Client to Gateway channel binding.</span></span> <span data-ttu-id="9b318-218">此處有閘道到報表伺服器的服務繫結。</span><span class="sxs-lookup"><span data-stu-id="9b318-218">There is a Gateway to report server Service Binding.</span></span>|<span data-ttu-id="9b318-219">![RS_ExtendedProtection_Indirect_SSL](../media/rs-extendedprotection-indirect-ssl.gif "RS_ExtendedProtection_Indirect_SSL")</span><span class="sxs-lookup"><span data-stu-id="9b318-219">![RS_ExtendedProtection_Indirect_SSL](../media/rs-extendedprotection-indirect-ssl.gif "RS_ExtendedProtection_Indirect_SSL")</span></span><br /><br /> <span data-ttu-id="9b318-220">1) 用戶端應用程式</span><span class="sxs-lookup"><span data-stu-id="9b318-220">1) Client application</span></span><br /><br /> <span data-ttu-id="9b318-221">2) 報表伺服器</span><span class="sxs-lookup"><span data-stu-id="9b318-221">2) Report server</span></span><br /><br /> <span data-ttu-id="9b318-222">3) 閘道裝置</span><span class="sxs-lookup"><span data-stu-id="9b318-222">3) Gateway device</span></span>|<span data-ttu-id="9b318-223">從用戶端到報表伺服器沒有通道繫結，因為閘道會模擬內容，並因而建立新的 NTLM Token。</span><span class="sxs-lookup"><span data-stu-id="9b318-223">Channel Binding from client to report server is not possible because the gateway impersonates a context and therefore creates a new NTLM token.</span></span><br /><br /> <span data-ttu-id="9b318-224">從閘道到報表伺服器沒有 SSL，因此無法強制執行通道繫結。</span><span class="sxs-lookup"><span data-stu-id="9b318-224">There is no SSL from the Gateway to report server therefore channel binding cannot be enforced.</span></span><br /><br /> <span data-ttu-id="9b318-225">可以強制執行服務繫結。</span><span class="sxs-lookup"><span data-stu-id="9b318-225">Service Binding can be enforced.</span></span><br /><br /> <span data-ttu-id="9b318-226">將 `RSWindowsExtendedProtectionLevel` 設定為 `Allow` 或 `Require`。</span><span class="sxs-lookup"><span data-stu-id="9b318-226">Set `RSWindowsExtendedProtectionLevel` to `Allow` or `Require`.</span></span><br /><br /> <span data-ttu-id="9b318-227">將 `RSWindowsExtendedProtectionScenario` 設定為 `Any`。</span><span class="sxs-lookup"><span data-stu-id="9b318-227">Set `RSWindowsExtendedProtectionScenario` to `Any`.</span></span><br /><br /> <span data-ttu-id="9b318-228">系統管理員應該設定閘道裝置來強制執行通道繫結。</span><span class="sxs-lookup"><span data-stu-id="9b318-228">The Gateway device should be configured by your administrator to enforce channel binding.</span></span>|
|<span data-ttu-id="9b318-229">透過安全閘道進行的間接 HTTPS 通訊。</span><span class="sxs-lookup"><span data-stu-id="9b318-229">Indirect HTTPS communication with a Secure Gateway.</span></span> <span data-ttu-id="9b318-230">閘道將會強制執行用戶端到閘道的通道繫結，而且報表伺服器將會強制執行閘道到報表伺服器的通道繫結。</span><span class="sxs-lookup"><span data-stu-id="9b318-230">The Gateway will enforce Client to Gateway Channel Binding and the report server will enforce Gateway to report server Channel Binding.</span></span>|<span data-ttu-id="9b318-231">![RS_ExtendedProtection_IndirectSSLandHTTPS](../media/rs-extendedprotection-indirectsslandhttps.gif "RS_ExtendedProtection_IndirectSSLandHTTPS")</span><span class="sxs-lookup"><span data-stu-id="9b318-231">![RS_ExtendedProtection_IndirectSSLandHTTPS](../media/rs-extendedprotection-indirectsslandhttps.gif "RS_ExtendedProtection_IndirectSSLandHTTPS")</span></span><br /><br /> <span data-ttu-id="9b318-232">1) 用戶端應用程式</span><span class="sxs-lookup"><span data-stu-id="9b318-232">1) Client application</span></span><br /><br /> <span data-ttu-id="9b318-233">2) 報表伺服器</span><span class="sxs-lookup"><span data-stu-id="9b318-233">2) Report server</span></span><br /><br /> <span data-ttu-id="9b318-234">3) 閘道裝置</span><span class="sxs-lookup"><span data-stu-id="9b318-234">3) Gateway device</span></span>|<span data-ttu-id="9b318-235">從用戶端到報表伺服器沒有通道繫結，因為閘道會模擬內容，並因而建立新的 NTLM Token。</span><span class="sxs-lookup"><span data-stu-id="9b318-235">Channel Binding from client to report server is not possible because the gateway impersonates a context and therefore creates a new NTLM token.</span></span><br /><br /> <span data-ttu-id="9b318-236">從閘道到報表伺服器的 SSL 表示可以強制執行通道系結。</span><span class="sxs-lookup"><span data-stu-id="9b318-236">SSL from Gateway to the report server means channel binding can be enforced.</span></span><br /><br /> <span data-ttu-id="9b318-237">不需要服務繫結。</span><span class="sxs-lookup"><span data-stu-id="9b318-237">Service Binding is not required.</span></span><br /><br /> <span data-ttu-id="9b318-238">將 `RSWindowsExtendedProtectionLevel` 設定為 `Allow` 或 `Require`。</span><span class="sxs-lookup"><span data-stu-id="9b318-238">Set `RSWindowsExtendedProtectionLevel` to `Allow` or `Require`.</span></span><br /><br /> <span data-ttu-id="9b318-239">將 `RSWindowsExtendedProtectionScenario` 設定為 `Direct`。</span><span class="sxs-lookup"><span data-stu-id="9b318-239">Set `RSWindowsExtendedProtectionScenario` to `Direct`.</span></span><br /><br /> <span data-ttu-id="9b318-240">系統管理員應該設定閘道裝置來強制執行通道繫結。</span><span class="sxs-lookup"><span data-stu-id="9b318-240">The Gateway device should be configured by your administrator to enforce channel binding.</span></span>|

### <a name="combination"></a><span data-ttu-id="9b318-241">合併</span><span class="sxs-lookup"><span data-stu-id="9b318-241">Combination</span></span>
 <span data-ttu-id="9b318-242">此案例描述用戶端連接 Proxy 的外部網路或網際網路環境。</span><span class="sxs-lookup"><span data-stu-id="9b318-242">This scenario describes Extranet or Internet environments where the client connects a Proxy.</span></span> <span data-ttu-id="9b318-243">這是合併用戶端連接報表伺服器的內部網路環境。</span><span class="sxs-lookup"><span data-stu-id="9b318-243">This is in combination with an intranet environment where a client connects to report server.</span></span>

|<span data-ttu-id="9b318-244">狀況</span><span class="sxs-lookup"><span data-stu-id="9b318-244">Scenario</span></span>|<span data-ttu-id="9b318-245">案例圖表</span><span class="sxs-lookup"><span data-stu-id="9b318-245">Scenario Diagram</span></span>|<span data-ttu-id="9b318-246">如何保護安全</span><span class="sxs-lookup"><span data-stu-id="9b318-246">How to secure</span></span>|
|--------------|----------------------|-------------------|
|<span data-ttu-id="9b318-247">在用戶端到 Proxy 或用戶端到報表伺服器連線沒有 SSL 的情況下，從用戶端到報表伺服器服務的間接和直接存取。</span><span class="sxs-lookup"><span data-stu-id="9b318-247">Indirect and direct access from client to report server service without SSL on either of the client to proxy or client to report server connections.</span></span>|<span data-ttu-id="9b318-248">1) 用戶端應用程式</span><span class="sxs-lookup"><span data-stu-id="9b318-248">1) Client application</span></span><br /><br /> <span data-ttu-id="9b318-249">2) 報表伺服器</span><span class="sxs-lookup"><span data-stu-id="9b318-249">2) Report server</span></span><br /><br /> <span data-ttu-id="9b318-250">3) Proxy</span><span class="sxs-lookup"><span data-stu-id="9b318-250">3) Proxy</span></span><br /><br /> <span data-ttu-id="9b318-251">4) 用戶端應用程式</span><span class="sxs-lookup"><span data-stu-id="9b318-251">4) Client application</span></span>|<span data-ttu-id="9b318-252">可以強制執行從用戶端到報表伺服器的服務繫結。</span><span class="sxs-lookup"><span data-stu-id="9b318-252">Service Binding from client to report server can be enforced.</span></span><br /><br /> <span data-ttu-id="9b318-253">報表伺服器必須知道 Proxy 名稱，而且報表伺服器管理員應該為該 Proxy 建立一個包含主機標頭的保留 URL，或在 Windows 登錄項目 `BackConnectionHostNames` 中設定 Proxy 名稱。</span><span class="sxs-lookup"><span data-stu-id="9b318-253">The Proxy name must be known to the report server and the report server administrator should either create a URL reservation for it, with a host header or configure the Proxy name in the Windows registry entry `BackConnectionHostNames`.</span></span><br /><br /> <span data-ttu-id="9b318-254">將 `RSWindowsExtendedProtectionLevel` 設定為 `Allow` 或 `Require`。</span><span class="sxs-lookup"><span data-stu-id="9b318-254">Set `RSWindowsExtendedProtectionLevel` to `Allow` or `Require`.</span></span><br /><br /> <span data-ttu-id="9b318-255">將 `RSWindowsExtendedProtectionScenario` 設定為 `Any`。</span><span class="sxs-lookup"><span data-stu-id="9b318-255">Set `RSWindowsExtendedProtectionScenario` to `Any`.</span></span>|
|<span data-ttu-id="9b318-256">在用戶端建立與 Proxy 或報表伺服器的 SSL 連接時，從用戶端到報表伺服器服務的間接和直接存取。</span><span class="sxs-lookup"><span data-stu-id="9b318-256">Indirect and direct access from client to report server where the client establishes an SSL connection to the proxy or report server.</span></span>|<span data-ttu-id="9b318-257">![RS_ExtendedProtection_CombinationSSL](../media/rs-extendedprotection-combinationssl.gif "RS_ExtendedProtection_CombinationSSL")</span><span class="sxs-lookup"><span data-stu-id="9b318-257">![RS_ExtendedProtection_CombinationSSL](../media/rs-extendedprotection-combinationssl.gif "RS_ExtendedProtection_CombinationSSL")</span></span><br /><br /> <span data-ttu-id="9b318-258">1) 用戶端應用程式</span><span class="sxs-lookup"><span data-stu-id="9b318-258">1) Client application</span></span><br /><br /> <span data-ttu-id="9b318-259">2) 報表伺服器</span><span class="sxs-lookup"><span data-stu-id="9b318-259">2) Report server</span></span><br /><br /> <span data-ttu-id="9b318-260">3) Proxy</span><span class="sxs-lookup"><span data-stu-id="9b318-260">3) Proxy</span></span><br /><br /> <span data-ttu-id="9b318-261">4) 用戶端應用程式</span><span class="sxs-lookup"><span data-stu-id="9b318-261">4) Client application</span></span>|<span data-ttu-id="9b318-262">可以使用通道繫結。</span><span class="sxs-lookup"><span data-stu-id="9b318-262">Channel Binding can be used</span></span><br /><br /> <span data-ttu-id="9b318-263">報表伺服器必須知道 Proxy 名稱，而且報表伺服器管理員應該為該 Proxy 建立一個包含主機標頭的保留 URL，或在 Windows 登錄項目 `BackConnectionHostNames` 中設定 Proxy 名稱。</span><span class="sxs-lookup"><span data-stu-id="9b318-263">The Proxy name must be known to the report server and the report server administrator should either create a URL reservation for the proxy, with a host header or configure the Proxy name in the Windows registry entry `BackConnectionHostNames`.</span></span><br /><br /> <span data-ttu-id="9b318-264">將 `RSWindowsExtendedProtectionLevel` 設定為 `Allow` 或 `Require`。</span><span class="sxs-lookup"><span data-stu-id="9b318-264">Set `RSWindowsExtendedProtectionLevel` to `Allow` or `Require`.</span></span><br /><br /> <span data-ttu-id="9b318-265">將 `RSWindowsExtendedProtectionScenario` 設定為 `Proxy`。</span><span class="sxs-lookup"><span data-stu-id="9b318-265">Set `RSWindowsExtendedProtectionScenario` to `Proxy`.</span></span>|

## <a name="configuring-reporting-rervices-extended-protection"></a><span data-ttu-id="9b318-266">設定 Reporting Services 擴充保護</span><span class="sxs-lookup"><span data-stu-id="9b318-266">Configuring Reporting Rervices extended protection</span></span>
 <span data-ttu-id="9b318-267">檔案 `rsreportserver.config` 包含控制擴充保護行為的設定值 [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] 。</span><span class="sxs-lookup"><span data-stu-id="9b318-267">The `rsreportserver.config` file contains the configuration values that control the behavior of [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] extended protection.</span></span>

 <span data-ttu-id="9b318-268">如需使用和編輯檔案的詳細資訊 `rsreportserver.config` ，請參閱[Rsreportserver.config Configuration file](../report-server/rsreportserver-config-configuration-file.md)。</span><span class="sxs-lookup"><span data-stu-id="9b318-268">For more information on using and editing the `rsreportserver.config` file, see [RSReportServer Configuration File](../report-server/rsreportserver-config-configuration-file.md).</span></span> <span data-ttu-id="9b318-269">擴充保護設定也可以透過 WMI API 變更與檢查。</span><span class="sxs-lookup"><span data-stu-id="9b318-269">The extended protection settings can also be changed and inspected using WMI APIs.</span></span> <span data-ttu-id="9b318-270">如需詳細資訊，請參閱 [SetExtendedProtectionSettings 方法 &#40;WMI MSReportServer_ConfigurationSetting&#41;](../wmi-provider-library-reference/configurationsetting-method-setextendedprotectionsettings.md)(具有擴充保護的整合式 Windows 驗證)。</span><span class="sxs-lookup"><span data-stu-id="9b318-270">For more information, see [SetExtendedProtectionSettings Method &#40;WMI MSReportServer_ConfigurationSetting&#41;](../wmi-provider-library-reference/configurationsetting-method-setextendedprotectionsettings.md).</span></span>

 <span data-ttu-id="9b318-271">當組態設定的驗證失敗時，報表伺服器上會停用驗證類型 `RSWindowsNTLM`、`RSWindowsKerberos` 和 `RSWindowsNegotiate`。</span><span class="sxs-lookup"><span data-stu-id="9b318-271">When validation of the configuration settings fail, the authentication types `RSWindowsNTLM`, `RSWindowsKerberos` and `RSWindowsNegotiate` are disabled on the report server.</span></span>

###  <a name="configuration-settings-for-reporting-services-extended-protection"></a><a name="ConfigurationSettings"></a> <span data-ttu-id="9b318-272">Reporting Services 擴充保護的組態設定</span><span class="sxs-lookup"><span data-stu-id="9b318-272">Configuration Settings for reporting services extended protection</span></span>
 <span data-ttu-id="9b318-273">下表提供的資訊有關 `rsreportserver.config` 中顯示之擴充保護的組態設定。</span><span class="sxs-lookup"><span data-stu-id="9b318-273">The following table provides information about configuration settings that appear in the `rsreportserver.config` for extended protection.</span></span>

|<span data-ttu-id="9b318-274">設定</span><span class="sxs-lookup"><span data-stu-id="9b318-274">Setting</span></span>|<span data-ttu-id="9b318-275">描述</span><span class="sxs-lookup"><span data-stu-id="9b318-275">Description</span></span>|
|-------------|-----------------|
|`RSWindowsExtendedProtectionLevel`|<span data-ttu-id="9b318-276">指定擴充保護的強制執行程度。</span><span class="sxs-lookup"><span data-stu-id="9b318-276">Specifies the degree of enforcement of extended protection.</span></span> <span data-ttu-id="9b318-277">有效值是 `Off`、`Allow` 和 `Require`。</span><span class="sxs-lookup"><span data-stu-id="9b318-277">Valid values are `Off`, `Allow`, and `Require`.</span></span><br /><br /> <span data-ttu-id="9b318-278">預設值是 `Off`。</span><span class="sxs-lookup"><span data-stu-id="9b318-278">The default value is `Off`.</span></span><br /><br /> <span data-ttu-id="9b318-279">值為 `Off` 時，不會指定通道繫結或服務繫結驗證。</span><span class="sxs-lookup"><span data-stu-id="9b318-279">The value `Off` specifies no channel binding or service binding verification.</span></span><br /><br /> <span data-ttu-id="9b318-280">值為 `Allow` 時，則支援擴充保護但並不需要它。</span><span class="sxs-lookup"><span data-stu-id="9b318-280">The value `Allow` supports extended protection but does not require it.</span></span> <span data-ttu-id="9b318-281">Allow 這個值會指定：</span><span class="sxs-lookup"><span data-stu-id="9b318-281">The value Allow specifies:</span></span><br /><br /> <span data-ttu-id="9b318-282">擴充保護將會針對在支援擴充保護之作業系統上執行的用戶端應用程式強制執行。</span><span class="sxs-lookup"><span data-stu-id="9b318-282">Extended protection will be enforced for client applications that are running on operating systems that support extended protection.</span></span> <span data-ttu-id="9b318-283">您可以設定 `RsWindowsExtendedProtectionScenario` 來決定強制執行保護的方式。</span><span class="sxs-lookup"><span data-stu-id="9b318-283">How protection is enforced is determined by setting `RsWindowsExtendedProtectionScenario`.</span></span><br /><br /> <span data-ttu-id="9b318-284">對於在不支援擴充保護之作業系統上執行的應用程式，不允許執行驗證。</span><span class="sxs-lookup"><span data-stu-id="9b318-284">Authentication will be allowed for applications that are running on operating systems which do not support extended protection.</span></span><br /><br /> <span data-ttu-id="9b318-285"> 這個值會指定：</span><span class="sxs-lookup"><span data-stu-id="9b318-285">The value `Require` specifies:</span></span><br /><br /> <span data-ttu-id="9b318-286">擴充保護將會針對在支援擴充保護之作業系統上執行的用戶端應用程式強制執行。</span><span class="sxs-lookup"><span data-stu-id="9b318-286">Extended protection will be enforced for client applications that are running on operating systems that support extended protection.</span></span><br /><br /> <span data-ttu-id="9b318-287">對於在不支援擴充保護之作業系統上執行的應用程式，將**不**允許進行驗證。</span><span class="sxs-lookup"><span data-stu-id="9b318-287">Authentication will **not** be allowed for applications that are running on operating systems which do not support extended protection.</span></span>|
|`RsWindowsExtendedProtectionScenario`|<span data-ttu-id="9b318-288">指定要驗證的擴充保護形式：通道繫結、服務繫結或兩者。</span><span class="sxs-lookup"><span data-stu-id="9b318-288">Specifies what forms of extended protection are validated: Channel binding, Service Binding, or both.</span></span> <span data-ttu-id="9b318-289">有效值是 `Any`、`Proxy` 和 `Direct`。</span><span class="sxs-lookup"><span data-stu-id="9b318-289">Valid values are `Any`, `Proxy`, and `Direct`.</span></span><br /><br /> <span data-ttu-id="9b318-290">預設值是 `Proxy`。</span><span class="sxs-lookup"><span data-stu-id="9b318-290">The default value is `Proxy`.</span></span><br /><br /> <span data-ttu-id="9b318-291"> 這個值會指定：</span><span class="sxs-lookup"><span data-stu-id="9b318-291">The value `Any` specifies:</span></span><br /><br /> <span data-ttu-id="9b318-292">\- Windows NTLM、Kerberos 和交涉驗證，而不需要通道繫結。</span><span class="sxs-lookup"><span data-stu-id="9b318-292">-Windows NTLM, Kerberos, and Negotiate authentication and a channel binding are not required.</span></span><br /><br /> <span data-ttu-id="9b318-293">\- 服務繫結會強制執行。</span><span class="sxs-lookup"><span data-stu-id="9b318-293">-Service binding is enforced.</span></span><br /><br /> <span data-ttu-id="9b318-294"> 這個值會指定：</span><span class="sxs-lookup"><span data-stu-id="9b318-294">The value `Proxy` specifies:</span></span><br /><br /> <span data-ttu-id="9b318-295">\- Windows NTLM、Kerberos 和交涉驗證 (當通道繫結權杖存在時)。</span><span class="sxs-lookup"><span data-stu-id="9b318-295">-Windows NTLM, Kerberos, and Negotiate authentication when a channel binding token is present.</span></span><br /><br /> <span data-ttu-id="9b318-296">\- 服務繫結會強制執行。</span><span class="sxs-lookup"><span data-stu-id="9b318-296">-Service Binding is enforced.</span></span><br /><br /> <span data-ttu-id="9b318-297"> 這個值會指定：</span><span class="sxs-lookup"><span data-stu-id="9b318-297">The value `Direct` specifies:</span></span><br /><br /> <span data-ttu-id="9b318-298">- Windows NTLM、Kerberos 和交涉驗證 (當 CBT 存在、目前服務的 SSL 連線存在，而且 SSL 連線的 CBT 與 NTLM、Kerberos 或交涉權杖的 CBT 相符時)。</span><span class="sxs-lookup"><span data-stu-id="9b318-298">-Windows NTLM, Kerberos, and Negotiate authentication when a CBT is present, an SSL connection to the current service is present, and the CBT for the SSL connection matches the CBT of the NTLM, Kerberos or negotiate token.</span></span><br /><br /> <span data-ttu-id="9b318-299">\- 服務繫結不會強制執行。</span><span class="sxs-lookup"><span data-stu-id="9b318-299">-Service Binding is not enforced.</span></span><br /><br /> <br /><br /> <span data-ttu-id="9b318-300">注意：如果設定為，則會忽略此設定 `RsWindowsExtendedProtectionLevel` `OFF` 。</span><span class="sxs-lookup"><span data-stu-id="9b318-300">Note: This setting is ignored if `RsWindowsExtendedProtectionLevel` is set to `OFF`.</span></span>|

 <span data-ttu-id="9b318-301">`rsreportserver.config` 組態檔中的範例項目：</span><span class="sxs-lookup"><span data-stu-id="9b318-301">Example entries in the `rsreportserver.config` configuration file:</span></span>

```
<Authentication>
         <RSWindowsExtendedProtectionLevel>Allow</RSWindowsExtendedProtectionLevel>
         <RSWindowsExtendedProtectionScenario>Proxy</RSWindowsExtendedProtectionLevel>
</Authentication>
```

## <a name="service-binding-and-included-spns"></a><span data-ttu-id="9b318-302">服務繫結與隨附的 SPN</span><span class="sxs-lookup"><span data-stu-id="9b318-302">Service Binding and included SPNs</span></span>
 <span data-ttu-id="9b318-303">服務繫結使用服務主要名稱或 SPN 驗證預期的驗證 Token 目的地。</span><span class="sxs-lookup"><span data-stu-id="9b318-303">Service binding uses Service Principal Names or SPN to validate the intended destination of authentication tokens.</span></span> [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] <span data-ttu-id="9b318-304">使用現有的 URL 保留資訊建立視為有效之 SPN 的清單。</span><span class="sxs-lookup"><span data-stu-id="9b318-304">uses the existing URL reservation information to build a list of SPNs that are considered valid.</span></span> <span data-ttu-id="9b318-305">使用 URL 保留資訊同時驗證保留的 SPN 和 URL 可讓系統管理員從單一位置同時進行管理。</span><span class="sxs-lookup"><span data-stu-id="9b318-305">Using the URL reservation information for validation of both SPN and URL reservations enables system administrators to manage both from a single location.</span></span>

 <span data-ttu-id="9b318-306">當報表伺服器啟動時、擴充保護的組態設定變更時，或應用程式定義域循環使用時，會更新有效 SPN 的清單。</span><span class="sxs-lookup"><span data-stu-id="9b318-306">The list of valid SPNs is updated when the report server starts, the configuration settings for extended protection are changed, or when the application domain is recycled.</span></span>

 <span data-ttu-id="9b318-307">有效的 SPN 清單專屬於每個應用程式。</span><span class="sxs-lookup"><span data-stu-id="9b318-307">The valid list of SPNs is specific for each application.</span></span> <span data-ttu-id="9b318-308">例如，報表管理員和報表伺服器會各自計算一份不同的有效 SPN 清單。</span><span class="sxs-lookup"><span data-stu-id="9b318-308">For example, Report Manager and Report Server will each have a different list of valid SPNs calculated.</span></span>

 <span data-ttu-id="9b318-309">針對應用程式計算的有效 SPN 清單取決於下列因素：</span><span class="sxs-lookup"><span data-stu-id="9b318-309">The list of valid SPNs calculated for an application is determined by the following factors:</span></span>

-   <span data-ttu-id="9b318-310">每個保留的 URL。</span><span class="sxs-lookup"><span data-stu-id="9b318-310">Each URL reservation.</span></span>

-   <span data-ttu-id="9b318-311">從 Reporting Services 服務帳戶之網域控制站擷取的每個 SPN。</span><span class="sxs-lookup"><span data-stu-id="9b318-311">Each SPN retrieved from the domain controller for the reporting services service account.</span></span>

-   <span data-ttu-id="9b318-312">如果保留的 URL 包括萬用字元 ('\*' 或 '+')，則報表伺服器將會從主機集合加入每個項目。</span><span class="sxs-lookup"><span data-stu-id="9b318-312">If a URL reservation includes wildcard characters ('\*' or '+'), then Report Server will add each entry from the hosts collection.</span></span>

### <a name="hosts-collection-sources"></a><span data-ttu-id="9b318-313">主機集合來源。</span><span class="sxs-lookup"><span data-stu-id="9b318-313">Hosts collection sources.</span></span>
 <span data-ttu-id="9b318-314">下表列出主機集合的潛在來源。</span><span class="sxs-lookup"><span data-stu-id="9b318-314">The following table lists the potential sources for the Hosts collection.</span></span>

|<span data-ttu-id="9b318-315">來源類型</span><span class="sxs-lookup"><span data-stu-id="9b318-315">Type of source</span></span>|<span data-ttu-id="9b318-316">描述</span><span class="sxs-lookup"><span data-stu-id="9b318-316">Description</span></span>|
|--------------------|-----------------|
|<span data-ttu-id="9b318-317">ComputerNameDnsDomain</span><span class="sxs-lookup"><span data-stu-id="9b318-317">ComputerNameDnsDomain</span></span>|<span data-ttu-id="9b318-318">指派給本機電腦之 DNS 網域的名稱。</span><span class="sxs-lookup"><span data-stu-id="9b318-318">The name of the DNS domain assigned to the local computer.</span></span> <span data-ttu-id="9b318-319">如果本機電腦是叢集中的一個節點，則會使用叢集虛擬伺服器的 DNS 網域名稱。</span><span class="sxs-lookup"><span data-stu-id="9b318-319">If the local computer is a node in a cluster, the DNS domain name of the cluster virtual server is used.</span></span>|
|<span data-ttu-id="9b318-320">ComputerNameDnsFullyQualified</span><span class="sxs-lookup"><span data-stu-id="9b318-320">ComputerNameDnsFullyQualified</span></span>|<span data-ttu-id="9b318-321">唯一識別本機電腦的完整 DNS 名稱。</span><span class="sxs-lookup"><span data-stu-id="9b318-321">The fully qualified DNS name that uniquely identifies the local computer.</span></span> <span data-ttu-id="9b318-322">此名稱結合 DNS 主機名稱與 DNS 網域名稱，其格式為 *HostName*.*DomainName*。</span><span class="sxs-lookup"><span data-stu-id="9b318-322">This name is a combination of the DNS host name and the DNS domain name, using the form *HostName*.*DomainName*.</span></span> <span data-ttu-id="9b318-323">如果本機電腦是叢集中的一個節點，則會使用叢集虛擬伺服器的完整 DNS 名稱。</span><span class="sxs-lookup"><span data-stu-id="9b318-323">If the local computer is a node in a cluster, the fully qualified DNS name of the cluster virtual server is used.</span></span>|
|<span data-ttu-id="9b318-324">ComputerNameDnsHostname</span><span class="sxs-lookup"><span data-stu-id="9b318-324">ComputerNameDnsHostname</span></span>|<span data-ttu-id="9b318-325">本機電腦的 DNS 主機名稱。</span><span class="sxs-lookup"><span data-stu-id="9b318-325">The DNS host name of the local computer.</span></span> <span data-ttu-id="9b318-326">如果本機電腦是叢集中的一個節點，則會使用叢集虛擬伺服器的 DNS 主機名稱。</span><span class="sxs-lookup"><span data-stu-id="9b318-326">If the local computer is a node in a cluster, the DNS host name of the cluster virtual server is used.</span></span>|
|<span data-ttu-id="9b318-327">ComputerNameNetBIOS</span><span class="sxs-lookup"><span data-stu-id="9b318-327">ComputerNameNetBIOS</span></span>|<span data-ttu-id="9b318-328">本機電腦的 NetBIOS 名稱。</span><span class="sxs-lookup"><span data-stu-id="9b318-328">The NetBIOS name of the local computer.</span></span> <span data-ttu-id="9b318-329">如果本機電腦是叢集中的一個節點，則會使用叢集虛擬伺服器的 NetBIOS 名稱。</span><span class="sxs-lookup"><span data-stu-id="9b318-329">If the local computer is a node in a cluster, the NetBIOS name of the cluster virtual server is used.</span></span>|
|<span data-ttu-id="9b318-330">ComputerNamePhysicalDnsDomain</span><span class="sxs-lookup"><span data-stu-id="9b318-330">ComputerNamePhysicalDnsDomain</span></span>|<span data-ttu-id="9b318-331">指派給本機電腦之 DNS 網域的名稱。</span><span class="sxs-lookup"><span data-stu-id="9b318-331">The name of the DNS domain assigned to the local computer.</span></span> <span data-ttu-id="9b318-332">如果本機電腦是叢集中的一個節點，則會使用本機電腦的 DNS 網域名稱，而非叢集虛擬伺服器的名稱。</span><span class="sxs-lookup"><span data-stu-id="9b318-332">If the local computer is a node in a cluster, the DNS domain name of the local computer is used, not the name of the cluster virtual server.</span></span>|
|<span data-ttu-id="9b318-333">ComputerNamePhysicalDnsFullyQualified</span><span class="sxs-lookup"><span data-stu-id="9b318-333">ComputerNamePhysicalDnsFullyQualified</span></span>|<span data-ttu-id="9b318-334">唯一識別電腦的完整 DNS 名稱。</span><span class="sxs-lookup"><span data-stu-id="9b318-334">The fully qualified DNS name that uniquely identifies the computer.</span></span> <span data-ttu-id="9b318-335">如果本機電腦是叢集中的一個節點，則會使用本機電腦的完整 DNS 名稱，而非叢集虛擬伺服器的名稱。</span><span class="sxs-lookup"><span data-stu-id="9b318-335">If the local computer is a node in a cluster, the fully qualified DNS name of the local computer, is used not the name of the cluster virtual server.</span></span><br /><br /> <span data-ttu-id="9b318-336">完整的 DNS 名稱結合 DNS 主機名稱與 DNS 網域名稱，其格式為 *HostName*.*DomainName*。</span><span class="sxs-lookup"><span data-stu-id="9b318-336">The fully qualified DNS name is a combination of the DNS host name and the DNS domain name, using the form *HostName*.*DomainName*.</span></span>|
|<span data-ttu-id="9b318-337">ComputerNamePhysicalDnsHostname</span><span class="sxs-lookup"><span data-stu-id="9b318-337">ComputerNamePhysicalDnsHostname</span></span>|<span data-ttu-id="9b318-338">本機電腦的 DNS 主機名稱。</span><span class="sxs-lookup"><span data-stu-id="9b318-338">The DNS host name of the local computer.</span></span> <span data-ttu-id="9b318-339">如果本機電腦是叢集中的一個節點，則會使用本機電腦的 DNS 主機名稱，而非叢集虛擬伺服器的名稱。</span><span class="sxs-lookup"><span data-stu-id="9b318-339">If the local computer is a node in a cluster, the DNS host name of the local computer is used, not the name of the cluster virtual server.</span></span>|
|<span data-ttu-id="9b318-340">ComputerNamePhysicalNetBIOS</span><span class="sxs-lookup"><span data-stu-id="9b318-340">ComputerNamePhysicalNetBIOS</span></span>|<span data-ttu-id="9b318-341">本機電腦的 NetBIOS 名稱。</span><span class="sxs-lookup"><span data-stu-id="9b318-341">The NetBIOS name of the local computer.</span></span> <span data-ttu-id="9b318-342">如果本機電腦是叢集中的一個節點，則會使用本機電腦的 NetBIOS 名稱，而非叢集虛擬伺服器的名稱。</span><span class="sxs-lookup"><span data-stu-id="9b318-342">If the local computer is a node in a cluster, the NetBIOS name of the local computer, not the name of the cluster virtual server.</span></span>|

 <span data-ttu-id="9b318-343">如需詳細資訊，請參閱[為報表伺服器註冊服務主要名稱 &#40;SPN&#41;](../report-server/register-a-service-principal-name-spn-for-a-report-server.md) 和[關於 URL 保留項目和註冊 &#40;SSRS 組態管理員&#41;](../install-windows/about-url-reservations-and-registration-ssrs-configuration-manager.md)。</span><span class="sxs-lookup"><span data-stu-id="9b318-343">For more information, see [Register a Service Principal Name &#40;SPN&#41; for a Report Server](../report-server/register-a-service-principal-name-spn-for-a-report-server.md) and [About URL Reservations and Registration  &#40;SSRS Configuration Manager&#41;](../install-windows/about-url-reservations-and-registration-ssrs-configuration-manager.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="9b318-344">另請參閱</span><span class="sxs-lookup"><span data-stu-id="9b318-344">See Also</span></span>
 <span data-ttu-id="9b318-345">[使用擴充保護連接到資料庫引擎](../../database-engine/configure-windows/connect-to-the-database-engine-using-extended-protection.md)[驗證擴充保護總覽](https://go.microsoft.com/fwlink/?LinkID=177943)[整合式 Windows 驗證與擴充保護](https://go.microsoft.com/fwlink/?LinkId=179922) [Microsoft 安全性摘要報告：驗證的擴充保護](https://go.microsoft.com/fwlink/?LinkId=179923)[報表伺服器服務追蹤記錄](../report-server/report-server-service-trace-log.md) [rsreportserver.config 設定檔](../report-server/rsreportserver-config-configuration-file.md)案[SetExtendedProtectionSettings 方法 &#40;WMI MSReportServer_ConfigurationSetting&#41;](../wmi-provider-library-reference/configurationsetting-method-setextendedprotectionsettings.md)</span><span class="sxs-lookup"><span data-stu-id="9b318-345">[Connect to the Database Engine Using Extended Protection](../../database-engine/configure-windows/connect-to-the-database-engine-using-extended-protection.md) [Extended Protection for Authentication Overview](https://go.microsoft.com/fwlink/?LinkID=177943) [Integrated Windows Authentication with Extended Protection](https://go.microsoft.com/fwlink/?LinkId=179922) [Microsoft Security Advisory: Extended protection for authentication](https://go.microsoft.com/fwlink/?LinkId=179923) [Report Server Service Trace Log](../report-server/report-server-service-trace-log.md) [RSReportServer Configuration File](../report-server/rsreportserver-config-configuration-file.md) [SetExtendedProtectionSettings Method &#40;WMI MSReportServer_ConfigurationSetting&#41;](../wmi-provider-library-reference/configurationsetting-method-setextendedprotectionsettings.md)</span></span>


