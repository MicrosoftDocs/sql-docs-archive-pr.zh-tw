---
title: 快取報表 (SSRS) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: reporting-services-native
ms.topic: conceptual
helpviewer_keywords:
- report execution properties [Reporting Services]
- cache [Reporting Services]
- report processing [Reporting Services], caching
- cached instances [Reporting Services]
- refreshing cache
- cached reports [Reporting Services]
- preloading cache
- invalid cached reports [Reporting Services]
- performance [Reporting Services]
- expiration [Reporting Services]
- snapshots [Reporting Services], caching
ms.assetid: 146542c3-8efd-4b89-a8d8-77d22896630e
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: e1af19dd3848ba39f91c2fc640a57ca53c35a4fb
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87597614"
---
# <a name="caching-reports-ssrs"></a><span data-ttu-id="f787d-102">快取多個報表 (SSRS)</span><span class="sxs-lookup"><span data-stu-id="f787d-102">Caching Reports (SSRS)</span></span>
  <span data-ttu-id="f787d-103">報表伺服器可以快取已處理報表的副本，並在使用者開啟報表時還原該副本。</span><span class="sxs-lookup"><span data-stu-id="f787d-103">A report server can cache a copy of a processed report and return that copy when a user opens the report.</span></span> <span data-ttu-id="f787d-104">對使用者而言，能夠指出報表是快取副本的唯一證據是報表執行的日期和時間。</span><span class="sxs-lookup"><span data-stu-id="f787d-104">To a user, the only evidence available to indicate the report is a cached copy is the date and time that the report ran.</span></span> <span data-ttu-id="f787d-105">如果日期或時間不是目前的日期和時間，且報表不是快照集，則報表是從快取擷取而來。</span><span class="sxs-lookup"><span data-stu-id="f787d-105">If the date or time is not current and the report is not a snapshot, the report was retrieved from cache.</span></span>  
  
 <span data-ttu-id="f787d-106">如果報表很大或存取頻繁，快取就可以縮短擷取報表所需的時間。</span><span class="sxs-lookup"><span data-stu-id="f787d-106">Caching can shorten the time required to retrieve a report if the report is large or accessed frequently.</span></span> <span data-ttu-id="f787d-107">如果伺服器重新開機，所有快取的執行個體都會在報表伺服器 Web 服務再次上線時恢復。</span><span class="sxs-lookup"><span data-stu-id="f787d-107">If the server is rebooted, all cached instances are reinstated when the Report Server Web service comes back online.</span></span>  
  
 <span data-ttu-id="f787d-108">快取是一種效能增強技術。</span><span class="sxs-lookup"><span data-stu-id="f787d-108">Caching is a performance-enhancement technique.</span></span> <span data-ttu-id="f787d-109">快取的內容為動態，而且會隨報表加入、取代或移除而變更。</span><span class="sxs-lookup"><span data-stu-id="f787d-109">The contents of the cache are volatile and can change as reports are added, replaced, or removed.</span></span> <span data-ttu-id="f787d-110">如果您需要更可預測的快取策略，就應該建立報表快照集。</span><span class="sxs-lookup"><span data-stu-id="f787d-110">If you require a more predictable caching strategy, you should create a report snapshot.</span></span> <span data-ttu-id="f787d-111">如需詳細資訊，請參閱 [設定報表處理屬性](set-report-processing-properties.md)。</span><span class="sxs-lookup"><span data-stu-id="f787d-111">For more information, see [Set Report Processing Properties](set-report-processing-properties.md).</span></span>  
  
> [!NOTE]  
>  [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] <span data-ttu-id="f787d-112">會將暫存檔儲存在資料庫中，以便支援使用者工作階段和報表處理。</span><span class="sxs-lookup"><span data-stu-id="f787d-112">stores temporary files in a database to support user sessions and report processing.</span></span> <span data-ttu-id="f787d-113">這些檔案會快取供內部使用，以及在單一瀏覽器工作階段期間支援一致的檢視體驗。</span><span class="sxs-lookup"><span data-stu-id="f787d-113">These files are cached for internal use and to support a consistent viewing experience during a single browser session.</span></span> <span data-ttu-id="f787d-114">如需如何快取內部使用暫存檔的詳細資訊，請參閱[報表伺服器資料庫 &#40;SSRS 原生模式&#41;](report-server-database-ssrs-native-mode.md)。</span><span class="sxs-lookup"><span data-stu-id="f787d-114">For more information about how internal-use temporary files are cached, see [Report Server Database &#40;SSRS Native Mode&#41;](report-server-database-ssrs-native-mode.md).</span></span>  
  
## <a name="cached-instances"></a><span data-ttu-id="f787d-115">快取執行個體</span><span class="sxs-lookup"><span data-stu-id="f787d-115">Cached Instances</span></span>  
 <span data-ttu-id="f787d-116">報表的快取執行個體是以報表的中繼格式為基礎。</span><span class="sxs-lookup"><span data-stu-id="f787d-116">A cached instance of a report is based on the intermediate format of a report.</span></span> <span data-ttu-id="f787d-117">報表伺服器一般會以報表名稱為基礎，快取一個報表的執行個體。</span><span class="sxs-lookup"><span data-stu-id="f787d-117">The report server generally caches one instance of a report based on the report name.</span></span> <span data-ttu-id="f787d-118">不過，如果報表依據查詢參數而包含不同的資料，則在任何給定時間可能會快取多種版本的報表。</span><span class="sxs-lookup"><span data-stu-id="f787d-118">However, if a report can contain different data based on query parameters, multiple versions of the report may be cached at any given time.</span></span> <span data-ttu-id="f787d-119">例如，假設您有一個將區域代碼當成參數值的參數化報表。</span><span class="sxs-lookup"><span data-stu-id="f787d-119">For example, suppose you have a parameterized report that takes a region code as a parameter value.</span></span> <span data-ttu-id="f787d-120">如果 4 個不同的使用者指定了 4 個唯一的區域代碼，就會建立 4 個快取副本。</span><span class="sxs-lookup"><span data-stu-id="f787d-120">If four different users specify four unique region codes, four cached copies are created.</span></span>  
  
 <span data-ttu-id="f787d-121">第一個以唯一的區域代碼執行報表的使用者，會建立一個包含該區域資料的快取報表。</span><span class="sxs-lookup"><span data-stu-id="f787d-121">The first user who runs the report with a unique region code creates a cached report that contains data for that region.</span></span> <span data-ttu-id="f787d-122">使用相同區域代碼要求報表的後續使用者會取得快取副本。</span><span class="sxs-lookup"><span data-stu-id="f787d-122">Subsequent users who request the report using the same region code get the cached copy.</span></span>  
  
 <span data-ttu-id="f787d-123">並非所有報表都可以快取。</span><span class="sxs-lookup"><span data-stu-id="f787d-123">Not all reports can be cached.</span></span> <span data-ttu-id="f787d-124">如果報表包含使用者相依的資料、提示使用者輸入認證或使用 Windows 驗證，則無法快取。</span><span class="sxs-lookup"><span data-stu-id="f787d-124">If a report includes user-dependent data, prompts users for credentials, or uses Windows Authentication, it cannot be cached.</span></span>  
  
## <a name="refreshing-the-cache"></a><span data-ttu-id="f787d-125">重新整理快取</span><span class="sxs-lookup"><span data-stu-id="f787d-125">Refreshing the Cache</span></span>  
 <span data-ttu-id="f787d-126">如果使用者在先前的快取副本過期後選取報表，快取報表就會以較新版本取代。</span><span class="sxs-lookup"><span data-stu-id="f787d-126">A cached report is replaced with a newer version when a user selects the report after the previously cached copy has expired.</span></span> <span data-ttu-id="f787d-127">設定當成快取執行個體執行的報表，會依據逾期設定，定期從快取移除。</span><span class="sxs-lookup"><span data-stu-id="f787d-127">Reports that are configured to run as cached instances are removed from the cache at regular intervals based on expiration settings.</span></span> <span data-ttu-id="f787d-128">您可以設定報表以分鐘為單位的逾期或在排程的時間逾期，這由資料的直接需求決定。</span><span class="sxs-lookup"><span data-stu-id="f787d-128">You can set a report's expiration in minutes or at a scheduled time, as determined by the data's immediacy requirement.</span></span> <span data-ttu-id="f787d-129">除非使用 SOAP API，否則無法直接從快取刪除報表。</span><span class="sxs-lookup"><span data-stu-id="f787d-129">You cannot delete reports from the cache directly unless you use the SOAP API.</span></span>  
  
 <span data-ttu-id="f787d-130">若要設定快取逾期，可以使用共用排程或報表特定排程。</span><span class="sxs-lookup"><span data-stu-id="f787d-130">To configure cache expiration, you can use a shared schedule or report-specific schedule.</span></span> <span data-ttu-id="f787d-131">如果您使用共用排程而且後來暫停，則當排程無法作業時，快取不會過期。</span><span class="sxs-lookup"><span data-stu-id="f787d-131">If you use a shared schedule and it is subsequently paused, the cache does not expire while the schedule is inoperative.</span></span> <span data-ttu-id="f787d-132">如果共用排程後來被刪除，則排程設定的副本會儲存為報表特定排程。</span><span class="sxs-lookup"><span data-stu-id="f787d-132">If the shared schedule is subsequently deleted, a copy of the schedule settings is saved as a report-specific schedule.</span></span>  
  
 <span data-ttu-id="f787d-133">如果排程過期或排程引擎在快取到期日時無法使用，則報表伺服器會執行即時報表，直到已排程的作業可以繼續為止 (方法是延長排程或啟動排程服務)。</span><span class="sxs-lookup"><span data-stu-id="f787d-133">If a schedule expires or if the scheduling engine is unavailable at a cache expiration date, the report server runs a live report until scheduled operations can be resumed (by either extending the schedule or starting the scheduling service).</span></span>  
  
## <a name="preloading-the-cache"></a><span data-ttu-id="f787d-134">預先載入快取</span><span class="sxs-lookup"><span data-stu-id="f787d-134">Preloading the Cache</span></span>  
 <span data-ttu-id="f787d-135">若要提升伺服器效能，您可以預先載入快取。</span><span class="sxs-lookup"><span data-stu-id="f787d-135">To improve server performance, you can preload the cache.</span></span> <span data-ttu-id="f787d-136">您可以使用兩種方式，預先載入包含參數化報表執行個體集合的快取：</span><span class="sxs-lookup"><span data-stu-id="f787d-136">You can preload the cache with a collection of parameterized report instances in two ways:</span></span>  
  
1.  <span data-ttu-id="f787d-137">建立快取重新整理計畫。</span><span class="sxs-lookup"><span data-stu-id="f787d-137">Create a cache refresh plan.</span></span> <span data-ttu-id="f787d-138">當您建立重新整理計畫時，可以指定單一報表的排程，或指定共用排程。</span><span class="sxs-lookup"><span data-stu-id="f787d-138">When you create a refresh plan, you can specify a schedule for a single report or specify a shared schedule.</span></span>  
  
2.  <span data-ttu-id="f787d-139">建立使用 Null 傳遞提供者的資料驅動訂閱。</span><span class="sxs-lookup"><span data-stu-id="f787d-139">Create a data-driven subscription that uses the Null Delivery Provider.</span></span> <span data-ttu-id="f787d-140">您指定 Null 傳遞提供者做為訂閱中傳遞的方法時，報表伺服器會以報表伺服器資料庫做為傳遞目的地目標，並使用名為 Null 轉譯延伸模組的特定轉譯延伸模組。</span><span class="sxs-lookup"><span data-stu-id="f787d-140">When you specify the Null Delivery Provider as the method of delivery in the subscription, the report server targets the report server database as the delivery destination and uses a specialized rendering extension called the null rendering extension.</span></span> <span data-ttu-id="f787d-141">相較於其他傳遞延伸模組，Null 傳遞提供者並沒有您可以透過訂閱定義來設定的傳遞設定。</span><span class="sxs-lookup"><span data-stu-id="f787d-141">In contrast with other delivery extensions, the Null Delivery Provider does not have delivery settings that you can configure through a subscription definition.</span></span>  
  
 <span data-ttu-id="f787d-142">如果您要快取參數化報表的多個執行個體，其中使用不同的參數值來產生不同的報表執行個體，快取報表特別有用。</span><span class="sxs-lookup"><span data-stu-id="f787d-142">Caching a report is especially useful if you want to cache multiple instances of a parameterized report where different parameter values are used to produce different report instances.</span></span> <span data-ttu-id="f787d-143">請注意，您只能在報表上指定查詢式參數。</span><span class="sxs-lookup"><span data-stu-id="f787d-143">Note that you can only specify query-based parameters on the report.</span></span>  
  
 <span data-ttu-id="f787d-144">當您指定排程或建立資料驅動訂閱時，必須排程報表傳遞至快取的頻率。</span><span class="sxs-lookup"><span data-stu-id="f787d-144">When you specify a schedule or when you create the data-driven subscription, you schedule how often the reports are delivered to the cache.</span></span> <span data-ttu-id="f787d-145">舊副本必須已經過期，新副本才能傳遞至快取。</span><span class="sxs-lookup"><span data-stu-id="f787d-145">In order for new copies to be delivered to the cache, the old copies must have expired.</span></span> <span data-ttu-id="f787d-146">因此，必須設定報表的執行屬性，以包含快取逾期設定。</span><span class="sxs-lookup"><span data-stu-id="f787d-146">Therefore, the Execution properties of the report must be configured to include cache expiration settings.</span></span> <span data-ttu-id="f787d-147">逾期設定必須與您定義的訂閱排程一致。</span><span class="sxs-lookup"><span data-stu-id="f787d-147">The expiration setting must be consistent with the subscription schedule that you define.</span></span> <span data-ttu-id="f787d-148">例如，您若是建立一個每晚執行的訂閱，則快取也必須在每天晚上訂閱的執行階段之前過期。</span><span class="sxs-lookup"><span data-stu-id="f787d-148">For example, if you create a subscription that runs every night, the cache should also expire every night prior to the subscription's run time.</span></span> <span data-ttu-id="f787d-149">如果執行屬性未包含逾期時間，則會略過較新的傳遞。</span><span class="sxs-lookup"><span data-stu-id="f787d-149">If the Execution properties do not include expiration times, newer deliveries are disregarded.</span></span> <span data-ttu-id="f787d-150">如需快取重新整理計劃的詳細資訊，請參閱 [排程](../subscriptions/schedules.md)。</span><span class="sxs-lookup"><span data-stu-id="f787d-150">For more information about cache refresh plans, see [Schedules](../subscriptions/schedules.md).</span></span> <span data-ttu-id="f787d-151">如需設定屬性的詳細資訊，請參閱 [設定報表處理屬性](set-report-processing-properties.md)。</span><span class="sxs-lookup"><span data-stu-id="f787d-151">For more information about setting properties, see [Set Report Processing Properties](set-report-processing-properties.md).</span></span> <span data-ttu-id="f787d-152">如需使用資料驅動訂閱的詳細資訊，請參閱 [資料驅動訂閱](../subscriptions/data-driven-subscriptions.md)。</span><span class="sxs-lookup"><span data-stu-id="f787d-152">For more information about using data-driven subscriptions, see [Data-Driven Subscriptions](../subscriptions/data-driven-subscriptions.md).</span></span>  
  
## <a name="conditions-that-cause-cache-expiration"></a><span data-ttu-id="f787d-153">造成快取逾期的條件</span><span class="sxs-lookup"><span data-stu-id="f787d-153">Conditions That Cause Cache Expiration</span></span>  
 <span data-ttu-id="f787d-154">快取報表會因回應下列事件而無效：已修改報表定義、已修改報表參數、資料來源認證變更，或報表執行選項變更。</span><span class="sxs-lookup"><span data-stu-id="f787d-154">A cached report is invalidated in response to the following events: the report definition is modified, report parameters are modified, data source credentials change, or report execution options change.</span></span> <span data-ttu-id="f787d-155">如果您刪除儲存在快取中的報表，也會刪除快取的版本。</span><span class="sxs-lookup"><span data-stu-id="f787d-155">If you delete a report that is stored in the cache, the cached version is also deleted.</span></span>  
  
 <span data-ttu-id="f787d-156">如果因為任何原因造成報表無法從快取執行個體轉譯 (例如，若使用者指定的參數值與用於產生快取報表的參數值不同)，則報表伺服器會重新執行報表。</span><span class="sxs-lookup"><span data-stu-id="f787d-156">If a report cannot be rendered from a cached instance for any reason (for example, if the parameter values that a user specifies are different from those used to produce the cached report), the report server reruns the report.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="f787d-157">另請參閱</span><span class="sxs-lookup"><span data-stu-id="f787d-157">See Also</span></span>  
 <span data-ttu-id="f787d-158">[設定處理選項 &#40;SharePoint 整合模式的 Reporting Services&#41;](../set-processing-options-reporting-services-in-sharepoint-integrated-mode.md) </span><span class="sxs-lookup"><span data-stu-id="f787d-158">[Set Processing Options &#40;Reporting Services in SharePoint Integrated Mode&#41;](../set-processing-options-reporting-services-in-sharepoint-integrated-mode.md) </span></span>  
 <span data-ttu-id="f787d-159">[設定報表處理屬性](set-report-processing-properties.md) </span><span class="sxs-lookup"><span data-stu-id="f787d-159">[Set Report Processing Properties](set-report-processing-properties.md) </span></span>  
 <span data-ttu-id="f787d-160">[Reporting Services 概念 &#40;SSRS&#41;](../reporting-services-concepts-ssrs.md) </span><span class="sxs-lookup"><span data-stu-id="f787d-160">[Reporting Services Concepts &#40;SSRS&#41;](../reporting-services-concepts-ssrs.md) </span></span>  
 <span data-ttu-id="f787d-161">[預先載入快取 &#40;報表管理員&#41;](preload-the-cache-report-manager.md) </span><span class="sxs-lookup"><span data-stu-id="f787d-161">[Preload the Cache &#40;Report Manager&#41;](preload-the-cache-report-manager.md) </span></span>  
 <span data-ttu-id="f787d-162">[[排程]](../subscriptions/schedules.md) </span><span class="sxs-lookup"><span data-stu-id="f787d-162">[Schedules](../subscriptions/schedules.md) </span></span>  
 <span data-ttu-id="f787d-163">[&#40;SSRS&#41;快取共用資料集](cache-shared-datasets-ssrs.md) </span><span class="sxs-lookup"><span data-stu-id="f787d-163">[Cache Shared Datasets &#40;SSRS&#41;](cache-shared-datasets-ssrs.md) </span></span>  
 [<span data-ttu-id="f787d-164">快取重新整理選項 &#40;報表管理員&#41;</span><span class="sxs-lookup"><span data-stu-id="f787d-164">Cache Refresh Options &#40;Report Manager&#41;</span></span>](../cache-refresh-options-report-manager.md)  
  
  
