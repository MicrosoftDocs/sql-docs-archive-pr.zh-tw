---
title: 報表伺服器 HTTP 記錄 | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: reporting-services-native
ms.topic: conceptual
helpviewer_keywords:
- HTTP [Reporting Services]
ms.assetid: 6cc433b7-165c-4b16-9034-79256dd6735f
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: 46adee4fb65361bb9b338c89b6e370ce1da68f9a
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87593299"
---
# <a name="report-server-http-log"></a><span data-ttu-id="f9bed-102">報表伺服器 HTTP 記錄</span><span class="sxs-lookup"><span data-stu-id="f9bed-102">Report Server HTTP Log</span></span>
  <span data-ttu-id="f9bed-103">[!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] 報表伺服器 HTTP 記錄檔會保留報表伺服器所處理之每個 HTTP 要求與回應的記錄。</span><span class="sxs-lookup"><span data-stu-id="f9bed-103">The [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] Report Server HTTP log files keep a record of every HTTP request and response handled by the report server.</span></span> <span data-ttu-id="f9bed-104">由於要求溢位和逾時錯誤不會送達報表伺服器，因此它們不會記錄在記錄檔中。</span><span class="sxs-lookup"><span data-stu-id="f9bed-104">Because request overflow and timeout errors do not reach the report server, they are not recorded in the log file.</span></span>  
  
 <span data-ttu-id="f9bed-105">HTTP 記錄預設是不啟用的。</span><span class="sxs-lookup"><span data-stu-id="f9bed-105">HTTP logging is not enabled by default.</span></span> <span data-ttu-id="f9bed-106">若要啟用 HTTP 記錄，請修改 **ReportingServicesService.exe.config** 組態檔，以在安裝中使用這項功能。</span><span class="sxs-lookup"><span data-stu-id="f9bed-106">To enable the HTTP logging, modify the **ReportingServicesService.exe.config** configuration file to use this feature in your installation.</span></span>  
  
## <a name="viewing-log-information"></a><span data-ttu-id="f9bed-107">檢視記錄資訊</span><span class="sxs-lookup"><span data-stu-id="f9bed-107">Viewing Log Information</span></span>  
 <span data-ttu-id="f9bed-108">此記錄是 ASCII 文字檔。</span><span class="sxs-lookup"><span data-stu-id="f9bed-108">The log is an ASCII text file.</span></span> <span data-ttu-id="f9bed-109">您可以使用任何文字編輯器來檢視此檔案。</span><span class="sxs-lookup"><span data-stu-id="f9bed-109">You can use any text editor to view the file.</span></span> <span data-ttu-id="f9bed-110">報表伺服器 HTTP 記錄檔相當於 IIS 中的 W3C 記錄擴充檔而且使用類似的欄位，因此您可以使用現有的 IIS 記錄檔檢視器來讀取報表伺服器 HTTP 記錄檔。</span><span class="sxs-lookup"><span data-stu-id="f9bed-110">The Report Server HTTP log file is equivalent to the W3C extended log file in IIS and uses similar fields so that you can use existing IIS log file viewers to read the report server HTTP log file.</span></span> <span data-ttu-id="f9bed-111">下表提供有關 HTTP 記錄檔的其他資訊：</span><span class="sxs-lookup"><span data-stu-id="f9bed-111">The following table provides additional information about the HTTP log file:</span></span>  
  
|||  
|-|-|  
|<span data-ttu-id="f9bed-112">**檔案名稱**</span><span class="sxs-lookup"><span data-stu-id="f9bed-112">**File name**</span></span>|<span data-ttu-id="f9bed-113">根據預設，記錄檔名稱為</span><span class="sxs-lookup"><span data-stu-id="f9bed-113">By default, the log file name(s) are</span></span><br /><br /> `ReportServerService_HTTP_<timestamp>.log.`<br /><br /> <span data-ttu-id="f9bed-114">您可以透過在 ReportingServicesService.exe.config 檔中修改 HttpTraceFileName 屬性，自訂檔案名稱的前置詞。</span><span class="sxs-lookup"><span data-stu-id="f9bed-114">You can customize the prefix of the file name by modifying the HttpTraceFileName attribute in the ReportingServicesService.exe.config file.</span></span> <span data-ttu-id="f9bed-115">此時間戳記是以國際標準時間 (UTC) 為基礎。</span><span class="sxs-lookup"><span data-stu-id="f9bed-115">The timestamp is based on Coordinated Universal Time (UTC).</span></span>|  
|<span data-ttu-id="f9bed-116">**檔案位置**</span><span class="sxs-lookup"><span data-stu-id="f9bed-116">**File location**</span></span>|<span data-ttu-id="f9bed-117">檔案會寫入下列位置：</span><span class="sxs-lookup"><span data-stu-id="f9bed-117">The files are written to the following location:</span></span><br /><br /> `\Microsoft SQL Server\<SQL Server Instance>\Reporting Services\LogFiles`|  
|<span data-ttu-id="f9bed-118">**檔案格式**</span><span class="sxs-lookup"><span data-stu-id="f9bed-118">**File format**</span></span>|<span data-ttu-id="f9bed-119">此檔案採用 EN-US 格式。</span><span class="sxs-lookup"><span data-stu-id="f9bed-119">The file is in EN-US format.</span></span> <span data-ttu-id="f9bed-120">它是 ASCII 文字檔。</span><span class="sxs-lookup"><span data-stu-id="f9bed-120">It is an ASCII text file.</span></span>|  
|<span data-ttu-id="f9bed-121">**檔案建立和保留**</span><span class="sxs-lookup"><span data-stu-id="f9bed-121">**File creation and retention**</span></span>|<span data-ttu-id="f9bed-122">當您在組態檔中啟用 HTTP 記錄、重新啟動此服務，然後報表伺服器處理 HTTP 要求之後，系統就會建立 HTTP 記錄。</span><span class="sxs-lookup"><span data-stu-id="f9bed-122">The HTTP log is created after you enable it in the configuration file, restart the service, and the report server handles an HTTP request.</span></span> <span data-ttu-id="f9bed-123">如果您設定了這些設定，但卻沒有看見記錄檔，請開啟報表或啟動報表伺服器應用程式 (例如「報表管理員」) 來產生 HTTP 要求，以便建立此檔案。</span><span class="sxs-lookup"><span data-stu-id="f9bed-123">If you configure the settings but do not see the log file, open a report or start a report server application (such as Report Manager) to generate an HTTP request to create the file.</span></span><br /><br /> <span data-ttu-id="f9bed-124">記錄檔的新執行個體會在報表伺服器的每個服務重新啟動和後續 HTTP 要求之後建立。</span><span class="sxs-lookup"><span data-stu-id="f9bed-124">A new instance of the log file will be created after each service restart and subsequent HTTP request to the report server.</span></span><br /><br /> <span data-ttu-id="f9bed-125">根據預設，追蹤記錄的上限為 32 MB，並且會在 14 天之後遭到刪除。</span><span class="sxs-lookup"><span data-stu-id="f9bed-125">By default, trace logs are limited to 32 megabytes and deleted after 14 days.</span></span>|  
  
## <a name="configuration-settings-for-report-server-http-log"></a><span data-ttu-id="f9bed-126">設定報表伺服器 HTTP 記錄的設定</span><span class="sxs-lookup"><span data-stu-id="f9bed-126">Configuration Settings for Report Server HTTP Log</span></span>  
 <span data-ttu-id="f9bed-127">若要設定報表伺服器 HTTP 記錄，請使用 [記事本] 來修改 **ReportingServicesService.exe.config** 檔。</span><span class="sxs-lookup"><span data-stu-id="f9bed-127">To configure the Report Server HTTP log, use Notepad to modify the **ReportingServicesService.exe.config** file.</span></span> <span data-ttu-id="f9bed-128">此組態檔位於 \Program Files\Microsoft SQL Server\MSSQL.n\Reporting Services\ReportServer\Bin 資料夾中。</span><span class="sxs-lookup"><span data-stu-id="f9bed-128">The configuration file is located in the \Program Files\Microsoft SQL Server\MSSQL.n\Reporting Services\ReportServer\Bin folder.</span></span>  
  
 <span data-ttu-id="f9bed-129">若要啟用 HTTP 伺服器，請將 `http:4` 加入 ReportingServicesService.exe.config 檔的 RStrace 區段。</span><span class="sxs-lookup"><span data-stu-id="f9bed-129">To enable the HTTP server, add `http:4` to the RStrace section of the ReportingServicesService.exe.config file.</span></span> <span data-ttu-id="f9bed-130">所有其他 HTTP 記錄檔項目是選擇性的。</span><span class="sxs-lookup"><span data-stu-id="f9bed-130">All other HTTP log file entries are optional.</span></span> <span data-ttu-id="f9bed-131">下列範例包含所有設定，因此您可以將整個區段貼入 RStrace 區段，然後刪除不需要的設定。</span><span class="sxs-lookup"><span data-stu-id="f9bed-131">The following example includes all settings so that you can paste the whole section over the RStrace section, and then delete the settings you do not need.</span></span>  
  
```  
   <RStrace>  
         <add name="FileName" value="ReportServerService_" />  
         <add name="FileSizeLimitMb" value="32" />  
         <add name="KeepFilesForDays" value="14" />  
         <add name="Prefix" value="tid, time" />  
         <add name="TraceListeners" value="debugwindow, file" />  
         <add name="TraceFileMode" value="unique" />  
         <add name="HttpTraceFileName" value="ReportServerService_HTTP_" />  
         <add name="HttpTraceSwitches" value="date,time, clientip,username,serverip,serverport,host,method,uristem,uriquery,protocolstatus,bytesreceived,timetaken,protocolversion,useragent,cookiereceived,cookiesent,referrer" />  
         <add name="Components" value="all:3,http:4" />  
   </RStrace>  
```  
  
## <a name="log-file-fields"></a><span data-ttu-id="f9bed-132">記錄檔欄位</span><span class="sxs-lookup"><span data-stu-id="f9bed-132">Log File Fields</span></span>  
 <span data-ttu-id="f9bed-133">下表將描述記錄中提供的欄位。</span><span class="sxs-lookup"><span data-stu-id="f9bed-133">The following table describes the fields that are available in the log.</span></span> <span data-ttu-id="f9bed-134">此欄位清單是可設定的。您可以透過 `HTTPTraceSwitches` 組態設定，指定要包含的欄位。</span><span class="sxs-lookup"><span data-stu-id="f9bed-134">The field list is configurable; you can specify which fields to include through the `HTTPTraceSwitches` configuration setting.</span></span> <span data-ttu-id="f9bed-135">[**預設**] 資料行指定如果您未指定，欄位是否會自動包含在記錄檔中 `HTTPTraceSwitches` 。</span><span class="sxs-lookup"><span data-stu-id="f9bed-135">The **Default** column specifies whether the field will be included in the log file automatically if you do not specify `HTTPTraceSwitches`.</span></span>  
  
|<span data-ttu-id="f9bed-136">欄位</span><span class="sxs-lookup"><span data-stu-id="f9bed-136">Field</span></span>|<span data-ttu-id="f9bed-137">描述</span><span class="sxs-lookup"><span data-stu-id="f9bed-137">Description</span></span>|<span data-ttu-id="f9bed-138">預設</span><span class="sxs-lookup"><span data-stu-id="f9bed-138">Default</span></span>|  
|-----------|-----------------|-------------|  
|<span data-ttu-id="f9bed-139">HttpTraceFileName</span><span class="sxs-lookup"><span data-stu-id="f9bed-139">HttpTraceFileName</span></span>|<span data-ttu-id="f9bed-140">此為選用值。</span><span class="sxs-lookup"><span data-stu-id="f9bed-140">This value is optional.</span></span> <span data-ttu-id="f9bed-141">預設值為 ReportServerServiceHTTP_。</span><span class="sxs-lookup"><span data-stu-id="f9bed-141">The default value is ReportServerServiceHTTP_.</span></span> <span data-ttu-id="f9bed-142">如果您想要使用不同的檔案命名慣例 (例如，當您要將記錄檔儲存至集中位置時，若要包含伺服器名稱)，可以指定不同的值。</span><span class="sxs-lookup"><span data-stu-id="f9bed-142">You can specify a different value if want to use a different file naming convention (for example, to include the server name if you are saving log files to a central location).</span></span>|<span data-ttu-id="f9bed-143">是</span><span class="sxs-lookup"><span data-stu-id="f9bed-143">Yes</span></span>|  
|<span data-ttu-id="f9bed-144">HTTPTraceSwitches</span><span class="sxs-lookup"><span data-stu-id="f9bed-144">HttpTraceSwitches</span></span>|<span data-ttu-id="f9bed-145">此為選用值。</span><span class="sxs-lookup"><span data-stu-id="f9bed-145">This value is optional.</span></span> <span data-ttu-id="f9bed-146">如果您指定了此欄位，就可以使用逗號分隔的格式來設定記錄檔中使用的欄位。</span><span class="sxs-lookup"><span data-stu-id="f9bed-146">If you specify it, you can configure the fields used in the log file in comma-delimited format.</span></span>|<span data-ttu-id="f9bed-147">否</span><span class="sxs-lookup"><span data-stu-id="f9bed-147">No</span></span>|  
|<span data-ttu-id="f9bed-148">Date</span><span class="sxs-lookup"><span data-stu-id="f9bed-148">Date</span></span>|<span data-ttu-id="f9bed-149">活動發生的日期。</span><span class="sxs-lookup"><span data-stu-id="f9bed-149">The date when the activity occurred.</span></span>|<span data-ttu-id="f9bed-150">否</span><span class="sxs-lookup"><span data-stu-id="f9bed-150">No</span></span>|  
|<span data-ttu-id="f9bed-151">Time</span><span class="sxs-lookup"><span data-stu-id="f9bed-151">Time</span></span>|<span data-ttu-id="f9bed-152">活動發生的時間。</span><span class="sxs-lookup"><span data-stu-id="f9bed-152">The time when the activity occurred.</span></span>|<span data-ttu-id="f9bed-153">否</span><span class="sxs-lookup"><span data-stu-id="f9bed-153">No</span></span>|  
|<span data-ttu-id="f9bed-154">ClientIp</span><span class="sxs-lookup"><span data-stu-id="f9bed-154">ClientIp</span></span>|<span data-ttu-id="f9bed-155">存取報表伺服器之用戶端的 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="f9bed-155">The IP address of the client accessing the report server.</span></span>|<span data-ttu-id="f9bed-156">是</span><span class="sxs-lookup"><span data-stu-id="f9bed-156">Yes</span></span>|  
|<span data-ttu-id="f9bed-157">UserName</span><span class="sxs-lookup"><span data-stu-id="f9bed-157">UserName</span></span>|<span data-ttu-id="f9bed-158">存取報表伺服器之使用者的名稱。</span><span class="sxs-lookup"><span data-stu-id="f9bed-158">The name of the user who accessed the report server.</span></span>|<span data-ttu-id="f9bed-159">否</span><span class="sxs-lookup"><span data-stu-id="f9bed-159">No</span></span>|  
|<span data-ttu-id="f9bed-160">ServerPort</span><span class="sxs-lookup"><span data-stu-id="f9bed-160">ServerPort</span></span>|<span data-ttu-id="f9bed-161">用於連接的通訊埠編號。</span><span class="sxs-lookup"><span data-stu-id="f9bed-161">The port number used for the connection.</span></span>|<span data-ttu-id="f9bed-162">否</span><span class="sxs-lookup"><span data-stu-id="f9bed-162">No</span></span>|  
|<span data-ttu-id="f9bed-163">Host</span><span class="sxs-lookup"><span data-stu-id="f9bed-163">Host</span></span>|<span data-ttu-id="f9bed-164">主機標頭的內容。</span><span class="sxs-lookup"><span data-stu-id="f9bed-164">The content of the host header.</span></span>|<span data-ttu-id="f9bed-165">否</span><span class="sxs-lookup"><span data-stu-id="f9bed-165">No</span></span>|  
|<span data-ttu-id="f9bed-166">方法</span><span class="sxs-lookup"><span data-stu-id="f9bed-166">Method</span></span>|<span data-ttu-id="f9bed-167">從用戶端呼叫的動作或 SOAP 方法。</span><span class="sxs-lookup"><span data-stu-id="f9bed-167">The action or SOAP method called from the client.</span></span>|<span data-ttu-id="f9bed-168">是</span><span class="sxs-lookup"><span data-stu-id="f9bed-168">Yes</span></span>|  
|<span data-ttu-id="f9bed-169">UriStem</span><span class="sxs-lookup"><span data-stu-id="f9bed-169">UriStem</span></span>|<span data-ttu-id="f9bed-170">存取的資源。</span><span class="sxs-lookup"><span data-stu-id="f9bed-170">The resource accessed.</span></span>|<span data-ttu-id="f9bed-171">是</span><span class="sxs-lookup"><span data-stu-id="f9bed-171">Yes</span></span>|  
|<span data-ttu-id="f9bed-172">UriQuery</span><span class="sxs-lookup"><span data-stu-id="f9bed-172">UriQuery</span></span>|<span data-ttu-id="f9bed-173">用來存取資源的查詢。</span><span class="sxs-lookup"><span data-stu-id="f9bed-173">The query used to access the resource.</span></span>|<span data-ttu-id="f9bed-174">否</span><span class="sxs-lookup"><span data-stu-id="f9bed-174">No</span></span>|  
|<span data-ttu-id="f9bed-175">ProtocolStatus</span><span class="sxs-lookup"><span data-stu-id="f9bed-175">ProtocolStatus</span></span>|<span data-ttu-id="f9bed-176">HTTP 狀態碼。</span><span class="sxs-lookup"><span data-stu-id="f9bed-176">The HTTP status code.</span></span>|<span data-ttu-id="f9bed-177">是</span><span class="sxs-lookup"><span data-stu-id="f9bed-177">Yes</span></span>|  
|<span data-ttu-id="f9bed-178">BytesReceived</span><span class="sxs-lookup"><span data-stu-id="f9bed-178">BytesReceived</span></span>|<span data-ttu-id="f9bed-179">伺服器所接收的位元組數目。</span><span class="sxs-lookup"><span data-stu-id="f9bed-179">The number of bytes received by the server.</span></span>|<span data-ttu-id="f9bed-180">否</span><span class="sxs-lookup"><span data-stu-id="f9bed-180">No</span></span>|  
|<span data-ttu-id="f9bed-181">TimeTaken</span><span class="sxs-lookup"><span data-stu-id="f9bed-181">TimeTaken</span></span>|<span data-ttu-id="f9bed-182">從 HTTP.SYS 傳回要求資料的那一刻，直到伺服器完成最後一個傳送作業為止的時間 (以毫秒為單位)，但不包括網路傳輸時間。</span><span class="sxs-lookup"><span data-stu-id="f9bed-182">The time (in milliseconds) from the instant HTTP.SYS returns request data until the server finishes the last send, excluding network transmission time.</span></span>|<span data-ttu-id="f9bed-183">否</span><span class="sxs-lookup"><span data-stu-id="f9bed-183">No</span></span>|  
|<span data-ttu-id="f9bed-184">ProtocolVersion</span><span class="sxs-lookup"><span data-stu-id="f9bed-184">ProtocolVersion</span></span>|<span data-ttu-id="f9bed-185">用戶端所使用的通訊協定版本。</span><span class="sxs-lookup"><span data-stu-id="f9bed-185">The protocol version used by the client.</span></span>|<span data-ttu-id="f9bed-186">否</span><span class="sxs-lookup"><span data-stu-id="f9bed-186">No</span></span>|  
|<span data-ttu-id="f9bed-187">UserAgent</span><span class="sxs-lookup"><span data-stu-id="f9bed-187">UserAgent</span></span>|<span data-ttu-id="f9bed-188">用戶端所使用的瀏覽器類型。</span><span class="sxs-lookup"><span data-stu-id="f9bed-188">The browser type used by the client.</span></span>|<span data-ttu-id="f9bed-189">否</span><span class="sxs-lookup"><span data-stu-id="f9bed-189">No</span></span>|  
|<span data-ttu-id="f9bed-190">CookieReceived</span><span class="sxs-lookup"><span data-stu-id="f9bed-190">CookieReceived</span></span>|<span data-ttu-id="f9bed-191">伺服器所接收的 Cookie 內容。</span><span class="sxs-lookup"><span data-stu-id="f9bed-191">The content of the cookie received by the server.</span></span>|<span data-ttu-id="f9bed-192">否</span><span class="sxs-lookup"><span data-stu-id="f9bed-192">No</span></span>|  
|<span data-ttu-id="f9bed-193">CookieSent</span><span class="sxs-lookup"><span data-stu-id="f9bed-193">CookieSent</span></span>|<span data-ttu-id="f9bed-194">伺服器所傳送的 Cookie 內容。</span><span class="sxs-lookup"><span data-stu-id="f9bed-194">The content of the cookie sent by the server.</span></span>|<span data-ttu-id="f9bed-195">否</span><span class="sxs-lookup"><span data-stu-id="f9bed-195">No</span></span>|  
|<span data-ttu-id="f9bed-196">Referrer</span><span class="sxs-lookup"><span data-stu-id="f9bed-196">Referrer</span></span>|<span data-ttu-id="f9bed-197">用戶端造訪的上一個網站。</span><span class="sxs-lookup"><span data-stu-id="f9bed-197">The previous site visited by the client.</span></span>|<span data-ttu-id="f9bed-198">否</span><span class="sxs-lookup"><span data-stu-id="f9bed-198">No</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="f9bed-199">另請參閱</span><span class="sxs-lookup"><span data-stu-id="f9bed-199">See Also</span></span>  
 <span data-ttu-id="f9bed-200">[報表伺服器服務追蹤記錄](report-server-service-trace-log.md) </span><span class="sxs-lookup"><span data-stu-id="f9bed-200">[Report Server Service Trace Log](report-server-service-trace-log.md) </span></span>  
 <span data-ttu-id="f9bed-201">[Reporting Services 記錄檔和來源](../report-server/reporting-services-log-files-and-sources.md) </span><span class="sxs-lookup"><span data-stu-id="f9bed-201">[Reporting Services Log Files and Sources](../report-server/reporting-services-log-files-and-sources.md) </span></span>  
 [<span data-ttu-id="f9bed-202">錯誤和事件參考 &#40;Reporting Services&#41;</span><span class="sxs-lookup"><span data-stu-id="f9bed-202">Errors and Events Reference &#40;Reporting Services&#41;</span></span>](../troubleshooting/errors-and-events-reference-reporting-services.md)  
  
  
