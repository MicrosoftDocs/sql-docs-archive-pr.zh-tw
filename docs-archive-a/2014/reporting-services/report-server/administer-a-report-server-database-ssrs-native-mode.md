---
title: 管理報表伺服器資料庫 (SSRS 原生模式) | Microsoft Docs
ms.custom: ''
ms.date: 08/10/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: reporting-services-native
ms.topic: conceptual
helpviewer_keywords:
- report servers [Reporting Services], databases
- renaming databases
- report server database
- databases [Reporting Services], administering
- reportservertempdb
- reportserver database
ms.assetid: 97b2e1b5-3869-4766-97b9-9bf206b52262
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: bfb1cb9108af8d3904a4ec679d2c42f11c734ade
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87597621"
---
# <a name="administer-a-report-server-database-ssrs-native-mode"></a><span data-ttu-id="e6b81-102">管理報表伺服器資料庫 (SSRS 原生模式)</span><span class="sxs-lookup"><span data-stu-id="e6b81-102">Administer a Report Server Database (SSRS Native Mode)</span></span>
  <span data-ttu-id="e6b81-103">[!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] 部署會使用兩個 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 關聯式資料庫供內部儲存之用。</span><span class="sxs-lookup"><span data-stu-id="e6b81-103">A [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] deployment uses two [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] relational databases for internal storage.</span></span> <span data-ttu-id="e6b81-104">根據預設，資料庫是命名為 ReportServer 和 ReportServerTempdb。</span><span class="sxs-lookup"><span data-stu-id="e6b81-104">By default, the databases are named ReportServer and ReportServerTempdb.</span></span> <span data-ttu-id="e6b81-105">ReportServerTempdb 是由主要報表伺服器資料庫所建立，用於儲存暫存資料、工作階段資訊和快取報表。</span><span class="sxs-lookup"><span data-stu-id="e6b81-105">ReportServerTempdb is created with the primary report server database and is used to store temporary data, session information, and cached reports.</span></span>  
  
 <span data-ttu-id="e6b81-106">在 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)]中，資料庫管理工作包含備份與還原報表伺服器資料庫，以及管理用於將敏感性資料加密與解密的加密金鑰。</span><span class="sxs-lookup"><span data-stu-id="e6b81-106">In [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)], database administration tasks include backing up and restoring the report server databases and managing the encryption keys that are used to encrypt and decrypt sensitive data.</span></span>  
  
 <span data-ttu-id="e6b81-107">為了管理報表伺服器資料庫， [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 提供許多工具。</span><span class="sxs-lookup"><span data-stu-id="e6b81-107">To administer the report server databases, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] provides a variety of tools.</span></span>  
  
-   <span data-ttu-id="e6b81-108">若要備份或還原報表伺服器資料庫、移動報表伺服器資料庫，或復原報表伺服器資料庫，您可以使用 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)]、[!INCLUDE[tsql](../../includes/tsql-md.md)] 命令或資料庫命令提示字元公用程式。</span><span class="sxs-lookup"><span data-stu-id="e6b81-108">To back up or restore the report server database, move a report server database, or recover a report server database, you can use [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)], the [!INCLUDE[tsql](../../includes/tsql-md.md)] commands, or the database command prompt utilities.</span></span> <span data-ttu-id="e6b81-109">如需指示，請參閱《SQL Server 線上叢書》中的[將報表伺服器資料庫移至其他電腦 &#40;SSRS 原生模式&#41;](moving-the-report-server-databases-to-another-computer-ssrs-native-mode.md)。</span><span class="sxs-lookup"><span data-stu-id="e6b81-109">For instructions, see [Moving the Report Server Databases to Another Computer &#40;SSRS Native Mode&#41;](moving-the-report-server-databases-to-another-computer-ssrs-native-mode.md) in SQL Server Books Online.</span></span>  
  
-   <span data-ttu-id="e6b81-110">若要將現有的資料庫內容複製到其他報表伺服器資料庫，您可以附加報表伺服器資料庫的複本，並將這個複本與不同的報表伺服器執行個體一起使用。</span><span class="sxs-lookup"><span data-stu-id="e6b81-110">To copy existing database content to another report server database, you can attach a copy of a report server database and use it with a different report server instance.</span></span> <span data-ttu-id="e6b81-111">或者，您也可以建立並執行使用 SOAP 呼叫的指令碼，在新的資料庫中重新建立報表伺服器內容。</span><span class="sxs-lookup"><span data-stu-id="e6b81-111">Or, you can create and run a script that uses SOAP calls to recreate report server content in a new database.</span></span> <span data-ttu-id="e6b81-112">您可以使用 **rs** 公用程式執行指令碼。</span><span class="sxs-lookup"><span data-stu-id="e6b81-112">You can use the **rs** utility to run the script.</span></span>  
  
-   <span data-ttu-id="e6b81-113">若要管理報表伺服器和報表伺服器資料庫之間的連接，以及找出特定報表伺服器執行個體所使用的資料庫，您可以使用 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)]組態工具中的 [資料庫安裝] 頁面。</span><span class="sxs-lookup"><span data-stu-id="e6b81-113">To manage connections between the report server and report server database, and to find out which database is used for a particular report server instance, you can use Database Setup page in the [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)]Configuration tool.</span></span> <span data-ttu-id="e6b81-114">若要深入了解報表伺服器資料庫的報表伺服器連接，請參閱 [設定報表伺服器資料庫連接 &#40;SSRS 組態管理員&#41;](../../sql-server/install/configure-a-report-server-database-connection-ssrs-configuration-manager.md)。</span><span class="sxs-lookup"><span data-stu-id="e6b81-114">To learn more about the report server connection to the report server database, see [Configure a Report Server Database Connection  &#40;SSRS Configuration Manager&#41;](../../sql-server/install/configure-a-report-server-database-connection-ssrs-configuration-manager.md).</span></span>  
  
## <a name="sql-server-login-and-database-permissions"></a><span data-ttu-id="e6b81-115">SQL Server 登入和資料庫的權限</span><span class="sxs-lookup"><span data-stu-id="e6b81-115">SQL Server Login and Database Permissions</span></span>  
 <span data-ttu-id="e6b81-116">報表伺服器資料庫可供報表伺服器在內部使用。</span><span class="sxs-lookup"><span data-stu-id="e6b81-116">The report server databases are used internally by the report server.</span></span> <span data-ttu-id="e6b81-117">任何一個資料庫的連接都是由報表伺服器服務所建立的。</span><span class="sxs-lookup"><span data-stu-id="e6b81-117">Connections to either database are made by the Report Server service.</span></span> <span data-ttu-id="e6b81-118">您可以使用 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] 組態工具來設定報表伺服器資料庫的報表伺服器連接。</span><span class="sxs-lookup"><span data-stu-id="e6b81-118">You use the [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] Configuration tool to configure the report server connection to the report server database.</span></span>  
  
 <span data-ttu-id="e6b81-119">資料庫之報表伺服器連接的認證可以是服務帳戶、Windows 本機或網域使用者帳戶，或 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 資料庫使用者。</span><span class="sxs-lookup"><span data-stu-id="e6b81-119">Credentials for the report server connection to the database can be the service account, a Windows local or domain user account, or a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database user.</span></span> <span data-ttu-id="e6b81-120">您必須針對連接選擇現有的帳戶。 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] 不會自動為您建立帳戶。</span><span class="sxs-lookup"><span data-stu-id="e6b81-120">You must choose an existing account for the connection; [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] does not create accounts for you.</span></span>  
  
 <span data-ttu-id="e6b81-121">系統會針對您指定的帳戶自動建立報表伺服器資料庫的 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 登入。</span><span class="sxs-lookup"><span data-stu-id="e6b81-121">A [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] login to the report server database is created for you automatically for the account you specify.</span></span>  
  
 <span data-ttu-id="e6b81-122">此外，系統也會自動設定資料庫的權限。</span><span class="sxs-lookup"><span data-stu-id="e6b81-122">Permissions to the database are also configured automatically.</span></span> <span data-ttu-id="e6b81-123">Reporting Services 組態工具會將帳戶或資料庫使用者指派至報表伺服器資料庫的 `Public` 和 `RSExecRole` 角色。</span><span class="sxs-lookup"><span data-stu-id="e6b81-123">The Reporting Services Configuration tool will assign the account or database user to the `Public` and `RSExecRole` roles for the report server databases.</span></span> <span data-ttu-id="e6b81-124">`RSExecRole` 提供用來存取資料庫資料表及執行預存程序的權限。</span><span class="sxs-lookup"><span data-stu-id="e6b81-124">The `RSExecRole` provides permissions for accessing the database tables and for executing stored procedures.</span></span> <span data-ttu-id="e6b81-125">`RSExecRole`當您建立報表伺服器資料庫時，會在 master 和 msdb 中建立。</span><span class="sxs-lookup"><span data-stu-id="e6b81-125">The `RSExecRole` is created in master and msdb when you create the report server database.</span></span> <span data-ttu-id="e6b81-126">`RSExecRole` 是報表伺服器資料庫之 `db_owner` 角色的成員，可讓報表伺服器在支援自動升級程序的情況下更新自己的結構描述。</span><span class="sxs-lookup"><span data-stu-id="e6b81-126">The `RSExecRole` is a member of the `db_owner` role for the report server databases, allowing the report server to update its own schema in support of an auto-upgrade process.</span></span>  
  
## <a name="naming-conventions-for-the-report-server-databases"></a><span data-ttu-id="e6b81-127">報表伺服器資料庫的命名慣例</span><span class="sxs-lookup"><span data-stu-id="e6b81-127">Naming Conventions for the Report Server Databases</span></span>  
 <span data-ttu-id="e6b81-128">建立主要資料庫時，資料庫的名稱必須遵循為 [資料庫識別碼](../../relational-databases/databases/database-identifiers.md)指定的規則。</span><span class="sxs-lookup"><span data-stu-id="e6b81-128">When creating the primary database, the name of the database must follow the rules specified for [Database Identifiers](../../relational-databases/databases/database-identifiers.md).</span></span> <span data-ttu-id="e6b81-129">暫存資料庫名稱必須與主要報表伺服器資料庫的名稱相同，但要加上 Tempdb 後置詞。</span><span class="sxs-lookup"><span data-stu-id="e6b81-129">The temporary database name always uses the same name as the primary report server database but with a Tempdb suffix.</span></span> <span data-ttu-id="e6b81-130">您不能將暫存資料庫命名為不同的名稱。</span><span class="sxs-lookup"><span data-stu-id="e6b81-130">You cannot choose a different name for the temporary database.</span></span>  
  
 <span data-ttu-id="e6b81-131">不支援重新命名報表伺服器資料庫，因為報表伺服器資料庫是被視為內部元件，</span><span class="sxs-lookup"><span data-stu-id="e6b81-131">Renaming a report server database is not supported because the report server databases are considered internal components.</span></span> <span data-ttu-id="e6b81-132">如果重新命名報表伺服器資料庫將會發生錯誤。</span><span class="sxs-lookup"><span data-stu-id="e6b81-132">Renaming the report server databases causes errors to occur.</span></span> <span data-ttu-id="e6b81-133">特別是，如果重新命名主要資料庫，將會出現錯誤訊息，說明資料庫名稱未同步。如果您重新命名 ReportServerTempdb 資料庫，稍後執行報表時就會發生下列內部錯誤：</span><span class="sxs-lookup"><span data-stu-id="e6b81-133">Specifically, if you rename the primary database, an error message explains that the database names are out of sync. If you rename the ReportServerTempdb database, the following internal error occurs later when you run reports:</span></span>  
  
 <span data-ttu-id="e6b81-134">「報表伺服器發生內部錯誤。</span><span class="sxs-lookup"><span data-stu-id="e6b81-134">"An internal error occurred on the report server.</span></span> <span data-ttu-id="e6b81-135">請參閱錯誤記錄以取得更多詳細資料。</span><span class="sxs-lookup"><span data-stu-id="e6b81-135">See the error log for more details.</span></span> <span data-ttu-id="e6b81-136">(rsInternalError)</span><span class="sxs-lookup"><span data-stu-id="e6b81-136">(rsInternalError)</span></span>  
  
 <span data-ttu-id="e6b81-137">無效的物件名稱 'ReportServerTempDB.dbo.PersistedStream'。」</span><span class="sxs-lookup"><span data-stu-id="e6b81-137">Invalid object name 'ReportServerTempDB.dbo.PersistedStream'."</span></span>  
  
 <span data-ttu-id="e6b81-138">發生這個錯誤是因為 ReportServerTempdb 名稱是儲存於內部，以供預存程序執行內部作業之用，</span><span class="sxs-lookup"><span data-stu-id="e6b81-138">This error occurs because the ReportServerTempdb name is stored internally and used by stored procedures to perform internal operations.</span></span> <span data-ttu-id="e6b81-139">如果重新命名此暫存資料庫將會造成預存程序無法正常運作。</span><span class="sxs-lookup"><span data-stu-id="e6b81-139">Renaming the temporary database will prevent the stored procedures from working properly.</span></span>  
  
## <a name="enabling-snapshot-isolation-on-the-report-server-database"></a><span data-ttu-id="e6b81-140">在報表伺服器資料庫上啟用快照集隔離</span><span class="sxs-lookup"><span data-stu-id="e6b81-140">Enabling Snapshot Isolation on the Report Server Database</span></span>  
 <span data-ttu-id="e6b81-141">您無法在報表伺服器資料庫上啟用快照集隔離。</span><span class="sxs-lookup"><span data-stu-id="e6b81-141">You cannot enable snapshot isolation on the report server database.</span></span> <span data-ttu-id="e6b81-142">如已開啟快照隔離，您將會遇到下列錯誤：「選取的報表還無法檢視。</span><span class="sxs-lookup"><span data-stu-id="e6b81-142">If snapshot isolation is turned on, you will encounter the following error: "The selected report is not ready for viewing.</span></span> <span data-ttu-id="e6b81-143">報表仍在轉譯中，或報表快照集無法使用」。</span><span class="sxs-lookup"><span data-stu-id="e6b81-143">The report is still being rendered or a report snapshot is not available."</span></span>  
  
 <span data-ttu-id="e6b81-144">如果您並未刻意啟用快照集隔離，表示可能有另一個應用程式已經設定此屬性，或者 **model** 資料庫可能啟用了快照集隔離，因而導致所有新資料庫都繼承此設定。</span><span class="sxs-lookup"><span data-stu-id="e6b81-144">If you did not purposely enable snapshot isolation, the attribute might have been set by another application or the **model** database might have snapshot isolation enabled, causing all new databases to inherit the setting.</span></span>  
  
 <span data-ttu-id="e6b81-145">若要在報表伺服器上關閉快照集隔離，請啟動 Management Studio、開啟新的查詢視窗、貼上下列指令碼，然後執行：</span><span class="sxs-lookup"><span data-stu-id="e6b81-145">To turn off snapshot isolation on the report server database, start Management Studio, open a new query window, paste and then run the following script:</span></span>  
  
```  
ALTER DATABASE ReportServer  
SET ALLOW_SNAPSHOT_ISOLATION OFF  
ALTER DATABASE ReportServerTempdb  
SET ALLOW_SNAPSHOT_ISOLATION OFF  
ALTER DATABASE ReportServer  
SET READ_COMMITTED_SNAPSHOT OFF  
ALTER DATABASE ReportServerTempDb  
SET READ_COMMITTED_SNAPSHOT OFF  
```  
  
## <a name="about-database-versions"></a><span data-ttu-id="e6b81-146">關於資料庫版本</span><span class="sxs-lookup"><span data-stu-id="e6b81-146">About Database Versions</span></span>  
 <span data-ttu-id="e6b81-147">在 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)]中，沒有提供有關資料庫版本的明確資訊。</span><span class="sxs-lookup"><span data-stu-id="e6b81-147">In [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)], explicit information about the database version is not available.</span></span> <span data-ttu-id="e6b81-148">不過，因為資料庫版本一律與產品版本同步，所以您可以使用產品版本資訊，得知資料庫版本變更的時間。</span><span class="sxs-lookup"><span data-stu-id="e6b81-148">However, because database versions are always synchronized to product versions, you can use product version information to tell when the database version has changed.</span></span> <span data-ttu-id="e6b81-149">的產品版本資訊 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] 是透過記錄檔、所有 SOAP 呼叫的標頭中出現的檔案版本資訊，以及當您連接到報表伺服器 URL (例如，當您將瀏覽器開啟至時所表示 http://localhost/reportserver) 。</span><span class="sxs-lookup"><span data-stu-id="e6b81-149">Product version information for [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] is indicated through file version information that appears in the log files, in the headers of all SOAP calls, and when you connect to the report server URL (for example, when you open a browser to http://localhost/reportserver).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e6b81-150">另請參閱</span><span class="sxs-lookup"><span data-stu-id="e6b81-150">See Also</span></span>  
 <span data-ttu-id="e6b81-151">[Reporting Services 組態管理員 &#40;原生模式&#41;](../../sql-server/install/reporting-services-configuration-manager-native-mode.md) </span><span class="sxs-lookup"><span data-stu-id="e6b81-151">[Reporting Services Configuration Manager &#40;Native Mode&#41;](../../sql-server/install/reporting-services-configuration-manager-native-mode.md) </span></span>  
 <span data-ttu-id="e6b81-152">[建立原生模式報表伺服器資料庫 &#40;SSRS 組態管理員&#41;](../install-windows/ssrs-report-server-create-a-native-mode-report-server-database.md) </span><span class="sxs-lookup"><span data-stu-id="e6b81-152">[Create a Native Mode Report Server Database  &#40;SSRS Configuration Manager&#41;](../install-windows/ssrs-report-server-create-a-native-mode-report-server-database.md) </span></span>  
 <span data-ttu-id="e6b81-153">[設定報表伺服器服務帳戶 &#40;SSRS 組態管理員&#41;](../install-windows/configure-the-report-server-service-account-ssrs-configuration-manager.md) </span><span class="sxs-lookup"><span data-stu-id="e6b81-153">[Configure the Report Server Service Account &#40;SSRS Configuration Manager&#41;](../install-windows/configure-the-report-server-service-account-ssrs-configuration-manager.md) </span></span>  
 <span data-ttu-id="e6b81-154">[設定報表伺服器資料庫連接 &#40;SSRS 組態管理員&#41;](../../sql-server/install/configure-a-report-server-database-connection-ssrs-configuration-manager.md) </span><span class="sxs-lookup"><span data-stu-id="e6b81-154">[Configure a Report Server Database Connection  &#40;SSRS Configuration Manager&#41;](../../sql-server/install/configure-a-report-server-database-connection-ssrs-configuration-manager.md) </span></span>  
 <span data-ttu-id="e6b81-155">[建立報表伺服器資料庫 &#40;SSRS 組態管理員&#41;](../../sql-server/install/create-a-report-server-database-ssrs-configuration-manager.md) </span><span class="sxs-lookup"><span data-stu-id="e6b81-155">[Create a Report Server Database  &#40;SSRS Configuration Manager&#41;](../../sql-server/install/create-a-report-server-database-ssrs-configuration-manager.md) </span></span>  
 <span data-ttu-id="e6b81-156">[Reporting Services 的備份與還原作業](../install-windows/backup-and-restore-operations-for-reporting-services.md) </span><span class="sxs-lookup"><span data-stu-id="e6b81-156">[Backup and Restore Operations for Reporting Services](../install-windows/backup-and-restore-operations-for-reporting-services.md) </span></span>  
 <span data-ttu-id="e6b81-157">[報表伺服器資料庫 &#40;SSRS 原生模式&#41;](report-server-database-ssrs-native-mode.md) </span><span class="sxs-lookup"><span data-stu-id="e6b81-157">[Report Server Database &#40;SSRS Native Mode&#41;](report-server-database-ssrs-native-mode.md) </span></span>  
 <span data-ttu-id="e6b81-158">[Reporting Services 報表伺服器 &#40;原生模式&#41;](reporting-services-report-server-native-mode.md) </span><span class="sxs-lookup"><span data-stu-id="e6b81-158">[Reporting Services Report Server &#40;Native Mode&#41;](reporting-services-report-server-native-mode.md) </span></span>  
 <span data-ttu-id="e6b81-159">[儲存加密的報表伺服器資料 &#40;SSRS 組態管理員&#41;](../install-windows/ssrs-encryption-keys-store-encrypted-report-server-data.md) </span><span class="sxs-lookup"><span data-stu-id="e6b81-159">[Store Encrypted Report Server Data &#40;SSRS Configuration Manager&#41;](../install-windows/ssrs-encryption-keys-store-encrypted-report-server-data.md) </span></span>  
 [<span data-ttu-id="e6b81-160">設定和管理加密金鑰 &#40;SSRS 組態管理員&#41;</span><span class="sxs-lookup"><span data-stu-id="e6b81-160">Configure and Manage Encryption Keys &#40;SSRS Configuration Manager&#41;</span></span>](../install-windows/ssrs-encryption-keys-manage-encryption-keys.md)  
  
  
