---
title: Audit Broker Conversation 事件類別 | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: supportability
ms.topic: conceptual
topic_type:
- apiref
helpviewer_keywords:
- Audit Broker Conversation event class
ms.assetid: d58e3577-e297-42e5-b8fe-206665a75d13
author: stevestein
ms.author: sstein
ms.openlocfilehash: 46c09737aeafffd04f3dc2c129692bbf78d2c096
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87701212"
---
# <a name="audit-broker-conversation-event-class"></a><span data-ttu-id="47f1e-102">Audit Broker 交談事件類別</span><span class="sxs-lookup"><span data-stu-id="47f1e-102">Audit Broker Conversation Event Class</span></span>
  [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="47f1e-103">會建立 **Audit Broker Conversation** 事件，以報告與 Service Broker 對話安全性相關的稽核訊息。</span><span class="sxs-lookup"><span data-stu-id="47f1e-103">creates an **Audit Broker Conversation** event to report audit messages related to Service Broker dialog security.</span></span>  
  
## <a name="audit-broker-conversation-event-class-data-columns"></a><span data-ttu-id="47f1e-104">Audit Broker 交談事件類別的資料行</span><span class="sxs-lookup"><span data-stu-id="47f1e-104">Audit Broker Conversation Event Class Data Columns</span></span>  
  
|<span data-ttu-id="47f1e-105">資料行</span><span class="sxs-lookup"><span data-stu-id="47f1e-105">Data column</span></span>|<span data-ttu-id="47f1e-106">類型</span><span class="sxs-lookup"><span data-stu-id="47f1e-106">Type</span></span>|<span data-ttu-id="47f1e-107">描述</span><span class="sxs-lookup"><span data-stu-id="47f1e-107">Description</span></span>|<span data-ttu-id="47f1e-108">資料行編號</span><span class="sxs-lookup"><span data-stu-id="47f1e-108">Column number</span></span>|<span data-ttu-id="47f1e-109">可篩選</span><span class="sxs-lookup"><span data-stu-id="47f1e-109">Filterable</span></span>|  
|-----------------|----------|-----------------|-------------------|----------------|  
|<span data-ttu-id="47f1e-110">**ApplicationName**</span><span class="sxs-lookup"><span data-stu-id="47f1e-110">**ApplicationName**</span></span>|<span data-ttu-id="47f1e-111">**nvarchar**</span><span class="sxs-lookup"><span data-stu-id="47f1e-111">**nvarchar**</span></span>|<span data-ttu-id="47f1e-112">建立 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]執行個體之連接的用戶端應用程式名稱。</span><span class="sxs-lookup"><span data-stu-id="47f1e-112">The name of the client application that created the connection to an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="47f1e-113">這個資料行會填入應用程式所傳送的值，而非程式的顯示名稱。</span><span class="sxs-lookup"><span data-stu-id="47f1e-113">This column is populated with the values passed by the application rather than the displayed name of the program.</span></span>|<span data-ttu-id="47f1e-114">10</span><span class="sxs-lookup"><span data-stu-id="47f1e-114">10</span></span>|<span data-ttu-id="47f1e-115">是</span><span class="sxs-lookup"><span data-stu-id="47f1e-115">Yes</span></span>|  
|<span data-ttu-id="47f1e-116">**BigintData1**</span><span class="sxs-lookup"><span data-stu-id="47f1e-116">**BigintData1**</span></span>|<span data-ttu-id="47f1e-117">**bigint**</span><span class="sxs-lookup"><span data-stu-id="47f1e-117">**bigint**</span></span>|<span data-ttu-id="47f1e-118">訊息的訊息序號。</span><span class="sxs-lookup"><span data-stu-id="47f1e-118">The message sequence number of the message.</span></span>|<span data-ttu-id="47f1e-119">52</span><span class="sxs-lookup"><span data-stu-id="47f1e-119">52</span></span>|<span data-ttu-id="47f1e-120">否</span><span class="sxs-lookup"><span data-stu-id="47f1e-120">No</span></span>|  
|<span data-ttu-id="47f1e-121">**ClientProcessID**</span><span class="sxs-lookup"><span data-stu-id="47f1e-121">**ClientProcessID**</span></span>|<span data-ttu-id="47f1e-122">**int**</span><span class="sxs-lookup"><span data-stu-id="47f1e-122">**int**</span></span>|<span data-ttu-id="47f1e-123">主機電腦指派給用戶端應用程式執行中處理序的識別碼。</span><span class="sxs-lookup"><span data-stu-id="47f1e-123">The ID assigned by the host computer to the process where the client application is running.</span></span> <span data-ttu-id="47f1e-124">如果用戶端提供處理序識別碼，這個資料行就會擴展。</span><span class="sxs-lookup"><span data-stu-id="47f1e-124">This data column is populated if the client process ID is provided by the client.</span></span>|<span data-ttu-id="47f1e-125">9</span><span class="sxs-lookup"><span data-stu-id="47f1e-125">9</span></span>|<span data-ttu-id="47f1e-126">是</span><span class="sxs-lookup"><span data-stu-id="47f1e-126">Yes</span></span>|  
|<span data-ttu-id="47f1e-127">**DatabaseID**</span><span class="sxs-lookup"><span data-stu-id="47f1e-127">**DatabaseID**</span></span>|<span data-ttu-id="47f1e-128">**int**</span><span class="sxs-lookup"><span data-stu-id="47f1e-128">**int**</span></span>|<span data-ttu-id="47f1e-129">由 USE *database* 陳述式所指定的資料庫識別碼，或者如果沒有針對指定執行個體發出 USE *database* 陳述式，則是預設資料庫的識別碼。</span><span class="sxs-lookup"><span data-stu-id="47f1e-129">The ID of the database specified by the USE *database* statement, or the ID of the default database if no USE *database* statement has been issued for a given instance.</span></span> [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] <span data-ttu-id="47f1e-130">資料行，則 **ServerName** 會顯示資料庫的名稱。</span><span class="sxs-lookup"><span data-stu-id="47f1e-130">displays the name of the database if the **ServerName** data column is captured in the trace and the server is available.</span></span> <span data-ttu-id="47f1e-131">請使用 DB_ID 函數判斷資料庫的值。</span><span class="sxs-lookup"><span data-stu-id="47f1e-131">Determine the value for a database by using the DB_ID function.</span></span>|<span data-ttu-id="47f1e-132">3</span><span class="sxs-lookup"><span data-stu-id="47f1e-132">3</span></span>|<span data-ttu-id="47f1e-133">是</span><span class="sxs-lookup"><span data-stu-id="47f1e-133">Yes</span></span>|  
|<span data-ttu-id="47f1e-134">**錯誤**</span><span class="sxs-lookup"><span data-stu-id="47f1e-134">**Error**</span></span>|<span data-ttu-id="47f1e-135">**int**</span><span class="sxs-lookup"><span data-stu-id="47f1e-135">**int**</span></span>|<span data-ttu-id="47f1e-136">如果此事件報告錯誤，即為 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 錯誤號碼。</span><span class="sxs-lookup"><span data-stu-id="47f1e-136">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] error number, if this event reports an error.</span></span>|<span data-ttu-id="47f1e-137">31</span><span class="sxs-lookup"><span data-stu-id="47f1e-137">31</span></span>|<span data-ttu-id="47f1e-138">否</span><span class="sxs-lookup"><span data-stu-id="47f1e-138">No</span></span>|  
|<span data-ttu-id="47f1e-139">**EventClass**</span><span class="sxs-lookup"><span data-stu-id="47f1e-139">**EventClass**</span></span>|<span data-ttu-id="47f1e-140">**int**</span><span class="sxs-lookup"><span data-stu-id="47f1e-140">**int**</span></span>|<span data-ttu-id="47f1e-141">擷取的事件類別類型。</span><span class="sxs-lookup"><span data-stu-id="47f1e-141">The type of event class captured.</span></span> <span data-ttu-id="47f1e-142">**Audit Broker Conversation** 永遠都是 **158**。</span><span class="sxs-lookup"><span data-stu-id="47f1e-142">Always **158** for **Audit Broker Conversation**.</span></span>|<span data-ttu-id="47f1e-143">27</span><span class="sxs-lookup"><span data-stu-id="47f1e-143">27</span></span>|<span data-ttu-id="47f1e-144">否</span><span class="sxs-lookup"><span data-stu-id="47f1e-144">No</span></span>|  
|<span data-ttu-id="47f1e-145">**EventSubClass**</span><span class="sxs-lookup"><span data-stu-id="47f1e-145">**EventSubClass**</span></span>|<span data-ttu-id="47f1e-146">**int**</span><span class="sxs-lookup"><span data-stu-id="47f1e-146">**int**</span></span>|<span data-ttu-id="47f1e-147">事件子類別的類型，針對每個事件類別提供更詳細的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="47f1e-147">The type of event subclass, providing further information about each event class.</span></span> <span data-ttu-id="47f1e-148">下表列出此事件的事件子類別值。</span><span class="sxs-lookup"><span data-stu-id="47f1e-148">The table below lists the event subclass values for this event.</span></span>|<span data-ttu-id="47f1e-149">21</span><span class="sxs-lookup"><span data-stu-id="47f1e-149">21</span></span>|<span data-ttu-id="47f1e-150">是</span><span class="sxs-lookup"><span data-stu-id="47f1e-150">Yes</span></span>|  
|<span data-ttu-id="47f1e-151">**FileName**</span><span class="sxs-lookup"><span data-stu-id="47f1e-151">**FileName**</span></span>|<span data-ttu-id="47f1e-152">**nvarchar**</span><span class="sxs-lookup"><span data-stu-id="47f1e-152">**nvarchar**</span></span>|<span data-ttu-id="47f1e-153">登入失敗的原因。</span><span class="sxs-lookup"><span data-stu-id="47f1e-153">The reason for the login failure.</span></span> <span data-ttu-id="47f1e-154">如果登入成功，此資料行則為空白。</span><span class="sxs-lookup"><span data-stu-id="47f1e-154">If the login succeeded, this column is empty.</span></span>|<span data-ttu-id="47f1e-155">36</span><span class="sxs-lookup"><span data-stu-id="47f1e-155">36</span></span>|<span data-ttu-id="47f1e-156">否</span><span class="sxs-lookup"><span data-stu-id="47f1e-156">No</span></span>|  
|<span data-ttu-id="47f1e-157">**GUID**</span><span class="sxs-lookup"><span data-stu-id="47f1e-157">**GUID**</span></span>|<span data-ttu-id="47f1e-158">**uniqueidentifier**</span><span class="sxs-lookup"><span data-stu-id="47f1e-158">**uniqueidentifier**</span></span>|<span data-ttu-id="47f1e-159">對話的交談識別碼。</span><span class="sxs-lookup"><span data-stu-id="47f1e-159">The conversation id of the dialog.</span></span> <span data-ttu-id="47f1e-160">此識別碼是以訊息的一部份傳送，並在交談的兩端之間共用。</span><span class="sxs-lookup"><span data-stu-id="47f1e-160">This identifier is transmitted as part of the message, and is shared between both sides of the conversation.</span></span>|<span data-ttu-id="47f1e-161">54</span><span class="sxs-lookup"><span data-stu-id="47f1e-161">54</span></span>|<span data-ttu-id="47f1e-162">否</span><span class="sxs-lookup"><span data-stu-id="47f1e-162">No</span></span>|  
|<span data-ttu-id="47f1e-163">**HostName**</span><span class="sxs-lookup"><span data-stu-id="47f1e-163">**HostName**</span></span>|<span data-ttu-id="47f1e-164">**nvarchar**</span><span class="sxs-lookup"><span data-stu-id="47f1e-164">**nvarchar**</span></span>|<span data-ttu-id="47f1e-165">執行用戶端的電腦名稱。</span><span class="sxs-lookup"><span data-stu-id="47f1e-165">The name of the computer on which the client is running.</span></span> <span data-ttu-id="47f1e-166">這個資料行會在用戶端提供主機名稱時填入。</span><span class="sxs-lookup"><span data-stu-id="47f1e-166">This data column is populated if the host name is provided by the client.</span></span> <span data-ttu-id="47f1e-167">若要判斷主機名稱，請使用 **HOST_NAME** 函數。</span><span class="sxs-lookup"><span data-stu-id="47f1e-167">To determine the host name, use the **HOST_NAME** function.</span></span>|<span data-ttu-id="47f1e-168">8</span><span class="sxs-lookup"><span data-stu-id="47f1e-168">8</span></span>|<span data-ttu-id="47f1e-169">是</span><span class="sxs-lookup"><span data-stu-id="47f1e-169">Yes</span></span>|  
|<span data-ttu-id="47f1e-170">**IntegerData**</span><span class="sxs-lookup"><span data-stu-id="47f1e-170">**IntegerData**</span></span>|<span data-ttu-id="47f1e-171">**int**</span><span class="sxs-lookup"><span data-stu-id="47f1e-171">**int**</span></span>|<span data-ttu-id="47f1e-172">訊息的片段號碼。</span><span class="sxs-lookup"><span data-stu-id="47f1e-172">The fragment number of the message.</span></span>|<span data-ttu-id="47f1e-173">25</span><span class="sxs-lookup"><span data-stu-id="47f1e-173">25</span></span>|<span data-ttu-id="47f1e-174">否</span><span class="sxs-lookup"><span data-stu-id="47f1e-174">No</span></span>|  
|<span data-ttu-id="47f1e-175">**NTDomainName**</span><span class="sxs-lookup"><span data-stu-id="47f1e-175">**NTDomainName**</span></span>|<span data-ttu-id="47f1e-176">**nvarchar**</span><span class="sxs-lookup"><span data-stu-id="47f1e-176">**nvarchar**</span></span>|<span data-ttu-id="47f1e-177">使用者所隸屬的 Windows 網域。</span><span class="sxs-lookup"><span data-stu-id="47f1e-177">The Windows domain to which the user belongs.</span></span>|<span data-ttu-id="47f1e-178">7</span><span class="sxs-lookup"><span data-stu-id="47f1e-178">7</span></span>|<span data-ttu-id="47f1e-179">是</span><span class="sxs-lookup"><span data-stu-id="47f1e-179">Yes</span></span>|  
|<span data-ttu-id="47f1e-180">**NTUserName**</span><span class="sxs-lookup"><span data-stu-id="47f1e-180">**NTUserName**</span></span>|<span data-ttu-id="47f1e-181">**nvarchar**</span><span class="sxs-lookup"><span data-stu-id="47f1e-181">**nvarchar**</span></span>|<span data-ttu-id="47f1e-182">擁有產生此事件之連接的使用者名稱。</span><span class="sxs-lookup"><span data-stu-id="47f1e-182">The name of the user that owns the connection that generated this event.</span></span>|<span data-ttu-id="47f1e-183">6</span><span class="sxs-lookup"><span data-stu-id="47f1e-183">6</span></span>|<span data-ttu-id="47f1e-184">是</span><span class="sxs-lookup"><span data-stu-id="47f1e-184">Yes</span></span>|  
|<span data-ttu-id="47f1e-185">**ObjectId**</span><span class="sxs-lookup"><span data-stu-id="47f1e-185">**ObjectId**</span></span>|<span data-ttu-id="47f1e-186">**int**</span><span class="sxs-lookup"><span data-stu-id="47f1e-186">**int**</span></span>|<span data-ttu-id="47f1e-187">目標服務的使用者識別碼。</span><span class="sxs-lookup"><span data-stu-id="47f1e-187">The user ID of the target service.</span></span>|<span data-ttu-id="47f1e-188">22</span><span class="sxs-lookup"><span data-stu-id="47f1e-188">22</span></span>|<span data-ttu-id="47f1e-189">否</span><span class="sxs-lookup"><span data-stu-id="47f1e-189">No</span></span>|  
|<span data-ttu-id="47f1e-190">**RoleName**</span><span class="sxs-lookup"><span data-stu-id="47f1e-190">**RoleName**</span></span>|<span data-ttu-id="47f1e-191">**nvarchar**</span><span class="sxs-lookup"><span data-stu-id="47f1e-191">**nvarchar**</span></span>|<span data-ttu-id="47f1e-192">交談控制代碼的角色。</span><span class="sxs-lookup"><span data-stu-id="47f1e-192">The role of the conversation handle.</span></span> <span data-ttu-id="47f1e-193">為 **initiator** 或 **target**其中一個角色。</span><span class="sxs-lookup"><span data-stu-id="47f1e-193">This is either **initiator** or **target**.</span></span>|<span data-ttu-id="47f1e-194">38</span><span class="sxs-lookup"><span data-stu-id="47f1e-194">38</span></span>|<span data-ttu-id="47f1e-195">否</span><span class="sxs-lookup"><span data-stu-id="47f1e-195">No</span></span>|  
|<span data-ttu-id="47f1e-196">**ServerName**</span><span class="sxs-lookup"><span data-stu-id="47f1e-196">**ServerName**</span></span>|<span data-ttu-id="47f1e-197">**nvarchar**</span><span class="sxs-lookup"><span data-stu-id="47f1e-197">**nvarchar**</span></span>|<span data-ttu-id="47f1e-198">正在追蹤之 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 執行個體的名稱。</span><span class="sxs-lookup"><span data-stu-id="47f1e-198">The name of the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] being traced.</span></span>|<span data-ttu-id="47f1e-199">26</span><span class="sxs-lookup"><span data-stu-id="47f1e-199">26</span></span>|<span data-ttu-id="47f1e-200">否</span><span class="sxs-lookup"><span data-stu-id="47f1e-200">No</span></span>|  
|<span data-ttu-id="47f1e-201">**Severity**</span><span class="sxs-lookup"><span data-stu-id="47f1e-201">**Severity**</span></span>|<span data-ttu-id="47f1e-202">**int**</span><span class="sxs-lookup"><span data-stu-id="47f1e-202">**int**</span></span>|<span data-ttu-id="47f1e-203">如果此事件報告錯誤，即為 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 錯誤嚴重性。</span><span class="sxs-lookup"><span data-stu-id="47f1e-203">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] error severity, if this event reports an error.</span></span>|<span data-ttu-id="47f1e-204">29</span><span class="sxs-lookup"><span data-stu-id="47f1e-204">29</span></span>|<span data-ttu-id="47f1e-205">否</span><span class="sxs-lookup"><span data-stu-id="47f1e-205">No</span></span>|  
|<span data-ttu-id="47f1e-206">**SPID**</span><span class="sxs-lookup"><span data-stu-id="47f1e-206">**SPID**</span></span>|<span data-ttu-id="47f1e-207">**int**</span><span class="sxs-lookup"><span data-stu-id="47f1e-207">**int**</span></span>|<span data-ttu-id="47f1e-208">由 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 指派給用戶端關聯之處理序的伺服器處理序識別碼。</span><span class="sxs-lookup"><span data-stu-id="47f1e-208">The server process ID assigned by [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] to the process associated with the client.</span></span>|<span data-ttu-id="47f1e-209">12</span><span class="sxs-lookup"><span data-stu-id="47f1e-209">12</span></span>|<span data-ttu-id="47f1e-210">是</span><span class="sxs-lookup"><span data-stu-id="47f1e-210">Yes</span></span>|  
|<span data-ttu-id="47f1e-211">**StartTime**</span><span class="sxs-lookup"><span data-stu-id="47f1e-211">**StartTime**</span></span>|<span data-ttu-id="47f1e-212">**datetime**</span><span class="sxs-lookup"><span data-stu-id="47f1e-212">**datetime**</span></span>|<span data-ttu-id="47f1e-213">事件啟動的時間 (如果有的話)。</span><span class="sxs-lookup"><span data-stu-id="47f1e-213">The time at which the event started, when available.</span></span>|<span data-ttu-id="47f1e-214">14</span><span class="sxs-lookup"><span data-stu-id="47f1e-214">14</span></span>|<span data-ttu-id="47f1e-215">是</span><span class="sxs-lookup"><span data-stu-id="47f1e-215">Yes</span></span>|  
|<span data-ttu-id="47f1e-216">**State**</span><span class="sxs-lookup"><span data-stu-id="47f1e-216">**State**</span></span>|<span data-ttu-id="47f1e-217">**int**</span><span class="sxs-lookup"><span data-stu-id="47f1e-217">**int**</span></span>|<span data-ttu-id="47f1e-218">指出產生事件的 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 原始程式碼內的位置。</span><span class="sxs-lookup"><span data-stu-id="47f1e-218">Indicates the location within the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] source code that produced the event.</span></span> <span data-ttu-id="47f1e-219">每個可能產生此事件的位置都有不同的狀態碼。</span><span class="sxs-lookup"><span data-stu-id="47f1e-219">Each location that may produce this event has a different state code.</span></span> <span data-ttu-id="47f1e-220">Microsoft 支援工程師可以使用此狀態碼來尋找產生事件的位置。</span><span class="sxs-lookup"><span data-stu-id="47f1e-220">A Microsoft support engineer can use this state code to find where the event was produced.</span></span>|<span data-ttu-id="47f1e-221">30</span><span class="sxs-lookup"><span data-stu-id="47f1e-221">30</span></span>|<span data-ttu-id="47f1e-222">否</span><span class="sxs-lookup"><span data-stu-id="47f1e-222">No</span></span>|  
|<span data-ttu-id="47f1e-223">**TextData**</span><span class="sxs-lookup"><span data-stu-id="47f1e-223">**TextData**</span></span>|<span data-ttu-id="47f1e-224">**ntext**</span><span class="sxs-lookup"><span data-stu-id="47f1e-224">**ntext**</span></span>|<span data-ttu-id="47f1e-225">對於錯誤，包含描述失敗原因的訊息。</span><span class="sxs-lookup"><span data-stu-id="47f1e-225">For errors, contains a message that describes the reason for the failure.</span></span> <span data-ttu-id="47f1e-226">下列其中一個值：</span><span class="sxs-lookup"><span data-stu-id="47f1e-226">One of the following values:</span></span><br /><br /> <span data-ttu-id="47f1e-227">**找不到憑證**。</span><span class="sxs-lookup"><span data-stu-id="47f1e-227">**Cert not found**.</span></span> <span data-ttu-id="47f1e-228">為對話方塊通訊協定安全性所指定的使用者沒有憑證。</span><span class="sxs-lookup"><span data-stu-id="47f1e-228">The user specified for dialog protocol security has no certificate.</span></span><br /><br /> <span data-ttu-id="47f1e-229">**不在有效的時間週期內**。</span><span class="sxs-lookup"><span data-stu-id="47f1e-229">**Not in valid time period**.</span></span> <span data-ttu-id="47f1e-230">為對話通訊協定安全性所指定的使用者擁有憑證，但是憑證已過期。</span><span class="sxs-lookup"><span data-stu-id="47f1e-230">The user specified for dialog protocol security has a certificate, but the certificate has expired.</span></span><br /><br /> <span data-ttu-id="47f1e-231">**憑證太大無法進行記憶體配置**。</span><span class="sxs-lookup"><span data-stu-id="47f1e-231">**Cert too large for memory allocation**.</span></span> <span data-ttu-id="47f1e-232">為對話通訊協定安全性所指定的使用者擁有憑證，但是憑證太大。</span><span class="sxs-lookup"><span data-stu-id="47f1e-232">The user specified for dialog protocol security has a certificate, but the certificate is too large.</span></span> <span data-ttu-id="47f1e-233">Service Broker 支援的憑證大小上限為 32,768 位元組。</span><span class="sxs-lookup"><span data-stu-id="47f1e-233">The maximum certificate size that Service Broker supports is 32,768 bytes.</span></span><br /><br /> <span data-ttu-id="47f1e-234">**找不到私密金鑰**。</span><span class="sxs-lookup"><span data-stu-id="47f1e-234">**Private key not found**.</span></span> <span data-ttu-id="47f1e-235">為對話通訊協定安全性所指定的使用者擁有憑證，但是沒有與該憑證關聯的私密金鑰。</span><span class="sxs-lookup"><span data-stu-id="47f1e-235">The user specified for dialog protocol security has a certificate, but there is no private key associated with that certificate.</span></span><br /><br /> <span data-ttu-id="47f1e-236">**憑證的私密金鑰大小與密碼編譯提供者不相容**。</span><span class="sxs-lookup"><span data-stu-id="47f1e-236">**The cert's private key size is incompatible with the crypto provider**.</span></span> <span data-ttu-id="47f1e-237">憑證的私密金鑰大小太大而無法成功處理。</span><span class="sxs-lookup"><span data-stu-id="47f1e-237">The private key for the certificate has a key size that cannot be successfully processed.</span></span> <span data-ttu-id="47f1e-238">私密金鑰大小必須是 64 位元組的倍數。</span><span class="sxs-lookup"><span data-stu-id="47f1e-238">The private key size must be a multiple of 64 bytes.</span></span><br /><br /> <span data-ttu-id="47f1e-239">**憑證的公開金鑰大小與密碼編譯提供者不相容**。</span><span class="sxs-lookup"><span data-stu-id="47f1e-239">**The cert's public key size is incompatible with the crypto provider**.</span></span> <span data-ttu-id="47f1e-240">憑證的公開金鑰大小太大而無法成功處理。</span><span class="sxs-lookup"><span data-stu-id="47f1e-240">The public key for the certificate has a key size that cannot be successfully processed.</span></span> <span data-ttu-id="47f1e-241">公開金鑰大小必須是 64 位元組的倍數。</span><span class="sxs-lookup"><span data-stu-id="47f1e-241">The public key size must be a multiple of 64 bytes.</span></span><br /><br /> <span data-ttu-id="47f1e-242">**憑證的私密金鑰大小與加密金鑰交換金鑰不相容**。</span><span class="sxs-lookup"><span data-stu-id="47f1e-242">**The cert's private key size is incompatible with the encrypted key exchange key**.</span></span> <span data-ttu-id="47f1e-243">在金鑰交換金鑰中所指定的金鑰大小與憑證的私密金鑰大小不相符。</span><span class="sxs-lookup"><span data-stu-id="47f1e-243">The key size specified in the key exchange key does not match the size of the private key for the certificate.</span></span> <span data-ttu-id="47f1e-244">這通常表示在遠端電腦上的憑證與資料庫中的憑證不相符。</span><span class="sxs-lookup"><span data-stu-id="47f1e-244">This generally indicates that the certificate on the remote computer does not match the certificate in the database.</span></span><br /><br /> <span data-ttu-id="47f1e-245">**憑證的公開金鑰大小與安全性標頭的簽章不相容**。</span><span class="sxs-lookup"><span data-stu-id="47f1e-245">**The cert's public key size is incompatible with the security header's signature**.</span></span> <span data-ttu-id="47f1e-246">安全性標頭包含無法使用憑證的公開金鑰進行驗證的簽章。</span><span class="sxs-lookup"><span data-stu-id="47f1e-246">The security header contains a signature that cannot be validated with the certificate's public key.</span></span> <span data-ttu-id="47f1e-247">這通常表示在遠端電腦上的憑證與資料庫中的憑證不相符。</span><span class="sxs-lookup"><span data-stu-id="47f1e-247">This generally indicates that the certificate on the remote computer does not match the certificate in the database.</span></span>|<span data-ttu-id="47f1e-248">1</span><span class="sxs-lookup"><span data-stu-id="47f1e-248">1</span></span>|<span data-ttu-id="47f1e-249">是</span><span class="sxs-lookup"><span data-stu-id="47f1e-249">Yes</span></span>|  
  
 <span data-ttu-id="47f1e-250">下表列出此事件類別的子類別值。</span><span class="sxs-lookup"><span data-stu-id="47f1e-250">The table below lists the subclass values for this event class.</span></span>  
  
|<span data-ttu-id="47f1e-251">ID</span><span class="sxs-lookup"><span data-stu-id="47f1e-251">ID</span></span>|<span data-ttu-id="47f1e-252">子類別</span><span class="sxs-lookup"><span data-stu-id="47f1e-252">Subclass</span></span>|<span data-ttu-id="47f1e-253">描述</span><span class="sxs-lookup"><span data-stu-id="47f1e-253">Description</span></span>|  
|--------|--------------|-----------------|  
|<span data-ttu-id="47f1e-254">1</span><span class="sxs-lookup"><span data-stu-id="47f1e-254">1</span></span>|<span data-ttu-id="47f1e-255">沒有安全性標頭</span><span class="sxs-lookup"><span data-stu-id="47f1e-255">No Security Header</span></span>|<span data-ttu-id="47f1e-256">在安全交談期間，Service Broker 收到不包含工作階段金鑰的訊息。</span><span class="sxs-lookup"><span data-stu-id="47f1e-256">During a secure conversation, Service Broker received a message that did not contain a session key.</span></span> <span data-ttu-id="47f1e-257">一旦建立安全交談，對話通訊協定需要交談中的所有訊息都包含工作階段金鑰。</span><span class="sxs-lookup"><span data-stu-id="47f1e-257">Once a secure conversation is established, the dialog protocol requires that all messages in the conversation contain a session key.</span></span>|  
|<span data-ttu-id="47f1e-258">2</span><span class="sxs-lookup"><span data-stu-id="47f1e-258">2</span></span>|<span data-ttu-id="47f1e-259">沒有憑證</span><span class="sxs-lookup"><span data-stu-id="47f1e-259">No Certificate</span></span>|<span data-ttu-id="47f1e-260">Service Broker 在交談中找不到其中一個參與者的可用憑證。</span><span class="sxs-lookup"><span data-stu-id="47f1e-260">Service Broker could not locate a usable certificate for one of the participants in the conversation.</span></span> <span data-ttu-id="47f1e-261">為了保護交談的安全，資料庫必須包含同時針對交談的寄件者與收件者的憑證。</span><span class="sxs-lookup"><span data-stu-id="47f1e-261">To secure a conversation, the database must contain a certificate for both the sender and the recipient of the conversation.</span></span>|  
|<span data-ttu-id="47f1e-262">3</span><span class="sxs-lookup"><span data-stu-id="47f1e-262">3</span></span>|<span data-ttu-id="47f1e-263">無效的簽章</span><span class="sxs-lookup"><span data-stu-id="47f1e-263">Invalid Signature</span></span>|<span data-ttu-id="47f1e-264">Broker 無法使用寄件者憑證中的公開金鑰來驗證寄件者所提供的訊息簽章。</span><span class="sxs-lookup"><span data-stu-id="47f1e-264">Broker could not verify the message signature supplied by the sender using the public key in the sender's certificate.</span></span> <span data-ttu-id="47f1e-265">這可能表示訊息已經損毀、訊息已經遭到竄改、遠端服務與本機服務並未以相同的使用者憑證設定，或是憑證已過期。</span><span class="sxs-lookup"><span data-stu-id="47f1e-265">This may indicate that the message is corrupt, that the message has been tampered with, that the remote service and the local service are not configured with the same user certificate, or that the certificate is out of date.</span></span>|  
|<span data-ttu-id="47f1e-266">4</span><span class="sxs-lookup"><span data-stu-id="47f1e-266">4</span></span>|<span data-ttu-id="47f1e-267">以目標失敗執行</span><span class="sxs-lookup"><span data-stu-id="47f1e-267">Run As Target Failure</span></span>|<span data-ttu-id="47f1e-268">目的地使用者沒有目的地佇列的接收權限。</span><span class="sxs-lookup"><span data-stu-id="47f1e-268">The destination user does not have receive permissions on the destination queue.</span></span> <span data-ttu-id="47f1e-269">為了防止未經授權的使用者接收訊息，不論起始使用者是否擁有將訊息加入佇列的權限，Service Broker 並未將含有無法接收佇列的目的地使用者之訊息加入佇列。</span><span class="sxs-lookup"><span data-stu-id="47f1e-269">To prevent unauthorized users from receiving messages, Service Broker does not enqueue messages with a destination user that cannot receive from the queue, regardless of whether the initiating user has permission to enqueue messages.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="47f1e-270">另請參閱</span><span class="sxs-lookup"><span data-stu-id="47f1e-270">See Also</span></span>  
 [<span data-ttu-id="47f1e-271">SQL Server Service Broker</span><span class="sxs-lookup"><span data-stu-id="47f1e-271">SQL Server Service Broker</span></span>](../../database-engine/configure-windows/sql-server-service-broker.md)  
  
  
