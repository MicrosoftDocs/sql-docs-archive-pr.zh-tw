---
title: CLR 整合代碼啟用安全性 |Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: clr
ms.topic: reference
helpviewer_keywords:
- UNSAFE assemblies
- permissions [CLR integration]
- common language runtime [SQL Server], security
- SAFE assemblies
- code access security [CLR integration]
- EXTERNAL_ACCESS assemblies
ms.assetid: 2111cfe0-d5e0-43b1-93c3-e994ac0e9729
author: rothja
ms.author: jroth
ms.openlocfilehash: 75b283da2760b39349351802a83caae04e546c06
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87594582"
---
# <a name="clr-integration-code-access-security"></a><span data-ttu-id="2877e-102">CLR 整合程式碼存取安全性</span><span class="sxs-lookup"><span data-stu-id="2877e-102">CLR Integration Code Access Security</span></span>
  <span data-ttu-id="2877e-103">Common Language Runtime (CLR) 支援稱為 Managed 程式碼之程式碼存取安全性的安全性模型。</span><span class="sxs-lookup"><span data-stu-id="2877e-103">The common language runtime (CLR) supports a security model called code access security for managed code.</span></span> <span data-ttu-id="2877e-104">在此模型中，將會根據程式碼的識別來授與權限給組件。</span><span class="sxs-lookup"><span data-stu-id="2877e-104">In this model, permissions are granted to assemblies based on the identity of the code.</span></span> <span data-ttu-id="2877e-105">如需詳細資訊，請參閱 .NET Framework 軟體開發套件中的＜程式碼存取安全性＞一節。</span><span class="sxs-lookup"><span data-stu-id="2877e-105">For more information, see the "Code Access Security" section in the .NET Framework software development kit.</span></span>  
  
 <span data-ttu-id="2877e-106">下列三個不同的位置會定義可決定授與給組件之權限的安全性原則：</span><span class="sxs-lookup"><span data-stu-id="2877e-106">The security policy that determines the permissions granted to assemblies is defined in three different places:</span></span>  
  
-   <span data-ttu-id="2877e-107">電腦原則：此原則適用於在已安裝 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 之電腦中執行的所有 Managed 程式碼。</span><span class="sxs-lookup"><span data-stu-id="2877e-107">Machine policy: This is the policy in effect for all managed code running in the machine on which [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] is installed.</span></span>  
  
-   <span data-ttu-id="2877e-108">使用者原則：此原則適用於由處理序主控的 Managed 程式碼。</span><span class="sxs-lookup"><span data-stu-id="2877e-108">User policy: This is the policy in effect for managed code hosted by a process.</span></span> <span data-ttu-id="2877e-109">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]服務正在執行。</span><span class="sxs-lookup"><span data-stu-id="2877e-109">For [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] service is running.</span></span>  
  
-   <span data-ttu-id="2877e-110">主機原則：此原則由 CLR 的主機 (在此案例中為 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]) 所設定，適用於在該主機中執行的 Managed 程式碼。</span><span class="sxs-lookup"><span data-stu-id="2877e-110">Host policy: This is the policy set up by the host of the CLR (in this case, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]) that is in effect for managed code running in that host.</span></span>  
  
 <span data-ttu-id="2877e-111">CLR 所支援的程式碼存取安全性機制是根據執行階段可以主控完全信任和部分信任程式碼的假設。</span><span class="sxs-lookup"><span data-stu-id="2877e-111">The code access security mechanism supported by the CLR is based on the assumption that the runtime can host both fully trusted and partially trusted code.</span></span> <span data-ttu-id="2877e-112">受到 CLR 代碼啟用安全性保護的資源，通常是由 managed 應用程式開發介面所包裝，在允許存取資源之前，會先 requirethe 對應的許可權。</span><span class="sxs-lookup"><span data-stu-id="2877e-112">The resources that are protected by CLR code access security are typically wrapped by managed application programming interfaces that requirethe corresponding permission before allowing access to the resource.</span></span> <span data-ttu-id="2877e-113">只有當呼叫堆疊中的元件層級)  (的所有呼叫端都具有對應的資源許可權時，才會滿足 demandfor 許可權。</span><span class="sxs-lookup"><span data-stu-id="2877e-113">The demandfor the permission is satisfied only if all the callers (at the assembly level) in the call stack have the corresponding resource permission.</span></span>  
  
 <span data-ttu-id="2877e-114">在內部執行時授與給 managed 程式碼的代碼啟用安全性許可權集合 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] ，會將一組許可權授與載入的元件 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] ，使用者和電腦層級原則可能會進一步限制指定給使用者程式碼的最終許可權集合。</span><span class="sxs-lookup"><span data-stu-id="2877e-114">The set of code access security permissions that are granted to managed code when running inside [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] grants a set of permissions to an assembly loaded in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], the eventual set of permissions given to user code may be restricted further by the user and machine-level policies.</span></span>  
  
## <a name="sql-server-host-policy-level-permission-sets"></a><span data-ttu-id="2877e-115">SQL Server 主機原則層級權限集合</span><span class="sxs-lookup"><span data-stu-id="2877e-115">SQL Server Host Policy Level Permission Sets</span></span>  
 <span data-ttu-id="2877e-116">由 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 主機原則層級授與組件的程式碼存取安全性權限集合是由建立組件時指定的權限集合所決定。</span><span class="sxs-lookup"><span data-stu-id="2877e-116">The set of code access security permissions granted to assemblies by the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] host policy level is determined by the permission set specified when creating the assembly.</span></span> <span data-ttu-id="2877e-117">有三個許可權集合： `SAFE` `EXTERNAL_ACCESS` 和 `UNSAFE` (使用[CREATE ASSEMBLY &#40;transact-sql&#41;](/sql/t-sql/statements/create-assembly-transact-sql)) 的**PERMISSION_SET**選項來指定。</span><span class="sxs-lookup"><span data-stu-id="2877e-117">There are three permission sets: `SAFE`, `EXTERNAL_ACCESS` and `UNSAFE` (specified using the **PERMISSION_SET** option of[CREATE ASSEMBLY &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-assembly-transact-sql)).</span></span>  
  
 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]<span data-ttu-id="2877e-118">.</span><span class="sxs-lookup"><span data-stu-id="2877e-118">.</span></span> <span data-ttu-id="2877e-119">此原則不適用於當 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 建立 CLR 執行個體時所生效的預設應用程式網域。</span><span class="sxs-lookup"><span data-stu-id="2877e-119">This policy is not meant for the default application domain that would be in effect when [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] creates an instance of the CLR.</span></span>  
  
 <span data-ttu-id="2877e-120">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]系統元件的 fixedpolicy，以及使用者元件的使用者指定原則。</span><span class="sxs-lookup"><span data-stu-id="2877e-120">The [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] fixedpolicy for system assemblies and user-specified policy for user assemblies.</span></span>  
  
 <span data-ttu-id="2877e-121">CLR 組件及 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 系統組件的固定原則會授與它們完全的信任。</span><span class="sxs-lookup"><span data-stu-id="2877e-121">The fixed policy for CLR assemblies and [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] system assemblies grants them full trust.</span></span>  
  
 <span data-ttu-id="2877e-122">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 主機原則之使用者指定的部分是根據指定每個組件之下列其中一個權限值區 (共三種) 的組件擁有者。</span><span class="sxs-lookup"><span data-stu-id="2877e-122">The user-specified portion of the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] host policy is based on the assembly owner specifying one of three permission buckets for each assembly.</span></span> <span data-ttu-id="2877e-123">如需底下所列之安全性權限的詳細資訊，請參閱 .NET Framework SDK。</span><span class="sxs-lookup"><span data-stu-id="2877e-123">For more information about the security permissions listed below, see the .NET Framework SDK.</span></span>  
  
### <a name="safe"></a><span data-ttu-id="2877e-124">SAFE</span><span class="sxs-lookup"><span data-stu-id="2877e-124">SAFE</span></span>  
 <span data-ttu-id="2877e-125">僅允許內部計算和本機資料存取。</span><span class="sxs-lookup"><span data-stu-id="2877e-125">Only internal computation and local data access are allowed.</span></span> <span data-ttu-id="2877e-126">`SAFE` 是限制最嚴格的權限集合。</span><span class="sxs-lookup"><span data-stu-id="2877e-126">`SAFE` is the most restrictive permission set.</span></span> <span data-ttu-id="2877e-127">具有 `SAFE` 權限之組件所執行的程式碼無法存取外部系統資源，例如檔案、網路、環境變數或登錄。</span><span class="sxs-lookup"><span data-stu-id="2877e-127">Code executed by an assembly with `SAFE` permissions cannot access external system resources such as files, the network, environment variables, or the registry.</span></span>  
  
 <span data-ttu-id="2877e-128">`SAFE` 組件具有下列權限和值：</span><span class="sxs-lookup"><span data-stu-id="2877e-128">`SAFE` assemblies have the following permissions and values:</span></span>  
  
|<span data-ttu-id="2877e-129">權限</span><span class="sxs-lookup"><span data-stu-id="2877e-129">Permission</span></span>|<span data-ttu-id="2877e-130">值/描述</span><span class="sxs-lookup"><span data-stu-id="2877e-130">Value(s)/Description</span></span>|  
|----------------|-----------------------------|  
|`SecurityPermission`|<span data-ttu-id="2877e-131">`Execution:` 執行 Managed 程式碼的權限。</span><span class="sxs-lookup"><span data-stu-id="2877e-131">`Execution:` Permission to execute managed code.</span></span>|  
|`SqlClientPermission`|<span data-ttu-id="2877e-132">`Context connection = true`、`context connection = yes`：只能使用內容連接，而且連接字串只能指定 "context connection=true" 或 "context connection=yes" 的值。</span><span class="sxs-lookup"><span data-stu-id="2877e-132">`Context connection = true`, `context connection = yes`: Only the context-connection can be used and the connection string can only specify a value of "context connection=true" or "context connection=yes".</span></span><br /><br /> <span data-ttu-id="2877e-133">**AllowBlankPassword = false：** 不允許空白密碼。</span><span class="sxs-lookup"><span data-stu-id="2877e-133">**AllowBlankPassword = false:**  Blank passwords are not permitted.</span></span>|  
  
### <a name="external_access"></a><span data-ttu-id="2877e-134">EXTERNAL_ACCESS</span><span class="sxs-lookup"><span data-stu-id="2877e-134">EXTERNAL_ACCESS</span></span>  
 <span data-ttu-id="2877e-135">EXTERNAL_ACCESS 元件具有與元件相同的許可權 `SAFE` ，而且能夠存取外部系統資源，例如檔案、網路、環境變數和登錄。</span><span class="sxs-lookup"><span data-stu-id="2877e-135">EXTERNAL_ACCESS assemblies have the same permissions as `SAFE` assemblies, with the additional ability to access external system resources such as files, networks, environmental variables, and the registry.</span></span>  
  
 <span data-ttu-id="2877e-136">`EXTERNAL_ACCESS` 組件也具有下列權限和值：</span><span class="sxs-lookup"><span data-stu-id="2877e-136">`EXTERNAL_ACCESS` assemblies also have the following permissions and values:</span></span>  
  
|<span data-ttu-id="2877e-137">權限</span><span class="sxs-lookup"><span data-stu-id="2877e-137">Permission</span></span>|<span data-ttu-id="2877e-138">值/描述</span><span class="sxs-lookup"><span data-stu-id="2877e-138">Value(s)/Description</span></span>|  
|----------------|-----------------------------|  
|`DistributedTransactionPermission`|<span data-ttu-id="2877e-139">`Unrestricted:`允許分散式交易。</span><span class="sxs-lookup"><span data-stu-id="2877e-139">`Unrestricted:` Distributed transactions are allowed.</span></span>|  
|`DNSPermission`|<span data-ttu-id="2877e-140">`Unrestricted:`從功能變數名稱伺服器要求資訊的許可權。</span><span class="sxs-lookup"><span data-stu-id="2877e-140">`Unrestricted:` Permission to request information from Domain Name Servers.</span></span>|  
|`EnvironmentPermission`|<span data-ttu-id="2877e-141">`Unrestricted:` 允許對系統和使用者環境變數的完整存取。</span><span class="sxs-lookup"><span data-stu-id="2877e-141">`Unrestricted:` Full access to system and user environment variables is allowed.</span></span>|  
|`EventLogPermission`|<span data-ttu-id="2877e-142">`Administer:` 允許下列動作：建立事件來源、讀取現有的記錄檔、刪除事件來源或記錄檔、回應項目、清除事件記錄檔、接聽事件及存取所有事件記錄檔的集合。</span><span class="sxs-lookup"><span data-stu-id="2877e-142">`Administer:` The following actions are allowed: creating an event source, reading existing logs, deleting event sources or logs, responding to entries, clearing an event log, listening to events, and accessing a collection of all event logs.</span></span>|  
|`FileIOPermission`|<span data-ttu-id="2877e-143">`Unrestricted:` 允許對檔案和資料夾的完整存取。</span><span class="sxs-lookup"><span data-stu-id="2877e-143">`Unrestricted:` Full access to files and folders is allowed.</span></span>|  
|`KeyContainerPermission`|<span data-ttu-id="2877e-144">`Unrestricted:` 允許對金鑰容器的完整存取。</span><span class="sxs-lookup"><span data-stu-id="2877e-144">`Unrestricted:` Full access to key containers is allowed.</span></span>|  
|`NetworkInformationPermission`|<span data-ttu-id="2877e-145">`Access:` 允許 Ping。</span><span class="sxs-lookup"><span data-stu-id="2877e-145">`Access:` Pinging is permitted.</span></span>|  
|`RegistryPermission`|<span data-ttu-id="2877e-146">允許對 `HKEY_CLASSES_ROOT`、`HKEY_LOCAL_MACHINE`、`HKEY_CURRENT_USER`、`HKEY_CURRENT_CONFIG` 和 `HKEY_USERS.` 的讀取權。</span><span class="sxs-lookup"><span data-stu-id="2877e-146">Allows read rights to `HKEY_CLASSES_ROOT`, `HKEY_LOCAL_MACHINE`, `HKEY_CURRENT_USER`, `HKEY_CURRENT_CONFIG`, and `HKEY_USERS.`</span></span>|  
|`SecurityPermission`|<span data-ttu-id="2877e-147">`Assertion:` 判斷此程式碼的所有呼叫端都具有此作業之必要權限的功能。</span><span class="sxs-lookup"><span data-stu-id="2877e-147">`Assertion:` Ability to assert that all the callers of this code have the requisite permission for the operation.</span></span><br /><br /> <span data-ttu-id="2877e-148">`ControlPrincipal:` 操作主體物件的功能。</span><span class="sxs-lookup"><span data-stu-id="2877e-148">`ControlPrincipal:` Ability to manipulate the principal object.</span></span><br /><br /> <span data-ttu-id="2877e-149">`Execution:` 執行 Managed 程式碼的權限。</span><span class="sxs-lookup"><span data-stu-id="2877e-149">`Execution:` Permission to execute managed code.</span></span><br /><br /> <span data-ttu-id="2877e-150">`SerializationFormatter:` 提供序列化服務的功能。</span><span class="sxs-lookup"><span data-stu-id="2877e-150">`SerializationFormatter:` Ability to provide serialization services.</span></span>|  
|<span data-ttu-id="2877e-151">**SmtpPermission**</span><span class="sxs-lookup"><span data-stu-id="2877e-151">**SmtpPermission**</span></span>|<span data-ttu-id="2877e-152">`Access:` 允許與 SMTP 主機通訊埠 25 的傳出連接。</span><span class="sxs-lookup"><span data-stu-id="2877e-152">`Access:` Outbound connections to SMTP host port 25 are allowed.</span></span>|  
|`SocketPermission`|<span data-ttu-id="2877e-153">`Connect:` 允許傳輸位址上的傳出連接 (所有通訊埠、所有通訊協定)。</span><span class="sxs-lookup"><span data-stu-id="2877e-153">`Connect:` Outbound connections (all ports, all protocols) on a transport address are allowed.</span></span>|  
|`SqlClientPermission`|<span data-ttu-id="2877e-154">`Unrestricted:` 允許對資料來源的完整存取。</span><span class="sxs-lookup"><span data-stu-id="2877e-154">`Unrestricted:` Full access to the datasource is allowed.</span></span>|  
|`StorePermission`|<span data-ttu-id="2877e-155">`Unrestricted:` 允許對 X.509 憑證存放區的完整存取。</span><span class="sxs-lookup"><span data-stu-id="2877e-155">`Unrestricted:` Full access to X.509 certificate stores is allowed.</span></span>|  
|`WebPermission`|<span data-ttu-id="2877e-156">`Connect:` 允許對 Web 資源的傳出連接。</span><span class="sxs-lookup"><span data-stu-id="2877e-156">`Connect:` Outbound connections to web resources are allowed.</span></span>|  
  
### <a name="unsafe"></a><span data-ttu-id="2877e-157">UNSAFE</span><span class="sxs-lookup"><span data-stu-id="2877e-157">UNSAFE</span></span>  
 <span data-ttu-id="2877e-158">UNSAFE 可讓組件無限制存取 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 內外部的資源。</span><span class="sxs-lookup"><span data-stu-id="2877e-158">UNSAFE allows assemblies unrestricted access to resources, both within and outside [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="2877e-159">從 `UNSAFE` 組件內執行的程式碼也可以呼叫 Unmanaged 程式碼。</span><span class="sxs-lookup"><span data-stu-id="2877e-159">Code executing from within an `UNSAFE` assembly can also call unmanaged code.</span></span>  
  
 <span data-ttu-id="2877e-160">`UNSAFE` 會提供給 `FullTrust` 組件。</span><span class="sxs-lookup"><span data-stu-id="2877e-160">`UNSAFE` assemblies are given `FullTrust`.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="2877e-161">對於執行計算和資料管理工作而不存取 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 以外之資源的組件而言，`SAFE` 是建議的權限設定。</span><span class="sxs-lookup"><span data-stu-id="2877e-161">`SAFE` is the recommended permission setting for assemblies that perform computation and data management tasks without accessing resources outside [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="2877e-162">`EXTERNAL_ACCESS`元件預設會以服務帳戶的身分執行 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] ，只應將執行的許可權授與給受信任的登入， `EXTERNAL_ACCESS` 以作為服務帳戶。</span><span class="sxs-lookup"><span data-stu-id="2877e-162">`EXTERNAL_ACCESS` assemblies by default execute as the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] service account, permission to execute `EXTERNAL_ACCESS` should only be given to logins trusted to run as the service account.</span></span> <span data-ttu-id="2877e-163">從安全性的角度來看，`EXTERNAL_ACCESS` 及 `UNSAFE` 組件相同。</span><span class="sxs-lookup"><span data-stu-id="2877e-163">From a security perspective, `EXTERNAL_ACCESS` and `UNSAFE` assemblies are identical.</span></span> <span data-ttu-id="2877e-164">不過，`EXTERNAL_ACCESS` 組件提供 `UNSAFE` 組件中沒有的各種可靠性及強固性保護。</span><span class="sxs-lookup"><span data-stu-id="2877e-164">However, `EXTERNAL_ACCESS` assemblies provide various reliability and robustness protections that are not in `UNSAFE` assemblies.</span></span> <span data-ttu-id="2877e-165">指定 `UNSAFE` 可讓元件中的程式碼對執行不合法的作業 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 。</span><span class="sxs-lookup"><span data-stu-id="2877e-165">Specifying `UNSAFE` allows the code in the assembly to perform illegal operations against the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="2877e-166">如需在中建立 CLR 元件的詳細資訊 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] ，請參閱[管理 Clr 整合元件](../../../relational-databases/clr-integration/assemblies/managing-clr-integration-assemblies.md)。</span><span class="sxs-lookup"><span data-stu-id="2877e-166">For more information about creating CLR assemblies in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], see [Managing CLR Integration Assemblies](../../../relational-databases/clr-integration/assemblies/managing-clr-integration-assemblies.md).</span></span>  
  
## <a name="accessing-external-resources"></a><span data-ttu-id="2877e-167">存取外部資源</span><span class="sxs-lookup"><span data-stu-id="2877e-167">Accessing External Resources</span></span>  
 <span data-ttu-id="2877e-168">如果使用者定義型別 (UDT)、預存程序或其他型別的建構組件是以 `SAFE` 權限集合註冊，在此建構中執行的 Managed 程式碼便無法存取外部資源。</span><span class="sxs-lookup"><span data-stu-id="2877e-168">If a user-defined type (UDT), stored procedure, or other type of construct assembly is registered with the `SAFE` permission set, then managed code executing in the construct is unable to access external resources.</span></span> <span data-ttu-id="2877e-169">不過，如果指定了 `EXTERNAL_ACCESS` 或 `UNSAFE` 權限集合，而 Managed 程式碼嘗試存取外部資源，則 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 會套用下列規則：</span><span class="sxs-lookup"><span data-stu-id="2877e-169">However, if either the `EXTERNAL_ACCESS` or `UNSAFE` permission sets are specified, and managed code attempts to access external resources, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] applies the following rules:</span></span>  
  
|<span data-ttu-id="2877e-170">If</span><span class="sxs-lookup"><span data-stu-id="2877e-170">If</span></span>|<span data-ttu-id="2877e-171">結果為</span><span class="sxs-lookup"><span data-stu-id="2877e-171">Then</span></span>|  
|--------|----------|  
|<span data-ttu-id="2877e-172">執行內容對應至 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 登入。</span><span class="sxs-lookup"><span data-stu-id="2877e-172">The execution context corresponds to a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] login.</span></span>|<span data-ttu-id="2877e-173">拒絕存取外部資源的嘗試，並引發安全性例外狀況。</span><span class="sxs-lookup"><span data-stu-id="2877e-173">Attempts to access external resources are denied and a security exception is raised.</span></span>|  
|<span data-ttu-id="2877e-174">執行內容對應至 Windows 登入，並且執行內容是原始呼叫端。</span><span class="sxs-lookup"><span data-stu-id="2877e-174">The execution context corresponds to a Windows login and the execution context is the original caller.</span></span>|<span data-ttu-id="2877e-175">在 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 服務帳戶的安全性內容下存取外部資源。</span><span class="sxs-lookup"><span data-stu-id="2877e-175">The external resource is accessed under the security context of the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] service account.</span></span>|  
|<span data-ttu-id="2877e-176">呼叫端不是原始呼叫端。</span><span class="sxs-lookup"><span data-stu-id="2877e-176">The caller is not the original caller.</span></span>|<span data-ttu-id="2877e-177">拒絕存取並引發安全性例外狀況。</span><span class="sxs-lookup"><span data-stu-id="2877e-177">Access is denied and a security exception is raised.</span></span>|  
|<span data-ttu-id="2877e-178">執行內容會對應至 Windows 登入、執行內容就是原始呼叫端，而且已模擬呼叫端。</span><span class="sxs-lookup"><span data-stu-id="2877e-178">The execution context corresponds to a Windows login and the execution context is the original caller and the caller has been impersonated.</span></span>|<span data-ttu-id="2877e-179">存取會使用呼叫端安全性內容，而不是服務帳戶。</span><span class="sxs-lookup"><span data-stu-id="2877e-179">Access uses the caller security context; not the service account.</span></span>|  
  
## <a name="permission-set-summary"></a><span data-ttu-id="2877e-180">權限集合摘要</span><span class="sxs-lookup"><span data-stu-id="2877e-180">Permission Set Summary</span></span>  
 <span data-ttu-id="2877e-181">下圖將摘要列出授與 `SAFE`、`EXTERNAL_ACCESS` 和 `UNSAFE` 權限集合的權限與限制。</span><span class="sxs-lookup"><span data-stu-id="2877e-181">The following chart summarizes the restrictions and permissions granted to the `SAFE`, `EXTERNAL_ACCESS`, and `UNSAFE` permission sets.</span></span>  
  
|||||  
|-|-|-|-|  
||`SAFE`|`EXTERNAL_ACCESS`|`UNSAFE`|  
|`Code Access Security Permissions`|<span data-ttu-id="2877e-182">僅限 Execute</span><span class="sxs-lookup"><span data-stu-id="2877e-182">Execute only</span></span>|<span data-ttu-id="2877e-183">對外部資源的 Execute + 存取權</span><span class="sxs-lookup"><span data-stu-id="2877e-183">Execute + access to external resources</span></span>|<span data-ttu-id="2877e-184">不受限制 (包括 P/Invoke)</span><span class="sxs-lookup"><span data-stu-id="2877e-184">Unrestricted (including P/Invoke)</span></span>|  
|`Programming model restrictions`|<span data-ttu-id="2877e-185">是</span><span class="sxs-lookup"><span data-stu-id="2877e-185">Yes</span></span>|<span data-ttu-id="2877e-186">是</span><span class="sxs-lookup"><span data-stu-id="2877e-186">Yes</span></span>|<span data-ttu-id="2877e-187">沒有限制</span><span class="sxs-lookup"><span data-stu-id="2877e-187">No restrictions</span></span>|  
|`Verifiability requirement`|<span data-ttu-id="2877e-188">是</span><span class="sxs-lookup"><span data-stu-id="2877e-188">Yes</span></span>|<span data-ttu-id="2877e-189">是</span><span class="sxs-lookup"><span data-stu-id="2877e-189">Yes</span></span>|<span data-ttu-id="2877e-190">否</span><span class="sxs-lookup"><span data-stu-id="2877e-190">No</span></span>|  
|`Local data access`|<span data-ttu-id="2877e-191">是</span><span class="sxs-lookup"><span data-stu-id="2877e-191">Yes</span></span>|<span data-ttu-id="2877e-192">是</span><span class="sxs-lookup"><span data-stu-id="2877e-192">Yes</span></span>|<span data-ttu-id="2877e-193">是</span><span class="sxs-lookup"><span data-stu-id="2877e-193">Yes</span></span>|  
|`Ability to call native code`|<span data-ttu-id="2877e-194">否</span><span class="sxs-lookup"><span data-stu-id="2877e-194">No</span></span>|<span data-ttu-id="2877e-195">否</span><span class="sxs-lookup"><span data-stu-id="2877e-195">No</span></span>|<span data-ttu-id="2877e-196">是</span><span class="sxs-lookup"><span data-stu-id="2877e-196">Yes</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="2877e-197">另請參閱</span><span class="sxs-lookup"><span data-stu-id="2877e-197">See Also</span></span>  
 <span data-ttu-id="2877e-198">[CLR 整合安全性](clr-integration-security.md) </span><span class="sxs-lookup"><span data-stu-id="2877e-198">[CLR Integration Security](clr-integration-security.md) </span></span>  
 <span data-ttu-id="2877e-199">[主機保護屬性和 CLR 整合程式設計](../../clr-integration-security-host-protection-attributes/host-protection-attributes-and-clr-integration-programming.md) </span><span class="sxs-lookup"><span data-stu-id="2877e-199">[Host Protection Attributes and CLR Integration Programming](../../clr-integration-security-host-protection-attributes/host-protection-attributes-and-clr-integration-programming.md) </span></span>  
 <span data-ttu-id="2877e-200">[CLR 整合程式設計模型限制](../../../relational-databases/clr-integration/database-objects/clr-integration-programming-model-restrictions.md) </span><span class="sxs-lookup"><span data-stu-id="2877e-200">[CLR Integration Programming Model Restrictions](../../../relational-databases/clr-integration/database-objects/clr-integration-programming-model-restrictions.md) </span></span>  
 [<span data-ttu-id="2877e-201">CLR 主控環境</span><span class="sxs-lookup"><span data-stu-id="2877e-201">CLR Hosted Environment</span></span>](../clr-integration-architecture-clr-hosted-environment.md)  
  
  
