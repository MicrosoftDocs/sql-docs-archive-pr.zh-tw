---
title: 設定及管理搜尋的斷詞工具與字幹分析器 | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: search
ms.topic: conceptual
helpviewer_keywords:
- languages [full-text search]
- full-text search [SQL Server], stemmers
- linguistic analysis [full-text search]
- full-text indexes [SQL Server], linguistic analysis
- full-text search [SQL Server], word breakers
- default full-text language option
- stemmers [full-text search]
- conjugating verbs [full-text search]
- word breakers [full-text search]
ms.assetid: d4bdd16b-a2db-4101-a946-583d1c674229
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 22cb7371a0215989d2759ddfb2c84f51ba5c3c31
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87710541"
---
# <a name="configure-and-manage-word-breakers-and-stemmers-for-search"></a><span data-ttu-id="2f365-102">設定及管理搜尋的斷詞工具與字幹分析器</span><span class="sxs-lookup"><span data-stu-id="2f365-102">Configure and Manage Word Breakers and Stemmers for Search</span></span>
  <span data-ttu-id="2f365-103">斷詞工具及字幹分析器，會在所有全文檢索索引資料上執行語文分析。</span><span class="sxs-lookup"><span data-stu-id="2f365-103">Word breakers and stemmers perform linguistic analysis on all full-text indexed data.</span></span> <span data-ttu-id="2f365-104">語文分析包括找出文字分界 (斷詞) 以及動詞變化 (字根處理)。</span><span class="sxs-lookup"><span data-stu-id="2f365-104">Linguistic analysis involves finding word boundaries (word-breaking) and conjugating verbs (stemming).</span></span> <span data-ttu-id="2f365-105">斷詞工具與字幹分析器是語言特有的工具，而且語言分析的規則會因不同的語言而有所差異。</span><span class="sxs-lookup"><span data-stu-id="2f365-105">Word breakers and stemmers are language specific, and the rules for linguistic analysis differ for different languages.</span></span> <span data-ttu-id="2f365-106">對於給定的語言而言， *「斷詞工具」* (Word Breaker) 會根據語言的語彙規則，判斷文字分界存在的位置，藉以識別個別單字。</span><span class="sxs-lookup"><span data-stu-id="2f365-106">For a given language, a *word breaker* identifies individual words by determining where word boundaries exist based on the lexical rules of the language.</span></span> <span data-ttu-id="2f365-107">每個單字 (也稱為 *Token*) 都會使用壓縮表示來插入全文檢索索引中，以便減少其大小。</span><span class="sxs-lookup"><span data-stu-id="2f365-107">Each word (also known as a *token*) is inserted into the full-text index using a compressed representation to reduce its size.</span></span> <span data-ttu-id="2f365-108">*「字幹分析器」* (Stemmer) 會根據該語言的規則來產生特定單字的字形變化 (例如，"running"、"ran" 和 "runner" 是 "run" 單字的不同形態)。</span><span class="sxs-lookup"><span data-stu-id="2f365-108">The *stemmer* generates inflectional forms of a particular word based on the rules of that language (for example, "running", "ran", and "runner" are various forms of the word "run").</span></span>  
  
 <span data-ttu-id="2f365-109">使用語言特有的斷詞工具會使得針對該語言產生的詞彙更正確。</span><span class="sxs-lookup"><span data-stu-id="2f365-109">Using language-specific word breakers enables the resulting terms to be more accurate for that language.</span></span> <span data-ttu-id="2f365-110">如果有語系的斷詞工具，但沒有特定次語言的斷詞工具，則會使用主要語言。</span><span class="sxs-lookup"><span data-stu-id="2f365-110">Where there is a word breaker for the language family, but not for the specific sub-language, the major language is used.</span></span> <span data-ttu-id="2f365-111">例如，處理加拿大法文時會使用法文文字分隔。</span><span class="sxs-lookup"><span data-stu-id="2f365-111">For example, the French word breaker is used to handle text that is French Canadian.</span></span> <span data-ttu-id="2f365-112">如果某種特定語文沒有文字分隔，則會使用中性文字分隔。</span><span class="sxs-lookup"><span data-stu-id="2f365-112">If no word breaker is available for a particular language, the neutral word breaker is used.</span></span> <span data-ttu-id="2f365-113">使用中性文字分隔時，會以中性字元來中斷文字，例如空白與標點符號。</span><span class="sxs-lookup"><span data-stu-id="2f365-113">With the neutral word breaker, words are broken at neutral characters such as spaces and punctuation marks.</span></span>  
  
##  <a name="registering-word-breakers"></a><a name="register"></a><span data-ttu-id="2f365-114">註冊斷詞工具</span><span class="sxs-lookup"><span data-stu-id="2f365-114">Registering Word Breakers</span></span>  
 <span data-ttu-id="2f365-115">若要使用某種語言的斷詞工具，您必須註冊它們。</span><span class="sxs-lookup"><span data-stu-id="2f365-115">For the word breakers of a language to be used, they must be registered.</span></span> <span data-ttu-id="2f365-116">針對已註冊的斷詞工具、相關聯的語言資源（字幹分析器、非搜尋字 (停用字詞) 和同義字檔案），也會提供給全文檢索索引和查詢作業使用。</span><span class="sxs-lookup"><span data-stu-id="2f365-116">For registered word breakers, associated linguistic resources-stemmers, noise words (stopwords), and thesaurus files-also become available to full-text indexing and querying operations.</span></span> <span data-ttu-id="2f365-117">若要檢視目前已向 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]註冊之斷詞工具的語言清單，請使用下列 [!INCLUDE[tsql](../../includes/tsql-md.md)] 陳述式：</span><span class="sxs-lookup"><span data-stu-id="2f365-117">To view a list of the languages whose word breakers are currently registered with [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], use the following [!INCLUDE[tsql](../../includes/tsql-md.md)] statement:</span></span>  
  
 <span data-ttu-id="2f365-118">SELECT \* FROM sys.fulltext_languages</span><span class="sxs-lookup"><span data-stu-id="2f365-118">SELECT \* FROM sys.fulltext_languages</span></span>  
  
 <span data-ttu-id="2f365-119">如果您加入、移除或更改了斷詞工具，就必須重新整理支援全文檢索索引和查詢的 Microsoft Windows 地區設定識別碼 (LCID) 清單。</span><span class="sxs-lookup"><span data-stu-id="2f365-119">If you add, remove, or alter a word breaker, you need to refresh the list of Microsoft Windows locale identifiers (LCIDs) that are supported for full-text indexing and querying.</span></span> <span data-ttu-id="2f365-120">如需詳細資訊，請參閱 [檢視或變更已註冊的篩選與斷詞工具](view-or-change-registered-filters-and-word-breakers.md)。</span><span class="sxs-lookup"><span data-stu-id="2f365-120">For more information, see [View or Change Registered Filters and Word Breakers](view-or-change-registered-filters-and-word-breakers.md).</span></span>  
  
##  <a name="setting-the-default-full-text-language-option"></a><a name="default"></a><span data-ttu-id="2f365-121">設定預設全文檢索語言選項</span><span class="sxs-lookup"><span data-stu-id="2f365-121">Setting the Default Full-Text Language Option</span></span>  
 <span data-ttu-id="2f365-122">若為當地語系化的版本 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ， [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 安裝程式會將 `default full-text language` 選項設定為伺服器的語言（如果有適當的相符項存在的話）。</span><span class="sxs-lookup"><span data-stu-id="2f365-122">For a localized version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Setup sets the `default full-text language` option to the language of the server if an appropriate match exists.</span></span> <span data-ttu-id="2f365-123">若 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 為非當地語系化的版本時，則 `default full-text language` 選項會是英文。</span><span class="sxs-lookup"><span data-stu-id="2f365-123">For a non-localized version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], the `default full-text language` option is English.</span></span>  
  
 <span data-ttu-id="2f365-124">建立或更改全文檢索索引時，您可以為每個全文檢索索引資料行指定不同的語言。</span><span class="sxs-lookup"><span data-stu-id="2f365-124">When creating or altering a full-text index, you can specify a different language for each full-text indexed column.</span></span> <span data-ttu-id="2f365-125">若沒有為資料行指定語言，則預設值會是組態選項 `default full-text language` 的值。</span><span class="sxs-lookup"><span data-stu-id="2f365-125">If no language is specified for a column, the default is the value of the configuration option `default full-text language`.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="2f365-126">除非在查詢中指定 LANGUAGE 選項，否則列在單一全文檢索查詢函數子句的所有資料行都必須使用相同的語文。</span><span class="sxs-lookup"><span data-stu-id="2f365-126">All columns listed in a single full-text query function clause must use the same language, unless the LANGUAGE option is specified in the query.</span></span> <span data-ttu-id="2f365-127">查詢之全文檢索索引資料行所用的語言會決定要對全文檢索查詢述詞 ([CONTAINS](/sql/t-sql/queries/contains-transact-sql) 和 [FREETEXT](/sql/t-sql/queries/freetext-transact-sql)) 與函數 ([CONTAINSTABLE](/sql/relational-databases/system-functions/containstable-transact-sql) 和 [FREETEXTTABLE](/sql/relational-databases/system-functions/freetexttable-transact-sql)) 之引數執行的語言分析。</span><span class="sxs-lookup"><span data-stu-id="2f365-127">The language used for the full-text indexed column being queried determines the linguistic analysis performed on arguments of the full-text query predicates ([CONTAINS](/sql/t-sql/queries/contains-transact-sql) and [FREETEXT](/sql/t-sql/queries/freetext-transact-sql)) and functions ([CONTAINSTABLE](/sql/relational-databases/system-functions/containstable-transact-sql) and [FREETEXTTABLE](/sql/relational-databases/system-functions/freetexttable-transact-sql)).</span></span>  
  
##  <a name="choosing-the-language-for-an-indexed-column"></a><a name="lang"></a><span data-ttu-id="2f365-128">選擇索引資料行的語言</span><span class="sxs-lookup"><span data-stu-id="2f365-128">Choosing the Language for an Indexed Column</span></span>  
 <span data-ttu-id="2f365-129">建立全文檢索索引時，建議您針對每個索引資料行指定語言。</span><span class="sxs-lookup"><span data-stu-id="2f365-129">When creating a full-text index, we recommend that you specify a language for each indexed column.</span></span> <span data-ttu-id="2f365-130">如果沒有為資料行指定語言，就會使用系統預設語言。</span><span class="sxs-lookup"><span data-stu-id="2f365-130">If a language is not specified for a column, the system default language is used.</span></span> <span data-ttu-id="2f365-131">資料行的語言會決定哪些斷詞工具和字幹分析器要用於建立該資料行的索引。</span><span class="sxs-lookup"><span data-stu-id="2f365-131">The language of a column determines which word breaker and stemmer are used for indexing that column.</span></span> <span data-ttu-id="2f365-132">此外，資料行的全文檢索查詢會使用該語言的同義字檔案。</span><span class="sxs-lookup"><span data-stu-id="2f365-132">Also, the thesaurus file of that language will be used by full-text queries on the column.</span></span>  
  
 <span data-ttu-id="2f365-133">在選擇資料行語言以建立全文檢索索引時，必須考慮一些事項。</span><span class="sxs-lookup"><span data-stu-id="2f365-133">There are a couple of things to consider when choosing the column language for creating a full-text index.</span></span> <span data-ttu-id="2f365-134">這些考量與文字如何 Token 化，然後如何由全文檢索引擎編製索引有關。</span><span class="sxs-lookup"><span data-stu-id="2f365-134">These considerations relate to how your text is tokenized and then indexed by Full-Text Engine.</span></span> <span data-ttu-id="2f365-135">如需詳細資訊，請參閱 [選擇建立全文檢索索引時的語言](choose-a-language-when-creating-a-full-text-index.md)。</span><span class="sxs-lookup"><span data-stu-id="2f365-135">For more information, see [Choose a Language When Creating a Full-Text Index](choose-a-language-when-creating-a-full-text-index.md).</span></span>  
  
 <span data-ttu-id="2f365-136">**檢視資料行的斷詞工具語言**</span><span class="sxs-lookup"><span data-stu-id="2f365-136">**To view the word breaker language of a column**</span></span>  
  
-   [<span data-ttu-id="2f365-137">管理全文檢索索引</span><span class="sxs-lookup"><span data-stu-id="2f365-137">Manage Full-Text Indexes</span></span>](../indexes/indexes.md)  
  
-   [<span data-ttu-id="2f365-138">sys.fulltext_index_columns &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="2f365-138">sys.fulltext_index_columns &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-catalog-views/sys-fulltext-index-columns-transact-sql)  
  
    ```  
    SELECT 'language_id' AS "LCID" FROM sys.fulltext_index_columns;  
    ```  
  
##  <a name="obtaining-information-about-word-breakers"></a><a name="info"></a><span data-ttu-id="2f365-139">取得斷詞工具的相關資訊</span><span class="sxs-lookup"><span data-stu-id="2f365-139">Obtaining Information about Word Breakers</span></span>  
 <span data-ttu-id="2f365-140">**檢視斷詞工具、同義字和停用字詞表組合的 Token 化結果**</span><span class="sxs-lookup"><span data-stu-id="2f365-140">**Viewing the tokenization result of a word breaker, thesaurus, and stoplist combination**</span></span>  
  
-   <span data-ttu-id="2f365-141">[dm_fts_parser &#40;transact-sql&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-fts-parser-transact-sql)。</span><span class="sxs-lookup"><span data-stu-id="2f365-141">[sys.dm_fts_parser &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-fts-parser-transact-sql).</span></span>  
  
 <span data-ttu-id="2f365-142">**傳回已註冊斷詞工具的相關資訊**</span><span class="sxs-lookup"><span data-stu-id="2f365-142">**To return information about the registered word breakers**</span></span>  
  
-   [<span data-ttu-id="2f365-143">sp_help_fulltext_system_components &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="2f365-143">sp_help_fulltext_system_components &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-help-fulltext-system-components-transact-sql)  
  
##  <a name="troubleshooting-word-breaking-time-out-errors"></a><a name="tshoot"></a><span data-ttu-id="2f365-144">針對斷詞逾時錯誤進行疑難排解</span><span class="sxs-lookup"><span data-stu-id="2f365-144">Troubleshooting Word-Breaking Time-out Errors</span></span>  
 <span data-ttu-id="2f365-145">斷詞逾時錯誤可能會在各種情況中發生。</span><span class="sxs-lookup"><span data-stu-id="2f365-145">A word-breaking time-out error might occur in a variety of situations.</span></span> <span data-ttu-id="2f365-146">如需這些情況以及每種情況中之回應方式的相關資訊，請參閱 [MSSQLSERVER_30053](../errors-events/mssqlserver-30053-database-engine-error.md)。</span><span class="sxs-lookup"><span data-stu-id="2f365-146">For information about these situations and how to respond in each situation, see [MSSQLSERVER_30053](../errors-events/mssqlserver-30053-database-engine-error.md).</span></span>  
  
##  <a name="understanding-the-impact-of-new-word-breakers"></a><a name="impact"></a><span data-ttu-id="2f365-147">瞭解新斷詞工具的影響</span><span class="sxs-lookup"><span data-stu-id="2f365-147">Understanding the Impact of New Word Breakers</span></span>  
 <span data-ttu-id="2f365-148">每個 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 版本一般都會包含新的斷詞工具，其語言規則比舊版斷詞工具更好而且更正確。</span><span class="sxs-lookup"><span data-stu-id="2f365-148">Each version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] typically includes new word breakers that have better linguistic rules and are more accurate than earlier word breakers.</span></span> <span data-ttu-id="2f365-149">新斷詞工具的行為可能會與全文檢索索引內斷詞工具的行為稍有不同，而全文檢索索引是從舊版 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]匯入。</span><span class="sxs-lookup"><span data-stu-id="2f365-149">Potentially, the new word breakers might behave slightly differently from the word breakers in full-text indexes that were imported from previous versions of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="2f365-150">如果全文檢索目錄是在將資料庫升級為目前 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]版本時匯入，則這點就很明顯。</span><span class="sxs-lookup"><span data-stu-id="2f365-150">This is significant if a full-text catalog was imported when a database was upgraded to the current version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="2f365-151">全文檢索目錄中全文檢索索引所使用的一種或多種語言現在可能會與新的斷詞工具相關聯。</span><span class="sxs-lookup"><span data-stu-id="2f365-151">One or more languages used by the full-text indexes in the full-text catalog might now be associated with new word breakers.</span></span> <span data-ttu-id="2f365-152">如需詳細資訊，請參閱 [升級全文檢索搜尋](upgrade-full-text-search.md)。</span><span class="sxs-lookup"><span data-stu-id="2f365-152">For more information, see [Upgrade Full-Text Search](upgrade-full-text-search.md).</span></span>  
  
 <span data-ttu-id="2f365-153">如需所有斷詞工具的完整清單，請參閱[sys.databases &#40;transact-sql&#41;fulltext_languages ](/sql/relational-databases/system-catalog-views/sys-fulltext-languages-transact-sql)。</span><span class="sxs-lookup"><span data-stu-id="2f365-153">For a complete list of all the word breakers, see [sys.fulltext_languages &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-fulltext-languages-transact-sql).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="2f365-154">另請參閱</span><span class="sxs-lookup"><span data-stu-id="2f365-154">See Also</span></span>  
 <span data-ttu-id="2f365-155">[ALTER FULLTEXT INDEX &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-fulltext-index-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="2f365-155">[ALTER FULLTEXT INDEX &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-fulltext-index-transact-sql) </span></span>  
 <span data-ttu-id="2f365-156">[CREATE FULLTEXT INDEX &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-fulltext-index-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="2f365-156">[CREATE FULLTEXT INDEX &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-fulltext-index-transact-sql) </span></span>  
 <span data-ttu-id="2f365-157">[sp_fulltext_service &#40;Transact-sql&#41;](/sql/relational-databases/system-stored-procedures/sp-fulltext-service-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="2f365-157">[sp_fulltext_service &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-fulltext-service-transact-sql) </span></span>  
 <span data-ttu-id="2f365-158">[sys.fulltext_languages &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-fulltext-languages-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="2f365-158">[sys.fulltext_languages &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-fulltext-languages-transact-sql) </span></span>  
 <span data-ttu-id="2f365-159">[設定及管理全文檢索搜尋的停用字詞與停用字詞表](configure-and-manage-stopwords-and-stoplists-for-full-text-search.md) </span><span class="sxs-lookup"><span data-stu-id="2f365-159">[Configure and Manage Stopwords and Stoplists for Full-Text Search](configure-and-manage-stopwords-and-stoplists-for-full-text-search.md) </span></span>  
 [<span data-ttu-id="2f365-160">升級全文檢索搜尋</span><span class="sxs-lookup"><span data-stu-id="2f365-160">Upgrade Full-Text Search</span></span>](upgrade-full-text-search.md)  
  
  
