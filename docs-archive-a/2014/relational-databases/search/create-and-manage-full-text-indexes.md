---
title: 建立及管理全文檢索索引 | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: search
ms.topic: conceptual
helpviewer_keywords:
- full-text indexes [SQL Server], about
ms.assetid: f8a98486-5438-44a8-b454-9e6ecbc74f83
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 603b5e6b929259dc8b1408c0c2a1afab383446e1
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87700993"
---
# <a name="create-and-manage-full-text-indexes"></a><span data-ttu-id="ad0ba-102">建立及管理全文檢索索引</span><span class="sxs-lookup"><span data-stu-id="ad0ba-102">Create and Manage Full-Text Indexes</span></span>
  <span data-ttu-id="ad0ba-103">全文檢索引擎會使用全文檢索索引中的資訊來編譯全文檢索查詢，以便快速地在資料表中搜尋特定字詞或字詞組合。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-103">The information in full-text indexes is used by the Full-Text Engine to compile full-text queries that can quickly search a table for particular words or combinations of words.</span></span> <span data-ttu-id="ad0ba-104">全文檢索索引會儲存重要單字及這些單字在資料庫資料表之一或多個資料行內位置的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-104">A full-text index stores information about significant words and their location within one or more columns of a database table.</span></span> <span data-ttu-id="ad0ba-105">全文檢索索引是一種特殊類型的 Token 式功能索引，由 Full-Text Engine for [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]所建立與維護。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-105">A full-text index is a special type of token-based functional index that is built and maintained by the Full-Text Engine for [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="ad0ba-106">建立全文檢索索引的程序與建立其他索引類型的程序大不相同。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-106">The process of building a full-text index differs from building other types of indexes.</span></span> <span data-ttu-id="ad0ba-107">全文檢索引擎會根據個別 Token 從索引中的文字建立反向、堆疊以及壓縮的索引結構，而不是根據特定資料列中所儲存的值來建構 B 型樹狀結構。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-107">Instead of constructing a B-tree structure based on a value stored in a particular row, the Full-Text Engine builds an inverted, stacked, compressed index structure based on individual tokens from the text being indexed.</span></span>  <span data-ttu-id="ad0ba-108">全文檢索索引的大小只受限於執行 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 執行個體之電腦的可用記憶體資源。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-108">The size of a full-text index is limited only by the available memory resources of the computer on which the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is running.</span></span>  
  
 <span data-ttu-id="ad0ba-109">從 [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)]開始，全文檢索索引會與 Database Engine 整合在一起，而非位於檔案系統中，如同舊版 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-109">Beginning in [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)], the full-text indexes are integrated with the Database Engine, instead of residing in the file system as in previous versions of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="ad0ba-110">在新的資料庫中，全文檢索目錄現在是不屬於任何檔案群組的虛擬物件。它只是參考一組全文檢索索引的邏輯概念。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-110">For a new database, the full-text catalog is now a virtual object that does not belong to any filegroup; it is merely a logical concept that refers to a group of the full-text indexes.</span></span> <span data-ttu-id="ad0ba-111">不過，請注意，在 [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] 資料庫 (含有資料檔案的任何全文檢索目錄) 的升級期間，系統會建立新的檔案群組。如需詳細資訊，請參閱 [升級全文檢索搜尋](upgrade-full-text-search.md)。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-111">Note, however, that during upgrade of a [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] database, any full-text catalog that contains data files, a new filegroup is created; for more information, see [Upgrade Full-Text Search](upgrade-full-text-search.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="ad0ba-112">在 [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] 及更新的版本中，全文檢索引擎位於 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 處理序中，而非個別的服務中。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-112">In [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] and later versions, the Full-Text Engine resides in the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] process, rather than in a separate service.</span></span> <span data-ttu-id="ad0ba-113">將全文檢索引擎整合到 Database Engine 可以改善全文檢索管理能力、混合式查詢的最佳化，以及整體效能。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-113">Integrating the Full-Text Engine into the Database Engine improves full-text manageability, optimization of mixed query, and overall performance.</span></span>  
  
 <span data-ttu-id="ad0ba-114">每個資料表只允許有一個全文檢索索引。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-114">Only one full-text index is allowed per table.</span></span> <span data-ttu-id="ad0ba-115">若要對資料表建立全文檢索索引，該資料表必須有單一的非 Null 唯一資料行。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-115">For a full-text index to be created on a table, the table must have a single, unique nonnull column.</span></span> <span data-ttu-id="ad0ba-116">您可以針對 `char`、`varchar`、`nchar`、`nvarchar`、`text`、`ntext`、`image`、`xml`、`varbinary` 和 `varbinary(max)` 類型的資料行建立全文檢索索引，並且建立全文檢索搜尋的索引。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-116">You can build a full-text index on columns of type `char`, `varchar`, `nchar`, `nvarchar`, `text`, `ntext`, `image`, `xml`, `varbinary`, and `varbinary(max)` can be indexed for full-text search.</span></span> <span data-ttu-id="ad0ba-117">針對資料類型為 `varbinary`、`varbinary(max)`、`image` 或 `xml` 的資料行建立全文檢索索引會要求您指定類型資料行。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-117">Creating a full-text index on a column whose data type is  `varbinary`, `varbinary(max)`, `image`, or `xml` requires that you specify a type column.</span></span> <span data-ttu-id="ad0ba-118">「類型資料行」是一個資料表資料行，您可以在每個資料列中儲存文件的副檔名 (.doc、.pdf 與 .xls 等)。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-118">A *type column* is a table column in which you store the file extension (.doc, .pdf, .xls, and so forth) of the document in each row.</span></span>  
  
 <span data-ttu-id="ad0ba-119">建立與維護全文檢索索引的程序稱為「母體擴展」  ，也稱為「搜耙」  。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-119">The process of creating and maintaining a full-text index is called a *population* (also known as a *crawl*).</span></span> <span data-ttu-id="ad0ba-120">全文檢索索引母體擴展有三種類型：完整母體擴展、以變更追蹤為基礎的母體擴展，以及以時間戳記為基礎的累加母體擴展。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-120">There are three types of full-text index population: full population, change tracking-based population, and incremental timestamp-based population.</span></span> <span data-ttu-id="ad0ba-121">如需詳細資訊，請參閱 [擴展全文檢索索引](populate-full-text-indexes.md)。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-121">For more information, see [Populate Full-Text Indexes](populate-full-text-indexes.md).</span></span>  
  
##  <a name="common-tasks"></a><a name="tasks"></a><span data-ttu-id="ad0ba-122">一般工作</span><span class="sxs-lookup"><span data-stu-id="ad0ba-122">Common Tasks</span></span>  
 <span data-ttu-id="ad0ba-123">**建立全文檢索索引**</span><span class="sxs-lookup"><span data-stu-id="ad0ba-123">**To create a full-text index**</span></span>  
  
-   [<span data-ttu-id="ad0ba-124">CREATE FULLTEXT INDEX &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="ad0ba-124">CREATE FULLTEXT INDEX &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/create-fulltext-index-transact-sql)  
  
 <span data-ttu-id="ad0ba-125">**改變全文檢索索引**</span><span class="sxs-lookup"><span data-stu-id="ad0ba-125">**To alter a full-text index**</span></span>  
  
-   [<span data-ttu-id="ad0ba-126">ALTER FULLTEXT INDEX &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="ad0ba-126">ALTER FULLTEXT INDEX &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/alter-fulltext-index-transact-sql)  
  
 <span data-ttu-id="ad0ba-127">**卸除全文檢索索引**</span><span class="sxs-lookup"><span data-stu-id="ad0ba-127">**To drop a full-text index**</span></span>  
  
-   [<span data-ttu-id="ad0ba-128">DROP FULLTEXT INDEX &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="ad0ba-128">DROP FULLTEXT INDEX &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/drop-fulltext-index-transact-sql)  
  
 [<span data-ttu-id="ad0ba-129">本主題內容</span><span class="sxs-lookup"><span data-stu-id="ad0ba-129">In This Topic</span></span>](#top)  
  
##  <a name="full-text-index-structure"></a><a name="structure"></a><span data-ttu-id="ad0ba-130">全文檢索索引結構</span><span class="sxs-lookup"><span data-stu-id="ad0ba-130">Full-Text Index Structure</span></span>  
 <span data-ttu-id="ad0ba-131">若能充分了解全文檢索索引的結構，將有助於了解全文檢索引擎的運作方式。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-131">A good understanding of the structure of a full-text index will help you understand how the Full-Text Engine works.</span></span> <span data-ttu-id="ad0ba-132">本主題會使用下列 **之** Document [!INCLUDE[ssSampleDBCoShort](../../includes/sssampledbcoshort-md.md)] 資料表的摘錄當做範例資料表。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-132">This topic uses the following excerpt of the **Document** table in [!INCLUDE[ssSampleDBCoShort](../../includes/sssampledbcoshort-md.md)] as an example table.</span></span> <span data-ttu-id="ad0ba-133">這個摘錄只會顯示該資料表中的兩個資料行 ( **DocumentID** 資料行和 **Title** 資料行) 和三個資料列。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-133">This excerpt shows only two columns, the **DocumentID** column and the **Title** column, and three rows from the table.</span></span>  
  
 <span data-ttu-id="ad0ba-134">就本例而言，我們會假設已經在 **Title** 資料行中建立了全文檢索索引。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-134">For this example, we will assume that a full-text index has been created on the **Title** column.</span></span>  
  
|<span data-ttu-id="ad0ba-135">DocumentID</span><span class="sxs-lookup"><span data-stu-id="ad0ba-135">DocumentID</span></span>|<span data-ttu-id="ad0ba-136">Title</span><span class="sxs-lookup"><span data-stu-id="ad0ba-136">Title</span></span>|  
|----------------|-----------|  
|<span data-ttu-id="ad0ba-137">1</span><span class="sxs-lookup"><span data-stu-id="ad0ba-137">1</span></span>|<span data-ttu-id="ad0ba-138">Crank Arm and Tire Maintenance</span><span class="sxs-lookup"><span data-stu-id="ad0ba-138">Crank Arm and Tire Maintenance</span></span>|  
|<span data-ttu-id="ad0ba-139">2</span><span class="sxs-lookup"><span data-stu-id="ad0ba-139">2</span></span>|<span data-ttu-id="ad0ba-140">Front Reflector Bracket and Reflector Assembly 3</span><span class="sxs-lookup"><span data-stu-id="ad0ba-140">Front Reflector Bracket and Reflector Assembly 3</span></span>|  
|<span data-ttu-id="ad0ba-141">3</span><span class="sxs-lookup"><span data-stu-id="ad0ba-141">3</span></span>|<span data-ttu-id="ad0ba-142">Front Reflector Bracket Installation</span><span class="sxs-lookup"><span data-stu-id="ad0ba-142">Front Reflector Bracket Installation</span></span>|  
  
 <span data-ttu-id="ad0ba-143">例如，下表 (顯示片段 1) 會描述針對 **Document** 資料表之 **Title** 資料行所建立的全文檢索索引內容。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-143">For example, the following table, which shows Fragment 1, depicts the contents of the full-text index created on the **Title** column of the **Document** table.</span></span> <span data-ttu-id="ad0ba-144">全文檢索索引所包含的資訊會比顯示在此資料表中的資訊還要多。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-144">Full-text indexes contain more information than is presented in this table.</span></span> <span data-ttu-id="ad0ba-145">此資料表是全文檢索索引的邏輯表示法，僅針對示範目的提供。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-145">The table is a logical representation of a full-text index and is provided for demonstration purposes only.</span></span> <span data-ttu-id="ad0ba-146">這些資料列會以壓縮的格式儲存，以便最佳化磁碟使用量。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-146">The rows are stored in a compressed format to optimize disk usage.</span></span>  
  
 <span data-ttu-id="ad0ba-147">請注意，資料已經與原始文件相反。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-147">Notice that the data has been inverted from the original documents.</span></span> <span data-ttu-id="ad0ba-148">因為關鍵字會對應至文件識別碼，所以會發生相反的情況。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-148">Inversion occurs because the keywords are mapped to the document IDs.</span></span> <span data-ttu-id="ad0ba-149">因此，全文檢索索引通常稱為反向索引。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-149">For this reason, a full-text index is often referred to as an inverted index.</span></span>  
  
 <span data-ttu-id="ad0ba-150">此外，請注意，關鍵字 "and" 已經從全文檢索索引中移除了。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-150">Also notice that the keyword "and" has been removed from the full-text index.</span></span> <span data-ttu-id="ad0ba-151">進行此作業的原因是 "and" 是停用字詞，而且從全文檢索索引中移除停用字詞可能會大幅節省磁碟空間，進而改善查詢效能。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-151">This is done because "and" is a stopword, and removing stopwords from a full-text index can lead to substantial savings in disk space thereby improving query performance.</span></span> <span data-ttu-id="ad0ba-152">如需停用字詞的詳細資訊，請參閱 [設定及管理全文檢索搜尋的停用字詞與停用字詞表](configure-and-manage-stopwords-and-stoplists-for-full-text-search.md)。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-152">For more information about stopwords, see [Configure and Manage Stopwords and Stoplists for Full-Text Search](configure-and-manage-stopwords-and-stoplists-for-full-text-search.md).</span></span>  
  
 <span data-ttu-id="ad0ba-153">**片段 1**</span><span class="sxs-lookup"><span data-stu-id="ad0ba-153">**Fragment 1**</span></span>  
  
|<span data-ttu-id="ad0ba-154">關鍵字</span><span class="sxs-lookup"><span data-stu-id="ad0ba-154">Keyword</span></span>|<span data-ttu-id="ad0ba-155">ColId</span><span class="sxs-lookup"><span data-stu-id="ad0ba-155">ColId</span></span>|<span data-ttu-id="ad0ba-156">DocId</span><span class="sxs-lookup"><span data-stu-id="ad0ba-156">DocId</span></span>|<span data-ttu-id="ad0ba-157">出現次數</span><span class="sxs-lookup"><span data-stu-id="ad0ba-157">Occurrence</span></span>|  
|-------------|-----------|-----------|----------------|  
|<span data-ttu-id="ad0ba-158">Crank</span><span class="sxs-lookup"><span data-stu-id="ad0ba-158">Crank</span></span>|<span data-ttu-id="ad0ba-159">1</span><span class="sxs-lookup"><span data-stu-id="ad0ba-159">1</span></span>|<span data-ttu-id="ad0ba-160">1</span><span class="sxs-lookup"><span data-stu-id="ad0ba-160">1</span></span>|<span data-ttu-id="ad0ba-161">1</span><span class="sxs-lookup"><span data-stu-id="ad0ba-161">1</span></span>|  
|<span data-ttu-id="ad0ba-162">Arm</span><span class="sxs-lookup"><span data-stu-id="ad0ba-162">Arm</span></span>|<span data-ttu-id="ad0ba-163">1</span><span class="sxs-lookup"><span data-stu-id="ad0ba-163">1</span></span>|<span data-ttu-id="ad0ba-164">1</span><span class="sxs-lookup"><span data-stu-id="ad0ba-164">1</span></span>|<span data-ttu-id="ad0ba-165">2</span><span class="sxs-lookup"><span data-stu-id="ad0ba-165">2</span></span>|  
|<span data-ttu-id="ad0ba-166">Tire</span><span class="sxs-lookup"><span data-stu-id="ad0ba-166">Tire</span></span>|<span data-ttu-id="ad0ba-167">1</span><span class="sxs-lookup"><span data-stu-id="ad0ba-167">1</span></span>|<span data-ttu-id="ad0ba-168">1</span><span class="sxs-lookup"><span data-stu-id="ad0ba-168">1</span></span>|<span data-ttu-id="ad0ba-169">4</span><span class="sxs-lookup"><span data-stu-id="ad0ba-169">4</span></span>|  
|<span data-ttu-id="ad0ba-170">維護</span><span class="sxs-lookup"><span data-stu-id="ad0ba-170">Maintenance</span></span>|<span data-ttu-id="ad0ba-171">1</span><span class="sxs-lookup"><span data-stu-id="ad0ba-171">1</span></span>|<span data-ttu-id="ad0ba-172">1</span><span class="sxs-lookup"><span data-stu-id="ad0ba-172">1</span></span>|<span data-ttu-id="ad0ba-173">5</span><span class="sxs-lookup"><span data-stu-id="ad0ba-173">5</span></span>|  
|<span data-ttu-id="ad0ba-174">Front</span><span class="sxs-lookup"><span data-stu-id="ad0ba-174">Front</span></span>|<span data-ttu-id="ad0ba-175">1</span><span class="sxs-lookup"><span data-stu-id="ad0ba-175">1</span></span>|<span data-ttu-id="ad0ba-176">2</span><span class="sxs-lookup"><span data-stu-id="ad0ba-176">2</span></span>|<span data-ttu-id="ad0ba-177">1</span><span class="sxs-lookup"><span data-stu-id="ad0ba-177">1</span></span>|  
|<span data-ttu-id="ad0ba-178">Front</span><span class="sxs-lookup"><span data-stu-id="ad0ba-178">Front</span></span>|<span data-ttu-id="ad0ba-179">1</span><span class="sxs-lookup"><span data-stu-id="ad0ba-179">1</span></span>|<span data-ttu-id="ad0ba-180">3</span><span class="sxs-lookup"><span data-stu-id="ad0ba-180">3</span></span>|<span data-ttu-id="ad0ba-181">1</span><span class="sxs-lookup"><span data-stu-id="ad0ba-181">1</span></span>|  
|<span data-ttu-id="ad0ba-182">Reflector</span><span class="sxs-lookup"><span data-stu-id="ad0ba-182">Reflector</span></span>|<span data-ttu-id="ad0ba-183">1</span><span class="sxs-lookup"><span data-stu-id="ad0ba-183">1</span></span>|<span data-ttu-id="ad0ba-184">2</span><span class="sxs-lookup"><span data-stu-id="ad0ba-184">2</span></span>|<span data-ttu-id="ad0ba-185">2</span><span class="sxs-lookup"><span data-stu-id="ad0ba-185">2</span></span>|  
|<span data-ttu-id="ad0ba-186">Reflector</span><span class="sxs-lookup"><span data-stu-id="ad0ba-186">Reflector</span></span>|<span data-ttu-id="ad0ba-187">1</span><span class="sxs-lookup"><span data-stu-id="ad0ba-187">1</span></span>|<span data-ttu-id="ad0ba-188">2</span><span class="sxs-lookup"><span data-stu-id="ad0ba-188">2</span></span>|<span data-ttu-id="ad0ba-189">5</span><span class="sxs-lookup"><span data-stu-id="ad0ba-189">5</span></span>|  
|<span data-ttu-id="ad0ba-190">Reflector</span><span class="sxs-lookup"><span data-stu-id="ad0ba-190">Reflector</span></span>|<span data-ttu-id="ad0ba-191">1</span><span class="sxs-lookup"><span data-stu-id="ad0ba-191">1</span></span>|<span data-ttu-id="ad0ba-192">3</span><span class="sxs-lookup"><span data-stu-id="ad0ba-192">3</span></span>|<span data-ttu-id="ad0ba-193">2</span><span class="sxs-lookup"><span data-stu-id="ad0ba-193">2</span></span>|  
|<span data-ttu-id="ad0ba-194">Bracket</span><span class="sxs-lookup"><span data-stu-id="ad0ba-194">Bracket</span></span>|<span data-ttu-id="ad0ba-195">1</span><span class="sxs-lookup"><span data-stu-id="ad0ba-195">1</span></span>|<span data-ttu-id="ad0ba-196">2</span><span class="sxs-lookup"><span data-stu-id="ad0ba-196">2</span></span>|<span data-ttu-id="ad0ba-197">3</span><span class="sxs-lookup"><span data-stu-id="ad0ba-197">3</span></span>|  
|<span data-ttu-id="ad0ba-198">Bracket</span><span class="sxs-lookup"><span data-stu-id="ad0ba-198">Bracket</span></span>|<span data-ttu-id="ad0ba-199">1</span><span class="sxs-lookup"><span data-stu-id="ad0ba-199">1</span></span>|<span data-ttu-id="ad0ba-200">3</span><span class="sxs-lookup"><span data-stu-id="ad0ba-200">3</span></span>|<span data-ttu-id="ad0ba-201">3</span><span class="sxs-lookup"><span data-stu-id="ad0ba-201">3</span></span>|  
|<span data-ttu-id="ad0ba-202">組件</span><span class="sxs-lookup"><span data-stu-id="ad0ba-202">Assembly</span></span>|<span data-ttu-id="ad0ba-203">1</span><span class="sxs-lookup"><span data-stu-id="ad0ba-203">1</span></span>|<span data-ttu-id="ad0ba-204">2</span><span class="sxs-lookup"><span data-stu-id="ad0ba-204">2</span></span>|<span data-ttu-id="ad0ba-205">6</span><span class="sxs-lookup"><span data-stu-id="ad0ba-205">6</span></span>|  
|<span data-ttu-id="ad0ba-206">3</span><span class="sxs-lookup"><span data-stu-id="ad0ba-206">3</span></span>|<span data-ttu-id="ad0ba-207">1</span><span class="sxs-lookup"><span data-stu-id="ad0ba-207">1</span></span>|<span data-ttu-id="ad0ba-208">2</span><span class="sxs-lookup"><span data-stu-id="ad0ba-208">2</span></span>|<span data-ttu-id="ad0ba-209">7</span><span class="sxs-lookup"><span data-stu-id="ad0ba-209">7</span></span>|  
|<span data-ttu-id="ad0ba-210">安裝</span><span class="sxs-lookup"><span data-stu-id="ad0ba-210">Installation</span></span>|<span data-ttu-id="ad0ba-211">1</span><span class="sxs-lookup"><span data-stu-id="ad0ba-211">1</span></span>|<span data-ttu-id="ad0ba-212">3</span><span class="sxs-lookup"><span data-stu-id="ad0ba-212">3</span></span>|<span data-ttu-id="ad0ba-213">4</span><span class="sxs-lookup"><span data-stu-id="ad0ba-213">4</span></span>|  
  
 <span data-ttu-id="ad0ba-214">**Keyword** 資料行包含編列索引時所擷取的單一 Token 表示法。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-214">The **Keyword** column contains a representation of a single token extracted at indexing time.</span></span> <span data-ttu-id="ad0ba-215">文字分隔會決定 Token 的組成項目。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-215">Word breakers determine what makes up a token.</span></span>  
  
 <span data-ttu-id="ad0ba-216">**ColId** 資料行所包含的值會對應到已建立全文檢索索引的特定資料行。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-216">The **ColId** column contains a value that corresponds to a particular column that is full-text indexed.</span></span>  
  
 <span data-ttu-id="ad0ba-217">此 `DocId` 資料行包含八個位元組整數的值，對應到全文檢索索引資料表中的特定全文檢索索引鍵值。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-217">The `DocId` column contains values for an eight-byte integer that maps to a particular full-text key value in a full-text indexed table.</span></span> <span data-ttu-id="ad0ba-218">當全文檢索索引鍵不是整數資料類型時，這項對應就是必要的。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-218">This mapping is necessary when the full-text key is not an integer data type.</span></span> <span data-ttu-id="ad0ba-219">在這種情況下，全文檢索索引鍵值與值之間的 `DocId` 對應會保留在稱為 DocId Mapping 資料表的個別資料表中。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-219">In such cases, mappings between full-text key values and `DocId` values are maintained in a separate table called the DocId Mapping table.</span></span> <span data-ttu-id="ad0ba-220">若要查詢這些對應，請使用 [sp_fulltext_keymappings](/sql/relational-databases/system-stored-procedures/sp-fulltext-keymappings-transact-sql) 系統預存程序。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-220">To query for these mappings use the [sp_fulltext_keymappings](/sql/relational-databases/system-stored-procedures/sp-fulltext-keymappings-transact-sql) system stored procedure.</span></span> <span data-ttu-id="ad0ba-221">為了滿足搜尋條件，上述資料表中的 DocId 值必須與 DocId Mapping 資料表聯結，以便從查詢的基底資料表中擷取資料列。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-221">To satisfy a search condition, DocId values from the above table need to be joined with the DocId Mapping table to retrieve rows from the base table being queried.</span></span> <span data-ttu-id="ad0ba-222">如果基底資料表的全文檢索索引鍵值是整數類型，此值就會直接當做 DocId 而且不需要任何對應。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-222">If the full-text key value of the base table is an integer type, the value directly serves as the DocId and no mapping is necessary.</span></span> <span data-ttu-id="ad0ba-223">因此，使用整數全文檢索索引鍵值有助於最佳化全文檢索查詢。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-223">Therefore, using integer full-text key values can help optimize full-text queries.</span></span>  
  
 <span data-ttu-id="ad0ba-224">**Occurrence** 資料行包含整數值。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-224">The **Occurrence** column contains an integer value.</span></span> <span data-ttu-id="ad0ba-225">針對每個 DocId 值，都會有一個對應到該 DocId 內特定關鍵字之相對單字位移的出現次數值清單。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-225">For each DocId value, there is a list of occurrence values that correspond to the relative word offsets of the particular keyword within that DocId.</span></span> <span data-ttu-id="ad0ba-226">出現次數值有助於決定詞句或相似的相符項目，例如，具有鄰近發生次數值的片語。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-226">Occurrence values are useful in determining phrase or proximity matches, for example, phrases have numerically adjacent occurrence values.</span></span> <span data-ttu-id="ad0ba-227">它們也有助於計算相關分數。例如，在 DocId 中的關鍵字出現次數可用來計分。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-227">They are also useful in computing relevance scores; for example, the number of occurrences of a keyword in a DocId may be used in scoring.</span></span>  
  
 [<span data-ttu-id="ad0ba-228">本主題內容</span><span class="sxs-lookup"><span data-stu-id="ad0ba-228">In This Topic</span></span>](#top)  
  
##  <a name="full-text-index-fragments"></a><a name="fragments"></a><span data-ttu-id="ad0ba-229">全文檢索索引片段</span><span class="sxs-lookup"><span data-stu-id="ad0ba-229">Full-Text Index Fragments</span></span>  
 <span data-ttu-id="ad0ba-230">邏輯全文檢索索引通常會在多份內部資料表之間分割。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-230">The logical full-text index is usually split across multiple internal tables.</span></span> <span data-ttu-id="ad0ba-231">每份內部資料表會稱為全文檢索索引片段。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-231">Each internal table is called a full-text index fragment.</span></span> <span data-ttu-id="ad0ba-232">其中某些片段可能包含比其他片段更新的資料。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-232">Some of these fragments might contain newer data than others.</span></span> <span data-ttu-id="ad0ba-233">例如，如果使用者更新 DocId 為 3 的下列資料列，而且資料表已進行自動變更追蹤，就會建立新的片段。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-233">For example, if a user updates the following row whose DocId is 3 and the table is auto change-tracked, a new fragment is created.</span></span>  
  
|<span data-ttu-id="ad0ba-234">DocumentID</span><span class="sxs-lookup"><span data-stu-id="ad0ba-234">DocumentID</span></span>|<span data-ttu-id="ad0ba-235">Title</span><span class="sxs-lookup"><span data-stu-id="ad0ba-235">Title</span></span>|  
|----------------|-----------|  
|<span data-ttu-id="ad0ba-236">3</span><span class="sxs-lookup"><span data-stu-id="ad0ba-236">3</span></span>|<span data-ttu-id="ad0ba-237">Rear Reflector</span><span class="sxs-lookup"><span data-stu-id="ad0ba-237">Rear Reflector</span></span>|  
  
 <span data-ttu-id="ad0ba-238">在下列範例 (顯示片段 2) 中，此片段包含的 DocId 3 相關資料比片段 1 更新。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-238">In the following example, which shows Fragment 2, the fragment contains newer data about DocId 3 compared to Fragment 1.</span></span> <span data-ttu-id="ad0ba-239">因此，當使用者查詢 "Rear Reflector" 時，片段 2 的資料就會用於 DocId 3。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-239">Therefore, when the user queries for "Rear Reflector" the data from Fragment 2 is used for DocId 3.</span></span> <span data-ttu-id="ad0ba-240">每個片段都會以建立時間戳記標示，而且您可以使用 [sys.fulltext_index_fragments](/sql/relational-databases/system-catalog-views/sys-fulltext-index-fragments-transact-sql) 目錄檢視，查詢此時間戳記。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-240">Each fragment is marked with a creation timestamp that can be queried by using the [sys.fulltext_index_fragments](/sql/relational-databases/system-catalog-views/sys-fulltext-index-fragments-transact-sql) catalog view.</span></span>  
  
 <span data-ttu-id="ad0ba-241">**片段 2**</span><span class="sxs-lookup"><span data-stu-id="ad0ba-241">**Fragment 2**</span></span>  
  
|<span data-ttu-id="ad0ba-242">關鍵字</span><span class="sxs-lookup"><span data-stu-id="ad0ba-242">Keyword</span></span>|<span data-ttu-id="ad0ba-243">ColId</span><span class="sxs-lookup"><span data-stu-id="ad0ba-243">ColId</span></span>|<span data-ttu-id="ad0ba-244">DocId</span><span class="sxs-lookup"><span data-stu-id="ad0ba-244">DocId</span></span>|<span data-ttu-id="ad0ba-245">Occ</span><span class="sxs-lookup"><span data-stu-id="ad0ba-245">Occ</span></span>|  
|-------------|-----------|-----------|---------|  
|<span data-ttu-id="ad0ba-246">Rear</span><span class="sxs-lookup"><span data-stu-id="ad0ba-246">Rear</span></span>|<span data-ttu-id="ad0ba-247">1</span><span class="sxs-lookup"><span data-stu-id="ad0ba-247">1</span></span>|<span data-ttu-id="ad0ba-248">3</span><span class="sxs-lookup"><span data-stu-id="ad0ba-248">3</span></span>|<span data-ttu-id="ad0ba-249">1</span><span class="sxs-lookup"><span data-stu-id="ad0ba-249">1</span></span>|  
|<span data-ttu-id="ad0ba-250">Reflector</span><span class="sxs-lookup"><span data-stu-id="ad0ba-250">Reflector</span></span>|<span data-ttu-id="ad0ba-251">1</span><span class="sxs-lookup"><span data-stu-id="ad0ba-251">1</span></span>|<span data-ttu-id="ad0ba-252">3</span><span class="sxs-lookup"><span data-stu-id="ad0ba-252">3</span></span>|<span data-ttu-id="ad0ba-253">2</span><span class="sxs-lookup"><span data-stu-id="ad0ba-253">2</span></span>|  
  
 <span data-ttu-id="ad0ba-254">如片段 2 所示，全文檢索查詢必須在內部查詢每個片段並捨棄較舊的項目。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-254">As can be seen from Fragment 2, full-text queries need to query each fragment internally and discard older entries.</span></span> <span data-ttu-id="ad0ba-255">因此，如果全文檢索索引包含過多全文檢索索引片段，可能會導致查詢效能大幅降低。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-255">Therefore, too many full-text index fragments in the full-text index can lead to substantial degradation in query performance.</span></span> <span data-ttu-id="ad0ba-256">若要減少片段的數目，請使用 [ALTER FULLTEXT CATALOG](/sql/t-sql/statements/alter-fulltext-catalog-transact-sql)[!INCLUDE[tsql](../../includes/tsql-md.md)] 陳述式的 REORGANIZE 選項來重新組織全文檢索目錄。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-256">To reduce the number of fragments, reorganize the fulltext catalog by using the REORGANIZE option of the [ALTER FULLTEXT CATALOG](/sql/t-sql/statements/alter-fulltext-catalog-transact-sql)[!INCLUDE[tsql](../../includes/tsql-md.md)] statement.</span></span> <span data-ttu-id="ad0ba-257">這個陳述式會執行「主要合併」，將片段合併成較大的單一片段，然後從全文檢索索引中移除所有已過時的項目。</span><span class="sxs-lookup"><span data-stu-id="ad0ba-257">This statement performs a *master merge*, which merges the fragments into a single larger fragment and removes all obsolete entries from the full-text index.</span></span>  
  
 <span data-ttu-id="ad0ba-258">重新組織之後，範例索引就會包含下列資料列：</span><span class="sxs-lookup"><span data-stu-id="ad0ba-258">After being reorganized, the example index would contain the following rows:</span></span>  
  
|<span data-ttu-id="ad0ba-259">關鍵字</span><span class="sxs-lookup"><span data-stu-id="ad0ba-259">Keyword</span></span>|<span data-ttu-id="ad0ba-260">ColId</span><span class="sxs-lookup"><span data-stu-id="ad0ba-260">ColId</span></span>|<span data-ttu-id="ad0ba-261">DocId</span><span class="sxs-lookup"><span data-stu-id="ad0ba-261">DocId</span></span>|<span data-ttu-id="ad0ba-262">Occ</span><span class="sxs-lookup"><span data-stu-id="ad0ba-262">Occ</span></span>|  
|-------------|-----------|-----------|---------|  
|<span data-ttu-id="ad0ba-263">Crank</span><span class="sxs-lookup"><span data-stu-id="ad0ba-263">Crank</span></span>|<span data-ttu-id="ad0ba-264">1</span><span class="sxs-lookup"><span data-stu-id="ad0ba-264">1</span></span>|<span data-ttu-id="ad0ba-265">1</span><span class="sxs-lookup"><span data-stu-id="ad0ba-265">1</span></span>|<span data-ttu-id="ad0ba-266">1</span><span class="sxs-lookup"><span data-stu-id="ad0ba-266">1</span></span>|  
|<span data-ttu-id="ad0ba-267">Arm</span><span class="sxs-lookup"><span data-stu-id="ad0ba-267">Arm</span></span>|<span data-ttu-id="ad0ba-268">1</span><span class="sxs-lookup"><span data-stu-id="ad0ba-268">1</span></span>|<span data-ttu-id="ad0ba-269">1</span><span class="sxs-lookup"><span data-stu-id="ad0ba-269">1</span></span>|<span data-ttu-id="ad0ba-270">2</span><span class="sxs-lookup"><span data-stu-id="ad0ba-270">2</span></span>|  
|<span data-ttu-id="ad0ba-271">Tire</span><span class="sxs-lookup"><span data-stu-id="ad0ba-271">Tire</span></span>|<span data-ttu-id="ad0ba-272">1</span><span class="sxs-lookup"><span data-stu-id="ad0ba-272">1</span></span>|<span data-ttu-id="ad0ba-273">1</span><span class="sxs-lookup"><span data-stu-id="ad0ba-273">1</span></span>|<span data-ttu-id="ad0ba-274">4</span><span class="sxs-lookup"><span data-stu-id="ad0ba-274">4</span></span>|  
|<span data-ttu-id="ad0ba-275">維護</span><span class="sxs-lookup"><span data-stu-id="ad0ba-275">Maintenance</span></span>|<span data-ttu-id="ad0ba-276">1</span><span class="sxs-lookup"><span data-stu-id="ad0ba-276">1</span></span>|<span data-ttu-id="ad0ba-277">1</span><span class="sxs-lookup"><span data-stu-id="ad0ba-277">1</span></span>|<span data-ttu-id="ad0ba-278">5</span><span class="sxs-lookup"><span data-stu-id="ad0ba-278">5</span></span>|  
|<span data-ttu-id="ad0ba-279">Front</span><span class="sxs-lookup"><span data-stu-id="ad0ba-279">Front</span></span>|<span data-ttu-id="ad0ba-280">1</span><span class="sxs-lookup"><span data-stu-id="ad0ba-280">1</span></span>|<span data-ttu-id="ad0ba-281">2</span><span class="sxs-lookup"><span data-stu-id="ad0ba-281">2</span></span>|<span data-ttu-id="ad0ba-282">1</span><span class="sxs-lookup"><span data-stu-id="ad0ba-282">1</span></span>|  
|<span data-ttu-id="ad0ba-283">Rear</span><span class="sxs-lookup"><span data-stu-id="ad0ba-283">Rear</span></span>|<span data-ttu-id="ad0ba-284">1</span><span class="sxs-lookup"><span data-stu-id="ad0ba-284">1</span></span>|<span data-ttu-id="ad0ba-285">3</span><span class="sxs-lookup"><span data-stu-id="ad0ba-285">3</span></span>|<span data-ttu-id="ad0ba-286">1</span><span class="sxs-lookup"><span data-stu-id="ad0ba-286">1</span></span>|  
|<span data-ttu-id="ad0ba-287">Reflector</span><span class="sxs-lookup"><span data-stu-id="ad0ba-287">Reflector</span></span>|<span data-ttu-id="ad0ba-288">1</span><span class="sxs-lookup"><span data-stu-id="ad0ba-288">1</span></span>|<span data-ttu-id="ad0ba-289">2</span><span class="sxs-lookup"><span data-stu-id="ad0ba-289">2</span></span>|<span data-ttu-id="ad0ba-290">2</span><span class="sxs-lookup"><span data-stu-id="ad0ba-290">2</span></span>|  
|<span data-ttu-id="ad0ba-291">Reflector</span><span class="sxs-lookup"><span data-stu-id="ad0ba-291">Reflector</span></span>|<span data-ttu-id="ad0ba-292">1</span><span class="sxs-lookup"><span data-stu-id="ad0ba-292">1</span></span>|<span data-ttu-id="ad0ba-293">2</span><span class="sxs-lookup"><span data-stu-id="ad0ba-293">2</span></span>|<span data-ttu-id="ad0ba-294">5</span><span class="sxs-lookup"><span data-stu-id="ad0ba-294">5</span></span>|  
|<span data-ttu-id="ad0ba-295">Reflector</span><span class="sxs-lookup"><span data-stu-id="ad0ba-295">Reflector</span></span>|<span data-ttu-id="ad0ba-296">1</span><span class="sxs-lookup"><span data-stu-id="ad0ba-296">1</span></span>|<span data-ttu-id="ad0ba-297">3</span><span class="sxs-lookup"><span data-stu-id="ad0ba-297">3</span></span>|<span data-ttu-id="ad0ba-298">2</span><span class="sxs-lookup"><span data-stu-id="ad0ba-298">2</span></span>|  
|<span data-ttu-id="ad0ba-299">Bracket</span><span class="sxs-lookup"><span data-stu-id="ad0ba-299">Bracket</span></span>|<span data-ttu-id="ad0ba-300">1</span><span class="sxs-lookup"><span data-stu-id="ad0ba-300">1</span></span>|<span data-ttu-id="ad0ba-301">2</span><span class="sxs-lookup"><span data-stu-id="ad0ba-301">2</span></span>|<span data-ttu-id="ad0ba-302">3</span><span class="sxs-lookup"><span data-stu-id="ad0ba-302">3</span></span>|  
|<span data-ttu-id="ad0ba-303">組件</span><span class="sxs-lookup"><span data-stu-id="ad0ba-303">Assembly</span></span>|<span data-ttu-id="ad0ba-304">1</span><span class="sxs-lookup"><span data-stu-id="ad0ba-304">1</span></span>|<span data-ttu-id="ad0ba-305">2</span><span class="sxs-lookup"><span data-stu-id="ad0ba-305">2</span></span>|<span data-ttu-id="ad0ba-306">6</span><span class="sxs-lookup"><span data-stu-id="ad0ba-306">6</span></span>|  
|<span data-ttu-id="ad0ba-307">3</span><span class="sxs-lookup"><span data-stu-id="ad0ba-307">3</span></span>|<span data-ttu-id="ad0ba-308">1</span><span class="sxs-lookup"><span data-stu-id="ad0ba-308">1</span></span>|<span data-ttu-id="ad0ba-309">2</span><span class="sxs-lookup"><span data-stu-id="ad0ba-309">2</span></span>|<span data-ttu-id="ad0ba-310">7</span><span class="sxs-lookup"><span data-stu-id="ad0ba-310">7</span></span>|  
  
 [<span data-ttu-id="ad0ba-311">本主題內容</span><span class="sxs-lookup"><span data-stu-id="ad0ba-311">In This Topic</span></span>](#top)  
  
  
