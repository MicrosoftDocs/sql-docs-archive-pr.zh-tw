---
title: 參數化資料列篩選 | Microsoft Docs
ms.custom: ''
ms.date: 06/02/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- publications [SQL Server replication], dynamic filters
- merge replication [SQL Server replication], dynamic filters
- parameterized filters [SQL Server replication]
- filters [SQL Server replication], dynamic
- merge replication parameterized filters [SQL Server replication]
- publications [SQL Server replication], parameterized filters
- parameterized filters [SQL Server replication], about parameterized filters
- filters [SQL Server replication], parameterized
- dynamic filters [SQL Server replication]
ms.assetid: b48a6825-068f-47c8-afdc-c83540da4639
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: a293d5dfc6bfbdf66afb680f0604117e2cc02b2d
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87585316"
---
# <a name="parameterized-row-filters"></a><span data-ttu-id="62000-102">Parameterized Row Filters</span><span class="sxs-lookup"><span data-stu-id="62000-102">Parameterized Row Filters</span></span>
  <span data-ttu-id="62000-103">參數化資料列篩選允許將不同的資料分割傳送到不同的訂閱者，而不需要建立多個發行集 (參數化篩選在舊版本的 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]中稱為動態篩選)。</span><span class="sxs-lookup"><span data-stu-id="62000-103">Parameterized row filters allow different partitions of data to be sent to different Subscribers without requiring multiple publications to be created (parameterized filters were referred to as dynamic filters in previous versions of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]).</span></span> <span data-ttu-id="62000-104">資料分割是資料表中資料列的子集；根據建立參數化資料列篩選時選取的設定，已發行資料表中的每個資料列可僅屬於一個資料分割 (產生不重疊資料分割)，也可屬於兩個或兩個以上的資料分割 (產生重疊資料分割)。</span><span class="sxs-lookup"><span data-stu-id="62000-104">A partition is a subset of the rows in a table; depending on the settings chosen when creating a parameterized row filter, each row in a published table can belong to one partition only (which produces nonoverlapping partitions) or to two or more partitions (which produces overlapping partitions).</span></span>  
  
 <span data-ttu-id="62000-105">不重疊資料分割可以在訂閱之間共用，或限制其僅讓一個訂閱能收到給定資料分割。</span><span class="sxs-lookup"><span data-stu-id="62000-105">Nonoverlapping partitions can be shared among subscriptions or they can be restricted so that only one subscription receives a given partition.</span></span> <span data-ttu-id="62000-106">本主題之後的「使用適當的篩選選項」一節中會描述控制資料分割行為的設定。</span><span class="sxs-lookup"><span data-stu-id="62000-106">The settings that control partition behavior are described in "Using the Appropriate Filtering Options" later in this topic.</span></span> <span data-ttu-id="62000-107">透過使用這些設定，您可以依據應用程式及效能需求量身訂作參數化篩選。</span><span class="sxs-lookup"><span data-stu-id="62000-107">Using these settings you can tailor parameterized filtering according to application and performance requirements.</span></span> <span data-ttu-id="62000-108">一般來說，重疊資料分割允許較大的彈性，而複寫到單一訂閱的不重疊資料分割則會提供較佳的效能。</span><span class="sxs-lookup"><span data-stu-id="62000-108">In general, overlapping partitions allow for greater flexibility, and nonoverlapping partitions replicated to a single subscription provide better performance.</span></span>  
  
 <span data-ttu-id="62000-109">參數化篩選用於單一資料表，通常與聯結篩選組合以將篩選擴充到相關資料表。</span><span class="sxs-lookup"><span data-stu-id="62000-109">Parameterized filters are used on a single table and are typically combined with join filters to extend filtering to related tables.</span></span> <span data-ttu-id="62000-110">如需相關資訊，請參閱 [Join Filters](join-filters.md)。</span><span class="sxs-lookup"><span data-stu-id="62000-110">For more information, see [Join Filters](join-filters.md).</span></span>  
  
 <span data-ttu-id="62000-111">若要定義或修改參數化資料列篩選，請參閱＜ [針對合併發行項定義及修改參數化資料列篩選](../publish/define-and-modify-a-parameterized-row-filter-for-a-merge-article.md)＞。</span><span class="sxs-lookup"><span data-stu-id="62000-111">To define or modify a parameterized row filter, see [Define and Modify a Parameterized Row Filter for a Merge Article](../publish/define-and-modify-a-parameterized-row-filter-for-a-merge-article.md).</span></span>  
  
## <a name="how-parameterized-filters-work"></a><span data-ttu-id="62000-112">參數化篩選如何運作</span><span class="sxs-lookup"><span data-stu-id="62000-112">How Parameterized Filters Work</span></span>  
 <span data-ttu-id="62000-113">參數化資料列篩選器使用 WHERE 子句選取要發行的適當資料。</span><span class="sxs-lookup"><span data-stu-id="62000-113">A parameterized row filter uses a WHERE clause to select the appropriate data to be published.</span></span> <span data-ttu-id="62000-114">您可以指定 SUSER_SNAME() 與 HOST_NAME() 系統函數中的其中之一或兩者，而不要在子句中指定常值 (如同對靜態資料列篩選那樣)。</span><span class="sxs-lookup"><span data-stu-id="62000-114">Rather than specifying a literal value in the clause (as you do with a static row filter), you specify one or both of the following system functions: SUSER_SNAME() and HOST_NAME().</span></span> <span data-ttu-id="62000-115">也可以使用使用者定義函數，但它們必須在函數主體中包含 SUSER_SNAME() 或 HOST_NAME()，或者評估這些系統函數的其中之一 (例如 `MyUDF(SUSER_SNAME()`)。</span><span class="sxs-lookup"><span data-stu-id="62000-115">User-defined functions can also be used, but they must include SUSER_SNAME() or HOST_NAME() in the body of the function, or evaluate one of these system functions (such as `MyUDF(SUSER_SNAME()`).</span></span> <span data-ttu-id="62000-116">如果使用者定義函數在函數主體中包含 SUSER_SNAME() 或 HOST_NAME()，則您將無法將參數傳遞到該函數。</span><span class="sxs-lookup"><span data-stu-id="62000-116">If a user-defined function includes SUSER_SNAME() or HOST_NAME() in the body of the function, you cannot pass parameters to the function.</span></span>  
  
 <span data-ttu-id="62000-117">系統函數 SUSER_SNAME() 和 HOST_NAME() 並不是合併式複寫的特定函數，但是可以由合併式複寫用來進行參數化篩選：</span><span class="sxs-lookup"><span data-stu-id="62000-117">The system functions SUSER_SNAME() and HOST_NAME() are not specific to merge replication, but they are used by merge replication for parameterized filtering:</span></span>  
  
-   <span data-ttu-id="62000-118">SUSER_SNAME() 會傳回對 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]執行個體建立連接的登入資訊。</span><span class="sxs-lookup"><span data-stu-id="62000-118">SUSER_SNAME() returns login information for connections made to an instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="62000-119">當用於參數化篩選時，它會傳回「合併代理程式」使用其連接到「發行者」的登入 (建立訂閱時，您會指定一個登入)。</span><span class="sxs-lookup"><span data-stu-id="62000-119">When used in a parameterized filter, it returns the login used by the Merge Agent to connect to the Publisher (you specify a login when you create a subscription).</span></span>  
  
-   <span data-ttu-id="62000-120">HOST_NAME() 傳回連接到 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]執行個體的電腦名稱。</span><span class="sxs-lookup"><span data-stu-id="62000-120">HOST_NAME() returns the name of the computer that is connecting to an instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="62000-121">當用於參數化篩選時，依預設，該函數會傳回「合併代理程式」執行於其上之電腦的名稱。</span><span class="sxs-lookup"><span data-stu-id="62000-121">When used in a parameterized filter, by default it returns the name of the computer on which the Merge Agent is running.</span></span> <span data-ttu-id="62000-122">對於提取訂閱，它是「訂閱者」的名稱；對於發送訂閱，它是「散發者」的名稱。</span><span class="sxs-lookup"><span data-stu-id="62000-122">For pull subscriptions it is the name of the Subscriber; for push subscriptions it is the name of the Distributor.</span></span>  
  
     <span data-ttu-id="62000-123">也可以使用「訂閱者」或「散發者」名稱之外的其他值覆寫此函數。</span><span class="sxs-lookup"><span data-stu-id="62000-123">It is also possible to override this function with a value other than the name of the Subscriber or Distributor.</span></span> <span data-ttu-id="62000-124">通常，應用程式會使用更有意義的值覆寫此函數，例如業務員的姓名或識別碼。</span><span class="sxs-lookup"><span data-stu-id="62000-124">Typically applications override this function with more meaningful values, such as a salesperson name or salesperson ID.</span></span> <span data-ttu-id="62000-125">如需詳細資訊，請參閱本主題中的＜覆寫 HOST_NAME() 值＞一節。</span><span class="sxs-lookup"><span data-stu-id="62000-125">For more information, see the section "Overriding the HOST_NAME() Value" in this topic.</span></span>  
  
 <span data-ttu-id="62000-126">系統函數傳回的值會與要篩選之資料表中所指定的資料行加以比較，並且適當的資料也會下載到「訂閱者」。</span><span class="sxs-lookup"><span data-stu-id="62000-126">The value returned by the system function is compared to a column you specify in the table you are filtering, and the appropriate data is downloaded to the Subscriber.</span></span> <span data-ttu-id="62000-127">此比較在初始化訂閱 (如此便只有適當的資料才會包含在初始快照集中) 以及每次同步處理訂閱時執行。</span><span class="sxs-lookup"><span data-stu-id="62000-127">This comparison is made when the subscription is initialized (so only the appropriate data is contained in the initial snapshot) and every time the subscription is synchronized.</span></span> <span data-ttu-id="62000-128">根據預設，如果發行者端的變更導致資料列移出資料分割，則會在訂閱者端刪除該資料列 (此行為是使用 **@allow_partition_realignment** [Sp_addmergepublication &#40;transact-sql&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergepublication-transact-sql)) 的參數所控制。</span><span class="sxs-lookup"><span data-stu-id="62000-128">By default, if a change at the Publisher results in a row being moved out of a partition, the row is deleted at the Subscriber (this behavior is controlled using the **@allow_partition_realignment** parameter of [sp_addmergepublication &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergepublication-transact-sql)).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="62000-129">當為參數化篩選執行比較時，會始終使用資料庫定序。</span><span class="sxs-lookup"><span data-stu-id="62000-129">When comparisons are made for parameterized filters, the database collation is always used.</span></span> <span data-ttu-id="62000-130">例如，如果資料庫定序不區分大小寫，但資料表或資料行定序區分大小寫，則比較將不區分大小寫。</span><span class="sxs-lookup"><span data-stu-id="62000-130">For example, if the database collation is case insensitive, but the table or column collation is case sensitive, the comparison will be case insensitive.</span></span>  
  
### <a name="filtering-with-suser_sname"></a><span data-ttu-id="62000-131">使用 SUSER_SNAME() 篩選</span><span class="sxs-lookup"><span data-stu-id="62000-131">Filtering with SUSER_SNAME()</span></span>  
 <span data-ttu-id="62000-132">請考慮 **範例資料庫中的** Employee 資料表 [!INCLUDE[ssSampleDBCoShort](../../../includes/sssampledbcoshort-md.md)] 。</span><span class="sxs-lookup"><span data-stu-id="62000-132">Consider the **Employee Table** in the [!INCLUDE[ssSampleDBCoShort](../../../includes/sssampledbcoshort-md.md)] sample database.</span></span> <span data-ttu-id="62000-133">此資料表包括 **LoginID**資料行，其中含有每一位員工的登入，格式為 '*domain\login*'。</span><span class="sxs-lookup"><span data-stu-id="62000-133">This table includes the column **LoginID**, which contains the login for each employee in the form '*domain\login*'.</span></span> <span data-ttu-id="62000-134">若要篩選這個資料表，好讓每一位員工只收到與其相關的資料，請指定以下的篩選子句：</span><span class="sxs-lookup"><span data-stu-id="62000-134">To filter this table so that employees receive only the data related to them, specify a filter clause of:</span></span>  
  
```  
LoginID = SUSER_SNAME()  
```  
  
 <span data-ttu-id="62000-135">例如，其中一位員工的值為 'adventure-works\john5'。</span><span class="sxs-lookup"><span data-stu-id="62000-135">For example, the value for one of the employees is 'adventure-works\john5'.</span></span> <span data-ttu-id="62000-136">則當「合併代理程式」連接到「發行者」時，它會使用您在建立訂閱時指定的登入 (此狀況中為 'adventure-works\john5')。</span><span class="sxs-lookup"><span data-stu-id="62000-136">When the Merge Agent connects to the Publisher, it uses the login you specified when creating the subscription (in this case 'adventure-works\john5').</span></span> <span data-ttu-id="62000-137">「合併代理程式」會將 SUSER_SNAME() 傳回的值與資料表中的值相比較，並僅下載 **LoginID** 資料行中包含值 'adventure-works\john5' 的資料列。</span><span class="sxs-lookup"><span data-stu-id="62000-137">The Merge Agent then compares the value returned by SUSER_SNAME() to the values in the table and downloads only the row that contains a value of 'adventure-works\john5' in the **LoginID** column.</span></span>  
  
### <a name="filtering-with-host_name"></a><span data-ttu-id="62000-138">使用 HOST_NAME() 篩選</span><span class="sxs-lookup"><span data-stu-id="62000-138">Filtering with HOST_NAME()</span></span>  
 <span data-ttu-id="62000-139">考慮 **HumanResources.Employee** 資料表。</span><span class="sxs-lookup"><span data-stu-id="62000-139">Consider the **HumanResources.Employee** table.</span></span> <span data-ttu-id="62000-140">假設此資料表包含一個資料行，如 **ComputerName** ，其中每一位員工的電腦名稱格式為 '*name_computertype*'。</span><span class="sxs-lookup"><span data-stu-id="62000-140">Suppose this table contained a column such as **ComputerName** with the name of each employee's computer in the form '*name_computertype*'.</span></span> <span data-ttu-id="62000-141">若要篩選這個資料表，好讓每一位員工只收到與其相關的資料，請指定以下的篩選子句：</span><span class="sxs-lookup"><span data-stu-id="62000-141">To filter this table so that employees receive only the data related to them, specify a filter clause of:</span></span>  
  
```  
ComputerName = HOST_NAME()  
```  
  
 <span data-ttu-id="62000-142">例如，其中一位員工的值為 'john5_laptop'。</span><span class="sxs-lookup"><span data-stu-id="62000-142">For example, the value for one of the employees could be 'john5_laptop'.</span></span> <span data-ttu-id="62000-143">當「合併代理程式」連接到「發行者」時，它會將 HOST_NAME() 傳回的值與資料表中的值相比較，並僅下載在 **ComputerName** 資料行中包含值 'john5_laptop' 的資料列。</span><span class="sxs-lookup"><span data-stu-id="62000-143">When the Merge Agent connects to the Publisher, it compares the value returned by HOST_NAME() to the values in the table and downloads only the row that contains a value of 'john5_laptop' in the **ComputerName** column.</span></span>  
  
 <span data-ttu-id="62000-144">也可以在一個篩選中合併多個函數。</span><span class="sxs-lookup"><span data-stu-id="62000-144">It is also possible to combine the functions in a filter.</span></span> <span data-ttu-id="62000-145">例如，如果您想確保只有每位員工在各自電腦上使用他們的登入時才會接收資料，則篩選子句會是：</span><span class="sxs-lookup"><span data-stu-id="62000-145">For example, if you wanted to ensure that an employee received data only if they used their login on their computer, the filter clause could be:</span></span>  
  
```  
LoginID = SUSER_SNAME() AND ComputerName = HOST_NAME()  
```  
  
 <span data-ttu-id="62000-146">除非您正在覆寫 HOST_NAME() 值，否則使用 HOST_NAME() 進行篩選通常僅用於提取訂閱。</span><span class="sxs-lookup"><span data-stu-id="62000-146">Unless you are overriding the HOST_NAME() value, filtering with HOST_NAME() is typically used only with pull subscriptions.</span></span> <span data-ttu-id="62000-147">該函數傳回的值是「合併代理程式」執行於其上之電腦名稱。</span><span class="sxs-lookup"><span data-stu-id="62000-147">The value returned by the function is the name of the computer on which the Merge Agent is running.</span></span> <span data-ttu-id="62000-148">針對提取訂閱，該值對每個訂閱均為不同，但是針對發送訂閱，該值是相同的 (所有「合併代理程式」都在發送訂閱的散發者端執行)。</span><span class="sxs-lookup"><span data-stu-id="62000-148">For pull subscriptions, the value is different for each subscription, but for push subscriptions, the value is the same (all Merge Agents run at the Distributor for push subscriptions).</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="62000-149">HOST_NAME() 函數的值可以覆寫；因此不可使用包含 HOST_NAME() 的篩選控制資料分割的存取。</span><span class="sxs-lookup"><span data-stu-id="62000-149">The value for the HOST_NAME() function can be overridden; therefore it is not possible to use filters that include HOST_NAME() to control access to partitions of data.</span></span> <span data-ttu-id="62000-150">若要控制資料分割的存取，請將 SUSER_SNAME()、SUSER_SNAME() 與 HOST_NAME() 合併使用，或者使用靜態資料列篩選。</span><span class="sxs-lookup"><span data-stu-id="62000-150">To control access to partitions of data, use SUSER_SNAME(), SUSER_SNAME() in combination with HOST_NAME(), or use static row filters.</span></span>  
  
#### <a name="overriding-the-host_name-value"></a><span data-ttu-id="62000-151">覆寫 HOST_NAME() 值</span><span class="sxs-lookup"><span data-stu-id="62000-151">Overriding the HOST_NAME() Value</span></span>  
 <span data-ttu-id="62000-152">如前所述，依預設，HOST_NAME() 會傳回連接到 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]執行個體的電腦名稱。</span><span class="sxs-lookup"><span data-stu-id="62000-152">As noted earlier, HOST_NAME() by default returns the name of the computer that is connecting to an instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="62000-153">使用參數化篩選時，通常透過建立訂閱時提供一個值來覆寫此值。</span><span class="sxs-lookup"><span data-stu-id="62000-153">When using parameterized filters, it is common to override this value by supplying a value when you create a subscription.</span></span> <span data-ttu-id="62000-154">HOST_NAME() 函數就會傳回您指定的值，而非電腦的名稱。</span><span class="sxs-lookup"><span data-stu-id="62000-154">The HOST_NAME() function then returns the value you specify rather than the name of the computer.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="62000-155">如果您覆寫 HOST_NAME()，則所有對 HOST_NAME() 函數的呼叫均會傳回您指定的值。</span><span class="sxs-lookup"><span data-stu-id="62000-155">If you override HOST_NAME(), all calls to the HOST_NAME() function will return the value you specify.</span></span> <span data-ttu-id="62000-156">請確定其他應用程式不會相依於由 HOST_NAME() 傳回電腦名稱。</span><span class="sxs-lookup"><span data-stu-id="62000-156">Ensure that other applications are not depending on HOST_NAME() returning the computer name.</span></span>  
  
 <span data-ttu-id="62000-157">考慮 **HumanResources.Employee** 資料表。</span><span class="sxs-lookup"><span data-stu-id="62000-157">Consider the **HumanResources.Employee** table.</span></span> <span data-ttu-id="62000-158">此資料表包含資料行 **EmployeeID**。</span><span class="sxs-lookup"><span data-stu-id="62000-158">This table includes the column **EmployeeID**.</span></span> <span data-ttu-id="62000-159">若要篩選這個資料表，使每個員工只收到與其相關的資料，請指定以下的篩選子句：</span><span class="sxs-lookup"><span data-stu-id="62000-159">To filter this table so that each employee receives only the data related to them, specify a filter clause of:</span></span>  
  
 `EmployeeID = CONVERT(int,HOST_NAME())`  
  
 <span data-ttu-id="62000-160">例如，Pamela Ansman-Wolfe 的員工識別碼已被指派為 280。</span><span class="sxs-lookup"><span data-stu-id="62000-160">For example, employee Pamela Ansman-Wolfe has been assigned an employee ID of 280.</span></span> <span data-ttu-id="62000-161">當您為此員工建立訂閱時，請將 HOST_NAME() 值指定成員工識別碼的值 (此範例中為 280)。</span><span class="sxs-lookup"><span data-stu-id="62000-161">Specify the value of the employee ID (280 in our example) for the HOST_NAME() value when creating a subscription for this employee.</span></span> <span data-ttu-id="62000-162">「合併代理程式」連接到發行者端時，它會將 HOST_NAME() 傳回的值與資料表中的值相比較，並僅下載在 **EmployeeID** 資料行中包含值 280 的資料列。</span><span class="sxs-lookup"><span data-stu-id="62000-162">When the Merge Agent connects to the Publisher, it compares the value returned by HOST_NAME() to the values in the table and downloads only the row that contains a value of 280 in the **EmployeeID** column.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="62000-163">HOST_NAME() 函數會傳回一個 `nchar` 值，因此，如果篩選子句中的資料行為數值資料類型 (如上述範例)，您必須使用 CONVERT。</span><span class="sxs-lookup"><span data-stu-id="62000-163">The HOST_NAME() function returns an `nchar` value, so you must use CONVERT if the column in the filter clause is of a numeric data type, as it is in the example above.</span></span> <span data-ttu-id="62000-164">基於效能的考量，建議您不要在參數化資料列篩選器子句中的資料行名稱套用函數，例如 `CONVERT(nchar,EmployeeID) = HOST_NAME()`。</span><span class="sxs-lookup"><span data-stu-id="62000-164">For performance reasons, we recommended that you do not apply functions to column names in parameterized row filter clauses, such as `CONVERT(nchar,EmployeeID) = HOST_NAME()`.</span></span> <span data-ttu-id="62000-165">反之，建議您使用範例中顯示的方法： `EmployeeID = CONVERT(int,HOST_NAME())`。</span><span class="sxs-lookup"><span data-stu-id="62000-165">Instead, we recommend using the approach shown in the example: `EmployeeID = CONVERT(int,HOST_NAME())`.</span></span> <span data-ttu-id="62000-166">這個子句可以用於 **@subset_filterclause** [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql)的參數，但通常不能用在「新增發行集嚮導」中， (wizard 執行篩選子句來驗證它，因為電腦名稱稱無法轉換成) ，所以它會失敗 `int` 。</span><span class="sxs-lookup"><span data-stu-id="62000-166">This clause can be used for the **@subset_filterclause** parameter of [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql), but it typically cannot be used in the New Publication Wizard (the wizard executes the filter clause to validate it, which fails because the computer name cannot be converted to an `int`).</span></span> <span data-ttu-id="62000-167">如果您使用「新增發行集精靈」，建議在此精靈中指定 `CONVERT(nchar,EmployeeID) = HOST_NAME()` ，然後在建立發行集的快照集之前，使用 [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql) ，將該子句變更為 `EmployeeID = CONVERT(int,HOST_NAME())` 。</span><span class="sxs-lookup"><span data-stu-id="62000-167">If you use the New Publication Wizard, we recommend specifying `CONVERT(nchar,EmployeeID) = HOST_NAME()` in the wizard and then use [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql) to change the clause to `EmployeeID = CONVERT(int,HOST_NAME())` before creating a snapshot for the publication.</span></span>  
  
 <span data-ttu-id="62000-168">**覆寫 HOST_NAME() 值**</span><span class="sxs-lookup"><span data-stu-id="62000-168">**To override the HOST_NAME() value**</span></span>  
  
 <span data-ttu-id="62000-169">使用下列方法其中一之來覆寫 HOST_NAME() 值：</span><span class="sxs-lookup"><span data-stu-id="62000-169">Use one of the following methods to override the HOST_NAME() value:</span></span>  
  
-   [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)]<span data-ttu-id="62000-170">：在 [新增訂閱精靈] 的 [HOST\_NAME\(\) 值] 頁面上指定一個值。</span><span class="sxs-lookup"><span data-stu-id="62000-170">: specify a value on the **HOST\_NAME\(\) Values** page of the New Subscription Wizard.</span></span> <span data-ttu-id="62000-171">如需建立訂閱的詳細資訊，請參閱[訂閱發行集](../subscribe-to-publications.md)。</span><span class="sxs-lookup"><span data-stu-id="62000-171">For more information about creating subscriptions, see [Subscribe to Publications](../subscribe-to-publications.md).</span></span>  
  
-   <span data-ttu-id="62000-172">複寫程式 [!INCLUDE[tsql](../../../includes/tsql-md.md)] 設計：針對發送 **@hostname** 訂閱[sp_addmergesubscription &#40;transact-sql&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergesubscription-transact-sql) (的參數值，) 或 sp_addmergepullsubscription_agent &#40;的提取訂閱&#41;[transact-sql (](/sql/relational-databases/system-stored-procedures/sp-addmergepullsubscription-agent-transact-sql) 。</span><span class="sxs-lookup"><span data-stu-id="62000-172">Replication [!INCLUDE[tsql](../../../includes/tsql-md.md)] programming: specify a value for the **@hostname** parameter of [sp_addmergesubscription &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergesubscription-transact-sql) (for push subscriptions) or [sp_addmergepullsubscription_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergepullsubscription-agent-transact-sql) (for pull subscriptions).</span></span>  
  
-   <span data-ttu-id="62000-173">合併代理程式：在命令列中或透過代理程式設定檔為 **-Hostname** 參數指定一個值。</span><span class="sxs-lookup"><span data-stu-id="62000-173">Merge Agent: specify a value for the **-Hostname** parameter at the command line or through an agent profile.</span></span> <span data-ttu-id="62000-174">如需「合併代理程式」的詳細資訊，請參閱＜ [Replication Merge Agent](../agents/replication-merge-agent.md)＞。</span><span class="sxs-lookup"><span data-stu-id="62000-174">For more information about the Merge Agent, see [Replication Merge Agent](../agents/replication-merge-agent.md).</span></span> <span data-ttu-id="62000-175">如需代理程式設定檔的詳細資訊，請參閱＜ [Replication Agent Profiles](../agents/replication-agent-profiles.md)＞。</span><span class="sxs-lookup"><span data-stu-id="62000-175">For more information about agent profiles, see [Replication Agent Profiles](../agents/replication-agent-profiles.md).</span></span>  
  
## <a name="initializing-a-subscription-to-a-publication-with-parameterized-filters"></a><span data-ttu-id="62000-176">使用參數化篩選初始化發行集的訂閱</span><span class="sxs-lookup"><span data-stu-id="62000-176">Initializing a Subscription to a Publication with Parameterized Filters</span></span>  
 <span data-ttu-id="62000-177">在合併發行集內使用參數化資料列篩選器時，覆寫會以兩段式的快照集來初始化每一個訂閱。</span><span class="sxs-lookup"><span data-stu-id="62000-177">When parameterized row filters are used in merge publications, replication initializes each subscription with a two-part snapshot.</span></span> <span data-ttu-id="62000-178">如需詳細資訊，請參閱 [Snapshots for Merge Publications with Parameterized Filters](../snapshots-for-merge-publications-with-parameterized-filters.md)。</span><span class="sxs-lookup"><span data-stu-id="62000-178">For more information, see [Snapshots for Merge Publications with Parameterized Filters](../snapshots-for-merge-publications-with-parameterized-filters.md).</span></span>  
  
## <a name="using-the-appropriate-filtering-options"></a><span data-ttu-id="62000-179">使用適當的篩選選項</span><span class="sxs-lookup"><span data-stu-id="62000-179">Using the Appropriate Filtering Options</span></span>  
 <span data-ttu-id="62000-180">使用參數化篩選時，您要控制的兩個主要方面為：</span><span class="sxs-lookup"><span data-stu-id="62000-180">There are two key areas over which you have control when using parameterized filters:</span></span>  
  
-   <span data-ttu-id="62000-181">可以透過兩個發行集設定的其中之一，來控制合併式複寫處理篩選的方式： **使用資料分割群組** 和 **保留資料分割變更**。</span><span class="sxs-lookup"><span data-stu-id="62000-181">How the filters are processed by merge replication, which is controlled by one of two publication settings: **use partition groups** and **keep partition changes**.</span></span>  
  
-   <span data-ttu-id="62000-182">必須透過發行項設定 **資料分割選項**，來反映資料在「訂閱者」之間的共用方式。</span><span class="sxs-lookup"><span data-stu-id="62000-182">How the data is shared among Subscribers, which must be reflected by the article setting **partition options**.</span></span>  
  
 <span data-ttu-id="62000-183">若要設定篩選選項，請參閱＜ [Optimize Parameterized Row Filters](../publish/optimize-parameterized-row-filters.md)＞。</span><span class="sxs-lookup"><span data-stu-id="62000-183">To set filtering options, see [Optimize Parameterized Row Filters](../publish/optimize-parameterized-row-filters.md).</span></span>  
  
### <a name="setting-use-partition-groups-and-keep-partition-changes"></a><span data-ttu-id="62000-184">設定使用資料分割群組和保留資料分割變更</span><span class="sxs-lookup"><span data-stu-id="62000-184">Setting 'use partition groups' and 'keep partition changes'</span></span>  
 <span data-ttu-id="62000-185">**使用資料分割群組** 和 **保留資料分割變更** 兩者均可以透過在發行集資料庫中儲存其他中繼資料，提升具有篩選發行項之發行集的同步處理效能。</span><span class="sxs-lookup"><span data-stu-id="62000-185">Both the **use partition groups** and **keep partition changes** options improve the synchronization performance for publications with filtered articles by storing additional metadata in the publication database.</span></span> <span data-ttu-id="62000-186">[使用資料分割群組]  選項可以透過使用預先計算的資料分割功能，讓效能大為提升。</span><span class="sxs-lookup"><span data-stu-id="62000-186">The **use partition groups** option provides greater performance improvement through the use of the precomputed partitions feature.</span></span> <span data-ttu-id="62000-187">依預設，如果發行集中的發行項符合一組需求，此選項會設定為 `true`。</span><span class="sxs-lookup"><span data-stu-id="62000-187">This option is set to `true` by default if the articles in your publication adhere to a set of requirements.</span></span> <span data-ttu-id="62000-188">如需這些需求的詳細資訊，請參閱[使用預先計算的資料分割最佳化參數化篩選效能](parameterized-filters-optimize-for-precomputed-partitions.md)。</span><span class="sxs-lookup"><span data-stu-id="62000-188">For more information about these requirements, see [Optimize Parameterized Filter Performance with Precomputed Partitions](parameterized-filters-optimize-for-precomputed-partitions.md).</span></span> <span data-ttu-id="62000-189">如果您的發行項不符合使用預先計算資料分割的需求，則 [**保留資料分割變更**] 選項會設定為 `true` 。</span><span class="sxs-lookup"><span data-stu-id="62000-189">If your articles do not meet the requirements for using precomputed partitions, the **keep partition changes** option to is set to `true`.</span></span>  
  
### <a name="setting-partition-options"></a><span data-ttu-id="62000-190">設定資料分割選項</span><span class="sxs-lookup"><span data-stu-id="62000-190">Setting 'partition options'</span></span>  
 <span data-ttu-id="62000-191">依據「訂閱者」共用已篩選資料表中資料之方式，您可以建立發行項時為 **資料分割選項** 屬性指定一個值。</span><span class="sxs-lookup"><span data-stu-id="62000-191">You specify a value for the **partition options** property when creating an article, according to the way in which data in the filtered table will be shared by Subscribers.</span></span> <span data-ttu-id="62000-192">您可以使用 [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql)、 [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql)和 **[發行項屬性]** 對話方塊，將這個屬性設為四個值的其中一個。</span><span class="sxs-lookup"><span data-stu-id="62000-192">The property can be set to one of four values using [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql), [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql), and the **Article Properties** dialog box.</span></span> <span data-ttu-id="62000-193">使用 **[加入篩選]** 或 **[編輯篩選]** 對話方塊 (在「新增發行集精靈」和 **[發行集屬性]** 對話方塊中可用) 可以將屬性設定為兩個值中的其中之一。</span><span class="sxs-lookup"><span data-stu-id="62000-193">The property can be set to one of two values using the **Add Filter** or **Edit Filter** dialog boxes, which are available from the New Publication Wizard and the **Publication Properties** dialog box.</span></span> <span data-ttu-id="62000-194">下表簡單說明了可用值：</span><span class="sxs-lookup"><span data-stu-id="62000-194">The following table summarizes the available values:</span></span>  
  
|<span data-ttu-id="62000-195">描述</span><span class="sxs-lookup"><span data-stu-id="62000-195">Description</span></span>|<span data-ttu-id="62000-196">「加入篩x」和「編輯篩選」中的值</span><span class="sxs-lookup"><span data-stu-id="62000-196">Value in Add Filter and Edit Filter</span></span>|<span data-ttu-id="62000-197">「發行項屬性」中的值</span><span class="sxs-lookup"><span data-stu-id="62000-197">Value in Article Properties</span></span>|<span data-ttu-id="62000-198">預存程序中的值</span><span class="sxs-lookup"><span data-stu-id="62000-198">Value in stored procedures</span></span>|  
|-----------------|-----------------------------------------|---------------------------------|--------------------------------|  
|<span data-ttu-id="62000-199">資料分割中的資料為重疊，「訂閱者」可以更新參數化篩選中參考的資料行。</span><span class="sxs-lookup"><span data-stu-id="62000-199">Data in the partitions is overlapping, and the Subscriber can update columns referenced in a parameterized filter.</span></span>|<span data-ttu-id="62000-200">**這個資料表中的一個資料列會提供給多個訂閱**</span><span class="sxs-lookup"><span data-stu-id="62000-200">**A row from this table will go to multiple subscriptions**</span></span>|<span data-ttu-id="62000-201">**重疊**</span><span class="sxs-lookup"><span data-stu-id="62000-201">**Overlapping**</span></span>|<span data-ttu-id="62000-202">**0**</span><span class="sxs-lookup"><span data-stu-id="62000-202">**0**</span></span>|  
|<span data-ttu-id="62000-203">資料分割中的資料為重疊，「訂閱者」不能更新參數化篩選中參考的資料行。</span><span class="sxs-lookup"><span data-stu-id="62000-203">Data in the partitions is overlapping, and the Subscriber cannot update columns referenced in a parameterized filter.</span></span>|<span data-ttu-id="62000-204">N/A<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="62000-204">N/A<sup>1</sup></span></span>|<span data-ttu-id="62000-205">**重疊，不允許變更資料分割外的資料**</span><span class="sxs-lookup"><span data-stu-id="62000-205">**Overlapping, disallow out-of-partition data changes**</span></span>|<span data-ttu-id="62000-206">**1**</span><span class="sxs-lookup"><span data-stu-id="62000-206">**1**</span></span>|  
|<span data-ttu-id="62000-207">資料分割中的資料為不重疊，資料在訂閱之間共用。</span><span class="sxs-lookup"><span data-stu-id="62000-207">Data in the partitions is not overlapping, and the data is shared between subscriptions.</span></span> <span data-ttu-id="62000-208">訂閱者無法更新參數化篩選中參考的資料行。</span><span class="sxs-lookup"><span data-stu-id="62000-208">The Subscriber cannot update columns referenced in a parameterized filter.</span></span>|<span data-ttu-id="62000-209">N/A<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="62000-209">N/A<sup>1</sup></span></span>|<span data-ttu-id="62000-210">**不重疊，共用於訂閱之間**</span><span class="sxs-lookup"><span data-stu-id="62000-210">**Nonoverlapping, shared between subscriptions**</span></span>|<span data-ttu-id="62000-211">**2**</span><span class="sxs-lookup"><span data-stu-id="62000-211">**2**</span></span>|  
|<span data-ttu-id="62000-212">資料分割中的資料不重疊，每一資料分割有單一訂閱。</span><span class="sxs-lookup"><span data-stu-id="62000-212">Data in the partitions is not overlapping, and there is a single subscription per partition.</span></span> <span data-ttu-id="62000-213">訂閱者無法更新參數化篩選中參考的資料行。<sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="62000-213">The Subscriber cannot update columns referenced in a parameterized filter.<sup>2</sup></span></span>|<span data-ttu-id="62000-214">**這個資料表中的一個資料列只會提供給一個訂閱**</span><span class="sxs-lookup"><span data-stu-id="62000-214">**A row from this table will go to only one subscription**</span></span>|<span data-ttu-id="62000-215">**不重疊，單一訂閱**</span><span class="sxs-lookup"><span data-stu-id="62000-215">**Nonoverlapping, single subscription**</span></span>|<span data-ttu-id="62000-216">**3**</span><span class="sxs-lookup"><span data-stu-id="62000-216">**3**</span></span>|  
  
 <span data-ttu-id="62000-217"><sup>1</sup>如果基礎篩選選項設定為**0**、 **1**或**2**，則 [**加入篩選**] 和 [**編輯篩選**] 對話方塊將會顯示**此資料表中的一個資料列，將會移至多個訂閱**。</span><span class="sxs-lookup"><span data-stu-id="62000-217"><sup>1</sup> If the underlying filtering option is set to **0**, or **1**, or **2**, the **Add Filter** and **Edit Filter** dialog boxes will display **A row from this table will go to multiple subscriptions**.</span></span>  
  
 <span data-ttu-id="62000-218"><sup>2</sup>如果您指定此選項，則該發行項中的每個資料分割都只能有單一訂用帳戶。</span><span class="sxs-lookup"><span data-stu-id="62000-218"><sup>2</sup> If you specify this option, there can only be a single subscription for each partition of data in that article.</span></span> <span data-ttu-id="62000-219">如果建立第二項訂閱，將新訂閱的篩選準則解析成現有訂閱的相同資料分割，就會卸除現有的訂閱。</span><span class="sxs-lookup"><span data-stu-id="62000-219">If a second subscription is created in which the filtering criterion of the new subscription resolves to the same partition as the existing subscription, the existing subscription is dropped.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="62000-220">**資料分割選項** 值必須依據訂閱者端共享資料的方式設定。</span><span class="sxs-lookup"><span data-stu-id="62000-220">The **partition options** value must be set according to how data is shared by Subscribers.</span></span> <span data-ttu-id="62000-221">如果您指定資料分割為不重疊且每個資料分割有單一訂閱，但資料此時卻在另一個訂閱者端更新，在此情況下，「合併代理程式」在同步處理過程中可能失敗，並可能發生非聚合。</span><span class="sxs-lookup"><span data-stu-id="62000-221">If, for example, you specify that a partition is nonoverlapping with a single subscription per partition, but data is then updated at another Subscriber, the Merge Agent can fail during synchronization and non-convergence can occur.</span></span>  
  
#### <a name="selecting-the-appropriate-partition-option"></a><span data-ttu-id="62000-222">選取適當的資料分割選項</span><span class="sxs-lookup"><span data-stu-id="62000-222">Selecting the Appropriate Partition Option</span></span>  
 <span data-ttu-id="62000-223">不重疊資料分割與預先計算資料分割一起使用，以便在某些功能限制可接受狀況下改善效能。</span><span class="sxs-lookup"><span data-stu-id="62000-223">Nonoverlapping partitions work in conjunction with precomputed partitions to improve performance in situations where some functional limitations are acceptable.</span></span> <span data-ttu-id="62000-224">預先計算的資料分割會加速下載至「訂閱者」的動作，但是上傳動作會變慢。</span><span class="sxs-lookup"><span data-stu-id="62000-224">Precomputed partitions quicken downloads to Subscribers, but slow uploads.</span></span> <span data-ttu-id="62000-225">非重疊的資料分割會讓與預先計算之資料分割有關的上傳成本減至最少。</span><span class="sxs-lookup"><span data-stu-id="62000-225">Nonoverlapping partitions minimize the upload cost associated with precomputed partitions.</span></span> <span data-ttu-id="62000-226">當使用的參數化篩選和聯結篩選越複雜時，非重疊資料分割在效能上的益處更為醒目。</span><span class="sxs-lookup"><span data-stu-id="62000-226">The performance benefit of nonoverlapping partitions is more noticeable when the parameterized filters and join filters used are more complex.</span></span>  
  
 <span data-ttu-id="62000-227">決定在發行集中使用哪些資料分割選項時，請考慮下列狀況。</span><span class="sxs-lookup"><span data-stu-id="62000-227">Consider the following scenarios when deciding which partition options to use in a publication.</span></span>  
  
-   [!INCLUDE[ssSampleDBCoShort](../../../includes/sssampledbcoshort-md.md)] <span data-ttu-id="62000-228">擁有一支行動銷售團隊，每位業務員負責給定郵遞區號的客戶。</span><span class="sxs-lookup"><span data-stu-id="62000-228">has a mobile sales force with each sales person responsible for customers in a given zip code.</span></span> <span data-ttu-id="62000-229">如果客戶從一個銷售領域移到另一個銷售領域時，應用程式會要求更新郵遞區號，以便將該客戶指派給另一位銷售員。</span><span class="sxs-lookup"><span data-stu-id="62000-229">The application requires that  the zip code be updated if a customer moves from one sales territory to another, so that the customer is assigned to a different sales person.</span></span> <span data-ttu-id="62000-230">參數化篩選是以客戶的郵遞區號為根據，而更新動作會從一位銷售員的資料分割中移除此郵遞區號，然後將它插入到另一位銷售員的資料分割中。</span><span class="sxs-lookup"><span data-stu-id="62000-230">The parameterized filter is based on the customer's zip code, and the update removes the zip code from one sales person's partition and inserts it into another sales person's partition.</span></span> <span data-ttu-id="62000-231">這要求重疊資料分割具有更新參數化篩選中參考之資料行的能力。</span><span class="sxs-lookup"><span data-stu-id="62000-231">This requires overlapping partitions with the ability to update columns referenced in a parameterized filter.</span></span> <span data-ttu-id="62000-232">此選項提供最大的彈性，但是其執行效果可能不如非重疊資料分割。</span><span class="sxs-lookup"><span data-stu-id="62000-232">This option maximizes flexibility but might not perform as well as nonoverlapping partitions.</span></span>  
  
-   <span data-ttu-id="62000-233">職業介紹機構擁有可提供給各縣市之下區域辦事處的資料。</span><span class="sxs-lookup"><span data-stu-id="62000-233">An employment agency has data that is supplied to regional offices in each county of the state.</span></span> <span data-ttu-id="62000-234">資料不會重疊；該機關總部資料表中的每一資料列都僅包含於一個資料分割中，但是該資料分割可以傳送到同一縣內的多個辦事處。</span><span class="sxs-lookup"><span data-stu-id="62000-234">The data does not overlap; each row in the table at the agency's headquarters is included in only one partition, but that partition is sent to multiple offices in the same county.</span></span> <span data-ttu-id="62000-235">使用非重疊資料分割選項 (在訂閱之間共用資料分割) 是適當的動作，不但能夠改善重疊資料分割的效能，也會滿足應用程式的需求。</span><span class="sxs-lookup"><span data-stu-id="62000-235">The nonoverlapping partition option with partitions shared between subscriptions is appropriate, providing a performance improvement over overlapping partitions while satisfying the application requirements.</span></span>  
  
-   <span data-ttu-id="62000-236">如果您擁有不重疊資料分割，且僅有一個訂閱會收到並更新資料分割中的資料，則可以實現進一步的效能優勢。</span><span class="sxs-lookup"><span data-stu-id="62000-236">If you have nonoverlapping partitions and only one subscription receives and updates the data in a partition, further performance benefits can be realized.</span></span> <span data-ttu-id="62000-237">這種狀況對銷售點系統，以及主要在訂閱者端收集資料，並將其上傳到發行者的現場服務應用程式來說很常見。</span><span class="sxs-lookup"><span data-stu-id="62000-237">This scenario is common for point of sale systems, and field force applications in which data is primarily collected at the Subscriber and uploaded to the Publisher.</span></span> <span data-ttu-id="62000-238">請考慮運送應用程式的 **Package** 資料表：每份套裝程式裝入卡車中時，會變更 **Package** 資料表中的套裝程式狀態，並且此變更會複寫回總部。</span><span class="sxs-lookup"><span data-stu-id="62000-238">Consider a **Package** table in a delivery application: as each package is loaded onto a truck, the status of the package is changed in the **Package** table, and the change is replicated back to headquarters.</span></span> <span data-ttu-id="62000-239">駕駛員不會在兩輛不同的卡車上更新同一套裝軟體的狀態，因此 **Package** 資料表非常適合做為每個資料分割有單一訂閱的不重疊資料分割。</span><span class="sxs-lookup"><span data-stu-id="62000-239">Drivers would not update the status of the same package on two different trucks, so the **Package** table is a good candidate for a nonoverlapping partition with a single subscription per partition.</span></span>  
  
#### <a name="considerations-for-nonoverlapping-partitions"></a><span data-ttu-id="62000-240">不重疊資料分割之考量</span><span class="sxs-lookup"><span data-stu-id="62000-240">Considerations for Nonoverlapping Partitions</span></span>  
 <span data-ttu-id="62000-241">使用不重疊資料分割時，請記住下列考量。</span><span class="sxs-lookup"><span data-stu-id="62000-241">Keep the following considerations in mind when using nonoverlapping partitions.</span></span>  
  
##### <a name="general-considerations"></a><span data-ttu-id="62000-242">一般考量</span><span class="sxs-lookup"><span data-stu-id="62000-242">General Considerations</span></span>  
  
-   <span data-ttu-id="62000-243">發行集必須使用預先計算的資料分割。</span><span class="sxs-lookup"><span data-stu-id="62000-243">The publication must use precomputed partitions.</span></span>  
  
-   <span data-ttu-id="62000-244">一個資料列必須僅屬於一個資料分割。</span><span class="sxs-lookup"><span data-stu-id="62000-244">A row must belong to only one partition.</span></span>  
  
-   <span data-ttu-id="62000-245">發行項不能是邏輯記錄的一部分。</span><span class="sxs-lookup"><span data-stu-id="62000-245">Articles cannot be part of a logical record.</span></span>  
  
-   <span data-ttu-id="62000-246">不支援替代同步夥伴 (此功能已經棄用)。</span><span class="sxs-lookup"><span data-stu-id="62000-246">Alternate synchronization partners are not supported (this feature is deprecated).</span></span>  
  
-   <span data-ttu-id="62000-247">訂閱者無法更新參數化篩選中參考的資料行。</span><span class="sxs-lookup"><span data-stu-id="62000-247">The Subscriber cannot update columns referenced in a parameterized filter.</span></span>  
  
-   <span data-ttu-id="62000-248">如果訂閱者端的插入不屬於資料分割，則它不會被刪除。</span><span class="sxs-lookup"><span data-stu-id="62000-248">If an insert at a Subscriber does not belong to the partition, it is not deleted.</span></span> <span data-ttu-id="62000-249">但是，它將不會被複寫到其他「訂閱者」。</span><span class="sxs-lookup"><span data-stu-id="62000-249">However, it will not be replicated to other Subscribers.</span></span>  
  
-   <span data-ttu-id="62000-250">在某些具有重疊資料分割的情況下，會在「合併代理程式」插入資料時調整識別範圍。</span><span class="sxs-lookup"><span data-stu-id="62000-250">In some circumstances with overlapping partitions, identity ranges are adjusted when the Merge Agent inserts data.</span></span> <span data-ttu-id="62000-251">在非重疊資料分割中，只能由有權在訂閱資料庫中調整識別範圍的使用者，在插入資料時調整識別範圍。</span><span class="sxs-lookup"><span data-stu-id="62000-251">With nonoverlapping partitions, ranges can only be adjusted during inserts by a user who has permission to adjust identity ranges in the subscription database.</span></span> <span data-ttu-id="62000-252">使用者必須擁有該資料表，或者是 **sysadmin** 固定伺服器角色、 **db_owner** 固定資料庫角色或 **db_ddladmin** 固定資料庫角色的成員。</span><span class="sxs-lookup"><span data-stu-id="62000-252">The user must either own the table, or be a member of the **sysadmin** fixed server role, the **db_owner** fixed database role, or the **db_ddladmin** fixed database role.</span></span>  
  
##### <a name="additional-considerations-for-nonoverlapping-partitions-with-a-single-subscription-per-partition"></a><span data-ttu-id="62000-253">每個資料分割有單一訂閱的不重疊資料分割之其他考量</span><span class="sxs-lookup"><span data-stu-id="62000-253">Additional Considerations for Nonoverlapping Partitions with a Single Subscription per Partition</span></span>  
  
-   <span data-ttu-id="62000-254">發行項可以僅存在於一個發行集中；不能重新發行發行項。</span><span class="sxs-lookup"><span data-stu-id="62000-254">Articles can exist in only one publication; articles cannot be republished.</span></span>  
  
-   <span data-ttu-id="62000-255">發行集必須允許「訂閱者」初始化快照集處理。</span><span class="sxs-lookup"><span data-stu-id="62000-255">The publication must allow Subscribers to initiate the snapshot process.</span></span> <span data-ttu-id="62000-256">如需詳細資訊，請參閱 [Snapshots for Merge Publications with Parameterized Filters](../snapshots-for-merge-publications-with-parameterized-filters.md)。</span><span class="sxs-lookup"><span data-stu-id="62000-256">For more information, see [Snapshots for Merge Publications with Parameterized Filters](../snapshots-for-merge-publications-with-parameterized-filters.md).</span></span>  
  
##### <a name="additional-considerations-for-join-filters"></a><span data-ttu-id="62000-257">聯結篩選之其他考量</span><span class="sxs-lookup"><span data-stu-id="62000-257">Additional Considerations for Join Filters</span></span>  
  
-   <span data-ttu-id="62000-258">在聯結篩選階層中，有重疊資料分割的發行項無法在有不重疊資料分割之發行項的上方顯示。</span><span class="sxs-lookup"><span data-stu-id="62000-258">In a join filter hierarchy, an article with an overlapping partition cannot appear above an article with a nonoverlapping partition.</span></span> <span data-ttu-id="62000-259">換句話說，如果子發行項使用不重疊資料分割，則父發行項也必須如此。</span><span class="sxs-lookup"><span data-stu-id="62000-259">In other words, a parent article must use nonoverlapping partitions if the child article does.</span></span> <span data-ttu-id="62000-260">如需聯結篩選的詳細資訊，請參閱＜ [Join Filters](join-filters.md)＞。</span><span class="sxs-lookup"><span data-stu-id="62000-260">For information about join filters, see [Join Filters](join-filters.md).</span></span>  
  
-   <span data-ttu-id="62000-261">如果不重疊資料分割在聯結篩選中是子系，則必須將 **聯結唯一索引鍵** 屬性設定為 1。</span><span class="sxs-lookup"><span data-stu-id="62000-261">A join filter in which the nonoverlapping partition is a child must have the **join unique key** property set to 1.</span></span> <span data-ttu-id="62000-262">如需相關資訊，請參閱 [Join Filters](join-filters.md)。</span><span class="sxs-lookup"><span data-stu-id="62000-262">For more information, see [Join Filters](join-filters.md).</span></span>  
  
-   <span data-ttu-id="62000-263">發行項應僅含有一個參數化篩選或聯結篩選。</span><span class="sxs-lookup"><span data-stu-id="62000-263">The article should only have one parameterized filter or join filter.</span></span> <span data-ttu-id="62000-264">允許含有參數化篩選且在聯結篩選中為父系。</span><span class="sxs-lookup"><span data-stu-id="62000-264">Having a parameterized filter and being the parent in a join filter is allowed.</span></span> <span data-ttu-id="62000-265">不允許含有參數化篩選且在聯結篩選中為子系。</span><span class="sxs-lookup"><span data-stu-id="62000-265">Having a parameterized filter and being the child in a join filter is not allowed.</span></span> <span data-ttu-id="62000-266">同樣也不允許有一個以上的聯結篩選。</span><span class="sxs-lookup"><span data-stu-id="62000-266">Having more than one join filter is also not allowed.</span></span>  
  
-   <span data-ttu-id="62000-267">如果發行者端的兩個資料表含有聯結篩選關聯性，且子資料表的某些資料列在父資料表中沒有對應的資料列，則插入遺漏的父資料列不會導致相關資料列被下載到訂閱者 (資料列使用不重疊資料分割下載)。</span><span class="sxs-lookup"><span data-stu-id="62000-267">If two tables at the Publisher have a join filter relationship and the child table has rows that have no corresponding row in the parent table, an insert of the missing parent row will not result in the related rows being downloaded to the Subscriber (the rows would be downloaded with overlapping partitions).</span></span> <span data-ttu-id="62000-268">例如，如果 **SalesOrderDetail** 資料表中的某些資料列在 **SalesOrderHeader** 資料表中沒有對應的資料列，而且您在 **SalesOrderHeader**中插入了該遺漏的資料列，則該資料列會下載到「訂閱者」，但不會下載 **SalesOrderDetail** 中的對應資料列。</span><span class="sxs-lookup"><span data-stu-id="62000-268">For example, if the **SalesOrderDetail** table has rows with no corresponding row in the **SalesOrderHeader** table, and you insert the missing row in **SalesOrderHeader**, the row is downloaded to the Subscriber, but the corresponding rows in **SalesOrderDetail** are not.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="62000-269">另請參閱</span><span class="sxs-lookup"><span data-stu-id="62000-269">See Also</span></span>  
 <span data-ttu-id="62000-270">[以時間為基礎之資料列篩選的最佳做法](best-practices-for-time-based-row-filters.md) </span><span class="sxs-lookup"><span data-stu-id="62000-270">[Best Practices for Time-Based Row Filters](best-practices-for-time-based-row-filters.md) </span></span>  
 <span data-ttu-id="62000-271">[篩選發行的資料](../publish/filter-published-data.md) </span><span class="sxs-lookup"><span data-stu-id="62000-271">[Filter Published Data](../publish/filter-published-data.md) </span></span>  
 [<span data-ttu-id="62000-272">合併式複寫之篩選發行資料</span><span class="sxs-lookup"><span data-stu-id="62000-272">Filter Published Data for Merge Replication</span></span>](filter-published-data-for-merge-replication.md)  
  
  
