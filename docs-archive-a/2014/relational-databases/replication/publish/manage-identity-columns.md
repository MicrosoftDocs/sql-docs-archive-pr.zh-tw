---
title: 管理識別欄位 | Microsoft Docs
ms.custom: ''
ms.date: 03/07/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- identity values [SQL Server replication]
- merge replication [SQL Server replication], identity range management
- publishing [SQL Server replication], identity columns
- transactional replication, identity range management
- identity columns [SQL Server], replication
ms.assetid: 98892836-cf63-494a-bd5d-6577d9810ddf
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 1b9a7b28c288ef80d24fb67479727d94c3c09fa5
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87585282"
---
# <a name="manage-identity-columns"></a><span data-ttu-id="039ae-102">管理識別欄位</span><span class="sxs-lookup"><span data-stu-id="039ae-102">Manage Identity Columns</span></span>
  <span data-ttu-id="039ae-103">本主題描述如何使用 [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] 或 [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] ，在 [!INCLUDE[tsql](../../../includes/tsql-md.md)]中管理識別欄位。</span><span class="sxs-lookup"><span data-stu-id="039ae-103">This topic describes how to manage identity columns in [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] by using [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] or [!INCLUDE[tsql](../../../includes/tsql-md.md)].</span></span> <span data-ttu-id="039ae-104">當訂閱者插入複寫回發行者時，必須管理識別欄位，以免在訂閱者和發行者上指派相同的識別值。</span><span class="sxs-lookup"><span data-stu-id="039ae-104">When Subscriber inserts are replicated back to the Publisher, identity columns must be managed to avoid assignment of the same identity value at both the Subscriber and Publisher.</span></span> <span data-ttu-id="039ae-105">複寫可以自動管理識別範圍，或者您可以選擇手動處理識別範圍管理。</span><span class="sxs-lookup"><span data-stu-id="039ae-105">Replication can manage identity ranges automatically or you can choose to manually handle identity range management.</span></span>  <span data-ttu-id="039ae-106">如需複寫提供之識別範圍管理選項的詳細資訊，請參閱[複寫識別欄位](replicate-identity-columns.md)。</span><span class="sxs-lookup"><span data-stu-id="039ae-106">For information about the identity range management options provided by replication, see [Replicate Identity Columns](replicate-identity-columns.md).</span></span>  
  
  
##  <a name="before-you-begin"></a><a name="BeforeYouBegin"></a> <span data-ttu-id="039ae-107">開始之前</span><span class="sxs-lookup"><span data-stu-id="039ae-107">Before You Begin</span></span>  
  
###  <a name="recommendations"></a><a name="Recommendations"></a> <span data-ttu-id="039ae-108">建議</span><span class="sxs-lookup"><span data-stu-id="039ae-108">Recommendations</span></span>  
  
-   <span data-ttu-id="039ae-109">在一個以上發行集中發行資料表時，您必須針對兩個發行集指定相同的識別範圍管理選項。</span><span class="sxs-lookup"><span data-stu-id="039ae-109">When publishing a table in more than one publication, you must specify the same identity range management options for both publications.</span></span> <span data-ttu-id="039ae-110">如需詳細資訊，請參閱[發行資料和資料庫物件](publish-data-and-database-objects.md)中的＜在多個發行集中發行資料表＞。</span><span class="sxs-lookup"><span data-stu-id="039ae-110">For more information, see "Publishing Tables in More Than One Publication" in [Publish Data and Database Objects](publish-data-and-database-objects.md).</span></span>  
  
-   <span data-ttu-id="039ae-111">若要建立可用於多個資料表中或可在不參考任何資料表的情況下從應用程式進行呼叫的自動遞增數字，請參閱 [序號](../../sequence-numbers/sequence-numbers.md)。</span><span class="sxs-lookup"><span data-stu-id="039ae-111">To create an automatically incrementing number that can be used in multiple tables or that can be called from applications without referencing any table, see [Sequence Numbers](../../sequence-numbers/sequence-numbers.md).</span></span>  
  
##  <a name="using-sql-server-management-studio"></a><a name="SSMSProcedure"></a> <span data-ttu-id="039ae-112">使用 SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="039ae-112">Using SQL Server Management Studio</span></span>  
 <span data-ttu-id="039ae-113">在 [新增發行集精靈] 的 [發行項屬性 - \<Article>] 對話方塊的 [屬性] 索引標籤上，指定識別欄位管理選項。</span><span class="sxs-lookup"><span data-stu-id="039ae-113">Specify an identity column management option on the **Properties** tab of the **Article Properties -\<Article>** dialog box of the New Publication Wizard.</span></span> <span data-ttu-id="039ae-114">如需使用此精靈的詳細資訊，請參閱[建立發行集](create-a-publication.md)。</span><span class="sxs-lookup"><span data-stu-id="039ae-114">For more information about using this wizard, see [Create a Publication](create-a-publication.md).</span></span> <span data-ttu-id="039ae-115">在「新增發行集精靈」中：</span><span class="sxs-lookup"><span data-stu-id="039ae-115">In the New Publication Wizard:</span></span>  
  
-   <span data-ttu-id="039ae-116">如果在 **[發行集類型]** 頁面中選取 **[合併式發行集]** 或 **[具更新訂閱的交易式發行集]** ，請選取自動或手動識別範圍管理 (依預設為自動，建議使用)。</span><span class="sxs-lookup"><span data-stu-id="039ae-116">If you select **Merge publication** or **Transactional publication with updating subscriptions** on the **Publication Type** page, select automatic or manual identity range management (automatic, the default, is recommended).</span></span> <span data-ttu-id="039ae-117">發行資料表後，將無法修改其屬性，但是可以修改其他相關屬性。</span><span class="sxs-lookup"><span data-stu-id="039ae-117">After the table is published, the property cannot be modified, but other related properties can be modified.</span></span>  
  
-   <span data-ttu-id="039ae-118">如果選取其他發行集類型，應將識別範圍管理設定為手動。</span><span class="sxs-lookup"><span data-stu-id="039ae-118">If you select other publication types, identity range management should be set to manual.</span></span>  
  
 <span data-ttu-id="039ae-119">在 [發行項屬性 - \<Article>] 的 [屬性] 索引標籤上修改識別範圍和閾值，其可於 [發行集屬性 - \<Publication>] 對話方塊中取得。</span><span class="sxs-lookup"><span data-stu-id="039ae-119">Modify identity ranges and thresholds on the **Properties** tab of the **Article Properties -\<Article>**, which is available in the **Publication Properties - \<Publication>** dialog box.</span></span> <span data-ttu-id="039ae-120">如需有關存取這個對話方塊的詳細資訊，請參閱＜ [View and Modify Publication Properties](view-and-modify-publication-properties.md)＞。</span><span class="sxs-lookup"><span data-stu-id="039ae-120">For more information about accessing this dialog box, see [View and Modify Publication Properties](view-and-modify-publication-properties.md).</span></span>  
  
#### <a name="to-specify-an-identity-column-management-option"></a><span data-ttu-id="039ae-121">若要指定識別欄位管理選項</span><span class="sxs-lookup"><span data-stu-id="039ae-121">To specify an identity column management option</span></span>  
  
1.  <span data-ttu-id="039ae-122">如果「發行者」在 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 之前的 [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)]版本上執行，請在「新增發行集精靈」的 **[發行集類型]** 頁面中，選取 **[合併式發行集]** 或 **[具更新訂閱的交易式發行集]** 。</span><span class="sxs-lookup"><span data-stu-id="039ae-122">If the Publisher is running a version of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] prior to [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)], on the **Publication Type** page of the New Publication Wizard, select **Merge publication** or **Transactional publication with updating subscriptions**.</span></span>  
  
2.  <span data-ttu-id="039ae-123">在 **[發行項]** 頁面中，選取具有識別欄位的資料表。</span><span class="sxs-lookup"><span data-stu-id="039ae-123">On the **Articles** page, select a table with an identity column.</span></span>  
  
3.  <span data-ttu-id="039ae-124">按一下 **[發行項屬性]** ，然後按一下 **[設定反白顯示資料表發行項的屬性]** 。</span><span class="sxs-lookup"><span data-stu-id="039ae-124">Click **Article Properties**, and then click **Set Properties of Highlighted Table Article**.</span></span>  
  
4.  <span data-ttu-id="039ae-125">在 [發行項屬性 - \<Article>] 對話方塊的 [屬性] 索引標籤上，於 [識別範圍管理] 區段中，將 [自動管理識別範圍] 屬性設定為 [自動] 或 [手動] (針對執行 [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] 或更新版本的發行者) 或是 [True] 或 [False] (針對執行 [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] 之前的 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 版本的發行者)。</span><span class="sxs-lookup"><span data-stu-id="039ae-125">On the **Properties** tab of the **Article Properties - \<Article>** dialog box, in the **Identity Range Management** section, set the **Automatically manage identity ranges** property to **Automatic** or **Manual** (for Publishers running [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] or later), or **True** or **False** (for Publishers running a version of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] prior to [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)]).</span></span>  
  
5.  <span data-ttu-id="039ae-126">如果在步驟 4 中選取了 **[自動]** 或 **[True]** ，請在下表中輸入選項的值。</span><span class="sxs-lookup"><span data-stu-id="039ae-126">If you selected **Automatic** or **True** in step 4, enter values for the options in the following table.</span></span> <span data-ttu-id="039ae-127">如需如何使用這些設定的詳細資訊，請參閱[複寫識別欄位](replicate-identity-columns.md)中的＜指派識別範圍＞一節。</span><span class="sxs-lookup"><span data-stu-id="039ae-127">For more information on how these settings are used, see the "Assigning Identity Ranges" section of [Replicate Identity Columns](replicate-identity-columns.md).</span></span>  
  
    |<span data-ttu-id="039ae-128">選項</span><span class="sxs-lookup"><span data-stu-id="039ae-128">Option</span></span>|<span data-ttu-id="039ae-129">值</span><span class="sxs-lookup"><span data-stu-id="039ae-129">Value</span></span>|<span data-ttu-id="039ae-130">描述</span><span class="sxs-lookup"><span data-stu-id="039ae-130">Description</span></span>|  
    |------------|-----------|-----------------|  
    |<span data-ttu-id="039ae-131">**發行者範圍大小**</span><span class="sxs-lookup"><span data-stu-id="039ae-131">**Publisher range size**</span></span>|<span data-ttu-id="039ae-132">範圍大小的整數值 (例如 20000)。</span><span class="sxs-lookup"><span data-stu-id="039ae-132">Integer value for range size (for example, 20000).</span></span>|<span data-ttu-id="039ae-133">請參閱[複寫識別欄位](replicate-identity-columns.md)中的＜指派識別範圍＞一節。</span><span class="sxs-lookup"><span data-stu-id="039ae-133">See the "Assigning Identity Ranges" section of [Replicate Identity Columns](replicate-identity-columns.md).</span></span>|  
    |<span data-ttu-id="039ae-134">**訂閱者範圍大小**</span><span class="sxs-lookup"><span data-stu-id="039ae-134">**Subscriber range size**</span></span>|<span data-ttu-id="039ae-135">範圍大小的整數值 (例如 10000)。</span><span class="sxs-lookup"><span data-stu-id="039ae-135">Integer value for range size (for example, 10000).</span></span>|<span data-ttu-id="039ae-136">請參閱[複寫識別欄位](replicate-identity-columns.md)中的＜指派識別範圍＞一節。</span><span class="sxs-lookup"><span data-stu-id="039ae-136">See the "Assigning Identity Ranges" section of [Replicate Identity Columns](replicate-identity-columns.md).</span></span>|  
    |<span data-ttu-id="039ae-137">**範圍臨界值百分比**</span><span class="sxs-lookup"><span data-stu-id="039ae-137">**Range threshold percentage**</span></span>|<span data-ttu-id="039ae-138">臨界值百分比的整數值 (例如 90 相當於 90%)。</span><span class="sxs-lookup"><span data-stu-id="039ae-138">Integer value for percent threshold (for example, 90 is equivalent to 90 percent).</span></span>|<span data-ttu-id="039ae-139">指派新的識別範圍之前，節點處所用的識別值總計百分比。</span><span class="sxs-lookup"><span data-stu-id="039ae-139">Percent of total identity values used at a node before a new identity range is assigned.</span></span><br /><br /> <span data-ttu-id="039ae-140">注意:必須指定這個值，但該值只能由下列人員使用：使用佇列更新訂閱的訂閱者；以及執行 [!INCLUDE[ssEW](../../../includes/ssew-md.md)] 或其他舊版 SQL Server 合併式發行集的訂閱者。</span><span class="sxs-lookup"><span data-stu-id="039ae-140">Note: This value must be specified, but it is only used by: Subscribers using queued updating subscriptions; and Subscribers to merge publications running [!INCLUDE[ssEW](../../../includes/ssew-md.md)] or previous versions of other SQL Server editions.</span></span> <span data-ttu-id="039ae-141">如需詳細資訊，請參閱[複寫識別欄位](replicate-identity-columns.md)中的＜指派識別範圍＞一節。</span><span class="sxs-lookup"><span data-stu-id="039ae-141">For more information, see the "Assigning Identity Ranges" section of [Replicate Identity Columns](replicate-identity-columns.md).</span></span>|  
    |<span data-ttu-id="039ae-142">**[下一個範圍起始值]**</span><span class="sxs-lookup"><span data-stu-id="039ae-142">**Next range starting value**</span></span>|<span data-ttu-id="039ae-143">整數值。</span><span class="sxs-lookup"><span data-stu-id="039ae-143">Integer value.</span></span> <span data-ttu-id="039ae-144">唯讀。</span><span class="sxs-lookup"><span data-stu-id="039ae-144">Read-only.</span></span>|<span data-ttu-id="039ae-145">下一個範圍的開始值。</span><span class="sxs-lookup"><span data-stu-id="039ae-145">The value at which the next range will start.</span></span> <span data-ttu-id="039ae-146">例如，如果目前範圍是 5001-6000，則該值為 6001。</span><span class="sxs-lookup"><span data-stu-id="039ae-146">For example, if the current range is 5001-6000, this value will be 6001.</span></span>|  
    |<span data-ttu-id="039ae-147">**[最大識別值]**</span><span class="sxs-lookup"><span data-stu-id="039ae-147">**Maximum identity value**</span></span>|<span data-ttu-id="039ae-148">整數值。</span><span class="sxs-lookup"><span data-stu-id="039ae-148">Integer value.</span></span> <span data-ttu-id="039ae-149">唯讀。</span><span class="sxs-lookup"><span data-stu-id="039ae-149">Read-only.</span></span>|<span data-ttu-id="039ae-150">識別欄位的最大值。</span><span class="sxs-lookup"><span data-stu-id="039ae-150">The largest value for the identity column.</span></span> <span data-ttu-id="039ae-151">由資料行的基底資料型別決定。</span><span class="sxs-lookup"><span data-stu-id="039ae-151">Determined by the base data type of the column.</span></span>|  
    |<span data-ttu-id="039ae-152">**[遞增]**</span><span class="sxs-lookup"><span data-stu-id="039ae-152">**Increment**</span></span>|<span data-ttu-id="039ae-153">整數值。</span><span class="sxs-lookup"><span data-stu-id="039ae-153">Integer value.</span></span> <span data-ttu-id="039ae-154">唯讀。</span><span class="sxs-lookup"><span data-stu-id="039ae-154">Read-only.</span></span>|<span data-ttu-id="039ae-155">每次插入時，應增加或是減少的識別欄位的值數量：通常設定為 1。</span><span class="sxs-lookup"><span data-stu-id="039ae-155">The amount by which the number in the identity column should increase or decrease for each insert: typically set to 1.</span></span>|  
  
6.  [!INCLUDE[clickOK](../../../includes/clickok-md.md)]  
  
#### <a name="to-modify-identity-ranges-and-thresholds-after-a-table-is-published"></a><span data-ttu-id="039ae-156">若要在發行資料表後修改識別範圍和臨界值</span><span class="sxs-lookup"><span data-stu-id="039ae-156">To modify identity ranges and thresholds after a table is published</span></span>  
  
1.  <span data-ttu-id="039ae-157">在 [發行集屬性 - \<Publication>] 對話方塊的 [發行項] 頁面上，選取具有識別欄位的資料表。</span><span class="sxs-lookup"><span data-stu-id="039ae-157">On the **Articles** page of the **Publication Properties - \<Publication>** dialog box, select a table with an identity column.</span></span>  
  
2.  <span data-ttu-id="039ae-158">按一下 **[發行項屬性]** ，然後按一下 **[設定反白顯示資料表發行項的屬性]** 。</span><span class="sxs-lookup"><span data-stu-id="039ae-158">Click **Article Properties**, and then click **Set Properties of Highlighted Table Article**.</span></span>  
  
3.  <span data-ttu-id="039ae-159">在 [發行項屬性 - \<Article>] 對話方塊的 [屬性] 索引標籤上，於 [識別範圍管理] 區段中輸入下列一或多個屬性的值：[發行者範圍大小]、[訂閱者範圍大小] 和 [範圍閾值百分比]。</span><span class="sxs-lookup"><span data-stu-id="039ae-159">On the **Properties** tab of the **Article Properties - \<Article>** dialog box, in the **Identity Range Management** section, enter values for one or more of the following properties: **Publisher range size**, **Subscriber range size**, and **Range threshold percentage**.</span></span>  
  
4.  [!INCLUDE[clickOK](../../../includes/clickok-md.md)]  
  
5.  <span data-ttu-id="039ae-160">在 [發行集屬性 - \<Publication>] 對話方塊上，按一下 [確定]。</span><span class="sxs-lookup"><span data-stu-id="039ae-160">Click **OK** on the **Publication Properties - \<Publication>** dialog box.</span></span>  
  
##  <a name="using-transact-sql"></a><a name="TsqlProcedure"></a> <span data-ttu-id="039ae-161">使用 Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="039ae-161">Using Transact-SQL</span></span>  
 <span data-ttu-id="039ae-162">您可以在建立發行項時，使用複寫預存程序來指定識別範圍管理選項。</span><span class="sxs-lookup"><span data-stu-id="039ae-162">You can use replication stored procedures to specify identity range management options when an article is created.</span></span>  
  
#### <a name="to-enable-automatic-identity-range-management-when-defining-articles-for-a-transactional-publication"></a><span data-ttu-id="039ae-163">在針對交易式發行集定義發行項時，啟用自動識別範圍管理</span><span class="sxs-lookup"><span data-stu-id="039ae-163">To enable automatic identity range management when defining articles for a transactional publication</span></span>  
  
1.  <span data-ttu-id="039ae-164">在發行集資料庫的發行者上，執行 [sp_addarticle](/sql/relational-databases/system-stored-procedures/sp-addarticle-transact-sql)。</span><span class="sxs-lookup"><span data-stu-id="039ae-164">At the Publisher on the publication database, execute [sp_addarticle](/sql/relational-databases/system-stored-procedures/sp-addarticle-transact-sql).</span></span> <span data-ttu-id="039ae-165">如果發行的來源資料表有識別欄位，請為 **\@identityrangemanagementoption** 指定 **auto** 值、為 **\@pub_identity_range** 指定指派給發行者的識別值範圍、為 **\@identity_range** 指定指派給每一個訂閱者的識別值範圍，以及為 **\@threshold** 指定在指派新識別範圍之前所使用的總識別值百分比。</span><span class="sxs-lookup"><span data-stu-id="039ae-165">If the source table being published has an identity column, specify a value of **auto** for **\@identityrangemanagementoption**, the range of identity values assigned to the Publisher for **\@pub_identity_range**, the range of identity values assigned to each Subscribers for **\@identity_range**, and the percent of total identity values used before a new identity range is assigned for **\@threshold**.</span></span> <span data-ttu-id="039ae-166">如需定義發行項的詳細資訊，請參閱[定義發行項](define-an-article.md)。</span><span class="sxs-lookup"><span data-stu-id="039ae-166">For more information about defining articles, see [Define an Article](define-an-article.md).</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="039ae-167">請確定識別欄位的資料類型夠大，足以支援指派給所有訂閱者的識別總範圍。</span><span class="sxs-lookup"><span data-stu-id="039ae-167">Ensure that the data type of the identity column is large enough to support the total range of identities being assigned to all Subscribers.</span></span>  
  
#### <a name="to-disable-automatic-identity-range-management-when-defining-articles-for-a-transactional-publication"></a><span data-ttu-id="039ae-168">在針對交易式發行集定義發行項時，停用自動識別範圍管理</span><span class="sxs-lookup"><span data-stu-id="039ae-168">To disable automatic identity range management when defining articles for a transactional publication</span></span>  
  
1.  <span data-ttu-id="039ae-169">在發行集資料庫的發行者上，執行 [sp_addarticle](/sql/relational-databases/system-stored-procedures/sp-addarticle-transact-sql)。</span><span class="sxs-lookup"><span data-stu-id="039ae-169">At the Publisher on the publication database, execute [sp_addarticle](/sql/relational-databases/system-stored-procedures/sp-addarticle-transact-sql).</span></span> <span data-ttu-id="039ae-170">為 **\@identityrangemanagementoption** 指定 **manual** 值。</span><span class="sxs-lookup"><span data-stu-id="039ae-170">Specify a value of **manual** for **\@identityrangemanagementoption**.</span></span> <span data-ttu-id="039ae-171">如需定義發行項的詳細資訊，請參閱[定義發行項](define-an-article.md)。</span><span class="sxs-lookup"><span data-stu-id="039ae-171">For more information about defining articles, see [Define an Article](define-an-article.md).</span></span>  
  
2.  <span data-ttu-id="039ae-172">在訂閱者上指派識別發行項欄位的範圍，以免產生更新訂閱者的衝突。</span><span class="sxs-lookup"><span data-stu-id="039ae-172">Assign ranges to identity article columns at the Subscriber to avoid generating conflicts for updating Subscribers.</span></span> <span data-ttu-id="039ae-173">如需詳細資訊，請參閱[複寫識別欄位](replicate-identity-columns.md)主題中的＜為手動識別範圍管理指派範圍＞一節。</span><span class="sxs-lookup"><span data-stu-id="039ae-173">For more information, see the section on assigning ranges for manual identity range management in the topic [Replicate Identity Columns](replicate-identity-columns.md).</span></span>  
  
#### <a name="to-enable-automatic-identity-range-management-when-defining-articles-for-a-merge-publication"></a><span data-ttu-id="039ae-174">在針對合併式發行集定義發行項時，啟用自動識別範圍管理</span><span class="sxs-lookup"><span data-stu-id="039ae-174">To enable automatic identity range management when defining articles for a merge publication</span></span>  
  
1.  <span data-ttu-id="039ae-175">在發行集資料庫的發行者上，執行 [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql)。</span><span class="sxs-lookup"><span data-stu-id="039ae-175">At the Publisher on the publication database, execute [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql).</span></span> <span data-ttu-id="039ae-176">如果發行的來源資料表有識別欄位，請為 **\@identityrangemanagementoption** 指定 **auto** 值、為 **\@pub_identity_range** 指定指派給伺服器訂閱的識別值範圍、為 **\@identity_range** 指定指派給發行者和每一個用戶端訂閱的識別值範圍，以及為 **\@threshold** 指定在指派新識別範圍之前所使用的總識別值百分比。</span><span class="sxs-lookup"><span data-stu-id="039ae-176">If the source table being published has an identity column, specify a value of **auto** for **\@identityrangemanagementoption**, the range of identity values assigned to a server subscription for **\@pub_identity_range**, the range of identity values assigned to the Publisher and each client subscription for **\@identity_range**, and the percent of total identity values used before a new identity range is assigned for **\@threshold**.</span></span> <span data-ttu-id="039ae-177">如需要指派哪些新識別範圍的詳細資訊，請參閱[複寫識別欄位](replicate-identity-columns.md)主題中的＜指派識別範圍＞。</span><span class="sxs-lookup"><span data-stu-id="039ae-177">For more information on when new identity ranges are assigned, see Assigning Identity Ranges in the topic [Replicate Identity Columns](replicate-identity-columns.md).</span></span> <span data-ttu-id="039ae-178">如需定義發行項的詳細資訊，請參閱[定義發行項](define-an-article.md)。</span><span class="sxs-lookup"><span data-stu-id="039ae-178">For more information about defining articles, see [Define an Article](define-an-article.md).</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="039ae-179">請確定識別欄位的資料類型夠大，足以支援指派給所有訂閱者的識別總範圍，特別是具有伺服器訂閱的訂閱者</span><span class="sxs-lookup"><span data-stu-id="039ae-179">Ensure that the data type of the identity column is large enough to support the total range of identities being assigned to all Subscribers, particularly for Subscribers with server subscriptions.</span></span>  
  
#### <a name="to-disable-automatic-identity-range-management-when-defining-articles-for-a-merge-publication"></a><span data-ttu-id="039ae-180">在針對合併式發行集定義發行項時，停用自動識別範圍管理</span><span class="sxs-lookup"><span data-stu-id="039ae-180">To disable automatic identity range management when defining articles for a merge publication</span></span>  
  
1.  <span data-ttu-id="039ae-181">在發行集資料庫的發行者上，執行 [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql)。</span><span class="sxs-lookup"><span data-stu-id="039ae-181">At the Publisher on the publication database, execute [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql).</span></span> <span data-ttu-id="039ae-182">為 **\@identityrangemanagementoption** 指定下列其中一個值：</span><span class="sxs-lookup"><span data-stu-id="039ae-182">Specify one of the following values for **\@identityrangemanagementoption**:</span></span>  
  
    -   <span data-ttu-id="039ae-183">**manual** - 必須手動指派識別範圍來更新訂閱者。</span><span class="sxs-lookup"><span data-stu-id="039ae-183">**manual** - Identity ranges must be assigned manually for updating Subscribers.</span></span>  
  
    -   <span data-ttu-id="039ae-184">**none** - 發行者上的識別欄位將不會定義為訂閱者上的識別欄位。</span><span class="sxs-lookup"><span data-stu-id="039ae-184">**none** - Identity columns at the Publisher will not be defined as identity columns at the Subscriber.</span></span>  
  
     <span data-ttu-id="039ae-185">如需定義發行項的詳細資訊，請參閱[定義發行項](define-an-article.md)。</span><span class="sxs-lookup"><span data-stu-id="039ae-185">For more information about defining articles, see [Define an Article](define-an-article.md).</span></span>  
  
2.  <span data-ttu-id="039ae-186">在訂閱者上指派識別發行項欄位的範圍，以免產生更新訂閱者的衝突。</span><span class="sxs-lookup"><span data-stu-id="039ae-186">Assign ranges to identity article columns at the Subscriber to avoid generating conflicts for updating Subscribers.</span></span>  
  
#### <a name="to-change-automatic-identity-range-management-settings-for-an-existing-article-in-a-snapshot-or-transactional-publication"></a><span data-ttu-id="039ae-187">針對快照式或交易式發行集中的現有發行項，變更自動識別範圍管理設定</span><span class="sxs-lookup"><span data-stu-id="039ae-187">To change automatic identity range management settings for an existing article in a snapshot or transactional publication</span></span>  
  
1.  <span data-ttu-id="039ae-188">在發行集資料庫的發行者上，執行 [sp_helparticle](/sql/relational-databases/system-stored-procedures/sp-helparticle-transact-sql) ，並記下結果集中 **identityrangemanagementoption** 的值。</span><span class="sxs-lookup"><span data-stu-id="039ae-188">At the Publisher on the publication database, execute [sp_helparticle](/sql/relational-databases/system-stored-procedures/sp-helparticle-transact-sql) and note the value of **identityrangemanagementoption** in the result set.</span></span> <span data-ttu-id="039ae-189">如果此值為 **0**，不會啟用自動識別範圍管理。</span><span class="sxs-lookup"><span data-stu-id="039ae-189">If this value is **0**, automatic identity range management is not enabled.</span></span>  
  
2.  <span data-ttu-id="039ae-190">如果結果集中 **identityrangemanagementoption** 的值為 **1**，請依照以下方式變更設定：</span><span class="sxs-lookup"><span data-stu-id="039ae-190">If the value of **identityrangemanagementoption** in the result set is **1**, change the settings as follows:</span></span>  
  
    -   <span data-ttu-id="039ae-191">若要變更指派的識別範圍，請在發行集資料庫的發行者上，執行 [sp_changearticle](/sql/relational-databases/system-stored-procedures/sp-changearticle-transact-sql) 。</span><span class="sxs-lookup"><span data-stu-id="039ae-191">To change the assigned identity ranges, execute [sp_changearticle](/sql/relational-databases/system-stored-procedures/sp-changearticle-transact-sql) at the Publisher on the publication database.</span></span> <span data-ttu-id="039ae-192">為 **\@property** 指定 **identity_range** 或 **pub_identity_range** 的值，並為 **\@value** 指定新的範圍值。</span><span class="sxs-lookup"><span data-stu-id="039ae-192">Specify a value of **identity_range** or **pub_identity_range** for **\@property** and the new range value for **\@value**.</span></span>  
  
    -   <span data-ttu-id="039ae-193">若要變更指派新範圍的臨界值，請在發行集資料庫的發行者上，執行 [sp_changearticle](/sql/relational-databases/system-stored-procedures/sp-changearticle-transact-sql) 。</span><span class="sxs-lookup"><span data-stu-id="039ae-193">To change the threshold at which new ranges are assigned, execute [sp_changearticle](/sql/relational-databases/system-stored-procedures/sp-changearticle-transact-sql) at the Publisher on the publication database.</span></span> <span data-ttu-id="039ae-194">為 **\@property** 指定 **threshold** 值，並為 **\@value** 指定新的臨界值。</span><span class="sxs-lookup"><span data-stu-id="039ae-194">Specify a value of **threshold** for **\@property** and the new threshold value for **\@value**.</span></span>  
  
#### <a name="to-change-automatic-identity-range-management-settings-for-an-existing-article-in-a-merge-publication"></a><span data-ttu-id="039ae-195">針對合併式發行集中的現有發行項，變更自動識別範圍管理設定</span><span class="sxs-lookup"><span data-stu-id="039ae-195">To change automatic identity range management settings for an existing article in a merge publication</span></span>  
  
1.  <span data-ttu-id="039ae-196">在發行集資料庫的發行者上，執行 [sp_helpmergearticle](/sql/relational-databases/system-stored-procedures/sp-helpmergearticle-transact-sql) ，並記下結果集中 **identity_support** 的值。</span><span class="sxs-lookup"><span data-stu-id="039ae-196">At the Publisher on the publication database, execute [sp_helpmergearticle](/sql/relational-databases/system-stored-procedures/sp-helpmergearticle-transact-sql) and note the value of **identity_support** in the result set.</span></span> <span data-ttu-id="039ae-197">如果此值為 **0**，不會啟用自動識別範圍管理。</span><span class="sxs-lookup"><span data-stu-id="039ae-197">If this value is **0**, automatic identity range management is not enabled.</span></span>  
  
2.  <span data-ttu-id="039ae-198">如果結果集中 **identity_support** 的值為 **1**，請依照以下方式變更設定：</span><span class="sxs-lookup"><span data-stu-id="039ae-198">If the value of **identity_support** in the result set is **1**, change the settings as follows:</span></span>  
  
    -   <span data-ttu-id="039ae-199">若要變更指派的識別範圍，請在發行集資料庫的發行者上，執行 [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql) 。</span><span class="sxs-lookup"><span data-stu-id="039ae-199">To change the assigned identity ranges, execute [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql) at the Publisher on the publication database.</span></span> <span data-ttu-id="039ae-200">為 **\@property** 指定 **identity_range** 或 **pub_identity_range** 的值，並為 **\@value** 指定新的範圍值。</span><span class="sxs-lookup"><span data-stu-id="039ae-200">Specify a value of **identity_range** or **pub_identity_range** for **\@property** and the new range value for **\@value**.</span></span>  
  
    -   <span data-ttu-id="039ae-201">若要變更指派新範圍的臨界值，請在發行集資料庫的發行者上，執行 [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql) 。</span><span class="sxs-lookup"><span data-stu-id="039ae-201">To change the threshold at which new ranges are assigned, execute [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql) at the Publisher on the publication database.</span></span> <span data-ttu-id="039ae-202">為 **\@property** 指定 **threshold** 值，並為 **\@value** 指定新的臨界值。</span><span class="sxs-lookup"><span data-stu-id="039ae-202">Specify a value of **threshold** for **\@property** and the new threshold value for **\@value**.</span></span> <span data-ttu-id="039ae-203">如需要指派哪些新識別範圍的詳細資訊，請參閱[複寫識別欄位](replicate-identity-columns.md)主題中的＜指派識別範圍＞。</span><span class="sxs-lookup"><span data-stu-id="039ae-203">For more information on when new identity ranges are assigned, see Assigning Identity Ranges in the topic [Replicate Identity Columns](replicate-identity-columns.md).</span></span>  
  
    -   <span data-ttu-id="039ae-204">若要停用自動識別範圍管理，請在發行集資料庫的發行者上，執行 [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql) 。</span><span class="sxs-lookup"><span data-stu-id="039ae-204">To disable automatic identity range management, execute [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql) at the Publisher on the publication database.</span></span> <span data-ttu-id="039ae-205">為 **\@property** 指定 **identityrangemanagementoption** 值，並為 **\@value** 指定 **manual** 或 **none** 值。</span><span class="sxs-lookup"><span data-stu-id="039ae-205">Specify a value of **identityrangemanagementoption** for **\@property** and either **manual** or **none** for **\@value**.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="039ae-206">另請參閱</span><span class="sxs-lookup"><span data-stu-id="039ae-206">See Also</span></span>  
 <span data-ttu-id="039ae-207">[Peer-to-Peer Transactional Replication](../transactional/peer-to-peer-transactional-replication.md) </span><span class="sxs-lookup"><span data-stu-id="039ae-207">[Peer-to-Peer Transactional Replication](../transactional/peer-to-peer-transactional-replication.md) </span></span>  
 <span data-ttu-id="039ae-208">[Replication System Stored Procedures Concepts](../concepts/replication-system-stored-procedures-concepts.md) </span><span class="sxs-lookup"><span data-stu-id="039ae-208">[Replication System Stored Procedures Concepts](../concepts/replication-system-stored-procedures-concepts.md) </span></span>  
 [<span data-ttu-id="039ae-209">複寫識別資料行</span><span class="sxs-lookup"><span data-stu-id="039ae-209">Replicate Identity Columns</span></span>](replicate-identity-columns.md)  
  
  
