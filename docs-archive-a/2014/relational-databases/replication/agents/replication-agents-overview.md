---
title: 複寫代理程式概觀 | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- Distribution Agent
- agents [SQL Server replication]
- Queue Reader Agent, about Queue Reader Agent
- Queue Reader Agent
- Merge Agent, about Merge Agent
- Log Reader Agent, about Log Reader Agent
- replication [SQL Server], agents and profiles
- Log Reader Agent
- Distribution Agent, about Distribution Agent
- agents [SQL Server replication], about agents
- Merge Agent
- Snapshot Agent, about Snapshot Agent
- Snapshot Agent
ms.assetid: a35ecd7d-f130-483c-87e3-ddc8927bb91b
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 9eea7f24fe9350aeb815a5af9dd4e2e1c0dce607
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87593956"
---
# <a name="replication-agents-overview"></a><span data-ttu-id="8f04c-102">複寫代理程式概觀</span><span class="sxs-lookup"><span data-stu-id="8f04c-102">Replication Agents Overview</span></span>
  <span data-ttu-id="8f04c-103">複寫使用了許多名為代理程式的獨立程式，以執行與追蹤變更和散發資料有關的工作。</span><span class="sxs-lookup"><span data-stu-id="8f04c-103">Replication uses a number of standalone programs, called agents, to carry out the tasks associated with tracking changes and distributing data.</span></span> <span data-ttu-id="8f04c-104">依預設，複寫代理程式作為在 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent 中排定的作業來執行，且必須執行 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent 方可執行這些作業。</span><span class="sxs-lookup"><span data-stu-id="8f04c-104">By default, replication agents run as jobs scheduled under [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent, and [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent must be running for the jobs to run.</span></span> <span data-ttu-id="8f04c-105">複寫代理程式也可以從命令列執行，或透過使用 Replication Management Objects (RMO) 的應用程式執行。</span><span class="sxs-lookup"><span data-stu-id="8f04c-105">Replication agents can also be run from the command line and by applications that use Replication Management Objects (RMO).</span></span> <span data-ttu-id="8f04c-106">複寫代理程式可以透過「 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 複寫監視器」和 [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)]進行管理。</span><span class="sxs-lookup"><span data-stu-id="8f04c-106">Replication agents can be administered from [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Replication Monitor and [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)].</span></span>  
  
## <a name="sql-server-agent"></a><span data-ttu-id="8f04c-107">SQL Server Agent</span><span class="sxs-lookup"><span data-stu-id="8f04c-107">SQL Server Agent</span></span>  
 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="8f04c-108">Agent 主控和排程複寫中使用的代理程式，並為執行複寫代理程式提供了簡易的方法。</span><span class="sxs-lookup"><span data-stu-id="8f04c-108">Agent hosts and schedules the agents used in replication and provides an easy way to run replication agents.</span></span> [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="8f04c-109">Agent 還控制和監視除複寫以外的其他作業。</span><span class="sxs-lookup"><span data-stu-id="8f04c-109">Agent also controls and monitors operations outside of replication.</span></span> <span data-ttu-id="8f04c-110">如需詳細資訊，請參閱 [Configure SQL Server Agent](../../../ssms/agent/sql-server-agent.md)。</span><span class="sxs-lookup"><span data-stu-id="8f04c-110">For more information, see [Configure SQL Server Agent](../../../ssms/agent/sql-server-agent.md).</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="8f04c-111">依預設，安裝 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 時會停用 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent 服務，除非明確選擇在安裝期間自動啟動該服務。</span><span class="sxs-lookup"><span data-stu-id="8f04c-111">By default, the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent service is disabled when [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] is installed unless you explicitly choose to autostart the service during installation.</span></span> <span data-ttu-id="8f04c-112">如需有關啟動 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent 服務的詳細資訊，請參閱＜ [Start, Stop, or Pause the SQL Server Agent Service](../../../ssms/agent/start-stop-or-pause-the-sql-server-agent-service.md)進行管理。</span><span class="sxs-lookup"><span data-stu-id="8f04c-112">For more information about starting the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent service, see [Start, Stop, or Pause the SQL Server Agent Service](../../../ssms/agent/start-stop-or-pause-the-sql-server-agent-service.md).</span></span>  
  
## <a name="snapshot-agent"></a><span data-ttu-id="8f04c-113">快照集代理程式</span><span class="sxs-lookup"><span data-stu-id="8f04c-113">Snapshot Agent</span></span>  
 <span data-ttu-id="8f04c-114">「快照集代理程式」通常搭配各種類型的複寫使用，</span><span class="sxs-lookup"><span data-stu-id="8f04c-114">The Snapshot Agent is typically used with all types of replication.</span></span> <span data-ttu-id="8f04c-115">它會準備已發行資料表和其他物件的結構描述和初始資料檔、儲存快照集檔案，並記錄散發資料庫中同步處理的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="8f04c-115">It prepares schema and initial data files of published tables and other objects, stores the snapshot files, and records information about synchronization in the distribution database.</span></span> <span data-ttu-id="8f04c-116">快照集代理程式於發行者端執行。</span><span class="sxs-lookup"><span data-stu-id="8f04c-116">The Snapshot Agent runs at the Distributor.</span></span> <span data-ttu-id="8f04c-117">如需詳細資訊，請參閱 [Replication Snapshot Agent](replication-snapshot-agent.md)。</span><span class="sxs-lookup"><span data-stu-id="8f04c-117">For more information, see [Replication Snapshot Agent](replication-snapshot-agent.md).</span></span>  
  
## <a name="log-reader-agent"></a><span data-ttu-id="8f04c-118">記錄讀取器代理程式</span><span class="sxs-lookup"><span data-stu-id="8f04c-118">Log Reader Agent</span></span>  
 <span data-ttu-id="8f04c-119">「記錄讀取器代理程式」(Log Reader Agent) 可搭配異動複寫來使用。</span><span class="sxs-lookup"><span data-stu-id="8f04c-119">The Log Reader Agent is used with transactional replication.</span></span> <span data-ttu-id="8f04c-120">它可將標示為複寫的交易，自「發行者」的交易記錄移至散發資料庫中。</span><span class="sxs-lookup"><span data-stu-id="8f04c-120">It moves transactions marked for replication from the transaction log on the Publisher to the distribution database.</span></span> <span data-ttu-id="8f04c-121">每個使用異動複寫發行的資料庫都擁有其自己的「記錄讀取器代理程式」，該代理程式在「散發者」端執行並連接到「發行者」(「散發者」可與「發行者」在同一台電腦)。</span><span class="sxs-lookup"><span data-stu-id="8f04c-121">Each database published using transactional replication has its own Log Reader Agent that runs on the Distributor and connects to the Publisher (the Distributor can be on the same computer as the Publisher).</span></span> <span data-ttu-id="8f04c-122">如需詳細資訊，請參閱 [Replication Log Reader Agent](replication-log-reader-agent.md)。</span><span class="sxs-lookup"><span data-stu-id="8f04c-122">For more information, see [Replication Log Reader Agent](replication-log-reader-agent.md).</span></span>  
  
## <a name="distribution-agent"></a><span data-ttu-id="8f04c-123">散發代理程式</span><span class="sxs-lookup"><span data-stu-id="8f04c-123">Distribution Agent</span></span>  
 <span data-ttu-id="8f04c-124">「散發代理程式」(Distribution Agent) 可搭配快照式複寫和異動複寫來使用。</span><span class="sxs-lookup"><span data-stu-id="8f04c-124">The Distribution Agent is used with snapshot replication and transactional replication.</span></span> <span data-ttu-id="8f04c-125">它可將初始快照集套用至「訂閱者」，並將散發資料庫中的交易移至「訂閱者」。</span><span class="sxs-lookup"><span data-stu-id="8f04c-125">It applies the initial snapshot to the Subscriber and moves transactions held in the distribution database to Subscribers.</span></span> <span data-ttu-id="8f04c-126">「散發代理程式」在發送訂閱的「散發者」端或是提取訂閱的「訂閱者」端執行。</span><span class="sxs-lookup"><span data-stu-id="8f04c-126">The Distribution Agent runs at either the Distributor for push subscriptions or at the Subscriber for pull subscriptions.</span></span> <span data-ttu-id="8f04c-127">如需詳細資訊，請參閱 [Replication Distribution Agent](replication-distribution-agent.md)。</span><span class="sxs-lookup"><span data-stu-id="8f04c-127">For more information, see [Replication Distribution Agent](replication-distribution-agent.md).</span></span>  
  
## <a name="merge-agent"></a><span data-ttu-id="8f04c-128">合併代理程式</span><span class="sxs-lookup"><span data-stu-id="8f04c-128">Merge Agent</span></span>  
 <span data-ttu-id="8f04c-129">「合併代理程式」(Merge Agent) 可搭配合併式複寫使用。</span><span class="sxs-lookup"><span data-stu-id="8f04c-129">The Merge Agent is used with merge replication.</span></span> <span data-ttu-id="8f04c-130">它可將初始快照集套用到「訂閱者」，移動並使累加的資料變更一致。</span><span class="sxs-lookup"><span data-stu-id="8f04c-130">It applies the initial snapshot to the Subscriber and moves and reconciles incremental data changes that occur.</span></span> <span data-ttu-id="8f04c-131">每個合併訂閱都有其「合併代理程式」，以連接「發行者」和「訂閱者」，並更新這兩者。</span><span class="sxs-lookup"><span data-stu-id="8f04c-131">Each merge subscription has its own Merge Agent that connects to both the Publisher and the Subscriber and updates both.</span></span> <span data-ttu-id="8f04c-132">「合併代理程式」在發送訂閱的「散發者」端或是提取訂閱的「訂閱者」端執行。</span><span class="sxs-lookup"><span data-stu-id="8f04c-132">The Merge Agent runs at either the Distributor for push subscriptions or the Subscriber for pull subscriptions.</span></span> <span data-ttu-id="8f04c-133">依預設，「合併代理程式」將變更從「訂閱者」上傳到「發行者」，然後再將變更從「發行者」下載至「訂閱者」。</span><span class="sxs-lookup"><span data-stu-id="8f04c-133">By default, the Merge Agent uploads changes from the Subscriber to the Publisher and then downloads changes from the Publisher to the Subscriber.</span></span> <span data-ttu-id="8f04c-134">如需詳細資訊，請參閱 [Replication Merge Agent](replication-merge-agent.md)。</span><span class="sxs-lookup"><span data-stu-id="8f04c-134">For more information, see [Replication Merge Agent](replication-merge-agent.md).</span></span>  
  
## <a name="queue-reader-agent"></a><span data-ttu-id="8f04c-135">佇列讀取器代理程式</span><span class="sxs-lookup"><span data-stu-id="8f04c-135">Queue Reader Agent</span></span>  
 <span data-ttu-id="8f04c-136">「佇列讀取器代理程式」與具有佇列更新選項的異動複寫搭配使用。</span><span class="sxs-lookup"><span data-stu-id="8f04c-136">The Queue Reader Agent is used with transactional replication with the queued updating option.</span></span> <span data-ttu-id="8f04c-137">代理程式在「散發者」端執行，並且將在「訂閱者」端所作的變更移回至「發行者」。</span><span class="sxs-lookup"><span data-stu-id="8f04c-137">The agent runs at the Distributor and moves changes made at the Subscriber back to the Publisher.</span></span> <span data-ttu-id="8f04c-138">它不像「散發代理程式」和「合併代理程式」，只存在一個「佇列讀取器代理程式」的執行個體，來服務所有的「發行者」和指定散發資料庫的發行集。</span><span class="sxs-lookup"><span data-stu-id="8f04c-138">Unlike the Distribution Agent and the Merge Agent, only one instance of the Queue Reader Agent exists to service all Publishers and publications for a given distribution database.</span></span> <span data-ttu-id="8f04c-139">如需「佇列讀取器代理程式」的詳細資訊，請參閱＜ [Replication Queue Reader Agent](replication-queue-reader-agent.md)＞。</span><span class="sxs-lookup"><span data-stu-id="8f04c-139">For more information about the Queue Reader Agent, see [Replication Queue Reader Agent](replication-queue-reader-agent.md).</span></span> <span data-ttu-id="8f04c-140">如需有關可更新訂閱的詳細資訊，請參閱＜ [Updatable Subscriptions for Transactional Replication](../transactional/updatable-subscriptions-for-transactional-replication.md)＞。</span><span class="sxs-lookup"><span data-stu-id="8f04c-140">For more information about updatable subscriptions, see [Updatable Subscriptions for Transactional Replication](../transactional/updatable-subscriptions-for-transactional-replication.md).</span></span>  
  
## <a name="replication-maintenance-jobs"></a><span data-ttu-id="8f04c-141">複寫維護作業</span><span class="sxs-lookup"><span data-stu-id="8f04c-141">Replication Maintenance Jobs</span></span>  
 <span data-ttu-id="8f04c-142">複寫擁有許多依排程和視需要執行維護的維護作業。</span><span class="sxs-lookup"><span data-stu-id="8f04c-142">Replication has a number of maintenance jobs that perform scheduled and on-demand maintenance.</span></span> <span data-ttu-id="8f04c-143">如需詳細資訊，請參閱[複寫代理程式管理](replication-agent-administration.md)。</span><span class="sxs-lookup"><span data-stu-id="8f04c-143">For more information, see [Replication Agent Administration](replication-agent-administration.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="8f04c-144">另請參閱</span><span class="sxs-lookup"><span data-stu-id="8f04c-144">See Also</span></span>  
 <span data-ttu-id="8f04c-145">[啟動及停止複寫代理程式 &#40;SQL Server Management Studio&#41;](start-and-stop-a-replication-agent-sql-server-management-studio.md) </span><span class="sxs-lookup"><span data-stu-id="8f04c-145">[Start and Stop a Replication Agent &#40;SQL Server Management Studio&#41;](start-and-stop-a-replication-agent-sql-server-management-studio.md) </span></span>  
 <span data-ttu-id="8f04c-146">[執行複寫維護作業 &#40;SQL Server Management Studio&#41;](../administration/run-replication-maintenance-jobs-sql-server-management-studio.md) </span><span class="sxs-lookup"><span data-stu-id="8f04c-146">[Run Replication Maintenance Jobs &#40;SQL Server Management Studio&#41;](../administration/run-replication-maintenance-jobs-sql-server-management-studio.md) </span></span>  
 <span data-ttu-id="8f04c-147">[複寫代理程式可執行檔概念](../concepts/replication-agent-executables-concepts.md) </span><span class="sxs-lookup"><span data-stu-id="8f04c-147">[Replication Agent Executables Concepts](../concepts/replication-agent-executables-concepts.md) </span></span>  
 [<span data-ttu-id="8f04c-148">複寫代理程式管理</span><span class="sxs-lookup"><span data-stu-id="8f04c-148">Replication Agent Administration</span></span>](replication-agent-administration.md)  
  
  
