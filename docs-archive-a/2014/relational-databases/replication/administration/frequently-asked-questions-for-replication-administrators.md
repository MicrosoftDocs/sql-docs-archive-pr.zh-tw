---
title: 複寫管理員的常見問題集 | Microsoft Docs
ms.custom: ''
ms.date: 03/09/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- administering replication, frequently asked questions
- replication [SQL Server], administering
ms.assetid: 5a9e4ddf-3cb1-4baf-94d6-b80acca24f64
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 02f12008b9ab8e9cd4c7d08ed81a902629b90827
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87705086"
---
# <a name="frequently-asked-questions-for-replication-administrators"></a><span data-ttu-id="d73f6-102">複寫管理員的常見問題集</span><span class="sxs-lookup"><span data-stu-id="d73f6-102">Frequently Asked Questions for Replication Administrators</span></span>
  <span data-ttu-id="d73f6-103">透過下列問題和答覆可以了解複寫的資料庫管理員所面臨的各種工作。</span><span class="sxs-lookup"><span data-stu-id="d73f6-103">The following questions and answers provide guidance on a variety of tasks faced by administrators of replicated databases.</span></span>  
  
## <a name="configuring-replication"></a><span data-ttu-id="d73f6-104">設定複寫</span><span class="sxs-lookup"><span data-stu-id="d73f6-104">Configuring Replication</span></span>  
  
### <a name="does-activity-need-to-be-stopped-on-a-database-when-it-is-published"></a><span data-ttu-id="d73f6-105">當活動發行後，是否需要在資料庫中停止該活動？</span><span class="sxs-lookup"><span data-stu-id="d73f6-105">Does activity need to be stopped on a database when it is published?</span></span>  
 <span data-ttu-id="d73f6-106">否。</span><span class="sxs-lookup"><span data-stu-id="d73f6-106">No.</span></span> <span data-ttu-id="d73f6-107">在建立發行集期間，可在資料庫中繼續保留活動。</span><span class="sxs-lookup"><span data-stu-id="d73f6-107">Activity can continue on a database while a publication is being created.</span></span> <span data-ttu-id="d73f6-108">請注意，產生快照集可能需要大量資源，因此最好在資料庫中活動較少的時間產生快照集 (依預設，在您完成「新增發行集精靈」時產生快照集)。</span><span class="sxs-lookup"><span data-stu-id="d73f6-108">Be aware that producing a snapshot can be resource-intensive, so it is best to generate snapshots during periods of lower activity on the database (by default a snapshot is generated when you complete the New Publication Wizard).</span></span>  
  
### <a name="are-tables-locked-during-snapshot-generation"></a><span data-ttu-id="d73f6-109">資料表是否在快照集產生期間鎖定？</span><span class="sxs-lookup"><span data-stu-id="d73f6-109">Are tables locked during snapshot generation?</span></span>  
 <span data-ttu-id="d73f6-110">鎖定的時間長短視所用的複寫類型而定：</span><span class="sxs-lookup"><span data-stu-id="d73f6-110">The length of time that the locks are taken depends on the type of replication used:</span></span>  
  
-   <span data-ttu-id="d73f6-111">針對合併式發行集，快照集代理程式未使用任何鎖定。</span><span class="sxs-lookup"><span data-stu-id="d73f6-111">For merge publications, the Snapshot Agent does not take any locks.</span></span>  
  
-   <span data-ttu-id="d73f6-112">對於交易式發行集，依預設，「快照集代理程式」將只在快照集產生的初始階段進行鎖定。</span><span class="sxs-lookup"><span data-stu-id="d73f6-112">For transactional publications, by default the Snapshot Agent takes locks only during the initial phase of snapshot generation.</span></span>  
  
-   <span data-ttu-id="d73f6-113">對於快照式發行集，「快照集代理程式」會在快照集產生的整個處理過程中進行鎖定。</span><span class="sxs-lookup"><span data-stu-id="d73f6-113">For snapshot publications the Snapshot Agent takes locks during the entire snapshot generation process.</span></span>  
  
 <span data-ttu-id="d73f6-114">由於鎖定可以防止其他使用者更新資料表，因此「快照集代理程式」應排程在資料庫活動較少的時間執行，特別是對於快照式發行集。</span><span class="sxs-lookup"><span data-stu-id="d73f6-114">Because locks prevent other users from updating the tables, the Snapshot Agent should be scheduled to execute during periods of lower activity on the database, especially for snapshot publications.</span></span>  
  
### <a name="when-is-a-subscription-available-when-can-the-subscription-database-be-used"></a><span data-ttu-id="d73f6-115">訂閱何時可用？訂閱資料庫何時可用？</span><span class="sxs-lookup"><span data-stu-id="d73f6-115">When is a subscription available; when can the subscription database be used?</span></span>  
 <span data-ttu-id="d73f6-116">訂閱可在快照集套用至訂閱資料庫後使用。</span><span class="sxs-lookup"><span data-stu-id="d73f6-116">A subscription is available after the snapshot has been applied to the subscription database.</span></span> <span data-ttu-id="d73f6-117">儘管在此之前可以存取訂閱資料庫，但在套用快照集之前不應使用資料庫。</span><span class="sxs-lookup"><span data-stu-id="d73f6-117">Even though the subscription database is accessible prior to this, the database should not be used until after the snapshot has been applied.</span></span> <span data-ttu-id="d73f6-118">使用「複寫監視器」檢查快照集產生狀態與應用程式：</span><span class="sxs-lookup"><span data-stu-id="d73f6-118">Use Replication Monitor to check the status of snapshot generation and application:</span></span>  
  
-   <span data-ttu-id="d73f6-119">快照集由「快照集代理程式」產生。</span><span class="sxs-lookup"><span data-stu-id="d73f6-119">The snapshot is generated by the Snapshot Agent.</span></span> <span data-ttu-id="d73f6-120">在複寫監視器中發行集的 **[代理程式]** 索引標籤上檢視快照集產生狀態。</span><span class="sxs-lookup"><span data-stu-id="d73f6-120">View the status of snapshot generation on the **Agents** tab for a publication in Replication Monitor.</span></span> <span data-ttu-id="d73f6-121">如需詳細資訊，請參閱[使用複寫監視器來檢視資訊及執行工作](../monitor/view-information-and-perform-tasks-replication-monitor.md)。</span><span class="sxs-lookup"><span data-stu-id="d73f6-121">For more information, see [View Information and Perform Tasks using Replication Monitor](../monitor/view-information-and-perform-tasks-replication-monitor.md).</span></span>  
  
-   <span data-ttu-id="d73f6-122">快照集由「散發代理程式」或「合併代理程式」套用。</span><span class="sxs-lookup"><span data-stu-id="d73f6-122">The snapshot is applied by the Distribution Agent or Merge Agent.</span></span> <span data-ttu-id="d73f6-123">在「複寫監視器」的 **[散發代理程式]** 或 **[合併代理程式]** 頁面中檢視快照集應用程式狀態。</span><span class="sxs-lookup"><span data-stu-id="d73f6-123">View the status of snapshot application in the **Distribution Agent** or **Merge Agent** page of Replication Monitor.</span></span> 
  
### <a name="what-happens-if-the-snapshot-agent-has-not-completed-when-the-distribution-or-merge-agent-starts"></a><span data-ttu-id="d73f6-124">如果當「散發代理程式」或「合併代理程式」啟動時「快照集代理程式」尚未完成，會發生什麼事情？</span><span class="sxs-lookup"><span data-stu-id="d73f6-124">What happens if the Snapshot Agent has not completed when the Distribution or Merge Agent starts?</span></span>  
 <span data-ttu-id="d73f6-125">如果「散發代理程式」或「合併代理程式」與「快照集代理程式」同時執行，將不會導致錯誤。</span><span class="sxs-lookup"><span data-stu-id="d73f6-125">It will not cause an error if the Distribution Agent or Merge Agent runs at the same time as the Snapshot Agent.</span></span> <span data-ttu-id="d73f6-126">但是，您必須注意下列情況：</span><span class="sxs-lookup"><span data-stu-id="d73f6-126">However, you must be aware of the following:</span></span>  
  
-   <span data-ttu-id="d73f6-127">如果「散發代理程式」或「合併代理程式」設定為連續執行，則代理程式會在「快照集代理程式」完成時自動套用快照集。</span><span class="sxs-lookup"><span data-stu-id="d73f6-127">If the Distribution Agent or Merge Agent is configured to run continuously, the agent applies the snapshot automatically after the Snapshot Agent completes.</span></span>  
  
-   <span data-ttu-id="d73f6-128">如果「散發代理程式」或「合併代理程式」設定為根據排程或視需要執行，並且在執行代理程式時沒有可用的快照集，則代理程式將關閉並顯示一則訊息，說明快照集尚無法使用。</span><span class="sxs-lookup"><span data-stu-id="d73f6-128">If the Distribution Agent or Merge Agent is configured to run on a schedule or on-demand, and there is no snapshot available when the agent runs, the agent will shut down with a message stating that a snapshot is not yet available.</span></span> <span data-ttu-id="d73f6-129">您必須在完成「快照集代理程式」後再次執行代理程式以套用快照集。</span><span class="sxs-lookup"><span data-stu-id="d73f6-129">You must run the agent again to apply the snapshot after the Snapshot Agent has completed.</span></span> <span data-ttu-id="d73f6-130">如需執行代理程式的詳細資訊，請參閱[同步處理發送訂閱](../synchronize-a-push-subscription.md)、[同步處理提取訂閱](../synchronize-a-pull-subscription.md)和[複寫代理程式可執行檔概念](../concepts/replication-agent-executables-concepts.md)。</span><span class="sxs-lookup"><span data-stu-id="d73f6-130">For more information on running agents, see [Synchronize a Push Subscription](../synchronize-a-push-subscription.md), [Synchronize a Pull Subscription](../synchronize-a-pull-subscription.md), and [Replication Agent Executables Concepts](../concepts/replication-agent-executables-concepts.md).</span></span>  
  
### <a name="should-i-script-my-replication-configuration"></a><span data-ttu-id="d73f6-131">我是否應為我的複寫組態編寫指令碼？</span><span class="sxs-lookup"><span data-stu-id="d73f6-131">Should I script my replication configuration?</span></span>  
 <span data-ttu-id="d73f6-132">是。</span><span class="sxs-lookup"><span data-stu-id="d73f6-132">Yes.</span></span> <span data-ttu-id="d73f6-133">編寫複寫組態的指令碼是複寫拓撲之任何損毀復原計劃的主要部分。</span><span class="sxs-lookup"><span data-stu-id="d73f6-133">Scripting the replication configuration is a key part of any disaster recovery plan for a replication topology.</span></span> <span data-ttu-id="d73f6-134">如需有關編寫指令碼的詳細資訊，請參閱＜ [Scripting Replication](../scripting-replication.md)＞。</span><span class="sxs-lookup"><span data-stu-id="d73f6-134">For more information on scripting, see [Scripting Replication](../scripting-replication.md).</span></span>  
  
### <a name="what-recovery-model-is-required-on-a-replicated-database"></a><span data-ttu-id="d73f6-135">複寫的資料庫中需要什麼復原模式？</span><span class="sxs-lookup"><span data-stu-id="d73f6-135">What recovery model is required on a replicated database?</span></span>  
 <span data-ttu-id="d73f6-136">使用下列任何一種復原模式的複寫都能正常運作：簡單、大量記錄或完整。</span><span class="sxs-lookup"><span data-stu-id="d73f6-136">Replication functions properly using any of the recovery models: simple, bulk-logged, or full.</span></span> <span data-ttu-id="d73f6-137">合併式複寫會透過將資訊儲存於中繼資料表來追蹤變更。</span><span class="sxs-lookup"><span data-stu-id="d73f6-137">Merge replication tracks change by storing information in metadata tables.</span></span> <span data-ttu-id="d73f6-138">異動複寫則透過標記交易記錄來追蹤變更，但此標記處理序不受復原模式影響。</span><span class="sxs-lookup"><span data-stu-id="d73f6-138">Transactional replication tracks changes by marking the transaction log, but this marking process is not affected by the recovery model.</span></span>  
  
### <a name="why-does-replication-add-a-column-to-replicated-tables-will-it-be-removed-if-the-table-isnt-published"></a><span data-ttu-id="d73f6-139">複寫為何將資料行新增至複寫的資料表？如果資料表未發行，它是否會被移除？</span><span class="sxs-lookup"><span data-stu-id="d73f6-139">Why does replication add a column to replicated tables; will it be removed if the table isn't published?</span></span>  
 <span data-ttu-id="d73f6-140">若要追蹤變更，合併式複寫和具有佇列更新訂閱的異動複寫必須可以唯一地識別每個已發行資料表中的每個資料列。</span><span class="sxs-lookup"><span data-stu-id="d73f6-140">To track changes, merge replication and transactional replication with queued updating subscriptions must be able to uniquely identify every row in every published table.</span></span> <span data-ttu-id="d73f6-141">若要完成這個程序：</span><span class="sxs-lookup"><span data-stu-id="d73f6-141">To accomplish this:</span></span>  
  
-   <span data-ttu-id="d73f6-142">合併式複寫會將此資料行 **rowguid** 新增至每個資料表，除非資料表已經擁有的資料行是包含 **ROWGUIDCOL** 屬性集的 **uniqueidentifier** 資料類型 (在此情況下將使用此資料行)。</span><span class="sxs-lookup"><span data-stu-id="d73f6-142">Merge replication adds the column **rowguid** to every table, unless the table already has a column of data type **uniqueidentifier** with the **ROWGUIDCOL** property set (in which case this column is used).</span></span> <span data-ttu-id="d73f6-143">若從發行集卸除資料表， **rowguid** 資料行會遭到移除；若現有資料行用來進行追蹤，則不會移除資料行。</span><span class="sxs-lookup"><span data-stu-id="d73f6-143">If the table is dropped from the publication, the **rowguid** column is removed; if an existing column was used for tracking, the column is not removed.</span></span>  
  
-   <span data-ttu-id="d73f6-144">如果交易式發行集支援佇列更新訂閱，則複寫會將 **msrepl_tran_version** 資料行加入每份資料表中。</span><span class="sxs-lookup"><span data-stu-id="d73f6-144">If a transactional publication supports queued updating subscriptions, replication adds the column **msrepl_tran_version** to every table.</span></span> <span data-ttu-id="d73f6-145">如果從發行集中卸除資料表，將不會移除 **msrepl_tran_version** 資料行。</span><span class="sxs-lookup"><span data-stu-id="d73f6-145">If the table is dropped from the publication, the **msrepl_tran_version** column is not removed.</span></span>  
  
-   <span data-ttu-id="d73f6-146">篩選不得包含複寫識別資料列所使用的 `rowguidcol`。</span><span class="sxs-lookup"><span data-stu-id="d73f6-146">A filter must not include the `rowguidcol` used by replication to identify rows.</span></span> <span data-ttu-id="d73f6-147">根據預設，這是在您設定合併式複寫時加入，且名稱為 **rowguid**的資料行。</span><span class="sxs-lookup"><span data-stu-id="d73f6-147">By default this is the column added at the time you set up merge replication and is named **rowguid**.</span></span>  
  
### <a name="how-do-i-manage-constraints-on-published-tables"></a><span data-ttu-id="d73f6-148">如何管理已發行資料表中的條件約束？</span><span class="sxs-lookup"><span data-stu-id="d73f6-148">How do I manage constraints on published tables?</span></span>  
 <span data-ttu-id="d73f6-149">針對已發行資料表中的條件約束需要考慮許多問題：</span><span class="sxs-lookup"><span data-stu-id="d73f6-149">There are a number of issues to consider regarding constraints on published tables:</span></span>  
  
-   <span data-ttu-id="d73f6-150">異動複寫要求在每個已發行資料表中具有主索引鍵條件約束。</span><span class="sxs-lookup"><span data-stu-id="d73f6-150">Transactional replication requires a primary key constraint on each published table.</span></span> <span data-ttu-id="d73f6-151">合併式複寫不需要主索引鍵，但如果存在主索引鍵，則它必須被複寫。</span><span class="sxs-lookup"><span data-stu-id="d73f6-151">Merge replication does not require a primary key, but if one is present, it must be replicated.</span></span> <span data-ttu-id="d73f6-152">快照式複寫不需要主索引鍵。</span><span class="sxs-lookup"><span data-stu-id="d73f6-152">Snapshot replication does not require a primary key.</span></span>  
  
-   <span data-ttu-id="d73f6-153">依預設，主索引鍵條件約束、索引和檢查條件約束都會複寫至「訂閱者」。</span><span class="sxs-lookup"><span data-stu-id="d73f6-153">By default, primary key constraints, indexes, and check constraints are replicated to Subscribers.</span></span>  
  
-   <span data-ttu-id="d73f6-154">依預設，NOT FOR REPLICATION 選項將指定給外部索引鍵條件約束和檢查條件約束；條件約束對使用者作業而非代理程式作業強制執行。</span><span class="sxs-lookup"><span data-stu-id="d73f6-154">The NOT FOR REPLICATION option is specified by default for foreign key constraints and check constraints; the constraints are enforced for user operations but not agent operations.</span></span>  
  
 <span data-ttu-id="d73f6-155">如需有關設定用於控制是否複寫條件約束之結構描述選項的詳細資訊，請參閱＜ [Specify Schema Options](../publish/specify-schema-options.md)＞。</span><span class="sxs-lookup"><span data-stu-id="d73f6-155">For information on setting the schema options that control whether constraints are replicated, see [Specify Schema Options](../publish/specify-schema-options.md).</span></span>  
  
### <a name="how-do-i-manage-identity-columns"></a><span data-ttu-id="d73f6-156">如何管理識別欄位？</span><span class="sxs-lookup"><span data-stu-id="d73f6-156">How do I manage identity columns?</span></span>  
 <span data-ttu-id="d73f6-157">複寫為在「訂閱者」端包含更新的複寫拓撲提供自動識別範圍管理。</span><span class="sxs-lookup"><span data-stu-id="d73f6-157">Replication provides automatic identity range management for replication topologies that include updates at the Subscriber.</span></span> <span data-ttu-id="d73f6-158">如需詳細資訊，請參閱[複寫識別資料欄](../publish/replicate-identity-columns.md)。</span><span class="sxs-lookup"><span data-stu-id="d73f6-158">For more information, see [Replicate Identity Columns](../publish/replicate-identity-columns.md).</span></span>  
  
### <a name="can-the-same-objects-be-published-in-different-publications"></a><span data-ttu-id="d73f6-159">相同的物件是否能發行在不同的發行集中？</span><span class="sxs-lookup"><span data-stu-id="d73f6-159">Can the same objects be published in different publications?</span></span>  
 <span data-ttu-id="d73f6-160">是，但有一些限制。</span><span class="sxs-lookup"><span data-stu-id="d73f6-160">Yes, but with some restrictions.</span></span> <span data-ttu-id="d73f6-161">如需詳細資訊，請參閱[發行資料和資料庫物件](../publish/publish-data-and-database-objects.md)主題中的＜在多個發行集中發行資料表＞一節。</span><span class="sxs-lookup"><span data-stu-id="d73f6-161">For more information, see the section "Publishing Tables in More Than One Publication" in the topic [Publish Data and Database Objects](../publish/publish-data-and-database-objects.md).</span></span>  
  
### <a name="can-multiple-publications-use-the-same-distribution-database"></a><span data-ttu-id="d73f6-162">多個發行集是否可以使用相同的散發資料庫？</span><span class="sxs-lookup"><span data-stu-id="d73f6-162">Can multiple publications use the same distribution database?</span></span>  
 <span data-ttu-id="d73f6-163">是。</span><span class="sxs-lookup"><span data-stu-id="d73f6-163">Yes.</span></span> <span data-ttu-id="d73f6-164">可以使用相同散發資料庫的發行集沒有數量或類型的限制。</span><span class="sxs-lookup"><span data-stu-id="d73f6-164">There are no restrictions on the number or types of publications that can use the same distribution database.</span></span> <span data-ttu-id="d73f6-165">給定「發行者」的所有發行集必須使用相同的「散發者」和散發資料庫。</span><span class="sxs-lookup"><span data-stu-id="d73f6-165">All publications from a given Publisher must use the same Distributor and distribution database.</span></span>  
  
 <span data-ttu-id="d73f6-166">如果您有多個發行集，則可在「散發者」端設定多個散發資料庫，以確定每個散發資料庫中的資料流程來自單一發行集。</span><span class="sxs-lookup"><span data-stu-id="d73f6-166">If you have multiple publications, you can configure multiple distribution databases at the Distributor to ensure that the data flowing through each distribution database is from a single publication.</span></span> <span data-ttu-id="d73f6-167">使用 [散發者屬性] 對話方塊或 [sp_adddistributiondb &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistributiondb-transact-sql) 以新增散發資料庫。</span><span class="sxs-lookup"><span data-stu-id="d73f6-167">Use the **Distributor Properties** dialog box or [sp_adddistributiondb &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistributiondb-transact-sql) to add a distribution database.</span></span> <span data-ttu-id="d73f6-168">如需存取對話方塊的詳細資訊，請參閱[檢視和修改散發者和發行者屬性](../view-and-modify-distributor-and-publisher-properties.md)。</span><span class="sxs-lookup"><span data-stu-id="d73f6-168">For more information about accessing the dialog box, see [View and Modify Distributor and Publisher Properties](../view-and-modify-distributor-and-publisher-properties.md).</span></span>  
  
### <a name="how-do-i-find-information-on-the-distributor-and-publisher-such-as-which-objects-in-a-database-are-published"></a><span data-ttu-id="d73f6-169">如何尋找「散發者」和「發行者」的資訊 (例如，資料庫中哪些物件已發行)？</span><span class="sxs-lookup"><span data-stu-id="d73f6-169">How do I find information on the Distributor and Publisher, such as which objects in a database are published?</span></span>  
 <span data-ttu-id="d73f6-170">此資訊可透過 [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)]和數個複寫預存程序獲得。</span><span class="sxs-lookup"><span data-stu-id="d73f6-170">This information is available through [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)], and a number of replication stored procedures.</span></span> <span data-ttu-id="d73f6-171">如需詳細資訊，請參閱 [Distributor and Publisher Information Script](distributor-and-publisher-information-script.md)。</span><span class="sxs-lookup"><span data-stu-id="d73f6-171">For more information, see [Distributor and Publisher Information Script](distributor-and-publisher-information-script.md).</span></span>  
  
### <a name="does-replication-encrypt-data"></a><span data-ttu-id="d73f6-172">複寫是否會加密資料？</span><span class="sxs-lookup"><span data-stu-id="d73f6-172">Does replication encrypt data?</span></span>  
 <span data-ttu-id="d73f6-173">否。</span><span class="sxs-lookup"><span data-stu-id="d73f6-173">No.</span></span> <span data-ttu-id="d73f6-174">複寫不會對儲存在資料庫或透過網路傳送的資料加密。</span><span class="sxs-lookup"><span data-stu-id="d73f6-174">Replication does not encrypt data that is stored in the database or transferred over the network.</span></span> <span data-ttu-id="d73f6-175">如需詳細資訊，請參閱[SQL Server 複寫安全性](../security/view-and-modify-replication-security-settings.md)主題的「加密」一節。</span><span class="sxs-lookup"><span data-stu-id="d73f6-175">For more information, see the "Encryption" section of the topic [SQL Server Replication Security](../security/view-and-modify-replication-security-settings.md).</span></span>  
  
### <a name="how-do-i-replicate-data-over-the-internet"></a><span data-ttu-id="d73f6-176">如何透過網際網路複寫資料？</span><span class="sxs-lookup"><span data-stu-id="d73f6-176">How do I replicate data over the Internet?</span></span>  
 <span data-ttu-id="d73f6-177">使用下列方式，透過網際網路複寫資料：</span><span class="sxs-lookup"><span data-stu-id="d73f6-177">Replicate data over the Internet using:</span></span>  
  
-   <span data-ttu-id="d73f6-178">虛擬私人網路 (VPN)。</span><span class="sxs-lookup"><span data-stu-id="d73f6-178">A Virtual Private Network (VPN).</span></span> <span data-ttu-id="d73f6-179">如需詳細資訊，請參閱[使用 VPN 透過網際網路發行資料](../publish-data-over-the-internet-using-vpn.md)。</span><span class="sxs-lookup"><span data-stu-id="d73f6-179">For more information, see [Publish Data over the Internet Using VPN](../publish-data-over-the-internet-using-vpn.md).</span></span>  
  
-   <span data-ttu-id="d73f6-180">合併式複寫的 Web 同步處理選項。</span><span class="sxs-lookup"><span data-stu-id="d73f6-180">The Web synchronization option for merge replication.</span></span> <span data-ttu-id="d73f6-181">如需詳細資訊，請參閱＜ [Web Synchronization for Merge Replication](../web-synchronization-for-merge-replication.md)＞。</span><span class="sxs-lookup"><span data-stu-id="d73f6-181">For more information, see [Web Synchronization for Merge Replication](../web-synchronization-for-merge-replication.md).</span></span>  
  
 <span data-ttu-id="d73f6-182">所有類型的 [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 複寫都可以透過 VPN 複寫資料，但是您若是使用合併式複寫，則應考慮 Web 同步處理。</span><span class="sxs-lookup"><span data-stu-id="d73f6-182">All types of [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] replication can replicate data over a VPN, but you should consider Web synchronization if you are using merge replication.</span></span>  
  
### <a name="does-replication-resume-if-a-connection-is-dropped"></a><span data-ttu-id="d73f6-183">如果連接斷開，則複寫是否會繼續？</span><span class="sxs-lookup"><span data-stu-id="d73f6-183">Does replication resume if a connection is dropped</span></span>  
 <span data-ttu-id="d73f6-184">是。</span><span class="sxs-lookup"><span data-stu-id="d73f6-184">Yes.</span></span> <span data-ttu-id="d73f6-185">如果連接斷開，複寫處理會從它停止的地方繼續。</span><span class="sxs-lookup"><span data-stu-id="d73f6-185">Replication processing resumes at the point at which it left off if a connection is dropped.</span></span> <span data-ttu-id="d73f6-186">如果您在不可靠的網路中使用合併式複寫，請考慮使用邏輯記錄，它可確保相關變更作為一個單位進行處理。</span><span class="sxs-lookup"><span data-stu-id="d73f6-186">If you are using merge replication over an unreliable network, consider using logical records, which ensures related changes are processed as a unit.</span></span> <span data-ttu-id="d73f6-187">如需詳細資訊，請參閱[使用邏輯記錄分組相關資料列的變更](../merge/group-changes-to-related-rows-with-logical-records.md)。</span><span class="sxs-lookup"><span data-stu-id="d73f6-187">For more information, see [Group Changes to Related Rows with Logical Records](../merge/group-changes-to-related-rows-with-logical-records.md).</span></span>  
  
### <a name="does-replication-work-over-low-bandwidth-connections-does-it-use-compression"></a><span data-ttu-id="d73f6-188">複寫是否透過低頻寬連接執行？</span><span class="sxs-lookup"><span data-stu-id="d73f6-188">Does replication work over low bandwidth connections?</span></span> <span data-ttu-id="d73f6-189">它是否使用壓縮？</span><span class="sxs-lookup"><span data-stu-id="d73f6-189">Does it use compression?</span></span>  
 <span data-ttu-id="d73f6-190">是，複寫透過低頻寬連接執行。</span><span class="sxs-lookup"><span data-stu-id="d73f6-190">Yes, replication does work over low bandwidth connections.</span></span> <span data-ttu-id="d73f6-191">對於透過 TCP/IP 的連接，它使用由通訊協定提供的壓縮，但不提供其他壓縮。</span><span class="sxs-lookup"><span data-stu-id="d73f6-191">For connections over TCP/IP, it uses the compression provided by the protocol but does not provide additional compression.</span></span> <span data-ttu-id="d73f6-192">對於透過 HTTPS 的 Web 同步處理連接，它使用由通訊協定提供的壓縮，同時還提供對 XML 檔案 (用於複寫變更) 的其他壓縮。</span><span class="sxs-lookup"><span data-stu-id="d73f6-192">For Web synchronization connections over HTTPS, it uses the compression provided by the protocol and also additional compression of the XML files used to replicate changes.</span></span>  
  
## <a name="logins-and-object-ownership"></a><span data-ttu-id="d73f6-193">登入和物件擁有權</span><span class="sxs-lookup"><span data-stu-id="d73f6-193">Logins and Object Ownership</span></span>  
  
### <a name="are-logins-and-passwords-replicated"></a><span data-ttu-id="d73f6-194">登入和密碼是否會被複寫？</span><span class="sxs-lookup"><span data-stu-id="d73f6-194">Are logins and passwords replicated?</span></span>  
 <span data-ttu-id="d73f6-195">否。</span><span class="sxs-lookup"><span data-stu-id="d73f6-195">No.</span></span> <span data-ttu-id="d73f6-196">您可以建立 DTS 封裝以將登入和密碼從「發行者」傳送給一個或多個「訂閱者」。</span><span class="sxs-lookup"><span data-stu-id="d73f6-196">You could create a DTS package to transfer logins and passwords from a Publisher to one or more Subscribers.</span></span>  
  
### <a name="what-are-schemas-and-how-are-they-replicated"></a><span data-ttu-id="d73f6-197">結構描述什麼是以及它們是如何進行複寫的？</span><span class="sxs-lookup"><span data-stu-id="d73f6-197">What are schemas and how are they replicated?</span></span>  
 <span data-ttu-id="d73f6-198">從 [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] 開始，「結構描述」有兩種意義：</span><span class="sxs-lookup"><span data-stu-id="d73f6-198">Beginning with [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)], *schema* has two meanings:</span></span>  
  
-   <span data-ttu-id="d73f6-199">物件的定義，例如 CREATE TABLE 陳述式。</span><span class="sxs-lookup"><span data-stu-id="d73f6-199">The definition of an object, such as a CREATE TABLE statement.</span></span> <span data-ttu-id="d73f6-200">依預設，複寫將所有複寫物件的定義複製到「訂閱者」。</span><span class="sxs-lookup"><span data-stu-id="d73f6-200">By default, replication copies the definitions of all replicated objects to the Subscriber.</span></span>  
  
-   <span data-ttu-id="d73f6-201">要在其中建立物件的命名空間： \<Database> ... \<Schema> \<Object>架構是使用 CREATE SCHEMA 語句來定義的。</span><span class="sxs-lookup"><span data-stu-id="d73f6-201">The namespace within which an object is created: \<Database>.\<Schema>.\<Object>. Schemas are defined using the CREATE SCHEMA statement.</span></span>  
  
-   <span data-ttu-id="d73f6-202">針對結構描述和物件擁有權，複寫在新增複寫精靈中具有下列預設行為：</span><span class="sxs-lookup"><span data-stu-id="d73f6-202">Replication has the following default behavior in the New Publication Wizard with respect to schemas and object ownership:</span></span>  
  
-   <span data-ttu-id="d73f6-203">針對合併式發行集內相容性層級等於或超過 90 的發行項、快照集發行集以及交易式發行集：依預設，訂閱者的物件擁有者與發行者內對應物件的擁有者相同。</span><span class="sxs-lookup"><span data-stu-id="d73f6-203">For articles in merge publications with a compatibility level of 90 or higher, snapshot publications, and transactional publications: by default, the object owner at the Subscriber is the same as the owner of the corresponding object at the Publisher.</span></span> <span data-ttu-id="d73f6-204">若擁有物件的結構描述不存在於訂閱者中，則會自動建立。</span><span class="sxs-lookup"><span data-stu-id="d73f6-204">If the schemas that own objects do not exist at the Subscriber, they are created automatically.</span></span>  
  
-   <span data-ttu-id="d73f6-205">針對相容性層級小於 90 之合併式發行集內的發行項：依預設，會將擁有者保留空白，並在訂閱者上建立物件期間，將其指定為 **dbo** 。</span><span class="sxs-lookup"><span data-stu-id="d73f6-205">For articles in merge publications with a compatibility level lower than 90: by default, the owner is left blank and is specified as **dbo** during the creation of the object on the Subscriber.</span></span>  
  
-   <span data-ttu-id="d73f6-206">針對 Oracle 發行集內的發行項：依預設，會將擁有者指定為 **dbo**。</span><span class="sxs-lookup"><span data-stu-id="d73f6-206">For articles in Oracle publications: by default, the owner is specified as **dbo**.</span></span>  
  
-   <span data-ttu-id="d73f6-207">針對使用字元模式快照集之發行集內的發行項 (用於非[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 訂閱者和 [!INCLUDE[ssEW](../../../includes/ssew-md.md)] 訂閱者)：依預設，會將擁有者保留空白。</span><span class="sxs-lookup"><span data-stu-id="d73f6-207">For articles in publications that use character mode snapshots (which are used for non-[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Subscribers and [!INCLUDE[ssEW](../../../includes/ssew-md.md)] Subscribers): by default, the owner is left blank.</span></span> <span data-ttu-id="d73f6-208">擁有者預設為與散發代理程式或合併代理程式用於連接到訂閱者之帳戶相關聯的擁有者。</span><span class="sxs-lookup"><span data-stu-id="d73f6-208">The owner defaults to the owner associated with the account used by the Distribution Agent or Merge Agent to connect to the Subscriber.</span></span>  
  
 <span data-ttu-id="d73f6-209">物件擁有者可透過 [發行項屬性 -\<***Article***>] 對話方塊變更，也可以透過下列預存程序來進行變更︰**sp_addarticle**、**sp_addmergearticle**、**sp_changearticle** 和 **sp_changemergearticle**。</span><span class="sxs-lookup"><span data-stu-id="d73f6-209">The object owner can be changed through the **Article Properties - \<***Article***>** dialog box and through the following stored procedures: **sp_addarticle**, **sp_addmergearticle**, **sp_changearticle**, and **sp_changemergearticle**.</span></span> <span data-ttu-id="d73f6-210">如需詳細資訊，請參閱[檢視和修改發行集屬性](../publish/view-and-modify-publication-properties.md)、[定義發行項](../publish/define-an-article.md)和[檢視和修改發行項屬性](../publish/view-and-modify-article-properties.md)。</span><span class="sxs-lookup"><span data-stu-id="d73f6-210">For more information, see [View and Modify Publication Properties](../publish/view-and-modify-publication-properties.md), [Define an Article](../publish/define-an-article.md), and [View and Modify Article Properties](../publish/view-and-modify-article-properties.md).</span></span>  
  
### <a name="how-can-grants-on-the-subscription-database-be-configured-to-match-grants-on-the-publication-database"></a><span data-ttu-id="d73f6-211">如何將訂閱資料庫中的授權設定為與發行集資料庫中的授權相符？</span><span class="sxs-lookup"><span data-stu-id="d73f6-211">How can grants on the subscription database be configured to match grants on the publication database?</span></span>  
 <span data-ttu-id="d73f6-212">依預設，複寫不執行訂閱資料庫中的 GRANT 陳述式。</span><span class="sxs-lookup"><span data-stu-id="d73f6-212">By default, replication does not execute GRANT statements on the subscription database.</span></span> <span data-ttu-id="d73f6-213">如果您要使訂閱資料庫中的授權與發行集資料庫中的授權相符，請使用以下其中一種方法：</span><span class="sxs-lookup"><span data-stu-id="d73f6-213">If you want the permissions on the subscription database to match those on the publication database, use one of the following methods:</span></span>  
  
-   <span data-ttu-id="d73f6-214">直接在訂閱資料庫執行 GRANT 陳述式。</span><span class="sxs-lookup"><span data-stu-id="d73f6-214">Execute GRANT statements at the subscription database directly.</span></span>  
  
-   <span data-ttu-id="d73f6-215">使用後快照集指令碼執行陳述式。</span><span class="sxs-lookup"><span data-stu-id="d73f6-215">Use a post-snapshot script to execute the statements.</span></span> <span data-ttu-id="d73f6-216">如需詳細資訊，請參閱[在套用快照集之前及之後執行指令碼](../snapshot-options.md#execute-scripts-before-and-after-snapshot-is-applied)。</span><span class="sxs-lookup"><span data-stu-id="d73f6-216">For more information, see [Execute Scripts Before and After the Snapshot Is Applied](../snapshot-options.md#execute-scripts-before-and-after-snapshot-is-applied).</span></span>  
  
-   <span data-ttu-id="d73f6-217">使用預存程序 [sp_addscriptexec](/sql/relational-databases/system-stored-procedures/sp-addscriptexec-transact-sql) 執行陳述式。</span><span class="sxs-lookup"><span data-stu-id="d73f6-217">Use the stored procedure [sp_addscriptexec](/sql/relational-databases/system-stored-procedures/sp-addscriptexec-transact-sql) to execute the statements.</span></span>  
  
### <a name="what-happens-to-permissions-granted-in-a-subscription-database-if-a-subscription-is-reinitialized"></a><span data-ttu-id="d73f6-218">如果重新初始化訂閱，在訂閱資料庫中的授與權限會發生什麼情況？</span><span class="sxs-lookup"><span data-stu-id="d73f6-218">What happens to permissions granted in a subscription database if a subscription is reinitialized?</span></span>  
 <span data-ttu-id="d73f6-219">依預設，當重新初始化訂閱時，「訂閱者」端的物件將卸除並重新建立，這會導致授與這些物件的所有權限被卸除。</span><span class="sxs-lookup"><span data-stu-id="d73f6-219">By default, objects at the Subscriber are dropped and recreated when a subscription is reinitialized, which causes all granted permissions for those objects to be dropped.</span></span> <span data-ttu-id="d73f6-220">有兩種方式可以處理此問題：</span><span class="sxs-lookup"><span data-stu-id="d73f6-220">There are two ways to handle this:</span></span>  
  
-   <span data-ttu-id="d73f6-221">在重新初始化之後，使用上一節中所述的技術重新套用授權。</span><span class="sxs-lookup"><span data-stu-id="d73f6-221">Reapply the grants after the reinitialization using the techniques described in the previous section.</span></span>  
  
-   <span data-ttu-id="d73f6-222">指定在重新初始化訂閱時不應卸除物件。</span><span class="sxs-lookup"><span data-stu-id="d73f6-222">Specify that objects should not be dropped when the subscription is reinitialized.</span></span> <span data-ttu-id="d73f6-223">在重新初始化之前，執行下列其中一項：</span><span class="sxs-lookup"><span data-stu-id="d73f6-223">Prior to reinitialization, either:</span></span>  
  
    -   <span data-ttu-id="d73f6-224">執行 [sp_changearticle](/sql/relational-databases/system-stored-procedures/sp-changearticle-transact-sql) 或 [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql)。</span><span class="sxs-lookup"><span data-stu-id="d73f6-224">Execute [sp_changearticle](/sql/relational-databases/system-stored-procedures/sp-changearticle-transact-sql) or [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql).</span></span> <span data-ttu-id="d73f6-225">請為參數指定 ' pre_creation_cmd ' (**sp_changearticle**) 或 ' pre_creation_command \*\*' (sp_changemergearticle) \*\* **@property** ，並為參數指定 ' none '、' delete ' 或 ' 截斷 ' 的值 **@value** 。</span><span class="sxs-lookup"><span data-stu-id="d73f6-225">Specify a value of 'pre_creation_cmd' (**sp_changearticle**) or 'pre_creation_command' (**sp_changemergearticle**) for the parameter **@property** and a value of 'none', 'delete' or 'truncate' for the parameter **@value**.</span></span>  
  
    -   <span data-ttu-id="d73f6-226">在 發行項屬性 - \<Article> 對話方塊的 目的地物件 區段中，選取 不要變更現有物件 的值，刪除 **資料。** 如果發行項有資料列篩選，僅刪除符合篩選的資料。</span><span class="sxs-lookup"><span data-stu-id="d73f6-226">In the **Article Properties - \<Article>** dialog box in the **Destination Object** section, select a value of **Keep existing object unchanged**, **Delete data. If article has a row filter, delete only data that matches the filter.**</span></span> <span data-ttu-id="d73f6-227">或 [截斷現有物件中的所有資料] 作為 [如果名稱使用中，則採取動作] 選項的值。</span><span class="sxs-lookup"><span data-stu-id="d73f6-227">or **Truncate all data in the existing object** for the option **Action if name is in use**.</span></span> <span data-ttu-id="d73f6-228">如需存取這個對話方塊的詳細資訊，請參閱[檢視和修改發行集屬性](../publish/view-and-modify-publication-properties.md)。</span><span class="sxs-lookup"><span data-stu-id="d73f6-228">For more information on accessing this dialog box, see [View and Modify Publication Properties](../publish/view-and-modify-publication-properties.md).</span></span>  
  
## <a name="database-maintenance"></a><span data-ttu-id="d73f6-229">資料庫維護</span><span class="sxs-lookup"><span data-stu-id="d73f6-229">Database Maintenance</span></span>  
  
### <a name="why-cant-i-run-truncate-table-on-a-published-table"></a><span data-ttu-id="d73f6-230">為何我無法在已發行的資料表中執行 TRUNCATE TABLE？</span><span class="sxs-lookup"><span data-stu-id="d73f6-230">Why can't I run TRUNCATE TABLE on a published table?</span></span>  
 <span data-ttu-id="d73f6-231">TRUNCATE TABLE 是不會引發觸發程序的非記錄式作業。</span><span class="sxs-lookup"><span data-stu-id="d73f6-231">TRUNCATE TABLE is a non-logged operation that does not fire triggers.</span></span> <span data-ttu-id="d73f6-232">因為複寫無法追蹤由此作業導致的變更，所以不允許執行此作業：異動複寫透過交易記錄追蹤變更；合併式複寫透過已發行資料表上的觸發程序追蹤變更。</span><span class="sxs-lookup"><span data-stu-id="d73f6-232">It is not permitted because replication cannot track the changes caused by the operation: transactional replication tracks changes through the transaction log; merge replication tracks changes through triggers on published tables.</span></span>  
  
### <a name="what-is-the-effect-of-running-a-bulk-insert-command-on-a-replicated-database"></a><span data-ttu-id="d73f6-233">在已複寫資料庫中執行大量插入命令有什麼效果？</span><span class="sxs-lookup"><span data-stu-id="d73f6-233">What is the effect of running a bulk insert command on a replicated database?</span></span>  
 <span data-ttu-id="d73f6-234">對於異動複寫，大量插入將被追蹤並同其他插入一樣進行複寫。</span><span class="sxs-lookup"><span data-stu-id="d73f6-234">For transactional replication, bulk inserts are tracked and replicated like other inserts.</span></span> <span data-ttu-id="d73f6-235">對於合併式複寫，您必須確定正確更新變更追蹤中繼資料。</span><span class="sxs-lookup"><span data-stu-id="d73f6-235">For merge replication, you must ensure that change tracking metadata is updated properly.</span></span>  
  
### <a name="are-there-any-replication-considerations-for-backup-and-restore"></a><span data-ttu-id="d73f6-236">是否有任何備份和還原的複寫考量？</span><span class="sxs-lookup"><span data-stu-id="d73f6-236">Are there any replication considerations for backup and restore?</span></span>  
 <span data-ttu-id="d73f6-237">是。</span><span class="sxs-lookup"><span data-stu-id="d73f6-237">Yes.</span></span> <span data-ttu-id="d73f6-238">對於涉及複寫的資料庫有許多特殊的考量。</span><span class="sxs-lookup"><span data-stu-id="d73f6-238">There are a number of special considerations for databases that are involved in replication.</span></span> <span data-ttu-id="d73f6-239">如需詳細資訊，請參閱 [備份及還原複寫的資料庫](back-up-and-restore-replicated-databases.md)。</span><span class="sxs-lookup"><span data-stu-id="d73f6-239">For more information, see [Back Up and Restore Replicated Databases](back-up-and-restore-replicated-databases.md).</span></span>  
  
### <a name="does-replication-affect-the-size-of-the-transaction-log"></a><span data-ttu-id="d73f6-240">複寫是否會影響交易記錄的大小？</span><span class="sxs-lookup"><span data-stu-id="d73f6-240">Does replication affect the size of the transaction log?</span></span>  
 <span data-ttu-id="d73f6-241">合併式複寫和快照式複寫不會影響交易記錄大小，但異動複寫會影響。</span><span class="sxs-lookup"><span data-stu-id="d73f6-241">Merge replication and snapshot replication do not affect transaction log size, but transactional replication can.</span></span> <span data-ttu-id="d73f6-242">如果資料庫包含一個或多個交易式發行集，則除非已將所有與發行集相關的交易傳遞至散發資料庫，否則不會截斷記錄檔。</span><span class="sxs-lookup"><span data-stu-id="d73f6-242">If a database includes one or more transactional publications, the log is not truncated until all transactions relevant to the publications have been delivered to the distribution database.</span></span> <span data-ttu-id="d73f6-243">如果交易記錄變得很大，而且「記錄讀取器代理程式」依排程執行，請考慮縮短兩次執行間的間隔或設定其以連續模式執行。</span><span class="sxs-lookup"><span data-stu-id="d73f6-243">If the transaction log is growing too large, and the Log Reader Agent is running on a scheduled basis, consider shortening the interval between runs.</span></span> <span data-ttu-id="d73f6-244">或者將它設定為以連續模式執行。</span><span class="sxs-lookup"><span data-stu-id="d73f6-244">Or, set it to run in continuous mode.</span></span> <span data-ttu-id="d73f6-245">如果已將其設定為在連續模式下執行 (預設值)，則請確定它正在執行。</span><span class="sxs-lookup"><span data-stu-id="d73f6-245">If it is set to run in continuous mode (the default), ensure that it is running.</span></span> <span data-ttu-id="d73f6-246">如需有關檢查記錄讀取器代理程式狀態的詳細資訊，請參閱[使用複寫監視器來查看資訊及執行](../monitor/view-information-and-perform-tasks-replication-monitor.md)工作。</span><span class="sxs-lookup"><span data-stu-id="d73f6-246">For more information on checking Log Reader Agent status, see [View Information and Perform Tasks using Replication Monitor](../monitor/view-information-and-perform-tasks-replication-monitor.md).</span></span>  
  
 <span data-ttu-id="d73f6-247">此外，如果您已在發行集資料庫或散發資料庫中設定選項 'sync with backup'，則除非已備份所有交易，否則交易記錄不會被截斷。</span><span class="sxs-lookup"><span data-stu-id="d73f6-247">Additionally, if you have set the option 'sync with backup' on the publication database or distribution database, the transaction log is not truncated until all transactions have been backed up.</span></span> <span data-ttu-id="d73f6-248">如果交易記錄變得很大，並且您已設定此選項，則請考慮縮短兩次交易記錄備份之間的間隔。</span><span class="sxs-lookup"><span data-stu-id="d73f6-248">If the transaction log is growing too large, and you have this option set, consider shortening the interval between transaction log backups.</span></span> <span data-ttu-id="d73f6-249">如需涉及異動複寫之備份和還原資料庫的詳細資訊，請參閱[備份與還原快照集和異動複寫的策略](strategies-for-backing-up-and-restoring-snapshot-and-transactional-replication.md)。</span><span class="sxs-lookup"><span data-stu-id="d73f6-249">For more information on backing up and restoring databases involved in transactional replication, see [Strategies for Backing Up and Restoring Snapshot and Transactional Replication](strategies-for-backing-up-and-restoring-snapshot-and-transactional-replication.md).</span></span>  
  
### <a name="how-do-i-rebuild-indexes-or-tables-in-replicated-databases"></a><span data-ttu-id="d73f6-250">如何在複寫的資料庫中重建索引或資料表？</span><span class="sxs-lookup"><span data-stu-id="d73f6-250">How do I rebuild indexes or tables in replicated databases?</span></span>  
 <span data-ttu-id="d73f6-251">有各種重建索引的機制。</span><span class="sxs-lookup"><span data-stu-id="d73f6-251">There are a variety of mechanisms for rebuilding indexes.</span></span> <span data-ttu-id="d73f6-252">這些機制在使用時沒有針對複寫的特殊考量，下列情況例外：交易式發行集中的資料表上需要主索引鍵，因此您無法在這些資料表中卸除和重新建立主索引鍵。</span><span class="sxs-lookup"><span data-stu-id="d73f6-252">They can all be used with no special considerations for replication, with the following exception: primary keys are required on tables in transactional publications, so you cannot drop and recreate primary keys on these tables.</span></span>  
  
### <a name="how-do-i-add-or-change-indexes-on-publication-and-subscription-databases"></a><span data-ttu-id="d73f6-253">如何在發行集和訂閱資料庫上新增或變更索引？</span><span class="sxs-lookup"><span data-stu-id="d73f6-253">How do I add or change indexes on publication and subscription databases?</span></span>  
 <span data-ttu-id="d73f6-254">可以在「發行者」或「訂閱者」端新增索引，而沒有針對複寫的特殊考量 (請注意，索引會影響效能)。</span><span class="sxs-lookup"><span data-stu-id="d73f6-254">Indexes can be added at the Publisher or Subscribers with no special considerations for replication (be aware that indexes can affect performance).</span></span> <span data-ttu-id="d73f6-255">CREATE INDEX 和 ALTER INDEX 不會複寫，因此如果您新增或變更索引 (例如在「發行者」端)，則必須在「訂閱者」端進行同樣的新增或變更 (如果您要在那裡反映出來)。</span><span class="sxs-lookup"><span data-stu-id="d73f6-255">CREATE INDEX and ALTER INDEX are not replicated, so if you add or change an index at, for example, the Publisher, you must make the same addition or change at the Subscriber if you want it reflected there.</span></span>  
  
### <a name="how-do-i-move-or-rename-files-for-databases-involved-in-replication"></a><span data-ttu-id="d73f6-256">如何移動或重新命名涉及複寫的資料庫？</span><span class="sxs-lookup"><span data-stu-id="d73f6-256">How do I move or rename files for databases involved in replication?</span></span>  
 <span data-ttu-id="d73f6-257">在 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 之前的 [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)]版本中，移動或重新命名資料庫檔案需要卸離及重新附加資料庫。</span><span class="sxs-lookup"><span data-stu-id="d73f6-257">In versions of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] prior to [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)], moving or renaming database files required detaching and reattaching the database.</span></span> <span data-ttu-id="d73f6-258">因為複寫的資料庫無法卸離，所以必須先從這些資料庫中移除複寫。</span><span class="sxs-lookup"><span data-stu-id="d73f6-258">Because a replicated database cannot be detached, replication had to be removed from these databases first.</span></span> <span data-ttu-id="d73f6-259">從 [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)]開始，您可以在不卸離或重新附加資料庫的情況下移動或重新命名檔案，而不會影響複寫。</span><span class="sxs-lookup"><span data-stu-id="d73f6-259">Beginning with [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)], you can move or rename files without detaching and re-attaching the database, with no effect on replication.</span></span> <span data-ttu-id="d73f6-260">如需移動和重新命名檔案的詳細資訊，請參閱 [ALTER DATABASE &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql)。</span><span class="sxs-lookup"><span data-stu-id="d73f6-260">For more information about moving and renaming files, see [ALTER DATABASE &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql).</span></span>  
  
### <a name="how-do-i-drop-a-table-that-is-being-replicated"></a><span data-ttu-id="d73f6-261">如何卸除正在複寫的資料表？</span><span class="sxs-lookup"><span data-stu-id="d73f6-261">How do I drop a table that is being replicated?</span></span>  
 <span data-ttu-id="d73f6-262">首先使用 [sp_droparticle](/sql/relational-databases/system-stored-procedures/sp-droparticle-transact-sql)、[sp_dropmergearticle](/sql/relational-databases/system-stored-procedures/sp-dropmergearticle-transact-sql) 或 [發行集屬性 - \<Publication>] 對話方塊從發行集中卸除發行項，然後使用 `DROP <Object>` 將其從資料庫中卸除。</span><span class="sxs-lookup"><span data-stu-id="d73f6-262">First drop the article from the publication using [sp_droparticle](/sql/relational-databases/system-stored-procedures/sp-droparticle-transact-sql), [sp_dropmergearticle](/sql/relational-databases/system-stored-procedures/sp-dropmergearticle-transact-sql), or the **Publication Properties - \<Publication>** dialog box, and then drop it from the database using `DROP <Object>`.</span></span> <span data-ttu-id="d73f6-263">訂閱已加入之後，不可從快照集或交易式發行集卸除發行項，必須先卸除訂閱。</span><span class="sxs-lookup"><span data-stu-id="d73f6-263">You cannot drop articles from snapshot or transactional publications after subscriptions have been added; you must drop the subscriptions first.</span></span> <span data-ttu-id="d73f6-264">如需詳細資訊，請參閱[在現有發行集中新增和卸除發行項](../publish/add-articles-to-and-drop-articles-from-existing-publications.md)。</span><span class="sxs-lookup"><span data-stu-id="d73f6-264">For more information, see [Add Articles to and Drop Articles from Existing Publications](../publish/add-articles-to-and-drop-articles-from-existing-publications.md).</span></span>  
  
### <a name="how-do-i-add-or-drop-columns-on-a-published-table"></a><span data-ttu-id="d73f6-265">如何在已發行的資料表中新增或卸除資料行？</span><span class="sxs-lookup"><span data-stu-id="d73f6-265">How do I add or drop columns on a published table?</span></span>  
 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="d73f6-266">支援在已發行物件上進行各種結構描述變更，包括新增和卸除資料行。</span><span class="sxs-lookup"><span data-stu-id="d73f6-266">supports a wide variety of schema changes on published objects, including adding and dropping columns.</span></span> <span data-ttu-id="d73f6-267">例如，執行 ALTER TABLE .。。在發行者端放置資料行，並將語句複寫至訂閱者，然後執行以卸載資料行。</span><span class="sxs-lookup"><span data-stu-id="d73f6-267">For example, execute ALTER TABLE ... DROP COLUMN at the Publisher, and the statement is replicated to Subscribers and then executed to drop the column.</span></span> <span data-ttu-id="d73f6-268">執行 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 之前的 [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] 版本的「訂閱者」支援透過預存程序 [sp_repladdcolumn](/sql/relational-databases/system-stored-procedures/sp-repladdcolumn-transact-sql) 和 [sp_repldropcolumn](/sql/relational-databases/system-stored-procedures/sp-repldropcolumn-transact-sql)新增和卸除資料行。</span><span class="sxs-lookup"><span data-stu-id="d73f6-268">Subscribers running versions of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] prior to [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] support adding and dropping columns through the stored procedures [sp_repladdcolumn](/sql/relational-databases/system-stored-procedures/sp-repladdcolumn-transact-sql) and [sp_repldropcolumn](/sql/relational-databases/system-stored-procedures/sp-repldropcolumn-transact-sql).</span></span> <span data-ttu-id="d73f6-269">如需詳細資訊，請參閱[對發行集資料庫進行結構描述變更](../publish/make-schema-changes-on-publication-databases.md)。</span><span class="sxs-lookup"><span data-stu-id="d73f6-269">For more information, see [Make Schema Changes on Publication Databases](../publish/make-schema-changes-on-publication-databases.md).</span></span>  
  
## <a name="replication-maintenance"></a><span data-ttu-id="d73f6-270">複寫維護</span><span class="sxs-lookup"><span data-stu-id="d73f6-270">Replication Maintenance</span></span>  
  
### <a name="how-do-i-determine-if-the-data-at-subscribers-is-synchronized-with-data-at-the-publisher"></a><span data-ttu-id="d73f6-271">如何確定「訂閱者」端的資料是否與「發行者」端的資料同步？</span><span class="sxs-lookup"><span data-stu-id="d73f6-271">How do I determine if the data at Subscribers is synchronized with data at the Publisher?</span></span>  
 <span data-ttu-id="d73f6-272">使用驗證。</span><span class="sxs-lookup"><span data-stu-id="d73f6-272">Use validation.</span></span> <span data-ttu-id="d73f6-273">驗證將報告給定「訂閱者」是否與「發行者」同步。</span><span class="sxs-lookup"><span data-stu-id="d73f6-273">Validation reports on whether a given Subscriber is synchronized with the Publisher.</span></span> <span data-ttu-id="d73f6-274">如需詳細資訊，請參閱[驗證複寫的資料](../validate-data-at-the-subscriber.md)。</span><span class="sxs-lookup"><span data-stu-id="d73f6-274">For more information, see [Validate Replicated Data](../validate-data-at-the-subscriber.md).</span></span> <span data-ttu-id="d73f6-275">驗證不會提供未正確同步之資料列 (若有的話) 的資訊，但 [tablediff 公用程式](../../../tools/tablediff-utility.md) 可以提供。</span><span class="sxs-lookup"><span data-stu-id="d73f6-275">Validation does not provide information on which rows if any are not synchronized correctly, but the [tablediff utility](../../../tools/tablediff-utility.md) does.</span></span>  
  
### <a name="how-do-i-add-a-table-to-an-existing-publication"></a><span data-ttu-id="d73f6-276">如何將資料表新增至現有的發行集？</span><span class="sxs-lookup"><span data-stu-id="d73f6-276">How do I add a table to an existing publication?</span></span>  
 <span data-ttu-id="d73f6-277">新增資料表 (或其他物件) 時不必停止發行集或訂閱資料庫中的活動。</span><span class="sxs-lookup"><span data-stu-id="d73f6-277">It is not necessary to stop activity on the publication or subscription databases in order to add a table (or another object).</span></span> <span data-ttu-id="d73f6-278">透過 [發行集屬性 - \<Publication>] 對話方塊或預存程序 [sp_addarticle](/sql/relational-databases/system-stored-procedures/sp-addarticle-transact-sql) 和 [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql)，將資料表新增至發行集。</span><span class="sxs-lookup"><span data-stu-id="d73f6-278">Add a table to a publication through the **Publication Properties - \<Publication>** dialog box or the stored procedures [sp_addarticle](/sql/relational-databases/system-stored-procedures/sp-addarticle-transact-sql) and [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql).</span></span> <span data-ttu-id="d73f6-279">如需詳細資訊，請參閱[在現有發行集中新增和卸除發行項](../publish/add-articles-to-and-drop-articles-from-existing-publications.md)。</span><span class="sxs-lookup"><span data-stu-id="d73f6-279">For more information, see [Add Articles to and Drop Articles from Existing Publications](../publish/add-articles-to-and-drop-articles-from-existing-publications.md).</span></span>  
  
### <a name="how-do-i-remove-a-table-from-a-publication"></a><span data-ttu-id="d73f6-280">如何從發行集中移除資料表？</span><span class="sxs-lookup"><span data-stu-id="d73f6-280">How do I remove a table from a publication?</span></span>  
 <span data-ttu-id="d73f6-281">使用 [sp_droparticle](/sql/relational-databases/system-stored-procedures/sp-droparticle-transact-sql)、[sp_dropmergearticle](/sql/relational-databases/system-stored-procedures/sp-dropmergearticle-transact-sql) 或 [發行集屬性 - \<Publication>] 對話方塊從發行集中移除資料表。</span><span class="sxs-lookup"><span data-stu-id="d73f6-281">Remove a table from the publication using [sp_droparticle](/sql/relational-databases/system-stored-procedures/sp-droparticle-transact-sql), [sp_dropmergearticle](/sql/relational-databases/system-stored-procedures/sp-dropmergearticle-transact-sql), or the **Publication Properties - \<Publication>** dialog box.</span></span> <span data-ttu-id="d73f6-282">訂閱已加入之後，不可從快照集或交易式發行集卸除發行項，必須先卸除訂閱。</span><span class="sxs-lookup"><span data-stu-id="d73f6-282">You cannot drop articles from snapshot or transactional publications after subscriptions have been added; you must drop the subscriptions first.</span></span> <span data-ttu-id="d73f6-283">如需詳細資訊，請參閱[在現有發行集中新增和卸除發行項](../publish/add-articles-to-and-drop-articles-from-existing-publications.md)。</span><span class="sxs-lookup"><span data-stu-id="d73f6-283">For more information, see [Add Articles to and Drop Articles from Existing Publications](../publish/add-articles-to-and-drop-articles-from-existing-publications.md).</span></span>  
  
### <a name="what-actions-require-subscriptions-to-be-reinitialized"></a><span data-ttu-id="d73f6-284">哪些動作需要重新初始化訂閱？</span><span class="sxs-lookup"><span data-stu-id="d73f6-284">What actions require subscriptions to be reinitialized?</span></span>  
 <span data-ttu-id="d73f6-285">有許多發行項和發行集變更需要重新初始化訂閱。</span><span class="sxs-lookup"><span data-stu-id="d73f6-285">There are a number of article and publication changes that require subscriptions to be reinitialized.</span></span> <span data-ttu-id="d73f6-286">如需詳細資訊，請參閱[變更發行集與發行項屬性](../publish/change-publication-and-article-properties.md)。</span><span class="sxs-lookup"><span data-stu-id="d73f6-286">For more information, see [Change Publication and Article Properties](../publish/change-publication-and-article-properties.md).</span></span>  
  
### <a name="what-actions-cause-snapshots-to-be-invalidated"></a><span data-ttu-id="d73f6-287">哪些動作會導致快照集失效？</span><span class="sxs-lookup"><span data-stu-id="d73f6-287">What actions cause snapshots to be invalidated?</span></span>  
 <span data-ttu-id="d73f6-288">有許多發行項和發行集變更會導致快照集失效，並需要產生新的快照集。</span><span class="sxs-lookup"><span data-stu-id="d73f6-288">There are a number of article and publication changes that invalidate snapshots and require a new snapshot to be generated.</span></span> <span data-ttu-id="d73f6-289">如需詳細資訊，請參閱[變更發行集與發行項屬性](../publish/change-publication-and-article-properties.md)。</span><span class="sxs-lookup"><span data-stu-id="d73f6-289">For more information, see [Change Publication and Article Properties](../publish/change-publication-and-article-properties.md).</span></span>  
  
### <a name="how-do-i-remove-replication"></a><span data-ttu-id="d73f6-290">如何移除複寫？</span><span class="sxs-lookup"><span data-stu-id="d73f6-290">How do I remove replication?</span></span>  
 <span data-ttu-id="d73f6-291">從資料庫中移除複寫所需採取的動作視資料庫是否用作發行集資料庫、訂閱資料庫或兩者而定。</span><span class="sxs-lookup"><span data-stu-id="d73f6-291">The actions required to remove replication from a database depend on whether the database served as a publication database, subscription database, or both.</span></span>  
  
### <a name="how-do-i-determine-whether-there-are-transactions-or-rows-to-be-replicated"></a><span data-ttu-id="d73f6-292">如何確定是否有要複寫的交易或資料列？</span><span class="sxs-lookup"><span data-stu-id="d73f6-292">How do I determine whether there are transactions or rows to be replicated?</span></span>  
 <span data-ttu-id="d73f6-293">對於異動複寫，請使用預存程序或「複寫監視器」中的 **[未散發的命令]** 索引標籤。</span><span class="sxs-lookup"><span data-stu-id="d73f6-293">For transactional replication, use stored procedures or the **Undistributed Commands** tab in Replication Monitor.</span></span> <span data-ttu-id="d73f6-294">如需詳細資訊，請參閱[在散發資料庫中查看已複寫的命令和其他資訊 &#40;複寫 transact-sql 程式設計&#41;](../monitor/view-replicated-commands-and-information-in-distribution-database.md)和[使用複寫監視器來查看資訊及執行](../monitor/view-information-and-perform-tasks-replication-monitor.md)工作。</span><span class="sxs-lookup"><span data-stu-id="d73f6-294">For more information, see [View Replicated Commands and Other Information in the Distribution Database &#40;Replication Transact-SQL Programming&#41;](../monitor/view-replicated-commands-and-information-in-distribution-database.md) and [View Information and Perform Tasks using Replication Monitor](../monitor/view-information-and-perform-tasks-replication-monitor.md).</span></span>  
  
 <span data-ttu-id="d73f6-295">對於合併式複寫，請使用預存程序 **sp_showpendingchanges**。</span><span class="sxs-lookup"><span data-stu-id="d73f6-295">For merge replication, use the stored procedure **sp_showpendingchanges**.</span></span> <span data-ttu-id="d73f6-296">如需詳細資訊，請參閱 [sp_showpendingchanges &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-showpendingchanges-transact-sql)。</span><span class="sxs-lookup"><span data-stu-id="d73f6-296">For more information, see [sp_showpendingchanges &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-showpendingchanges-transact-sql).</span></span>  
  
### <a name="how-far-behind-is-the-distribution-agent-should-i-reinitialize"></a><span data-ttu-id="d73f6-297">「散發代理程式」落後多少？</span><span class="sxs-lookup"><span data-stu-id="d73f6-297">How far behind is the Distribution Agent?</span></span> <span data-ttu-id="d73f6-298">是否應重新初始化？</span><span class="sxs-lookup"><span data-stu-id="d73f6-298">Should I reinitialize?</span></span>  
 <span data-ttu-id="d73f6-299">使用 **sp_replmonitorsubscriptionpendingcmds** 預存程序或「複寫監視器」中的 **[未散發命令]** 索引標籤。</span><span class="sxs-lookup"><span data-stu-id="d73f6-299">Use the **sp_replmonitorsubscriptionpendingcmds** stored procedure or the **Undistributed Commands** tab in Replication Monitor.</span></span> <span data-ttu-id="d73f6-300">預存程序與索引標籤顯示：</span><span class="sxs-lookup"><span data-stu-id="d73f6-300">The stored procedure and tab display:</span></span>  
  
-   <span data-ttu-id="d73f6-301">散發資料庫中尚未傳遞給選取之訂閱者的命令數目。</span><span class="sxs-lookup"><span data-stu-id="d73f6-301">The number of commands in the distribution database that have not been delivered to the selected Subscriber.</span></span> <span data-ttu-id="d73f6-302">由一個 Transact-SQL 資料操作語言 (DML) 陳述式或一個資料定義語言 (DDL) 陳述式組成的命令。</span><span class="sxs-lookup"><span data-stu-id="d73f6-302">A command consists of one Transact-SQL data manipulation language (DML) statement or one data definition language (DDL) statement.</span></span>  
  
-   <span data-ttu-id="d73f6-303">估計將命令傳遞給訂閱者所需的時間量。</span><span class="sxs-lookup"><span data-stu-id="d73f6-303">The estimated amount of time to deliver commands to the Subscriber.</span></span> <span data-ttu-id="d73f6-304">如果此值大於產生快照集並將其套用至訂閱者所需的時間量，則請考慮重新初始化訂閱者。</span><span class="sxs-lookup"><span data-stu-id="d73f6-304">If this value is greater than the amount of time required to generate and apply a snapshot to the Subscriber, consider reinitializing the Subscriber.</span></span> <span data-ttu-id="d73f6-305">如需詳細資訊，請參閱 [重新初始化訂閱](../reinitialize-subscriptions.md)。</span><span class="sxs-lookup"><span data-stu-id="d73f6-305">For more information, see [Reinitialize Subscriptions](../reinitialize-subscriptions.md).</span></span>  
  
 <span data-ttu-id="d73f6-306">如需詳細資訊，請參閱[sp_replmonitorsubscriptionpendingcmds &#40;transact-sql&#41;](/sql/relational-databases/system-stored-procedures/sp-replmonitorsubscriptionpendingcmds-transact-sql)和[使用複寫監視器來查看資訊及執行](../monitor/view-information-and-perform-tasks-replication-monitor.md)工作。</span><span class="sxs-lookup"><span data-stu-id="d73f6-306">For more information, see [sp_replmonitorsubscriptionpendingcmds &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-replmonitorsubscriptionpendingcmds-transact-sql) and [View Information and Perform Tasks using Replication Monitor](../monitor/view-information-and-perform-tasks-replication-monitor.md).</span></span>  
  
## <a name="replication-and-other-database-features"></a><span data-ttu-id="d73f6-307">複寫與其他資料庫功能</span><span class="sxs-lookup"><span data-stu-id="d73f6-307">Replication and Other Database Features</span></span>  
  
### <a name="does-replication-work-in-conjunction-with-log-shipping-and-database-mirroring"></a><span data-ttu-id="d73f6-308">複寫是否與記錄傳送和資料庫鏡像一起使用？</span><span class="sxs-lookup"><span data-stu-id="d73f6-308">Does replication work in conjunction with log shipping and database mirroring?</span></span>  
 <span data-ttu-id="d73f6-309">是。</span><span class="sxs-lookup"><span data-stu-id="d73f6-309">Yes.</span></span> <span data-ttu-id="d73f6-310">如需詳細資訊，請參閱[記錄傳送和複寫 &#40;SQL Server&#41;](../../../database-engine/log-shipping/log-shipping-and-replication-sql-server.md) 和[資料庫鏡像和複寫 &#40;SQL Server&#41;](../../../database-engine/database-mirroring/database-mirroring-and-replication-sql-server.md)。</span><span class="sxs-lookup"><span data-stu-id="d73f6-310">For more information, see [Log Shipping and Replication &#40;SQL Server&#41;](../../../database-engine/log-shipping/log-shipping-and-replication-sql-server.md) and [Database Mirroring and Replication &#40;SQL Server&#41;](../../../database-engine/database-mirroring/database-mirroring-and-replication-sql-server.md).</span></span>  
  
### <a name="does-replication-work-in-conjunction-with-clustering"></a><span data-ttu-id="d73f6-311">複寫是否與群集一起使用？</span><span class="sxs-lookup"><span data-stu-id="d73f6-311">Does replication work in conjunction with clustering?</span></span>  
 <span data-ttu-id="d73f6-312">是。</span><span class="sxs-lookup"><span data-stu-id="d73f6-312">Yes.</span></span> <span data-ttu-id="d73f6-313">無需特殊考量，因為所有資料儲存在群集的一組磁碟中。</span><span class="sxs-lookup"><span data-stu-id="d73f6-313">No special considerations are required because all data is stored on one set of disks on the cluster.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d73f6-314">另請參閱</span><span class="sxs-lookup"><span data-stu-id="d73f6-314">See Also</span></span>  
 <span data-ttu-id="d73f6-315">[複寫管理常見問題集](frequently-asked-questions-for-replication-administrators.md) </span><span class="sxs-lookup"><span data-stu-id="d73f6-315">[Replication Administration FAQ](frequently-asked-questions-for-replication-administrators.md) </span></span>  
 [<span data-ttu-id="d73f6-316">Best Practices for Replication Administration</span><span class="sxs-lookup"><span data-stu-id="d73f6-316">Best Practices for Replication Administration</span></span>](best-practices-for-replication-administration.md)  
  
  
