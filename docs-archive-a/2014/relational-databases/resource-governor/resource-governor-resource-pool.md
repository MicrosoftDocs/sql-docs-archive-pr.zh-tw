---
title: 資源管理員資源集區 | Microsoft 文件
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: performance
ms.topic: conceptual
helpviewer_keywords:
- Resource Governor, resource pool
- resource pool [SQL Server], overview
- resource pool [SQL Server]
ms.assetid: 306b6278-e54f-42e6-b746-95a9315e0cbe
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 574d70f23541888ade1e9b827f52fed801c20205
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87699385"
---
# <a name="resource-governor-resource-pool"></a><span data-ttu-id="50495-102">資源管理員資源集區</span><span class="sxs-lookup"><span data-stu-id="50495-102">Resource Governor Resource Pool</span></span>
  <span data-ttu-id="50495-103">在 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 資源管理員中，資源集區代表 [!INCLUDE[ssDE](../../includes/ssde-md.md)]執行個體的實體資源子集。</span><span class="sxs-lookup"><span data-stu-id="50495-103">In the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Resource Governor, a resource pool represents a subset of the physical resources of an instance of the [!INCLUDE[ssDE](../../includes/ssde-md.md)].</span></span> <span data-ttu-id="50495-104">資源管理員可讓您針對內送應用程式要求可在資源集區使用的 CPU、實體 IO 和記憶體數量指定限制。</span><span class="sxs-lookup"><span data-stu-id="50495-104">Resource Governor enables you to specify limits on the amount of CPU, physical IO, and memory that incoming application requests can use within the resource pool.</span></span> <span data-ttu-id="50495-105">每個資源集區都會包含一個或多個工作負載群組。</span><span class="sxs-lookup"><span data-stu-id="50495-105">Each resource pool can contain one or more workload groups.</span></span> <span data-ttu-id="50495-106">在工作階段啟動時，資源管理員分類會將此工作階段指派給特定的工作負載群組，並且此工作階段必須使用指派給該工作負載群組的資源來執行。</span><span class="sxs-lookup"><span data-stu-id="50495-106">When a session is started, the Resource Governor classifier assigns the session to a specific workload group, and the session must run using the resources assigned to the workload group.</span></span>  
  
## <a name="resource-pool-concepts"></a><span data-ttu-id="50495-107">資源集區概念</span><span class="sxs-lookup"><span data-stu-id="50495-107">Resource Pool Concepts</span></span>  
 <span data-ttu-id="50495-108">資源集區 (或集區) 代表伺服器的實體資源。</span><span class="sxs-lookup"><span data-stu-id="50495-108">A resource pool, or pool, represents the physical resources of the server.</span></span> <span data-ttu-id="50495-109">您可以將集區視為 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 執行個體內部的虛擬 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 執行個體。</span><span class="sxs-lookup"><span data-stu-id="50495-109">You can think of a pool as a virtual [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance inside of a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance.</span></span> <span data-ttu-id="50495-110">集區具有兩個部分。</span><span class="sxs-lookup"><span data-stu-id="50495-110">A pool has two parts.</span></span> <span data-ttu-id="50495-111">其中一個部分不會與其他集區重疊，以便達到最小資源保留的效果。</span><span class="sxs-lookup"><span data-stu-id="50495-111">One part does not overlap with other pools, which enables minimum resource reservation.</span></span> <span data-ttu-id="50495-112">另一個部分則與其他集區共用，以便支援最大可能的資源耗用量。</span><span class="sxs-lookup"><span data-stu-id="50495-112">The other part is shared with other pools, which supports maximum possible resource consumption.</span></span> <span data-ttu-id="50495-113">集區資源的定義方式為針對各資源 (CPU、記憶體和實體 IO) 指定下列一個或多個設定：</span><span class="sxs-lookup"><span data-stu-id="50495-113">The pool resources are defined by specifying one or more of the following settings for each resource (CPU, memory, and physical IO):</span></span>  
  
-   <span data-ttu-id="50495-114">**MIN_CPU_PERCENT 和 MAX_CPU_PERCENT**</span><span class="sxs-lookup"><span data-stu-id="50495-114">**MIN_CPU_PERCENT and MAX_CPU_PERCENT**</span></span>  
  
     <span data-ttu-id="50495-115">這兩個設定是在發生 CPU 競爭時，資源集區中所有要求的保證平均 CPU 頻寬下限和上限。</span><span class="sxs-lookup"><span data-stu-id="50495-115">These settings are the minimum and maximum guaranteed average CPU bandwidth for all requests in the resource pool when there is CPU contention.</span></span> <span data-ttu-id="50495-116">您可以使用這些設定，根據每個工作負載的需求，為多個工作負載建立可預測的 CPU 資源使用量。</span><span class="sxs-lookup"><span data-stu-id="50495-116">You can use these settings to establish predictable CPU resource usage for multiple workloads that is based on the needs of each workload.</span></span> <span data-ttu-id="50495-117">例如，假設公司的銷售和行銷部門共用相同的資料庫。</span><span class="sxs-lookup"><span data-stu-id="50495-117">For example, assume the Sales and Marketing departments in a company share the same database.</span></span> <span data-ttu-id="50495-118">銷售部門有高查詢優先權的 CPU 運算密集工作負載。</span><span class="sxs-lookup"><span data-stu-id="50495-118">The Sales department has a CPU-intensive workload with high-priority queries.</span></span> <span data-ttu-id="50495-119">行銷部門也有 CPU 運算密集的工作負載，但是查詢優先權較低。</span><span class="sxs-lookup"><span data-stu-id="50495-119">The Marketing department also has a CPU-intensive workload, but has lower-priority queries.</span></span> <span data-ttu-id="50495-120">透過為各部門建立個別的資源集區，您可以指派銷售資源集區的 CPU 百分比「下限」為 70，而行銷資源集區的 CPU 百分比「上限」為 30。</span><span class="sxs-lookup"><span data-stu-id="50495-120">By creating a separate resource pool for each department, you can assign a *minimum* CPU percentage of 70 for the Sales resource pool and a *maximum* CPU percentage of 30 for the Marketing resource pool.</span></span> <span data-ttu-id="50495-121">這樣可以確保銷售工作負載接收到其所需的 CPU 資源，而行銷工作負載會與銷售工作負載的 CPU 需求隔離。</span><span class="sxs-lookup"><span data-stu-id="50495-121">This ensures that the Sales workload receives the CPU resources it requires and the Marketing workload is isolated from the CPU demands of the Sales workload.</span></span> <span data-ttu-id="50495-122">請注意，CPU 百分比上限是機率的最大值。</span><span class="sxs-lookup"><span data-stu-id="50495-122">Note that the maximum CPU percentage is an opportunistic maximum.</span></span> <span data-ttu-id="50495-123">如果有可用的 CPU 容量，工作負載最多可以使用到 100%。</span><span class="sxs-lookup"><span data-stu-id="50495-123">If there is available CPU capacity, the workload uses it up to 100 percent.</span></span> <span data-ttu-id="50495-124">此上限值只適用於發生 CPU 資源競爭時。</span><span class="sxs-lookup"><span data-stu-id="50495-124">The maximum value only applies when there is contention for CPU resources.</span></span> <span data-ttu-id="50495-125">在此範例中，如果銷售工作負載關閉，行銷工作負載可在需要時使用 100% 的 CPU。</span><span class="sxs-lookup"><span data-stu-id="50495-125">In this example, if the Sales workload is switched off, the Marketing workload can use 100 percent of the CPU if needed.</span></span>  
  
-   <span data-ttu-id="50495-126">**CAP_CPU_PERCENT**</span><span class="sxs-lookup"><span data-stu-id="50495-126">**CAP_CPU_PERCENT**</span></span>  
  
     <span data-ttu-id="50495-127">此設定是 CPU 頻寬硬體上限，適用於資源集區中的所有要求。</span><span class="sxs-lookup"><span data-stu-id="50495-127">This settings is a hard cap limit on the CPU bandwidth for all requests in the resource pool.</span></span> <span data-ttu-id="50495-128">與集區相關聯的工作負載可以使用高於 MAX_CPU_PERCENT 值 (如果有的話) 但不高於 CAP_CPU_PERCENT 值的 CPU 容量。</span><span class="sxs-lookup"><span data-stu-id="50495-128">Workloads associated with the pool can use CPU capacity above the value of MAX_CPU_PERCENT if it is available, but not above the value of CAP_CPU_PERCENT.</span></span> <span data-ttu-id="50495-129">在上述範例中，假設已針對行銷部門的資源使用量收費。</span><span class="sxs-lookup"><span data-stu-id="50495-129">Using the example above, lets assume that the Marketing department is being charged for their resource usage.</span></span> <span data-ttu-id="50495-130">他們想要可預測的帳單，不想支付超過 30% 的 CPU。</span><span class="sxs-lookup"><span data-stu-id="50495-130">They want predictable billing and do not want to pay for more than 30 percent of the CPU.</span></span> <span data-ttu-id="50495-131">只要將行銷資源集區的 CAP_CPU_PERCENT 設為 30 就可以做到這一點。</span><span class="sxs-lookup"><span data-stu-id="50495-131">This can be accomplished by setting the CAP_CPU_PERCENT to 30 for the Marketing resource pool.</span></span>  
  
-   <span data-ttu-id="50495-132">**MIN_MEMORY_PERCENT 和 MAX_MEMORY_PERCENT**</span><span class="sxs-lookup"><span data-stu-id="50495-132">**MIN_MEMORY_PERCENT and MAX_MEMORY_PERCENT**</span></span>  
  
     <span data-ttu-id="50495-133">這兩個設定是保留記憶體數量的下限及上限，適用於不能與其他資源集區共享的資源集區。</span><span class="sxs-lookup"><span data-stu-id="50495-133">These settings are the minimum and maximum amount of memory reserved for the resource pool that can not be shared with other resource pools.</span></span> <span data-ttu-id="50495-134">這裡所指的記憶體是查詢執行授與記憶體，而非緩衝集區記憶體 (例如，資料和索引頁面)。</span><span class="sxs-lookup"><span data-stu-id="50495-134">The memory referenced here is query execution grant memory, not buffer pool memory (for example, data and index pages).</span></span> <span data-ttu-id="50495-135">設定集區的記憶體最小值，表示您可以確保可能在此資源集區中執行的任何要求，都可使用所指定的記憶體百分比。</span><span class="sxs-lookup"><span data-stu-id="50495-135">Setting a minimum memory value for a pool means that you are ensuring that the percentage of memory specified will be available for any requests that might run in this resource pool.</span></span> <span data-ttu-id="50495-136">這是與 MIN_CPU_PERCENT 相較下的重要差異指標，因為在此情況下，即使集區對於區內的工作負載群組沒有任何要求，記憶體仍可保留在指定的資源集區中。</span><span class="sxs-lookup"><span data-stu-id="50495-136">This is an important differentiator compared to MIN_CPU_PERCENT, because in this case memory may remain in the given resource pool even when the pool does not have any requests in the workload groups belonging to this pool.</span></span> <span data-ttu-id="50495-137">因此，在使用此設定時，務必非常小心，因為即使沒有任何作用中的要求，也無法將此記憶體提供給任何其他集區使用。</span><span class="sxs-lookup"><span data-stu-id="50495-137">Therefore it is crucial that you be very careful when using this setting, because this memory will be unavailable for use by any other pool, even when there are no active requests.</span></span> <span data-ttu-id="50495-138">設定集區的記憶體最大值，表示在此集區中執行要求時，要求所取得的記憶體永遠不會高於整體記憶體的百分比。</span><span class="sxs-lookup"><span data-stu-id="50495-138">Setting a maximum memory value for a pool means that when requests are running in this pool, they will never get more than this percentage of overall memory.</span></span>  
  
-   <span data-ttu-id="50495-139">**AFFINITY**</span><span class="sxs-lookup"><span data-stu-id="50495-139">**AFFINITY**</span></span>  
  
     <span data-ttu-id="50495-140">此設定可讓您將資源集區與一個或多個排程器或 NUMA 節點進行相似化，藉以進一步隔離 CPU 資源。</span><span class="sxs-lookup"><span data-stu-id="50495-140">This setting lets you affinitize a resource pool to one or more schedulers or NUMA nodes for greater isolation of CPU resources.</span></span> <span data-ttu-id="50495-141">使用上述的銷售及行銷案例，我們假設銷售部門需要更加隔離的環境，並且隨時都要有 100% 的 CPU 核心。</span><span class="sxs-lookup"><span data-stu-id="50495-141">Using the Sales and Marketing scenario above, lets assume that the Sales department needs a more isolated environment and wants 100 percent of a CPU core at all times.</span></span> <span data-ttu-id="50495-142">藉由使用 AFFINITY 選項，銷售及行銷工作負載可以在不同的 CPU 上排程。</span><span class="sxs-lookup"><span data-stu-id="50495-142">By using the AFFINITY option the Sales and Marketing workloads can be scheduled on different CPUs.</span></span> <span data-ttu-id="50495-143">假設行銷集區的 CAP_CPU_PERCENT 仍在，行銷工作負載繼續使用一個核心的 30% 上限，而銷售工作負載使用另一個核心的 100%。</span><span class="sxs-lookup"><span data-stu-id="50495-143">Assuming the CAP_CPU_PERCENT on the Marketing pool is still in place, the Marketing workload continues to use a maximum of 30 percent of one core, while the Sales workload uses 100 percent of the other core.</span></span> <span data-ttu-id="50495-144">就銷售及行銷工作負載而言，它們在兩台隔離的電腦上執行。</span><span class="sxs-lookup"><span data-stu-id="50495-144">As far as the Sales and Marketing workloads are concerned, they are running on two isolated machines.</span></span>  
  
-   <span data-ttu-id="50495-145">**MIN_IOPS_PER_VOLUME 和 MAX_IOPS_PER_VOLUME**</span><span class="sxs-lookup"><span data-stu-id="50495-145">**MIN_IOPS_PER_VOLUME and MAX_IOPS_PER_VOLUME**</span></span>  
  
     <span data-ttu-id="50495-146">這兩個設定是資源集區每個磁碟區每秒的實體 IO 作業數 (IOPS) 下限及上限。</span><span class="sxs-lookup"><span data-stu-id="50495-146">These settings are the minimum and maximum physical IO operations per second (IOPS) per disk volume for a resource pool.</span></span> <span data-ttu-id="50495-147">您可以使用這些設定，針對指定資源集區，控制為使用者執行緒發出的實體 IO 數。</span><span class="sxs-lookup"><span data-stu-id="50495-147">You can use these settings to control the physical IOs issued for user threads for a given resource pool.</span></span> <span data-ttu-id="50495-148">例如，銷售部門以大型批次產生數份月底報表。</span><span class="sxs-lookup"><span data-stu-id="50495-148">For example, the Sales department generates several end-of-month reports in large batches.</span></span> <span data-ttu-id="50495-149">這些批次中的查詢會產生 IO，可能使磁碟區飽和，並影響資料庫中其他較高優先權工作負載的效能。</span><span class="sxs-lookup"><span data-stu-id="50495-149">The queries in these batches can generate IOs that can saturate the disk volume and impact the performance of other higher priority workloads in the database.</span></span> <span data-ttu-id="50495-150">為了將此工作負載隔離，將銷售部門資源集區的 MIN_IOPS_PER_VOLUME 設為 20，並將 MAX_IOPS_PER_VOLUME 設為 100，以控制可為工作負載發出的 IO 層級。</span><span class="sxs-lookup"><span data-stu-id="50495-150">To isolate this workload, the MIN_IOPS_PER_VOLUME is set to 20 and the MAX_IOPS_PER_VOLUME is set to 100 for the Sales department resource pool, which controls the level of IOs that can issued for the workload.</span></span>  
  
 <span data-ttu-id="50495-151">所有集區之 MIN 值的總和不得超過伺服器資源的 100%。 此外，MAX 和 CAP 值則可設定為 MIN 與 100% (含) 之間範圍中的任何值。</span><span class="sxs-lookup"><span data-stu-id="50495-151">When configuring CPU or Memory, the sum of MIN values across all pools cannot exceed 100 percent of the server resources.</span></span> <span data-ttu-id="50495-152">此外，在設定 CPU 或記憶體時，MAX 和 CAP 值則可設定為 MIN 與 100% (含) 之間範圍中的任何值。</span><span class="sxs-lookup"><span data-stu-id="50495-152">In addition, when configuring CPU or Memory, MAX and CAP values can be set anywhere in the range between MIN and 100 percent inclusive.</span></span>  
  
 <span data-ttu-id="50495-153">如果某個集區已經定義了非零的 MIN，其他集區的有效 MAX 值就會重新調整。</span><span class="sxs-lookup"><span data-stu-id="50495-153">If a pool has a nonzero MIN defined, the effective MAX value of other pools is readjusted.</span></span> <span data-ttu-id="50495-154">因為集區的最小已設定 MAX 值和其他集區 MIN 值的總和都是從 100% 中扣除。</span><span class="sxs-lookup"><span data-stu-id="50495-154">The minimum of the configured MAX value of a pool and the sum of the MIN values of other pools is subtracted from 100 percent.</span></span>  
  
 <span data-ttu-id="50495-155">下表將說明部分的上述概念。</span><span class="sxs-lookup"><span data-stu-id="50495-155">The following table illustrates a few of the preceding concepts.</span></span> <span data-ttu-id="50495-156">此表顯示了內部集區、預設集區和兩個使用者定義集區的設定。</span><span class="sxs-lookup"><span data-stu-id="50495-156">The table shows the settings for the internal pool, the default pool, and two user-defined pools.</span></span> <span data-ttu-id="50495-157">下列公式可用來計算有效的 MAX% 和共用的 %。</span><span class="sxs-lookup"><span data-stu-id="50495-157">The following formulas are used for calculating the effective MAX% and the shared %.</span></span>  
  
-   <span data-ttu-id="50495-158">Min(X,Y) 代表較小的 X 和 Y 值。</span><span class="sxs-lookup"><span data-stu-id="50495-158">Min(X,Y) means the smaller value of X and Y.</span></span>  
  
-   <span data-ttu-id="50495-159">Sum(X) 代表所有集區之 X 值的總和。</span><span class="sxs-lookup"><span data-stu-id="50495-159">Sum(X) means the sum of value X across all pools.</span></span>  
  
-   <span data-ttu-id="50495-160">全部共用的 % = 100 - sum(MIN %)。</span><span class="sxs-lookup"><span data-stu-id="50495-160">Total shared % = 100 - sum(MIN %).</span></span>  
  
-   <span data-ttu-id="50495-161">有效的 MAX % = min(X,Y)。</span><span class="sxs-lookup"><span data-stu-id="50495-161">Effective MAX % = min(X,Y).</span></span>  
  
-   <span data-ttu-id="50495-162">共用的 % = 有效的 MAX % - MIN %。</span><span class="sxs-lookup"><span data-stu-id="50495-162">Shared % = Effective MAX % - MIN %.</span></span>  
  
|<span data-ttu-id="50495-163">集區名稱</span><span class="sxs-lookup"><span data-stu-id="50495-163">Pool name</span></span>|<span data-ttu-id="50495-164">MIN % 設定</span><span class="sxs-lookup"><span data-stu-id="50495-164">MIN % setting</span></span>|<span data-ttu-id="50495-165">MAX % 設定</span><span class="sxs-lookup"><span data-stu-id="50495-165">MAX % setting</span></span>|<span data-ttu-id="50495-166">計算出有效的 MAX %</span><span class="sxs-lookup"><span data-stu-id="50495-166">Calculated effective MAX %</span></span>|<span data-ttu-id="50495-167">計算出共用的 %</span><span class="sxs-lookup"><span data-stu-id="50495-167">Calculated shared %</span></span>|<span data-ttu-id="50495-168">註解</span><span class="sxs-lookup"><span data-stu-id="50495-168">Comment</span></span>|  
|---------------|-------------------|-------------------|--------------------------------|-------------------------|-------------|  
|<span data-ttu-id="50495-169">內部</span><span class="sxs-lookup"><span data-stu-id="50495-169">internal</span></span>|<span data-ttu-id="50495-170">0</span><span class="sxs-lookup"><span data-stu-id="50495-170">0</span></span>|<span data-ttu-id="50495-171">100</span><span class="sxs-lookup"><span data-stu-id="50495-171">100</span></span>|<span data-ttu-id="50495-172">100</span><span class="sxs-lookup"><span data-stu-id="50495-172">100</span></span>|<span data-ttu-id="50495-173">0</span><span class="sxs-lookup"><span data-stu-id="50495-173">0</span></span>|<span data-ttu-id="50495-174">有效的 MAX% 和共用的 % 不適用於內部集區。</span><span class="sxs-lookup"><span data-stu-id="50495-174">Effective MAX% and shared% are not applicable to the internal pool.</span></span>|  
|<span data-ttu-id="50495-175">預設</span><span class="sxs-lookup"><span data-stu-id="50495-175">default</span></span>|<span data-ttu-id="50495-176">0</span><span class="sxs-lookup"><span data-stu-id="50495-176">0</span></span>|<span data-ttu-id="50495-177">100</span><span class="sxs-lookup"><span data-stu-id="50495-177">100</span></span>|<span data-ttu-id="50495-178">30</span><span class="sxs-lookup"><span data-stu-id="50495-178">30</span></span>|<span data-ttu-id="50495-179">30</span><span class="sxs-lookup"><span data-stu-id="50495-179">30</span></span>|<span data-ttu-id="50495-180">有效的 MAX 值計算為：min(100,100-(20+50)) = 30。</span><span class="sxs-lookup"><span data-stu-id="50495-180">The effective MAX value is calculated as: min(100,100-(20+50)) = 30.</span></span> <span data-ttu-id="50495-181">計算出共用的 % 為有效的 MAX - MIN = 30。</span><span class="sxs-lookup"><span data-stu-id="50495-181">The calculated shared % is effective MAX - MIN = 30.</span></span>|  
|<span data-ttu-id="50495-182">集區 1</span><span class="sxs-lookup"><span data-stu-id="50495-182">Pool 1</span></span>|<span data-ttu-id="50495-183">20</span><span class="sxs-lookup"><span data-stu-id="50495-183">20</span></span>|<span data-ttu-id="50495-184">100</span><span class="sxs-lookup"><span data-stu-id="50495-184">100</span></span>|<span data-ttu-id="50495-185">50</span><span class="sxs-lookup"><span data-stu-id="50495-185">50</span></span>|<span data-ttu-id="50495-186">30</span><span class="sxs-lookup"><span data-stu-id="50495-186">30</span></span>|<span data-ttu-id="50495-187">有效的 MAX 值計算為：min(100,100-50) = 50。</span><span class="sxs-lookup"><span data-stu-id="50495-187">The effective MAX value is calculated as: min(100,100-50) = 50.</span></span> <span data-ttu-id="50495-188">計算出共用的 % 為有效的 MAX - MIN = 30。</span><span class="sxs-lookup"><span data-stu-id="50495-188">The calculated Shared % is Effective MAX - MIN = 30.</span></span>|  
|<span data-ttu-id="50495-189">集區 2</span><span class="sxs-lookup"><span data-stu-id="50495-189">Pool 2</span></span>|<span data-ttu-id="50495-190">50</span><span class="sxs-lookup"><span data-stu-id="50495-190">50</span></span>|<span data-ttu-id="50495-191">70</span><span class="sxs-lookup"><span data-stu-id="50495-191">70</span></span>|<span data-ttu-id="50495-192">70</span><span class="sxs-lookup"><span data-stu-id="50495-192">70</span></span>|<span data-ttu-id="50495-193">20</span><span class="sxs-lookup"><span data-stu-id="50495-193">20</span></span>|<span data-ttu-id="50495-194">有效的 MAX 值計算為：min(70,100-20) = 70。</span><span class="sxs-lookup"><span data-stu-id="50495-194">The effective MAX value is calculated as: min(70,100-20) = 70.</span></span> <span data-ttu-id="50495-195">計算出共用的 % 為有效的 MAX - MIN = 20。</span><span class="sxs-lookup"><span data-stu-id="50495-195">The calculated Shared % is Effective MAX - MIN = 20.</span></span>|  
  
 <span data-ttu-id="50495-196">利用上表當做範例，我們可以進一步說明建立另一個集區時，系統進行的調整。</span><span class="sxs-lookup"><span data-stu-id="50495-196">Using the preceding table as an example we can further illustrate the adjustments that take place when another pool is created.</span></span> <span data-ttu-id="50495-197">這個集區是「集區 3」，而且 MIN % 設定為 5。</span><span class="sxs-lookup"><span data-stu-id="50495-197">This pool is Pool 3 and has a MIN % setting of 5.</span></span>  
  
|<span data-ttu-id="50495-198">集區名稱</span><span class="sxs-lookup"><span data-stu-id="50495-198">Pool name</span></span>|<span data-ttu-id="50495-199">MIN % 設定</span><span class="sxs-lookup"><span data-stu-id="50495-199">MIN % setting</span></span>|<span data-ttu-id="50495-200">MAX % 設定</span><span class="sxs-lookup"><span data-stu-id="50495-200">MAX % setting</span></span>|<span data-ttu-id="50495-201">計算出有效的 MAX %</span><span class="sxs-lookup"><span data-stu-id="50495-201">Calculated effective MAX %</span></span>|<span data-ttu-id="50495-202">計算出共用的 %</span><span class="sxs-lookup"><span data-stu-id="50495-202">Calculated shared %</span></span>|<span data-ttu-id="50495-203">註解</span><span class="sxs-lookup"><span data-stu-id="50495-203">Comment</span></span>|  
|---------------|-------------------|-------------------|--------------------------------|-------------------------|-------------|  
|<span data-ttu-id="50495-204">內部</span><span class="sxs-lookup"><span data-stu-id="50495-204">internal</span></span>|<span data-ttu-id="50495-205">0</span><span class="sxs-lookup"><span data-stu-id="50495-205">0</span></span>|<span data-ttu-id="50495-206">100</span><span class="sxs-lookup"><span data-stu-id="50495-206">100</span></span>|<span data-ttu-id="50495-207">100</span><span class="sxs-lookup"><span data-stu-id="50495-207">100</span></span>|<span data-ttu-id="50495-208">0</span><span class="sxs-lookup"><span data-stu-id="50495-208">0</span></span>|<span data-ttu-id="50495-209">有效的 MAX% 和共用的 % 不適用於內部集區。</span><span class="sxs-lookup"><span data-stu-id="50495-209">Effective MAX % and shared % are not applicable to the internal pool.</span></span>|  
|<span data-ttu-id="50495-210">預設</span><span class="sxs-lookup"><span data-stu-id="50495-210">default</span></span>|<span data-ttu-id="50495-211">0</span><span class="sxs-lookup"><span data-stu-id="50495-211">0</span></span>|<span data-ttu-id="50495-212">100</span><span class="sxs-lookup"><span data-stu-id="50495-212">100</span></span>|<span data-ttu-id="50495-213">25</span><span class="sxs-lookup"><span data-stu-id="50495-213">25</span></span>|<span data-ttu-id="50495-214">25</span><span class="sxs-lookup"><span data-stu-id="50495-214">25</span></span>|<span data-ttu-id="50495-215">有效的 MAX 值計算為：min(100,100-(20+50+5)) = 25。</span><span class="sxs-lookup"><span data-stu-id="50495-215">The effective MAX value is calculated as: min(100,100-(20+50+5)) = 25.</span></span> <span data-ttu-id="50495-216">計算出共用的 % 為有效的 MAX - MIN = 25。</span><span class="sxs-lookup"><span data-stu-id="50495-216">The calculated shared % is Effective MAX - MIN = 25.</span></span>|  
|<span data-ttu-id="50495-217">集區 1</span><span class="sxs-lookup"><span data-stu-id="50495-217">Pool 1</span></span>|<span data-ttu-id="50495-218">20</span><span class="sxs-lookup"><span data-stu-id="50495-218">20</span></span>|<span data-ttu-id="50495-219">100</span><span class="sxs-lookup"><span data-stu-id="50495-219">100</span></span>|<span data-ttu-id="50495-220">45</span><span class="sxs-lookup"><span data-stu-id="50495-220">45</span></span>|<span data-ttu-id="50495-221">25</span><span class="sxs-lookup"><span data-stu-id="50495-221">25</span></span>|<span data-ttu-id="50495-222">有效的 MAX 值計算為：min(100,100-55) = 45。</span><span class="sxs-lookup"><span data-stu-id="50495-222">The effective MAX value is calculated as: min(100,100-55) = 45.</span></span> <span data-ttu-id="50495-223">計算出共用的 % 為有效的 MAX - MIN = 25。</span><span class="sxs-lookup"><span data-stu-id="50495-223">The calculated Shared % is Effective MAX - MIN = 25.</span></span>|  
|<span data-ttu-id="50495-224">集區 2</span><span class="sxs-lookup"><span data-stu-id="50495-224">Pool 2</span></span>|<span data-ttu-id="50495-225">50</span><span class="sxs-lookup"><span data-stu-id="50495-225">50</span></span>|<span data-ttu-id="50495-226">70</span><span class="sxs-lookup"><span data-stu-id="50495-226">70</span></span>|<span data-ttu-id="50495-227">70</span><span class="sxs-lookup"><span data-stu-id="50495-227">70</span></span>|<span data-ttu-id="50495-228">20</span><span class="sxs-lookup"><span data-stu-id="50495-228">20</span></span>|<span data-ttu-id="50495-229">有效的 MAX 值計算為：min(70,100-25) = 70。</span><span class="sxs-lookup"><span data-stu-id="50495-229">The effective MAX value is calculated as: min(70,100-25) = 70.</span></span> <span data-ttu-id="50495-230">計算出共用的 % 為有效的 MAX - MIN = 20。</span><span class="sxs-lookup"><span data-stu-id="50495-230">The calculated Shared % is effective MAX - MIN = 20.</span></span>|  
|<span data-ttu-id="50495-231">集區 3</span><span class="sxs-lookup"><span data-stu-id="50495-231">Pool 3</span></span>|<span data-ttu-id="50495-232">5</span><span class="sxs-lookup"><span data-stu-id="50495-232">5</span></span>|<span data-ttu-id="50495-233">100</span><span class="sxs-lookup"><span data-stu-id="50495-233">100</span></span>|<span data-ttu-id="50495-234">30</span><span class="sxs-lookup"><span data-stu-id="50495-234">30</span></span>|<span data-ttu-id="50495-235">25</span><span class="sxs-lookup"><span data-stu-id="50495-235">25</span></span>|<span data-ttu-id="50495-236">有效的 MAX 值計算為：min(100,100-70) = 30。</span><span class="sxs-lookup"><span data-stu-id="50495-236">The effective MAX value is calculated as: min(100,100-70) = 30.</span></span> <span data-ttu-id="50495-237">計算出共用的 % 為有效的 MAX - MIN = 25。</span><span class="sxs-lookup"><span data-stu-id="50495-237">The calculated Shared % is effective MAX - MIN = 25.</span></span>|  
  
 <span data-ttu-id="50495-238">集區的共用部分是用來指出可用資源的範圍 (如果資源可用的話)。</span><span class="sxs-lookup"><span data-stu-id="50495-238">The shared part of the pool is used to indicate where available resources can go if resources are available.</span></span> <span data-ttu-id="50495-239">不過，當資源被耗用時，它們就會移至指定的集區而且無法共用。</span><span class="sxs-lookup"><span data-stu-id="50495-239">However, when resources are consumed they go to the specified pool and are not shared.</span></span> <span data-ttu-id="50495-240">當指定之集區中沒有任何要求時，這樣做可改善資源使用率，而且設定給集區的資源可釋放給其他集區使用。</span><span class="sxs-lookup"><span data-stu-id="50495-240">This may improve resource utilization in cases where there are no requests in a given pool and the resources configured to the pool can be freed up for other pools.</span></span>  
  
 <span data-ttu-id="50495-241">某些極端的集區組態情況如下：</span><span class="sxs-lookup"><span data-stu-id="50495-241">Some extreme cases of pool configuration are:</span></span>  
  
-   <span data-ttu-id="50495-242">所有集區都定義了最小值，而這些值總計代表伺服器資源的 100%。</span><span class="sxs-lookup"><span data-stu-id="50495-242">All pools define minimums that in total represent 100 percent of the server resources.</span></span> <span data-ttu-id="50495-243">在此情況下，有效的最大值就等於最小值。</span><span class="sxs-lookup"><span data-stu-id="50495-243">In this case the effective maximums are equal to minimums.</span></span> <span data-ttu-id="50495-244">這就相當於將伺服器資源分成許多非重疊的部分，不論資源是否在任何指定的集區內部耗用都一樣。</span><span class="sxs-lookup"><span data-stu-id="50495-244">This is equivalent to dividing the server resources into non-overlapping pieces regardless of resources are consumed inside any given pool.</span></span>  
  
-   <span data-ttu-id="50495-245">所有集區的最小值都是零。</span><span class="sxs-lookup"><span data-stu-id="50495-245">All pools have zero minimums.</span></span> <span data-ttu-id="50495-246">所有集區會競爭可用資源，而且其最終大小是以每個集區的資源耗用量為基礎。</span><span class="sxs-lookup"><span data-stu-id="50495-246">All the pools compete for available resources and their final sizes are based on resource consumption in each pool.</span></span> <span data-ttu-id="50495-247">原則等其他因素會在發展最終集區大小中扮演某個角色。</span><span class="sxs-lookup"><span data-stu-id="50495-247">Other factors such as policies play a role in shaping the final pool size.</span></span>  
  
 <span data-ttu-id="50495-248">資源管理員預先定義了兩個資源集區：內部集區和預設集區。</span><span class="sxs-lookup"><span data-stu-id="50495-248">Resource Governor predefines two resource pools, the internal pool and the default pool.</span></span>  
  
 <span data-ttu-id="50495-249">**內部集區**</span><span class="sxs-lookup"><span data-stu-id="50495-249">**Internal Pool**</span></span>  
  
 <span data-ttu-id="50495-250">內部集區代表 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 本身所耗用的資源。</span><span class="sxs-lookup"><span data-stu-id="50495-250">The internal pool represents the resources consumed by the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] itself.</span></span> <span data-ttu-id="50495-251">這個集區永遠僅包含內部群組，而且您無法用任何方式來變更此集區。</span><span class="sxs-lookup"><span data-stu-id="50495-251">This pool always contains only the internal group, and the pool is not alterable in any way.</span></span> <span data-ttu-id="50495-252">內部集區的資源耗用量並沒有限制。</span><span class="sxs-lookup"><span data-stu-id="50495-252">Resource consumption by the internal pool is not restricted.</span></span> <span data-ttu-id="50495-253">此集區中的任何工作負載都會被視為對於伺服器運作很重要，而且資源管理員允許內部集區對其他集區施壓，即使這樣做違反針對其他集區所設定的限制也一樣。</span><span class="sxs-lookup"><span data-stu-id="50495-253">Any workloads in the pool are considered critical for server function, and Resource Governor allows the internal pool to pressure other pools even if it means the violation of limits set for the other pools.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="50495-254">內部集區和內部群組資源使用量不會從整體資源使用量中扣除。</span><span class="sxs-lookup"><span data-stu-id="50495-254">The internal pool and internal group resource usage is not subtracted from the overall resource usage.</span></span> <span data-ttu-id="50495-255">百分比是從可用的整體資源中計算所得。</span><span class="sxs-lookup"><span data-stu-id="50495-255">Percentages are calculated from the overall resources available.</span></span>  
  
 <span data-ttu-id="50495-256">**預設集區**</span><span class="sxs-lookup"><span data-stu-id="50495-256">**Default Pool**</span></span>  
  
 <span data-ttu-id="50495-257">預設集區是第一個預先定義的使用者集區。</span><span class="sxs-lookup"><span data-stu-id="50495-257">The default pool is the first predefined user pool.</span></span> <span data-ttu-id="50495-258">進行任何組態設定之前，預設集區僅包含預設群組。</span><span class="sxs-lookup"><span data-stu-id="50495-258">Prior to any configuration the default pool only contains the default group.</span></span> <span data-ttu-id="50495-259">您無法建立或卸除預設集區，但是可以變更此集區。</span><span class="sxs-lookup"><span data-stu-id="50495-259">The default pool cannot be created or dropped but it can be altered.</span></span> <span data-ttu-id="50495-260">除了預設群組以外，預設集區可以包含使用者定義的群組。</span><span class="sxs-lookup"><span data-stu-id="50495-260">The default pool can contain user-defined groups in addition to the default group.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="50495-261">雖然預設群組可變更，但是您無法將它移出預設集區之外。</span><span class="sxs-lookup"><span data-stu-id="50495-261">The default group is alterable but it cannot be moved out of the default pool.</span></span>  
  
 <span data-ttu-id="50495-262">**使用者定義的資源集區**</span><span class="sxs-lookup"><span data-stu-id="50495-262">**User-Defined Resource Pools**</span></span>  
  
 <span data-ttu-id="50495-263">使用者定義的資源集區是您為環境中特定的工作負載所建立的資源集區。</span><span class="sxs-lookup"><span data-stu-id="50495-263">User-defined resource pools are those that you create for specific workloads in your environment.</span></span> <span data-ttu-id="50495-264">資源管理員會針對建立、變更和卸除資源集區提供 DDL 陳述式。</span><span class="sxs-lookup"><span data-stu-id="50495-264">Resource Governor provides DDL statements for creating, changing, and dropping resource pools.</span></span>  
  
## <a name="resource-pool-tasks"></a><span data-ttu-id="50495-265">資源集區工作</span><span class="sxs-lookup"><span data-stu-id="50495-265">Resource Pool Tasks</span></span>  
  
|<span data-ttu-id="50495-266">工作描述</span><span class="sxs-lookup"><span data-stu-id="50495-266">Task Description</span></span>|<span data-ttu-id="50495-267">主題</span><span class="sxs-lookup"><span data-stu-id="50495-267">Topic</span></span>|  
|----------------------|-----------|  
|<span data-ttu-id="50495-268">描述如何建立資源集區。</span><span class="sxs-lookup"><span data-stu-id="50495-268">Describes how to create a resource pool.</span></span>|[<span data-ttu-id="50495-269">建立資源集區</span><span class="sxs-lookup"><span data-stu-id="50495-269">Create a Resource Pool</span></span>](create-a-resource-pool.md)|  
|<span data-ttu-id="50495-270">描述如何變更資源集區設定。</span><span class="sxs-lookup"><span data-stu-id="50495-270">Describes how to change resource pool settings.</span></span>|[<span data-ttu-id="50495-271">變更資源集區設定</span><span class="sxs-lookup"><span data-stu-id="50495-271">Change Resource Pool Settings</span></span>](change-resource-pool-settings.md)|  
|<span data-ttu-id="50495-272">描述如何刪除資源集區。</span><span class="sxs-lookup"><span data-stu-id="50495-272">Describes how to delete a resource pool.</span></span>|[<span data-ttu-id="50495-273">刪除資源集區</span><span class="sxs-lookup"><span data-stu-id="50495-273">Delete a Resource Pool</span></span>](delete-a-resource-pool.md)|  
  
## <a name="see-also"></a><span data-ttu-id="50495-274">另請參閱</span><span class="sxs-lookup"><span data-stu-id="50495-274">See Also</span></span>  
 <span data-ttu-id="50495-275">[資源管理員](resource-governor.md) </span><span class="sxs-lookup"><span data-stu-id="50495-275">[Resource Governor](resource-governor.md) </span></span>  
 <span data-ttu-id="50495-276">[資源管理員工作負載群組](resource-governor-workload-group.md) </span><span class="sxs-lookup"><span data-stu-id="50495-276">[Resource Governor Workload Group](resource-governor-workload-group.md) </span></span>  
 <span data-ttu-id="50495-277">[資源管理員分類函數](resource-governor-classifier-function.md) </span><span class="sxs-lookup"><span data-stu-id="50495-277">[Resource Governor Classifier Function](resource-governor-classifier-function.md) </span></span>  
 <span data-ttu-id="50495-278">[使用範本來設定資源管理員](configure-resource-governor-using-a-template.md) </span><span class="sxs-lookup"><span data-stu-id="50495-278">[Configure Resource Governor Using a Template](configure-resource-governor-using-a-template.md) </span></span>  
 [<span data-ttu-id="50495-279">檢視資源管理員屬性</span><span class="sxs-lookup"><span data-stu-id="50495-279">View Resource Governor Properties</span></span>](view-resource-governor-properties.md)  
  
  
