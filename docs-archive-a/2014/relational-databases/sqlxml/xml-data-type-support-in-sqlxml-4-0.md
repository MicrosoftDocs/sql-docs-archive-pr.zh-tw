---
title: SQLXML 4.0 中的 xml 資料類型支援 |Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: xml
ms.topic: reference
helpviewer_keywords:
- SQLXML, xml data type support
- xml data type [SQL Server], SQLXML
ms.assetid: 9a6f5ad8-4a8f-4de7-ac17-81d5ccf78459
author: rothja
ms.author: jroth
ms.openlocfilehash: 6a3b022bdbca23c2cfcdc89f01199a2135eb4bff
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87599422"
---
# <a name="xml-data-type-support-in-sqlxml-40"></a><span data-ttu-id="b6b04-102">xml 資料類型在 SQLXML 4.0 中的支援</span><span class="sxs-lookup"><span data-stu-id="b6b04-102">xml Data Type Support in SQLXML 4.0</span></span>
  <span data-ttu-id="b6b04-103">從開始 [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] ， [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 支援使用資料類型的 XML 類型資料 `xml` 。</span><span class="sxs-lookup"><span data-stu-id="b6b04-103">Beginning with [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)], [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] supports XML typed data using the `xml` data type.</span></span> <span data-ttu-id="b6b04-104">本主題提供有關 SQLXML 4.0 如何識別 `xml` 資料類型之執行個體與實作其支援的資訊。</span><span class="sxs-lookup"><span data-stu-id="b6b04-104">This topic provides information about how SQLXML 4.0 recognizes instances of the `xml` data type and implements support for them.</span></span>  
  
## <a name="working-with-xml-data-types"></a><span data-ttu-id="b6b04-105">使用 xml 資料類型</span><span class="sxs-lookup"><span data-stu-id="b6b04-105">Working with xml Data Types</span></span>  
 <span data-ttu-id="b6b04-106">為了解如何使用實作 `xml` 資料類型資料行之 SQL 資料表的詳細資訊，提供下列範例：</span><span class="sxs-lookup"><span data-stu-id="b6b04-106">To understand more about how to work with SQL tables that implement `xml` data type columns, the following examples are provided:</span></span>  
  
|<span data-ttu-id="b6b04-107">Task</span><span class="sxs-lookup"><span data-stu-id="b6b04-107">Task</span></span>|<span data-ttu-id="b6b04-108">範例</span><span class="sxs-lookup"><span data-stu-id="b6b04-108">Example</span></span>|<span data-ttu-id="b6b04-109">主題</span><span class="sxs-lookup"><span data-stu-id="b6b04-109">Topic</span></span>|  
|----------|-------------|-----------|  
|<span data-ttu-id="b6b04-110">如何在 XML 檢視中對應與包含 `xml` 資料行</span><span class="sxs-lookup"><span data-stu-id="b6b04-110">How to map and include an `xml` column in an XML view</span></span>|<span data-ttu-id="b6b04-111">「將 XML 元素對應至 XML 資料類型資料行」</span><span class="sxs-lookup"><span data-stu-id="b6b04-111">"Mapping an XML element to an XML data type column"</span></span>|[<span data-ttu-id="b6b04-112">XSD 元素和屬性對資料表和資料行的預設對應 &#40;SQLXML 4.0&#41;</span><span class="sxs-lookup"><span data-stu-id="b6b04-112">Default Mapping of XSD Elements and Attributes to Tables and Columns &#40;SQLXML 4.0&#41;</span></span>](../sqlxml-annotated-xsd-schemas-using/default-mapping-of-xsd-elements-and-attributes-to-tables-and-columns-sqlxml-4-0.md)|  
|<span data-ttu-id="b6b04-113">如何使用 Updategrams 將資料插入 `xml` 資料行</span><span class="sxs-lookup"><span data-stu-id="b6b04-113">How to insert data into an `xml` column with updategrams</span></span>|<span data-ttu-id="b6b04-114">「將資料插入至 XML 資料類型資料行」</span><span class="sxs-lookup"><span data-stu-id="b6b04-114">"Inserting data into an XML data type column"</span></span>|[<span data-ttu-id="b6b04-115">使用 XML Updategram 插入資料 &#40;SQLXML 4.0&#41;</span><span class="sxs-lookup"><span data-stu-id="b6b04-115">Inserting Data Using XML Updategrams &#40;SQLXML 4.0&#41;</span></span>](../sqlxml-annotated-xsd-schemas-xpath-queries/updategrams/inserting-data-using-xml-updategrams-sqlxml-4-0.md)|  
|<span data-ttu-id="b6b04-116">將 XML 資料大量載入到 `xml` 資料行中</span><span class="sxs-lookup"><span data-stu-id="b6b04-116">Bulk loading XML data into an `xml` column</span></span>|<span data-ttu-id="b6b04-117">「大量載入到 xml 資料類型資料行」</span><span class="sxs-lookup"><span data-stu-id="b6b04-117">"Bulk loading in xml Data Type columns"</span></span>|[<span data-ttu-id="b6b04-118">XML 大量載入範例 &#40;SQLXML 4.0&#41;</span><span class="sxs-lookup"><span data-stu-id="b6b04-118">XML Bulk Load Examples &#40;SQLXML 4.0&#41;</span></span>](../sqlxml-annotated-xsd-schemas-xpath-queries/bulk-load-xml/xml-bulk-load-examples-sqlxml-4-0.md)|  
  
## <a name="guidelines-and-limitations"></a><span data-ttu-id="b6b04-119">指導方針與限制</span><span class="sxs-lookup"><span data-stu-id="b6b04-119">Guidelines and Limitations</span></span>  
  
-   <span data-ttu-id="b6b04-120">**\<xsd:any>** 無法對應至包含 `xml` 資料類型的資料行。</span><span class="sxs-lookup"><span data-stu-id="b6b04-120">**\<xsd:any>** cannot be mapped to a column including an `xml` data type.</span></span> <span data-ttu-id="b6b04-121">在 SQLXML 中針對此案例的支援會透過 `sql:overflow-field` 註解提供。</span><span class="sxs-lookup"><span data-stu-id="b6b04-121">Support in SQLXML for this scenario is provided through the `sql:overflow-field` annotation.</span></span> <span data-ttu-id="b6b04-122">另一個因應措施為，對應 `xml` 資料類型欄位做為 `xsd:anyType` 的元素。</span><span class="sxs-lookup"><span data-stu-id="b6b04-122">Another workaround is to map an `xml` data type field as an element of `xsd:anyType`.</span></span> <span data-ttu-id="b6b04-123">此因應措施會在上述資料表中參考之「將 XML 元素對應至 XML 資料類型資料行」範例中示範。</span><span class="sxs-lookup"><span data-stu-id="b6b04-123">This workaround is demonstrated in the "Mapping an XML element to an XML data type column" example referenced in the table above.</span></span>  
  
-   <span data-ttu-id="b6b04-124">不支援 `xml` 資料類型資料行內容中的 XPath 查詢。</span><span class="sxs-lookup"><span data-stu-id="b6b04-124">XPath query into the contents of `xml` data type columns is not supported.</span></span>  
  
-   <span data-ttu-id="b6b04-125">在不支援 (例如 `xml` 和 `sql:relationship`) 或允許的註解中使用 `sql:key-fields` 資料類型資料行將會導致 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 錯誤，實作 SQLXML 4.0 的中間層元件將不會捕捉到這個錯誤。</span><span class="sxs-lookup"><span data-stu-id="b6b04-125">Using an `xml` data type column in annotations where it is not supported (such as `sql:relationship` and `sql:key-fields`) or allowed will result in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] errors that will not be trapped by middle-tier components implementing SQLXML 4.0.</span></span> <span data-ttu-id="b6b04-126">發生這個錯誤是因為 SQLXML 不需要 SQL 類型資訊。</span><span class="sxs-lookup"><span data-stu-id="b6b04-126">This occurs because SQLXML does not require SQL type information.</span></span> <span data-ttu-id="b6b04-127">這類似於其他資料類型的 SQLXML 行為，例如 BLOB 和二進位類型。</span><span class="sxs-lookup"><span data-stu-id="b6b04-127">This is similar to the behavior of SQLXML for other data types, such as BLOB and binary types.</span></span>  
  
-   <span data-ttu-id="b6b04-128">只有 XSD 結構描述支援對應 `xml` 資料行。</span><span class="sxs-lookup"><span data-stu-id="b6b04-128">Mapping `xml` columns is supported only for XSD schemas.</span></span> <span data-ttu-id="b6b04-129">XDR 結構描述不支援對應 `xml` 資料行。</span><span class="sxs-lookup"><span data-stu-id="b6b04-129">XDR schemas do not support mapping `xml` columns.</span></span>  
  
-   <span data-ttu-id="b6b04-130">SQLXML 4.0 會依賴 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 中提供的 XML 剖析支援。</span><span class="sxs-lookup"><span data-stu-id="b6b04-130">SQLXML 4.0 relies upon the XML parsing support provided in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="b6b04-131">`xml` 資料行可以當做具類型的 XML 或不具類型的 XML 進行對應。</span><span class="sxs-lookup"><span data-stu-id="b6b04-131">An `xml` column can be either mapped as typed XML or untyped XML.</span></span> <span data-ttu-id="b6b04-132">在任一種情況下，SQLXML 4.0 都不會驗證輸入 XML。</span><span class="sxs-lookup"><span data-stu-id="b6b04-132">In either case, SQLXML 4.0 does not validate the input XML.</span></span>  <span data-ttu-id="b6b04-133">如果輸入 XML 無效或格式不正確，[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 會將其回報給 SQLXML，並將使用者傳回的任何相關錯誤資訊傳播給使用者。</span><span class="sxs-lookup"><span data-stu-id="b6b04-133">If input XML is not valid or well-formed, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] reports it to SQLXML, and propagates any relevant error information returned by the server to the user.</span></span>  
  
-   <span data-ttu-id="b6b04-134">SQLXML 4.0 會依賴 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 中提供的 DTD 有限支援。</span><span class="sxs-lookup"><span data-stu-id="b6b04-134">SQLXML 4.0 relies upon the limited support for DTDs provided in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="b6b04-135">允許在 `xml` 資料類型資料中使用內部 DTD，這可用於提供預設值，並將實體參考取代為其展開的內容。</span><span class="sxs-lookup"><span data-stu-id="b6b04-135">allows for an internal DTD in `xml` data type data, which can be used to supply default values and to replace entity references with their expanded contents.</span></span> <span data-ttu-id="b6b04-136">SQLXML 會將 XML 資料以「現況」傳遞 (包括內部 DTD) 到伺服器。</span><span class="sxs-lookup"><span data-stu-id="b6b04-136">SQLXML passes the XML data "as is" (including the internal DTD) to the server.</span></span> <span data-ttu-id="b6b04-137">您可以使用協力廠商工具將 DTD 轉換成 XML 結構描述 (XSD) 文件，並將包含內嵌 XML 結構描述的資料載入到資料庫中。</span><span class="sxs-lookup"><span data-stu-id="b6b04-137">You can convert DTDs to XML Schema (XSD) documents using third-party tools, and load the data with inline XSD schemas into the database.</span></span>  
  
-   <span data-ttu-id="b6b04-138">根據的行為，SQLXML 4.0 不會保留 XML 宣告處理指示 (例如，) [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 。</span><span class="sxs-lookup"><span data-stu-id="b6b04-138">SQLXML 4.0 does not preserve XML declaration processing instructions (for example, ) based on the behavior of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="b6b04-139">但是，系統會將 XML 宣告視為 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] XML 剖析器的指示詞，而且在資料轉換為 `xml` 資料類型之後，會遺失其屬性 (version、encoding 和 standalone)。</span><span class="sxs-lookup"><span data-stu-id="b6b04-139">Instead, the XML declaration is treated as a directive to the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] XML parser, and its attributes (version, encoding, and standalone) are lost after data is converted to the `xml` data type.</span></span> <span data-ttu-id="b6b04-140">XML 資料會當做 UCS-2 儲存在內部。</span><span class="sxs-lookup"><span data-stu-id="b6b04-140">The XML data is stored internally as UCS-2.</span></span> <span data-ttu-id="b6b04-141">系統會保留 XML 執行個體中的其他所有處理指示；這些指示可用於 `xml` 資料行，而且可由 SQLXML 支援。</span><span class="sxs-lookup"><span data-stu-id="b6b04-141">All other processing instructions in the XML instance are preserved; they are allowed in the `xml` column and can be supported by SQLXML.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="b6b04-142">另請參閱</span><span class="sxs-lookup"><span data-stu-id="b6b04-142">See Also</span></span>  
 [<span data-ttu-id="b6b04-143">XML 資料 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="b6b04-143">XML Data &#40;SQL Server&#41;</span></span>](../xml/xml-data-sql-server.md)  
  
  
