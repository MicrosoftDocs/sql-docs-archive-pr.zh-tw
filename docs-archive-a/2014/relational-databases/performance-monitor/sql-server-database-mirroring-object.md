---
title: SQL Server 的 Database Mirroring 物件 | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: performance
ms.topic: conceptual
helpviewer_keywords:
- SQLServer:Database Mirroring
- database mirroring [SQL Server], performance counters
- performance counters [SQL Server], database mirroring
- Database Mirroring object
ms.assetid: a27b51ee-7637-4525-9424-bcc16947dc13
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 4d4b1b9af5bced6933745d4214d3abcc15af4a60
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87598299"
---
# <a name="sql-server-database-mirroring-object"></a><span data-ttu-id="d1b88-102">SQL Server 的 Database Mirroring 物件</span><span class="sxs-lookup"><span data-stu-id="d1b88-102">SQL Server, Database Mirroring Object</span></span>
  <span data-ttu-id="d1b88-103">**SQLServer:Database Mirroring** 效能物件含有效能計數器，可報告 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 資料庫鏡像的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="d1b88-103">The **SQLServer:Database Mirroring** performance object contains performance counters that report information about [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database mirroring.</span></span> <span data-ttu-id="d1b88-104">下表列出這個物件包含的計數器。</span><span class="sxs-lookup"><span data-stu-id="d1b88-104">The table below lists the counters that this object contains.</span></span>  
  
|<span data-ttu-id="d1b88-105">Name</span><span class="sxs-lookup"><span data-stu-id="d1b88-105">Name</span></span>|<span data-ttu-id="d1b88-106">描述</span><span class="sxs-lookup"><span data-stu-id="d1b88-106">Description</span></span>|  
|----------|-----------------|  
|<span data-ttu-id="d1b88-107">**Bytes Received/sec**</span><span class="sxs-lookup"><span data-stu-id="d1b88-107">**Bytes Received/sec**</span></span>|<span data-ttu-id="d1b88-108">每秒接收的位元組數目。</span><span class="sxs-lookup"><span data-stu-id="d1b88-108">Number of bytes received per second.</span></span>|  
|<span data-ttu-id="d1b88-109">**Bytes Sent/sec**</span><span class="sxs-lookup"><span data-stu-id="d1b88-109">**Bytes Sent/sec**</span></span>|<span data-ttu-id="d1b88-110">每秒傳送的位元組數目。</span><span class="sxs-lookup"><span data-stu-id="d1b88-110">Number of bytes sent per second.</span></span>|  
|<span data-ttu-id="d1b88-111">**Log Bytes Received/sec**</span><span class="sxs-lookup"><span data-stu-id="d1b88-111">**Log Bytes Received/sec**</span></span>|<span data-ttu-id="d1b88-112">每秒接收的記錄位元組數目。</span><span class="sxs-lookup"><span data-stu-id="d1b88-112">Number of bytes of log received per second.</span></span>|  
|<span data-ttu-id="d1b88-113">**Log Bytes Redone from Cache/sec**</span><span class="sxs-lookup"><span data-stu-id="d1b88-113">**Log Bytes Redone from Cache/sec**</span></span>|<span data-ttu-id="d1b88-114">上一秒從鏡像記錄快取中取得的重做記錄位元組數目。</span><span class="sxs-lookup"><span data-stu-id="d1b88-114">Number of redone log bytes that were obtained from the mirroring log cache, in the last second.</span></span><br /><br /> <span data-ttu-id="d1b88-115">這個計數器只會用於鏡像伺服器。</span><span class="sxs-lookup"><span data-stu-id="d1b88-115">This counter is used on only the mirror server.</span></span> <span data-ttu-id="d1b88-116">在主體伺服器上，這個值一定是 0。</span><span class="sxs-lookup"><span data-stu-id="d1b88-116">On the principal server the value is always 0.</span></span>|  
|<span data-ttu-id="d1b88-117">**Log Bytes Sent from Cache/sec**</span><span class="sxs-lookup"><span data-stu-id="d1b88-117">**Log Bytes Sent from Cache/sec**</span></span>|<span data-ttu-id="d1b88-118">上一秒從鏡像記錄快取中取得的傳送記錄位元組數目。</span><span class="sxs-lookup"><span data-stu-id="d1b88-118">Number of sent log bytes that were obtained from the mirroring log cache, in the last second.</span></span><br /><br /> <span data-ttu-id="d1b88-119">這個計數器只會用於主體伺服器。</span><span class="sxs-lookup"><span data-stu-id="d1b88-119">This counter is used on only the principal server.</span></span> <span data-ttu-id="d1b88-120">在鏡像伺服器上，這個值一定是 0。</span><span class="sxs-lookup"><span data-stu-id="d1b88-120">On the mirror server the value is always 0.</span></span>|  
|<span data-ttu-id="d1b88-121">**Log Bytes Sent/sec**</span><span class="sxs-lookup"><span data-stu-id="d1b88-121">**Log Bytes Sent/sec**</span></span>|<span data-ttu-id="d1b88-122">每秒傳送的記錄位元組數目。</span><span class="sxs-lookup"><span data-stu-id="d1b88-122">Number of bytes of log sent per second.</span></span>|  
|<span data-ttu-id="d1b88-123">**Log Compressed Bytes Rcvd/sec**</span><span class="sxs-lookup"><span data-stu-id="d1b88-123">**Log Compressed Bytes Rcvd/sec**</span></span>|<span data-ttu-id="d1b88-124">上一秒接收的壓縮記錄位元組數目。</span><span class="sxs-lookup"><span data-stu-id="d1b88-124">Number of compressed bytes of log received, in the last second.</span></span>|  
|<span data-ttu-id="d1b88-125">**Log Compressed Bytes Sent/sec**</span><span class="sxs-lookup"><span data-stu-id="d1b88-125">**Log Compressed Bytes Sent/sec**</span></span>|<span data-ttu-id="d1b88-126">上一秒傳送的壓縮記錄位元組數目。</span><span class="sxs-lookup"><span data-stu-id="d1b88-126">Number of compressed bytes of log sent, in the last second.</span></span>|  
|<span data-ttu-id="d1b88-127">**Log Harden Time (ms)**</span><span class="sxs-lookup"><span data-stu-id="d1b88-127">**Log Harden Time (ms)**</span></span>|<span data-ttu-id="d1b88-128">上一秒等候將記錄區塊強行寫入磁碟的毫秒數。</span><span class="sxs-lookup"><span data-stu-id="d1b88-128">Milliseconds that log blocks waited to be hardened to disk, in the last second.</span></span>|  
|<span data-ttu-id="d1b88-129">**Log Remaining for Undo KB**</span><span class="sxs-lookup"><span data-stu-id="d1b88-129">**Log Remaining for Undo KB**</span></span>|<span data-ttu-id="d1b88-130">新的鏡像伺服器在容錯移轉之後仍然要掃描的記錄 KB 總數。</span><span class="sxs-lookup"><span data-stu-id="d1b88-130">Total kilobytes of log that remain to be scanned by the new mirror server after failover.</span></span><br /><br /> <span data-ttu-id="d1b88-131">這個計數器只會在恢復階段用於鏡像伺服器。</span><span class="sxs-lookup"><span data-stu-id="d1b88-131">This counter is used on only the mirror server during the undo phase.</span></span> <span data-ttu-id="d1b88-132">當恢復階段完成之後，此計數器會重設為 0。</span><span class="sxs-lookup"><span data-stu-id="d1b88-132">After the undo phase completes, the counter is reset to 0.</span></span> <span data-ttu-id="d1b88-133">在主體伺服器上，這個值一定是 0。</span><span class="sxs-lookup"><span data-stu-id="d1b88-133">On the principal server the value is always 0.</span></span>|  
|<span data-ttu-id="d1b88-134">**Log Scanned for Undo KB**</span><span class="sxs-lookup"><span data-stu-id="d1b88-134">**Log Scanned for Undo KB**</span></span>|<span data-ttu-id="d1b88-135">新的鏡像伺服器在容錯移轉之後已經掃描的記錄 KB 總數。</span><span class="sxs-lookup"><span data-stu-id="d1b88-135">Total kilobytes of log that have been scanned by the new mirror server since failover.</span></span><br /><br /> <span data-ttu-id="d1b88-136">這個計數器只會在恢復階段用於鏡像伺服器。</span><span class="sxs-lookup"><span data-stu-id="d1b88-136">This counter is used on only the mirror server during the undo phase.</span></span> <span data-ttu-id="d1b88-137">當恢復階段完成之後，此計數器會重設為 0。</span><span class="sxs-lookup"><span data-stu-id="d1b88-137">After the undo phase completes, the counter is reset to 0.</span></span> <span data-ttu-id="d1b88-138">在主體伺服器上，這個值一定是 0。</span><span class="sxs-lookup"><span data-stu-id="d1b88-138">On the principal server the value is always 0.</span></span>|  
|<span data-ttu-id="d1b88-139">**Log Send Flow Control Time (ms)**</span><span class="sxs-lookup"><span data-stu-id="d1b88-139">**Log Send Flow Control Time (ms)**</span></span>|<span data-ttu-id="d1b88-140">上一秒記錄資料流訊息等候傳送流量控制的毫秒數。</span><span class="sxs-lookup"><span data-stu-id="d1b88-140">Milliseconds that log stream messages waited for send flow control, in the last second.</span></span><br /><br /> <span data-ttu-id="d1b88-141">將記錄資料和中繼資料傳送給鏡像夥伴伺服器是資料庫鏡像中需要最大量資料的作業，而且可能會獨佔資料庫鏡像和 Service Broker 傳送緩衝區。</span><span class="sxs-lookup"><span data-stu-id="d1b88-141">Sending log data and metadata to the mirroring partner is the most data-intensive operation in database mirroring and might monopolize the database mirroring and Service Broker send buffers.</span></span> <span data-ttu-id="d1b88-142">使用此計數器可監視資料庫鏡像工作階段對於這個緩衝區的使用。</span><span class="sxs-lookup"><span data-stu-id="d1b88-142">Use this counter to monitor the use of this buffer by the database mirroring session.</span></span>|  
|<span data-ttu-id="d1b88-143">**Log Send Queue KB**</span><span class="sxs-lookup"><span data-stu-id="d1b88-143">**Log Send Queue KB**</span></span>|<span data-ttu-id="d1b88-144">尚未傳送到鏡像伺服器之記錄的 KB 總數。</span><span class="sxs-lookup"><span data-stu-id="d1b88-144">Total number of kilobytes of log that have not yet been sent to the mirror server.</span></span>|  
|<span data-ttu-id="d1b88-145">**Mirrored Write Transactions/sec**</span><span class="sxs-lookup"><span data-stu-id="d1b88-145">**Mirrored Write Transactions/sec**</span></span>|<span data-ttu-id="d1b88-146">上一秒寫入鏡像資料庫，並等候記錄傳送到鏡像端進行認可的交易數目。</span><span class="sxs-lookup"><span data-stu-id="d1b88-146">Number of transactions that wrote to the mirrored database and waited for the log to be sent to the mirror in order to commit, in the last second.</span></span><br /><br /> <span data-ttu-id="d1b88-147">只有當主體伺服器主動傳送記錄檔記錄到鏡像伺服器時，這個計數器才會遞增。</span><span class="sxs-lookup"><span data-stu-id="d1b88-147">This counter is incremented only when the principal server is actively sending log records to the mirror server.</span></span>|  
|<span data-ttu-id="d1b88-148">**Pages Sent/sec**</span><span class="sxs-lookup"><span data-stu-id="d1b88-148">**Pages Sent/sec**</span></span>|<span data-ttu-id="d1b88-149">每秒傳送的頁數。</span><span class="sxs-lookup"><span data-stu-id="d1b88-149">Number of pages sent per second.</span></span>|  
|<span data-ttu-id="d1b88-150">**Receives/sec**</span><span class="sxs-lookup"><span data-stu-id="d1b88-150">**Receives/sec**</span></span>|<span data-ttu-id="d1b88-151">每秒接收的鏡像訊息數目。</span><span class="sxs-lookup"><span data-stu-id="d1b88-151">Number of mirroring messages received per second.</span></span>|  
|<span data-ttu-id="d1b88-152">**Redo Bytes/sec**</span><span class="sxs-lookup"><span data-stu-id="d1b88-152">**Redo Bytes/sec**</span></span>|<span data-ttu-id="d1b88-153">每秒在鏡像資料庫向前復原的記錄位元組數目。</span><span class="sxs-lookup"><span data-stu-id="d1b88-153">Number of bytes of log rolled forward on the mirror database per second.</span></span>|  
|<span data-ttu-id="d1b88-154">**Redo Queue KB**</span><span class="sxs-lookup"><span data-stu-id="d1b88-154">**Redo Queue KB**</span></span>|<span data-ttu-id="d1b88-155">目前仍套用到鏡像資料庫以便向前復原的強化記錄 KB 總數。</span><span class="sxs-lookup"><span data-stu-id="d1b88-155">Total number of kilobytes of hardened log that currently remain to be applied to the mirror database to roll it forward.</span></span> <span data-ttu-id="d1b88-156">這是從鏡像端傳送到主體端。</span><span class="sxs-lookup"><span data-stu-id="d1b88-156">This is sent to the Principal from the Mirror.</span></span>|  
|<span data-ttu-id="d1b88-157">**Send/Receive Ack Time**</span><span class="sxs-lookup"><span data-stu-id="d1b88-157">**Send/Receive Ack Time**</span></span>|<span data-ttu-id="d1b88-158">訊息在上一秒等候來自夥伴之收條的毫秒數。</span><span class="sxs-lookup"><span data-stu-id="d1b88-158">Milliseconds that messages waited for acknowledgement from the partner, in the last second.</span></span><br /><br /> <span data-ttu-id="d1b88-159">這個計數器對於排解可能由網路瓶頸造成的問題很有幫助，例如無法解釋的容錯移轉、大型傳送佇列或高度交易延遲等問題。</span><span class="sxs-lookup"><span data-stu-id="d1b88-159">This counter is helpful in troubleshooting a problem that might be caused by a network bottleneck, such as unexplained failovers, a large send queue, or high transaction latency.</span></span> <span data-ttu-id="d1b88-160">在這類情況下，您可以分析此計數器的值，以判斷網路是否發生問題。</span><span class="sxs-lookup"><span data-stu-id="d1b88-160">In such cases, you can analyze the value of this counter to determine whether the network is causing the problem.</span></span>|  
|<span data-ttu-id="d1b88-161">**Sends/sec**</span><span class="sxs-lookup"><span data-stu-id="d1b88-161">**Sends/sec**</span></span>|<span data-ttu-id="d1b88-162">每秒傳送的鏡像訊息數目。</span><span class="sxs-lookup"><span data-stu-id="d1b88-162">Number of mirroring messages sent per second.</span></span>|  
|<span data-ttu-id="d1b88-163">**Transaction Delay**</span><span class="sxs-lookup"><span data-stu-id="d1b88-163">**Transaction Delay**</span></span>|<span data-ttu-id="d1b88-164">等候未終止之認可收條的延遲時間。</span><span class="sxs-lookup"><span data-stu-id="d1b88-164">Delay in waiting for unterminated commit acknowledgement.</span></span>|  
  
> [!NOTE]  
>  <span data-ttu-id="d1b88-165">在每一個夥伴伺服器上，有些計數器會顯示零值，這是依據夥伴伺服器目前正在執行的角色而定。</span><span class="sxs-lookup"><span data-stu-id="d1b88-165">On each partner, some of the counters show a zero value depending on what role the partner is currently performing.</span></span>  
  
## <a name="remarks"></a><span data-ttu-id="d1b88-166">備註</span><span class="sxs-lookup"><span data-stu-id="d1b88-166">Remarks</span></span>  
 <span data-ttu-id="d1b88-167">效能計數器可讓您監視資料庫鏡像效能。</span><span class="sxs-lookup"><span data-stu-id="d1b88-167">The performance counters let you monitor database mirroring performance.</span></span> <span data-ttu-id="d1b88-168">例如，您可以檢查 **[Transaction Delay]** 計數器，以查看資料庫鏡像是否影響主體伺服器的效能；您可以檢查 **[Redo Queue]** 與 **[Log Send Queue]** 計數器，以查看鏡像資料庫是否跟得上主體資料庫。</span><span class="sxs-lookup"><span data-stu-id="d1b88-168">For example, you can examine the **Transaction Delay** counter to see if database mirroring is impacting performance on the principal server, you can examine the **Redo Queue** and **Log Send Queue** counters to see how well the mirror database is keeping up with the principal database.</span></span> <span data-ttu-id="d1b88-169">您可以檢查 [Log Bytes Sent/sec]  計數器，以監視每秒傳送的記錄量。</span><span class="sxs-lookup"><span data-stu-id="d1b88-169">You can examine the **Log Bytes Sent/sec** counter to monitor the amount of log sent per second.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d1b88-170">另請參閱</span><span class="sxs-lookup"><span data-stu-id="d1b88-170">See Also</span></span>  
 [<span data-ttu-id="d1b88-171">監視資源使用狀況 &#40;System Monitor&#41;</span><span class="sxs-lookup"><span data-stu-id="d1b88-171">Monitor Resource Usage &#40;System Monitor&#41;</span></span>](monitor-resource-usage-system-monitor.md)  
  
  
