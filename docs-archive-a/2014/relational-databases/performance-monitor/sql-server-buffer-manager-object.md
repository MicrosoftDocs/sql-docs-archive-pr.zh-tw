---
title: SQL Server 的 Buffer Manager 物件 | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: performance
ms.topic: conceptual
helpviewer_keywords:
- Buffer Manager object
- SQLServer:Buffer Manager
ms.assetid: 9775ebde-111d-476c-9188-b77805f90e98
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: cc473447934b6274e0d202f6240634fb00d90491
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87594974"
---
# <a name="sql-server-buffer-manager-object"></a><span data-ttu-id="7ae00-102">SQL Server 的 Buffer Manager 物件</span><span class="sxs-lookup"><span data-stu-id="7ae00-102">SQL Server, Buffer Manager Object</span></span>
  <span data-ttu-id="7ae00-103">**Buffer Manager** 物件提供了可監視 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 使用情形的計數器：</span><span class="sxs-lookup"><span data-stu-id="7ae00-103">The **Buffer Manager** object provides counters to monitor how [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] uses:</span></span>  
  
-   <span data-ttu-id="7ae00-104">要儲存資料頁的記憶體。</span><span class="sxs-lookup"><span data-stu-id="7ae00-104">Memory to store data pages.</span></span>  
  
-   <span data-ttu-id="7ae00-105">在 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 讀取和寫入資料庫頁面時，監視實體 I/O 的計數器。</span><span class="sxs-lookup"><span data-stu-id="7ae00-105">Counters to monitor the physical I/O as [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] reads and writes database pages.</span></span>  
  
-   <span data-ttu-id="7ae00-106">緩衝集區延伸模組，透過使用快速靜態儲存區 (例如固態硬碟 (SSD)) 來擴充緩衝快取。</span><span class="sxs-lookup"><span data-stu-id="7ae00-106">Buffer pool extension to extend the buffer cache by using fast non-volatile storage such as solid-state drives (SSD).</span></span>  
  
 <span data-ttu-id="7ae00-107">監視 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 所使用的記憶體與計數器有助於判斷：</span><span class="sxs-lookup"><span data-stu-id="7ae00-107">Monitoring the memory and the counters used by [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] helps you determine:</span></span>  
  
-   <span data-ttu-id="7ae00-108">是否因實體記憶體不足而產生瓶頸。</span><span class="sxs-lookup"><span data-stu-id="7ae00-108">If bottlenecks exist from inadequate physical memory.</span></span> <span data-ttu-id="7ae00-109">是否無法將經常存取的資料儲存在快取中，使 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 必須從磁碟中擷取資料。</span><span class="sxs-lookup"><span data-stu-id="7ae00-109">If it cannot store frequently accessed data in cache, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] must retrieve the data from disk.</span></span>  
  
-   <span data-ttu-id="7ae00-110">是否可藉由增加更多記憶體，或讓資料快取或 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 內部結構可使用更多記憶體，而改善查詢效能。</span><span class="sxs-lookup"><span data-stu-id="7ae00-110">If query performance can be improved by adding more memory, or by making more memory available to the data cache or [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] internal structures.</span></span>  
  
-   <span data-ttu-id="7ae00-111">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 須自磁碟中讀取資料的頻率。</span><span class="sxs-lookup"><span data-stu-id="7ae00-111">How often [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] needs to read data from disk.</span></span> <span data-ttu-id="7ae00-112">和其他的作業相比 (例如記憶體存取)，實體 I/O 消耗的時間更多。</span><span class="sxs-lookup"><span data-stu-id="7ae00-112">Compared with other operations, such as memory access, physical I/O consumes a lot of time.</span></span> <span data-ttu-id="7ae00-113">將實體 I/O 最小化可改善查詢的效能。</span><span class="sxs-lookup"><span data-stu-id="7ae00-113">Minimizing physical I/O can improve query performance.</span></span>  
  
## <a name="buffer-manager-performance-objects"></a><span data-ttu-id="7ae00-114">Buffer Manager 效能物件</span><span class="sxs-lookup"><span data-stu-id="7ae00-114">Buffer Manager Performance Objects</span></span>  
 <span data-ttu-id="7ae00-115">下表描述 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] **Buffer Manager** 效能物件。</span><span class="sxs-lookup"><span data-stu-id="7ae00-115">This table describes the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] **Buffer Manager** performance objects.</span></span>  
  
|<span data-ttu-id="7ae00-116">SQL Server Buffer Manager 計數器</span><span class="sxs-lookup"><span data-stu-id="7ae00-116">SQL Server Buffer Manager counters</span></span>|<span data-ttu-id="7ae00-117">描述</span><span class="sxs-lookup"><span data-stu-id="7ae00-117">Description</span></span>|  
|----------------------------------------|-----------------|  
|<span data-ttu-id="7ae00-118">**Buffer cache hit ratio**</span><span class="sxs-lookup"><span data-stu-id="7ae00-118">**Buffer cache hit ratio**</span></span>|<span data-ttu-id="7ae00-119">表示不需讀取磁碟即可在緩衝區快取中找到之頁面的百分比。</span><span class="sxs-lookup"><span data-stu-id="7ae00-119">Indicates the percentage of pages found in the buffer cache without having to read from disk.</span></span> <span data-ttu-id="7ae00-120">此比率是過去數千個分頁存取中，快取叫用總數除以快取查閱所得的結果。</span><span class="sxs-lookup"><span data-stu-id="7ae00-120">The ratio is the total number of cache hits divided by the total number of cache lookups over the last few thousand page accesses.</span></span> <span data-ttu-id="7ae00-121">時間一久，比率的變動會越來越小。</span><span class="sxs-lookup"><span data-stu-id="7ae00-121">After a long period of time, the ratio moves very little.</span></span> <span data-ttu-id="7ae00-122">從快取讀取遠比從磁碟讀取節省成本，因此您會希望此比率越高越好。</span><span class="sxs-lookup"><span data-stu-id="7ae00-122">Because reading from the cache is much less expensive than reading from disk, you want this ratio to be high.</span></span> <span data-ttu-id="7ae00-123">通常，您可以藉由增加 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 可用的記憶體數量或是使用緩衝集區擴充功能，來提高緩衝區快取叫用比率。</span><span class="sxs-lookup"><span data-stu-id="7ae00-123">Generally, you can increase the buffer cache hit ratio by increasing the amount of memory available to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] or by using the buffer pool extension feature.</span></span>|  
|<span data-ttu-id="7ae00-124">**Checkpoint pages/sec**</span><span class="sxs-lookup"><span data-stu-id="7ae00-124">**Checkpoint pages/sec**</span></span>|<span data-ttu-id="7ae00-125">表示每秒經由檢查點或其他導致所有變更分頁排清至磁碟的作業所轉存至磁碟的分頁數。</span><span class="sxs-lookup"><span data-stu-id="7ae00-125">Indicates the number of pages flushed to disk per second by a checkpoint or other operation that require all dirty pages to be flushed.</span></span>|  
|<span data-ttu-id="7ae00-126">**Database pages**</span><span class="sxs-lookup"><span data-stu-id="7ae00-126">**Database pages**</span></span>|<span data-ttu-id="7ae00-127">表示具有資料庫內容之緩衝集區的頁面數。</span><span class="sxs-lookup"><span data-stu-id="7ae00-127">Indicates the number of pages in the buffer pool with database content.</span></span>|  
|<span data-ttu-id="7ae00-128">**延伸模組配置的頁面**</span><span class="sxs-lookup"><span data-stu-id="7ae00-128">**Extension allocated pages**</span></span>|<span data-ttu-id="7ae00-129">緩衝集區延伸模組檔案中非可用的快取頁面總數。</span><span class="sxs-lookup"><span data-stu-id="7ae00-129">Total number of non-free cache pages in the buffer pool extension file.</span></span>|  
|<span data-ttu-id="7ae00-130">**延伸模組可用頁面**</span><span class="sxs-lookup"><span data-stu-id="7ae00-130">**Extension free pages**</span></span>|<span data-ttu-id="7ae00-131">緩衝集區延伸模組檔案中可用的快取頁面總數。</span><span class="sxs-lookup"><span data-stu-id="7ae00-131">Total number of free cache pages in the buffer pool extension file.</span></span>|  
|<span data-ttu-id="7ae00-132">**使用中的延伸模組百分比**</span><span class="sxs-lookup"><span data-stu-id="7ae00-132">**Extension in use as percentage**</span></span>|<span data-ttu-id="7ae00-133">緩衝區管理員頁面所佔用之緩衝集區延伸模組分頁檔的百分比。</span><span class="sxs-lookup"><span data-stu-id="7ae00-133">Percentage of the buffer pool extension paging file occupied by buffer manager pages.</span></span>|  
|<span data-ttu-id="7ae00-134">**延伸模組未完成的 IO 計數器**</span><span class="sxs-lookup"><span data-stu-id="7ae00-134">**Extension outstanding IO counter**</span></span>|<span data-ttu-id="7ae00-135">緩衝集區擴充檔的 I/O 佇列長度。</span><span class="sxs-lookup"><span data-stu-id="7ae00-135">I/O queue length for the buffer pool extension file.</span></span>|  
|<span data-ttu-id="7ae00-136">**每秒的延伸模組頁面收回數目**</span><span class="sxs-lookup"><span data-stu-id="7ae00-136">**Extension page evictions/sec**</span></span>|<span data-ttu-id="7ae00-137">每秒從緩衝集區延伸模組檔案收回的頁數。</span><span class="sxs-lookup"><span data-stu-id="7ae00-137">Number of pages evicted from the buffer pool extension file per second.</span></span>|  
|<span data-ttu-id="7ae00-138">**每秒的延伸模組頁面讀取數**</span><span class="sxs-lookup"><span data-stu-id="7ae00-138">**Extension page reads/sec**</span></span>|<span data-ttu-id="7ae00-139">每秒從緩衝集區延伸模組檔案讀取的頁數。</span><span class="sxs-lookup"><span data-stu-id="7ae00-139">Number of pages read from the buffer pool extension file per second.</span></span>|  
|<span data-ttu-id="7ae00-140">**延伸模組頁面未參考的時間**</span><span class="sxs-lookup"><span data-stu-id="7ae00-140">**Extension page unreferenced time**</span></span>|<span data-ttu-id="7ae00-141">表示頁面將停留在這個沒有參考之緩衝集區延伸模組中的平均秒數。</span><span class="sxs-lookup"><span data-stu-id="7ae00-141">Average seconds a page will stay in the buffer pool extension without references to it.</span></span>|  
|<span data-ttu-id="7ae00-142">**每秒的延伸模組頁面寫入數**</span><span class="sxs-lookup"><span data-stu-id="7ae00-142">**Extension pages writes/sec**</span></span>|<span data-ttu-id="7ae00-143">每秒寫入緩衝集區延伸模組檔案的頁數。</span><span class="sxs-lookup"><span data-stu-id="7ae00-143">Number of pages written to the buffer pool extension file per second.</span></span>|  
|<span data-ttu-id="7ae00-144">**Free list stalls/sec**</span><span class="sxs-lookup"><span data-stu-id="7ae00-144">**Free list stalls/sec**</span></span>|<span data-ttu-id="7ae00-145">表示每秒鐘必須等待可用頁面的要求數。</span><span class="sxs-lookup"><span data-stu-id="7ae00-145">Indicates the number of requests per second that had to wait for a free page.</span></span>|  
|<span data-ttu-id="7ae00-146">**Lazy writes/sec**</span><span class="sxs-lookup"><span data-stu-id="7ae00-146">**Lazy writes/sec**</span></span>|<span data-ttu-id="7ae00-147">表示每秒鐘由緩衝區管理員的延遲寫入器所寫入的緩衝區數目。</span><span class="sxs-lookup"><span data-stu-id="7ae00-147">Indicates the number of buffers written per second by the buffer manager's lazy writer.</span></span> <span data-ttu-id="7ae00-148">「延遲寫入器」是一種系統處理序，可排清整批已變更且過時的緩衝區 (這種緩衝區包含必須重新寫入磁碟以便讓緩衝區可重複用於其他頁面的變更)，使其可供使用者處理序使用。</span><span class="sxs-lookup"><span data-stu-id="7ae00-148">The *lazy writer* is a system process that flushes out batches of dirty, aged buffers (buffers that contain changes that must be written back to disk before the buffer can be reused for a different page) and makes them available to user processes.</span></span> <span data-ttu-id="7ae00-149">使用延遲寫入器，即不需經常執行檢查點來建立可用的緩衝區。</span><span class="sxs-lookup"><span data-stu-id="7ae00-149">The lazy writer eliminates the need to perform frequent checkpoints in order to create available buffers.</span></span>|  
|<span data-ttu-id="7ae00-150">**Page life expectancy**</span><span class="sxs-lookup"><span data-stu-id="7ae00-150">**Page life expectancy**</span></span>|<span data-ttu-id="7ae00-151">表示頁面停留在這個沒有參考之緩衝集區中的秒數。</span><span class="sxs-lookup"><span data-stu-id="7ae00-151">Indicates the number of seconds a page will stay in the buffer pool without references.</span></span>|  
|<span data-ttu-id="7ae00-152">**Page lookups/sec**</span><span class="sxs-lookup"><span data-stu-id="7ae00-152">**Page lookups/sec**</span></span>|<span data-ttu-id="7ae00-153">表示每秒鐘在緩衝集區中尋找頁面的要求數。</span><span class="sxs-lookup"><span data-stu-id="7ae00-153">Indicates the number of requests per second to find a page in the buffer pool.</span></span>|  
|<span data-ttu-id="7ae00-154">**Page reads/sec**</span><span class="sxs-lookup"><span data-stu-id="7ae00-154">**Page reads/sec**</span></span>|<span data-ttu-id="7ae00-155">表示每秒鐘發出的實體資料庫頁面讀取數。</span><span class="sxs-lookup"><span data-stu-id="7ae00-155">Indicates the number of physical database page reads that are issued per second.</span></span> <span data-ttu-id="7ae00-156">這項統計資料可顯示所有資料庫的實體頁面讀取總數。</span><span class="sxs-lookup"><span data-stu-id="7ae00-156">This statistic displays the total number of physical page reads across all databases.</span></span> <span data-ttu-id="7ae00-157">由於實體 I/O 成本很高，因此您可以藉由使用較大的資料快取、智慧型索引、和較有效的查詢，或藉由變更資料庫設計，盡可能降低成本。</span><span class="sxs-lookup"><span data-stu-id="7ae00-157">Because physical I/O is expensive, you may be able to minimize the cost, either by using a larger data cache, intelligent indexes, and more efficient queries, or by changing the database design.</span></span>|  
|<span data-ttu-id="7ae00-158">**Page writes/sec**</span><span class="sxs-lookup"><span data-stu-id="7ae00-158">**Page writes/sec**</span></span>|<span data-ttu-id="7ae00-159">表示每秒鐘發出的實體資料庫頁面寫入數。</span><span class="sxs-lookup"><span data-stu-id="7ae00-159">Indicates the number of physical database page writes that are issued per second.</span></span>|  
|<span data-ttu-id="7ae00-160">**Readahead pages/sec**</span><span class="sxs-lookup"><span data-stu-id="7ae00-160">**Readahead pages/sec**</span></span>|<span data-ttu-id="7ae00-161">表示每秒鐘預期會使用而讀取的頁數。</span><span class="sxs-lookup"><span data-stu-id="7ae00-161">Indicates the number of pages read per second in anticipation of use.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="7ae00-162">另請參閱</span><span class="sxs-lookup"><span data-stu-id="7ae00-162">See Also</span></span>  
 <span data-ttu-id="7ae00-163">[SQL Server:Buffer Node](sql-server-buffer-node.md) </span><span class="sxs-lookup"><span data-stu-id="7ae00-163">[SQL Server:Buffer Node](sql-server-buffer-node.md) </span></span>  
 <span data-ttu-id="7ae00-164">[伺服器記憶體伺服器組態選項](../../database-engine/configure-windows/server-memory-server-configuration-options.md) </span><span class="sxs-lookup"><span data-stu-id="7ae00-164">[Server Memory Server Configuration Options](../../database-engine/configure-windows/server-memory-server-configuration-options.md) </span></span>  
 <span data-ttu-id="7ae00-165">[SQL Server 的 Plan Cache 物件](sql-server-plan-cache-object.md) </span><span class="sxs-lookup"><span data-stu-id="7ae00-165">[SQL Server, Plan Cache Object](sql-server-plan-cache-object.md) </span></span>  
 <span data-ttu-id="7ae00-166">[監視資源使用量 &#40;系統監視器&#41;](monitor-resource-usage-system-monitor.md) </span><span class="sxs-lookup"><span data-stu-id="7ae00-166">[Monitor Resource Usage &#40;System Monitor&#41;](monitor-resource-usage-system-monitor.md) </span></span>  
 <span data-ttu-id="7ae00-167">[sys.dm_os_performance_counters &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-os-performance-counters-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="7ae00-167">[sys.dm_os_performance_counters &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-os-performance-counters-transact-sql) </span></span>  
 [<span data-ttu-id="7ae00-168">緩衝集區擴充</span><span class="sxs-lookup"><span data-stu-id="7ae00-168">Buffer Pool Extension</span></span>](../../database-engine/configure-windows/buffer-pool-extension.md)  
  
  
