---
title: SQL Server 的 Transactions 物件 | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: performance
ms.topic: conceptual
helpviewer_keywords:
- SQLServer:Transactions
- Transactions object
ms.assetid: 85240267-78fd-476a-9ef6-010d6cf32dd8
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 73071af197c042bf6ef044d6b9a625cffde296e9
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87687794"
---
# <a name="sql-server-transactions-object"></a><span data-ttu-id="47296-102">SQL Server 的 Transactions 物件</span><span class="sxs-lookup"><span data-stu-id="47296-102">SQL Server, Transactions Object</span></span>
  <span data-ttu-id="47296-103">Microsoft [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 中的 **Transactions** 物件會提供計數器，可監視[!INCLUDE[ssDE](../../includes/ssde-md.md)]執行個體的使用中交易數，以及這些交易在資源上產生的影響，例如 **tempdb** 中的快照隔離資料列版本存放區。</span><span class="sxs-lookup"><span data-stu-id="47296-103">The **Transactions** object in Microsoft [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] provides counters to monitor the number of transactions active in an instance of the [!INCLUDE[ssDE](../../includes/ssde-md.md)], and the effects of those transactions on resources such as the snapshot isolation row version store in **tempdb**.</span></span> <span data-ttu-id="47296-104">交易是邏輯工作單位；必須全部成功或全部從資料庫清除的一組作業，才能維持資料的邏輯完整性。</span><span class="sxs-lookup"><span data-stu-id="47296-104">Transactions are logical units of work; a set of operations that must either all succeed or all be erased from a database in order to maintain the logical integrity of the data.</span></span> <span data-ttu-id="47296-105">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 資料庫中的所有資料修改都是透過交易來完成。</span><span class="sxs-lookup"><span data-stu-id="47296-105">All modifications of data in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] databases are made in transactions.</span></span>  
  
 <span data-ttu-id="47296-106">資料庫設定為允許快照隔離等級時， [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 必須維護資料庫中每個資料列的修改記錄。</span><span class="sxs-lookup"><span data-stu-id="47296-106">When a database is set to allow snapshot isolation level, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] must maintain a record of the modifications made to each row in a database.</span></span> <span data-ttu-id="47296-107">每次修改資料列時， **tempdb**的資料列版本存放區會記錄修改之前的資料列副本。</span><span class="sxs-lookup"><span data-stu-id="47296-107">Each time a row is modified, a copy of the row as it existed before the modification is recorded in a row version store in **tempdb**.</span></span> <span data-ttu-id="47296-108">**Transaction** 物件中有許多計數器，可用來監視 **tempdb**中資料列版本存放區的大小和成長率。</span><span class="sxs-lookup"><span data-stu-id="47296-108">Many of the counters in the **Transaction** object can be used to monitor the size and rate of growth of the row version store in **tempdb**.</span></span>  
  
 <span data-ttu-id="47296-109">**Transactions** 物件計數器會報告一個 [!INCLUDE[ssDE](../../includes/ssde-md.md)]執行個體中的所有交易。</span><span class="sxs-lookup"><span data-stu-id="47296-109">The **Transactions** object counters report all transactions in one instance of the [!INCLUDE[ssDE](../../includes/ssde-md.md)].</span></span>  
  
 <span data-ttu-id="47296-110">下表描述 **SQLServer:Transactions** 計數器。</span><span class="sxs-lookup"><span data-stu-id="47296-110">This table describes the **SQLServer:Transactions** counters.</span></span>  
  
|<span data-ttu-id="47296-111">SQL Server Transactions 計數器</span><span class="sxs-lookup"><span data-stu-id="47296-111">SQL Server Transactions counters</span></span>|<span data-ttu-id="47296-112">描述</span><span class="sxs-lookup"><span data-stu-id="47296-112">Description</span></span>|  
|--------------------------------------|-----------------|  
|<span data-ttu-id="47296-113">**Free Space in tempdb (KB)**</span><span class="sxs-lookup"><span data-stu-id="47296-113">**Free Space in tempdb (KB)**</span></span>|<span data-ttu-id="47296-114">**tempdb**中可用的空間量 (以 KB 為單位)。</span><span class="sxs-lookup"><span data-stu-id="47296-114">The amount of space (in kilobytes) available in **tempdb**.</span></span> <span data-ttu-id="47296-115">必須有足夠的可用空間，以容納快照隔離等級版本存放區和這個 [!INCLUDE[ssDE](../../includes/ssde-md.md)]執行個體中建立的所有新暫存物件。</span><span class="sxs-lookup"><span data-stu-id="47296-115">There must be enough free space to hold both the snapshot isolation level version store and all new temporary objects created in this instance of the [!INCLUDE[ssDE](../../includes/ssde-md.md)].</span></span>|  
|<span data-ttu-id="47296-116">**Longest Transaction Running Time**</span><span class="sxs-lookup"><span data-stu-id="47296-116">**Longest Transaction Running Time**</span></span>|<span data-ttu-id="47296-117">自交易啟動以來的時間長度 (以秒為單位)，此交易在其他任何目前的交易中維持最久的使用狀態。</span><span class="sxs-lookup"><span data-stu-id="47296-117">The length of time (in seconds) since the start of the transaction that has been active longer than any other current transaction.</span></span> <span data-ttu-id="47296-118">當資料庫是在讀取認可快照隔離層級之下時，此計數器只會顯示活動。</span><span class="sxs-lookup"><span data-stu-id="47296-118">This counter only shows activity when the database is under read committed snapshot isolation level.</span></span> <span data-ttu-id="47296-119">如果資料庫是在其他任何隔離等級中，則不會記錄任何活動。</span><span class="sxs-lookup"><span data-stu-id="47296-119">It does not log any activity if the database is in any other isolation level.</span></span>|  
|<span data-ttu-id="47296-120">**NonSnapshot Version Transactions**</span><span class="sxs-lookup"><span data-stu-id="47296-120">**NonSnapshot Version Transactions**</span></span>|<span data-ttu-id="47296-121">目前使用中的交易數，這些交易未使用快照隔離等級，且已修改資料而在 **tempdb** 版本存放區產生資料列版本。</span><span class="sxs-lookup"><span data-stu-id="47296-121">The number of currently active transactions that are not using snapshot isolation level and have made data modifications that have generated row versions in the **tempdb** version store.</span></span>|  
|<span data-ttu-id="47296-122">**Snapshot Transactions**</span><span class="sxs-lookup"><span data-stu-id="47296-122">**Snapshot Transactions**</span></span>|<span data-ttu-id="47296-123">目前使用快照隔離等級的使用中交易數。</span><span class="sxs-lookup"><span data-stu-id="47296-123">The number of currently active transactions using the snapshot isolation level.</span></span><br /><br /> <span data-ttu-id="47296-124">注意:**Snapshot Transactions** 物件計數器會在第一次進行資料存取時回應，而不是在發出 `BEGIN TRANSACTION` 陳述式時回應。</span><span class="sxs-lookup"><span data-stu-id="47296-124">Note: The **Snapshot Transactions** object counter responds when the first data access occurs, not when the `BEGIN TRANSACTION` statement is issued.</span></span>|  
|<span data-ttu-id="47296-125">**交易**</span><span class="sxs-lookup"><span data-stu-id="47296-125">**Transactions**</span></span>|<span data-ttu-id="47296-126">目前使用中的所有類型之交易數。</span><span class="sxs-lookup"><span data-stu-id="47296-126">The number of currently active transactions of all types.</span></span>|  
|<span data-ttu-id="47296-127">**Update conflict ratio**</span><span class="sxs-lookup"><span data-stu-id="47296-127">**Update conflict ratio**</span></span>|<span data-ttu-id="47296-128">使用快照隔離等級的交易在上一秒內發生更新衝突的百分比。</span><span class="sxs-lookup"><span data-stu-id="47296-128">The percentage of those transactions using the snapshot isolation level that have encountered update conflicts within the last second.</span></span> <span data-ttu-id="47296-129">快照隔離等級交易嘗試修改資料列時，如果先前有另一個交易已修改此資料列，但在快照隔離等級交易啟動時尚未認可此交易，這時就會發生更新衝突。</span><span class="sxs-lookup"><span data-stu-id="47296-129">An update conflict occurs when a snapshot isolation level transaction attempts to modify a row that last was modified by another transaction that was not committed when the snapshot isolation level transaction started.</span></span>|  
|<span data-ttu-id="47296-130">**Update Snapshot Transactions**</span><span class="sxs-lookup"><span data-stu-id="47296-130">**Update Snapshot Transactions**</span></span>|<span data-ttu-id="47296-131">目前使用快照隔離等級且已修改資料的使用中交易數。</span><span class="sxs-lookup"><span data-stu-id="47296-131">The number of currently active transactions using the snapshot isolation level and have modified data.</span></span>|  
|<span data-ttu-id="47296-132">**Version Cleanup rate (KB/s)**</span><span class="sxs-lookup"><span data-stu-id="47296-132">**Version Cleanup rate (KB/s)**</span></span>|<span data-ttu-id="47296-133">從 **tempdb**的快照隔離版本存放區中移除資料列版本的速度 (KB/sec)。</span><span class="sxs-lookup"><span data-stu-id="47296-133">The rate (in kilobytes per second) at which row versions are removed from the snapshot isolation version store in **tempdb**.</span></span>|  
|<span data-ttu-id="47296-134">**Version Generation rate (KB/s)**</span><span class="sxs-lookup"><span data-stu-id="47296-134">**Version Generation rate (KB/s)**</span></span>|<span data-ttu-id="47296-135">新資料列版本加入 **tempdb**之快照隔離版本存放區的速度 (KB/sec)。</span><span class="sxs-lookup"><span data-stu-id="47296-135">The rate (in kilobytes per second) at which new row versions are added to the snapshot isolation version store in **tempdb**.</span></span>|  
|<span data-ttu-id="47296-136">**Version Store Size (KB)**</span><span class="sxs-lookup"><span data-stu-id="47296-136">**Version Store Size (KB)**</span></span>|<span data-ttu-id="47296-137">**tempdb** 中用來儲存快照隔離等級資料列版本的空間量 (以 KB 為單位)。</span><span class="sxs-lookup"><span data-stu-id="47296-137">The amount of space (in kilobytes) in **tempdb** being used to store snapshot isolation level row versions.</span></span>|  
|<span data-ttu-id="47296-138">**Version Store unit count**</span><span class="sxs-lookup"><span data-stu-id="47296-138">**Version Store unit count**</span></span>|<span data-ttu-id="47296-139">**tempdb**中快照隔離版本存放區的使用中配置單位數。</span><span class="sxs-lookup"><span data-stu-id="47296-139">The number of active allocation units in the snapshot isolation version store in **tempdb**.</span></span>|  
|<span data-ttu-id="47296-140">**Version Store unit creation**</span><span class="sxs-lookup"><span data-stu-id="47296-140">**Version Store unit creation**</span></span>|<span data-ttu-id="47296-141">自從 [!INCLUDE[ssDE](../../includes/ssde-md.md)] 執行個體啟動之後，已在快照隔離存放區中建立的配置單位數。</span><span class="sxs-lookup"><span data-stu-id="47296-141">The number of allocation units that have been created in the snapshot isolation store since the instance of the [!INCLUDE[ssDE](../../includes/ssde-md.md)] was started.</span></span>|  
|<span data-ttu-id="47296-142">**Version Store unit truncation**</span><span class="sxs-lookup"><span data-stu-id="47296-142">**Version Store unit truncation**</span></span>|<span data-ttu-id="47296-143">自從 [!INCLUDE[ssDE](../../includes/ssde-md.md)] 執行個體啟動之後，已從快照隔離存放區中移除的配置單位數。</span><span class="sxs-lookup"><span data-stu-id="47296-143">The number of allocation units that have been removed from the snapshot isolation store since the instance of the [!INCLUDE[ssDE](../../includes/ssde-md.md)] was started.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="47296-144">另請參閱</span><span class="sxs-lookup"><span data-stu-id="47296-144">See Also</span></span>  
 [<span data-ttu-id="47296-145">監視資源使用狀況 &#40;System Monitor&#41;</span><span class="sxs-lookup"><span data-stu-id="47296-145">Monitor Resource Usage &#40;System Monitor&#41;</span></span>](monitor-resource-usage-system-monitor.md)  
  
  
