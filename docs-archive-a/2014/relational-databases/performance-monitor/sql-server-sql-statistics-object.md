---
title: SQL Server 的 SQL Statistics 物件 | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: performance
ms.topic: conceptual
helpviewer_keywords:
- SQLServer:SQL Statistics
- SQL Statistics object
ms.assetid: da7dbb4b-f632-45a0-b1ab-c35cc2695c86
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 8aba118f93a9a4f38179e8e7c5156eecc24012ef
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87687797"
---
# <a name="sql-server-sql-statistics-object"></a><span data-ttu-id="9ebf4-102">SQL Server 的 SQL Statistics 物件</span><span class="sxs-lookup"><span data-stu-id="9ebf4-102">SQL Server, SQL Statistics Object</span></span>
  <span data-ttu-id="9ebf4-103">**的** SQLServer:SQL Statistics [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 物件會提供計數器，可用來監視編譯以及傳送給 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]執行個體的要求類型。</span><span class="sxs-lookup"><span data-stu-id="9ebf4-103">The **SQLServer:SQL Statistics** object in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] provides counters to monitor compilation and the type of requests sent to an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="9ebf4-104">監視查詢編譯和重新編譯的次數，以及 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 執行個體所收到的批次數目，可讓您了解 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 處理使用者查詢的速度，以及查詢最佳化工具處理查詢的效率。</span><span class="sxs-lookup"><span data-stu-id="9ebf4-104">Monitoring the number of query compilations and recompilations and the number of batches received by an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] gives you an indication of how quickly [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is processing user queries and how effectively the query optimizer is processing the queries.</span></span>  
  
 <span data-ttu-id="9ebf4-105">編譯是查詢回覆速度的重要部份。</span><span class="sxs-lookup"><span data-stu-id="9ebf4-105">Compilation is a significant part of a query's turnaround time.</span></span> <span data-ttu-id="9ebf4-106">[!INCLUDE[ssDE](../../includes/ssde-md.md)] 為了節省編譯成本，會將編譯過的查詢計畫儲存在查詢快取中。</span><span class="sxs-lookup"><span data-stu-id="9ebf4-106">In order to save the compilation cost, the [!INCLUDE[ssDE](../../includes/ssde-md.md)] saves the compiled query plan in a query cache.</span></span> <span data-ttu-id="9ebf4-107">快取的目標是減少編譯，透過儲存編譯過的查詢以供日後重複使用，以後執行時便可以省去重新編譯查詢的步驟。</span><span class="sxs-lookup"><span data-stu-id="9ebf4-107">The objective of the cache is to reduce compilation by storing compiled queries for later reuse, therefore ending the requirement to recompile queries when later executed.</span></span> <span data-ttu-id="9ebf4-108">不過，每個不同的查詢至少都需要編譯一次。</span><span class="sxs-lookup"><span data-stu-id="9ebf4-108">However, each unique query must be compiled at least one time.</span></span> <span data-ttu-id="9ebf4-109">下列因素均可能導致查詢重新編譯：</span><span class="sxs-lookup"><span data-stu-id="9ebf4-109">Query recompilations can be caused by the following factors:</span></span>  
  
-   <span data-ttu-id="9ebf4-110">結構描述變更，包括基底結構描述變更，例如將資料行或索引加入資料表，或統計資料結構描述變更，例如在資料表內插入或刪除大量的資料列。</span><span class="sxs-lookup"><span data-stu-id="9ebf4-110">Schema changes, including base schema changes such as adding columns or indexes to a table, or statistics schema changes such as inserting or deleting a significant number of rows from a table.</span></span>  
  
-   <span data-ttu-id="9ebf4-111">環境 (SET 陳述式) 變更。</span><span class="sxs-lookup"><span data-stu-id="9ebf4-111">Environment (SET statement) changes.</span></span> <span data-ttu-id="9ebf4-112">工作階段設定的變更，例如 ANSI_PADDING 或 ANSI_NULLS 可能導致查詢重新編譯。</span><span class="sxs-lookup"><span data-stu-id="9ebf4-112">Changes in session settings such as ANSI_PADDING or ANSI_NULLS can cause a query to be recompiled.</span></span>  
  
 <span data-ttu-id="9ebf4-113">如需簡單參數化與強制參數化的詳細資訊，請參閱 [ALTER DATABASE &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql)。</span><span class="sxs-lookup"><span data-stu-id="9ebf4-113">For more information about simple and forced parameterization, see [ALTER DATABASE &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql).</span></span>  
  
 <span data-ttu-id="9ebf4-114">以下是 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] **SQL Statistics** 計數器。</span><span class="sxs-lookup"><span data-stu-id="9ebf4-114">These are the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] **SQL Statistics** counters.</span></span>  
  
|<span data-ttu-id="9ebf4-115">SQL Server SQL Statistics 計數器</span><span class="sxs-lookup"><span data-stu-id="9ebf4-115">SQL Server SQL Statistics counters</span></span>|<span data-ttu-id="9ebf4-116">描述</span><span class="sxs-lookup"><span data-stu-id="9ebf4-116">Description</span></span>|  
|----------------------------------------|-----------------|  
|<span data-ttu-id="9ebf4-117">**Auto-Param Attempts/sec**</span><span class="sxs-lookup"><span data-stu-id="9ebf4-117">**Auto-Param Attempts/sec**</span></span>|<span data-ttu-id="9ebf4-118">每秒的自動參數化嘗試次數。</span><span class="sxs-lookup"><span data-stu-id="9ebf4-118">Number of auto-parameterization attempts per second.</span></span> <span data-ttu-id="9ebf4-119">此總數應該是所有失敗的、安全的與不安全的自動參數化之總和。</span><span class="sxs-lookup"><span data-stu-id="9ebf4-119">Total should be the sum of the failed, safe, and unsafe auto-parameterizations.</span></span> <span data-ttu-id="9ebf4-120">當 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 執行個體嘗試以參數來取代部份常值，以將 [!INCLUDE[tsql](../../../includes/tsql-md.md)] 要求參數化時，就會發生自動參數化；如此將可以在多個相似的要求中，重複使用所產生的快取執行計畫。</span><span class="sxs-lookup"><span data-stu-id="9ebf4-120">Auto-parameterization occurs when an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] tries to parameterize a [!INCLUDE[tsql](../../../includes/tsql-md.md)] request by replacing some literals with parameters so that reuse of the resulting cached execution plan across multiple similar-looking requests is possible.</span></span> <span data-ttu-id="9ebf4-121">請注意，自動參數化在 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]更新版本中也稱為簡單參數化。</span><span class="sxs-lookup"><span data-stu-id="9ebf4-121">Note that auto-parameterizations are also known as simple parameterizations in newer versions of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="9ebf4-122">此計數器不包含強制參數化。</span><span class="sxs-lookup"><span data-stu-id="9ebf4-122">This counter does not include forced parameterizations.</span></span>|  
|<span data-ttu-id="9ebf4-123">**Batch Requests/sec**</span><span class="sxs-lookup"><span data-stu-id="9ebf4-123">**Batch Requests/sec**</span></span>|<span data-ttu-id="9ebf4-124">每秒接收的 [!INCLUDE[tsql](../../../includes/tsql-md.md)] 命令批次數目。</span><span class="sxs-lookup"><span data-stu-id="9ebf4-124">Number of [!INCLUDE[tsql](../../../includes/tsql-md.md)] command batches received per second.</span></span> <span data-ttu-id="9ebf4-125">此統計資料受到所有條件約束的影響 (例如 I/O、使用者數目、快取大小、要求複雜性等)，</span><span class="sxs-lookup"><span data-stu-id="9ebf4-125">This statistic is affected by all constraints (such as I/O, number of users, cache size, complexity of requests, and so on).</span></span> <span data-ttu-id="9ebf4-126">批次要求數目大，表示輸送量高。</span><span class="sxs-lookup"><span data-stu-id="9ebf4-126">High batch requests mean good throughput.</span></span>|  
|<span data-ttu-id="9ebf4-127">**Failed Auto-Params/sec**</span><span class="sxs-lookup"><span data-stu-id="9ebf4-127">**Failed Auto-Params/sec**</span></span>|<span data-ttu-id="9ebf4-128">每秒失敗的自動參數化嘗試。</span><span class="sxs-lookup"><span data-stu-id="9ebf4-128">Number of failed auto-parameterization attempts per second.</span></span> <span data-ttu-id="9ebf4-129">這應該很小。</span><span class="sxs-lookup"><span data-stu-id="9ebf4-129">This should be small.</span></span> <span data-ttu-id="9ebf4-130">請注意，自動參數化在 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]更新版本中也稱為簡單參數化。</span><span class="sxs-lookup"><span data-stu-id="9ebf4-130">Note that auto-parameterizations are also known as simple parameterizations in later versions of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>|  
|<span data-ttu-id="9ebf4-131">**Forced Parameterizations/sec**</span><span class="sxs-lookup"><span data-stu-id="9ebf4-131">**Forced Parameterizations/sec**</span></span>|<span data-ttu-id="9ebf4-132">每秒成功的強制參數化次數。</span><span class="sxs-lookup"><span data-stu-id="9ebf4-132">Number of successful forced parameterizations per second.</span></span>|  
|<span data-ttu-id="9ebf4-133">**Guided Plan Executions/sec**</span><span class="sxs-lookup"><span data-stu-id="9ebf4-133">**Guided Plan Executions/sec**</span></span>|<span data-ttu-id="9ebf4-134">每秒計畫執行的次數 (已經使用計畫指南產生查詢計畫)。</span><span class="sxs-lookup"><span data-stu-id="9ebf4-134">Number of plan executions per second in which the query plan has been generated by using a plan guide.</span></span>|  
|<span data-ttu-id="9ebf4-135">**Misguided Plan Executions/sec**</span><span class="sxs-lookup"><span data-stu-id="9ebf4-135">**Misguided Plan Executions/sec**</span></span>|<span data-ttu-id="9ebf4-136">每秒計畫執行的次數 (在計畫產生期間無法接受計畫指南)。</span><span class="sxs-lookup"><span data-stu-id="9ebf4-136">Number of plan executions per second in which a plan guide could not be honored during plan generation.</span></span> <span data-ttu-id="9ebf4-137">計畫指南已被忽略而且使用一般編譯來產生執行的計畫。</span><span class="sxs-lookup"><span data-stu-id="9ebf4-137">The plan guide was disregarded and normal compilation was used to generate the executed plan.</span></span>|  
|<span data-ttu-id="9ebf4-138">**Safe Auto-Params/sec**</span><span class="sxs-lookup"><span data-stu-id="9ebf4-138">**Safe Auto-Params/sec**</span></span>|<span data-ttu-id="9ebf4-139">每秒的安全自動參數化嘗試。</span><span class="sxs-lookup"><span data-stu-id="9ebf4-139">Number of safe auto-parameterization attempts per second.</span></span> <span data-ttu-id="9ebf4-140">「安全」是一項判斷，認定可在不同但相似的 [!INCLUDE[tsql](../../../includes/tsql-md.md)] 陳述式之間共用快取執行計畫。</span><span class="sxs-lookup"><span data-stu-id="9ebf4-140">Safe refers to a determination that a cached execution plan can be shared between different similar-looking [!INCLUDE[tsql](../../../includes/tsql-md.md)] statements.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="9ebf4-141">可進行多項自動參數化嘗試，當中有些是安全的，有些是失敗的。</span><span class="sxs-lookup"><span data-stu-id="9ebf4-141">makes many auto-parameterization attempts some of which turn out to be safe and others fail.</span></span> <span data-ttu-id="9ebf4-142">請注意，自動參數化在 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]更新版本中也稱為簡單參數化。</span><span class="sxs-lookup"><span data-stu-id="9ebf4-142">Note that auto-parameterizations are also known as simple parameterizations in later versions of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="9ebf4-143">此項目不包含強制參數化。</span><span class="sxs-lookup"><span data-stu-id="9ebf4-143">This does not include forced parameterizations.</span></span>|  
|<span data-ttu-id="9ebf4-144">**SQL Attention rate**</span><span class="sxs-lookup"><span data-stu-id="9ebf4-144">**SQL Attention rate**</span></span>|<span data-ttu-id="9ebf4-145">每秒的注意事項數目。</span><span class="sxs-lookup"><span data-stu-id="9ebf4-145">Number of attentions per second.</span></span> <span data-ttu-id="9ebf4-146">注意事項是用戶端的要求，用來結束目前執行中的要求。</span><span class="sxs-lookup"><span data-stu-id="9ebf4-146">An attention is a request by the client to end the currently running request.</span></span>|  
|<span data-ttu-id="9ebf4-147">**SQL Compilations/sec**</span><span class="sxs-lookup"><span data-stu-id="9ebf4-147">**SQL Compilations/sec**</span></span>|<span data-ttu-id="9ebf4-148">每秒的 SQL 編譯次數，</span><span class="sxs-lookup"><span data-stu-id="9ebf4-148">Number of SQL compilations per second.</span></span> <span data-ttu-id="9ebf4-149">表示輸入編譯程式碼路徑的次數。</span><span class="sxs-lookup"><span data-stu-id="9ebf4-149">Indicates the number of times the compile code path is entered.</span></span> <span data-ttu-id="9ebf4-150">包括 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]中由陳述式層級的重新編譯所造成的編譯。</span><span class="sxs-lookup"><span data-stu-id="9ebf4-150">Includes compiles caused by statement-level recompilations in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="9ebf4-151">在 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 使用者活動穩定之後，此值會達到一個穩定的狀態。</span><span class="sxs-lookup"><span data-stu-id="9ebf4-151">After [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] user activity is stable, this value reaches a steady state.</span></span>|  
|<span data-ttu-id="9ebf4-152">**SQL Re-Compilations/sec**</span><span class="sxs-lookup"><span data-stu-id="9ebf4-152">**SQL Re-Compilations/sec**</span></span>|<span data-ttu-id="9ebf4-153">每秒的陳述式重新編譯次數，</span><span class="sxs-lookup"><span data-stu-id="9ebf4-153">Number of statement recompiles per second.</span></span> <span data-ttu-id="9ebf4-154">此值計算觸發陳述式重新編譯的次數。</span><span class="sxs-lookup"><span data-stu-id="9ebf4-154">Counts the number of times statement recompiles are triggered.</span></span> <span data-ttu-id="9ebf4-155">通常，您會希望重新編譯的次數降低。</span><span class="sxs-lookup"><span data-stu-id="9ebf4-155">Generally, you want the recompiles to be low.</span></span>|  
|<span data-ttu-id="9ebf4-156">**Unsafe Auto-Params/sec**</span><span class="sxs-lookup"><span data-stu-id="9ebf4-156">**Unsafe Auto-Params/sec**</span></span>|<span data-ttu-id="9ebf4-157">每秒不安全的自動參數化嘗試次數。</span><span class="sxs-lookup"><span data-stu-id="9ebf4-157">Number of unsafe auto-parameterization attempts per second.</span></span> <span data-ttu-id="9ebf4-158">例如，查詢具有一些特性，會阻止共用快取計畫。</span><span class="sxs-lookup"><span data-stu-id="9ebf4-158">For example, the query has some characteristics that prevent the cached plan from being shared.</span></span> <span data-ttu-id="9ebf4-159">這些特性就稱為不安全的。</span><span class="sxs-lookup"><span data-stu-id="9ebf4-159">These are designated as unsafe.</span></span> <span data-ttu-id="9ebf4-160">強制參數化的次數不算在內。</span><span class="sxs-lookup"><span data-stu-id="9ebf4-160">This does not count the number of forced parameterizations.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="9ebf4-161">另請參閱</span><span class="sxs-lookup"><span data-stu-id="9ebf4-161">See Also</span></span>  
 <span data-ttu-id="9ebf4-162">[SQL Server 的 Plan Cache 物件](sql-server-plan-cache-object.md) </span><span class="sxs-lookup"><span data-stu-id="9ebf4-162">[SQL Server, Plan Cache Object](sql-server-plan-cache-object.md) </span></span>  
 [<span data-ttu-id="9ebf4-163">監視資源使用狀況 &#40;System Monitor&#41;</span><span class="sxs-lookup"><span data-stu-id="9ebf4-163">Monitor Resource Usage &#40;System Monitor&#41;</span></span>](monitor-resource-usage-system-monitor.md)  
  
  
