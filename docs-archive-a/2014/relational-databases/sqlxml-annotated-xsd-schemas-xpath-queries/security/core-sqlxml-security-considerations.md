---
title: 核心 SQLXML 安全性考慮 |Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: xml
ms.topic: reference
helpviewer_keywords:
- security [SQLXML], about security
ms.assetid: 330cd2ff-d5d5-4c8e-8f93-0869c977be94
author: rothja
ms.author: jroth
ms.openlocfilehash: eceaa28ff4d1a7b998a51b07df3b1076cf524e81
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87607371"
---
# <a name="core-sqlxml-security-considerations"></a><span data-ttu-id="cd1c6-102">SQLXML 的核心安全性考量</span><span class="sxs-lookup"><span data-stu-id="cd1c6-102">Core SQLXML Security Considerations</span></span>
  <span data-ttu-id="cd1c6-103">下面是使用 SQLXML 進行資料存取的安全性指導方針。</span><span class="sxs-lookup"><span data-stu-id="cd1c6-103">The following are security guidelines for using SQLXML for data access.</span></span>  
  
-   <span data-ttu-id="cd1c6-104">SQLXMLOLEDB 提供者公開 `StreamFlags` 屬性，這個屬性可以讓您設定旗標，指出每個特定的執行個體應該啟用或停用什麼 SQLXML 功能。</span><span class="sxs-lookup"><span data-stu-id="cd1c6-104">The SQLXMLOLEDB provider exposes a `StreamFlags` property which allows you to set flags indicating what SQLXML functionality should be enabled or disabled for each specific instance.</span></span> <span data-ttu-id="cd1c6-105">您可以使用這個屬性來自訂 SQLXML 的使用，並確定只有您所要的元件啟用。</span><span class="sxs-lookup"><span data-stu-id="cd1c6-105">You can use this property to customize your use of SQLXML and to make sure that only the components you want are enabled.</span></span> <span data-ttu-id="cd1c6-106">如需詳細資訊，請參閱[SQLXMLOLEDB Provider &#40;SQLXML 4.0&#41;](../../../database-engine/dev-guide/sqlxmloledb-provider-sqlxml-4-0.md)。</span><span class="sxs-lookup"><span data-stu-id="cd1c6-106">For more information, see [SQLXMLOLEDB Provider &#40;SQLXML 4.0&#41;](../../../database-engine/dev-guide/sqlxmloledb-provider-sqlxml-4-0.md).</span></span>  
  
-   <span data-ttu-id="cd1c6-107">當 SQLXML 錯誤發生且傳回時，可能會包含有關資料表名稱、資料行名稱或類型資訊之類的資料庫結構描述的資訊。</span><span class="sxs-lookup"><span data-stu-id="cd1c6-107">When SQLXML errors occur and are returned, they can include information about the database schema such as table names, column names or type information.</span></span> <span data-ttu-id="cd1c6-108">在處理這些錯誤時應該要小心，以免有關您的 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 安裝的資訊在非預期或不必要的情況下被使用者輕易地找到。</span><span class="sxs-lookup"><span data-stu-id="cd1c6-108">You should use care when handling these errors so that information about your [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] installation is not easily discoverable by users where it is not intended or needed.</span></span>  
  
-   <span data-ttu-id="cd1c6-109">當用來查詢或傳送 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 的更新時，SQLXML 不會對可交換的資料量設定限制，也不會在嘗試處理 SQLXML 裝載之前，對該裝載中的資料大小進行任何檢查。</span><span class="sxs-lookup"><span data-stu-id="cd1c6-109">When used to either query or send updates to [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], SQLXML sets no limit on the amount of data that can be exchanged and does not do any checking on the size of data in a SQLXML payload before attempting to process it.</span></span> <span data-ttu-id="cd1c6-110">使用 SQLXML 開發應用程式時，您有責任確保系統上有足夠的記憶體可以處理資料。</span><span class="sxs-lookup"><span data-stu-id="cd1c6-110">When you develop your application using SQLXML, it is your responsibility to ensure there is enough memory on the system to process the data.</span></span> <span data-ttu-id="cd1c6-111">例如，從伺服器查詢資料時，應該確認用戶端上的記憶體中有足夠的空間可以接收該資料。</span><span class="sxs-lookup"><span data-stu-id="cd1c6-111">For example, when querying data from the server, you should verify there is enough room in memory on the client to receive it.</span></span> <span data-ttu-id="cd1c6-112">同樣地，如果要將資料上傳到伺服器，則需要確認伺服器上有足夠的記憶體可以處理該資料，也有足夠的可用磁碟儲存空間來儲存該資料。</span><span class="sxs-lookup"><span data-stu-id="cd1c6-112">Likewise, if you are loading data to the server, you need to verify there is enough available memory on the server to process it and enough available disk storage space on the server to store the data.</span></span>  
  
-   <span data-ttu-id="cd1c6-113">SQLXML 會動態地產生 [!INCLUDE[tsql](../../../includes/tsql-md.md)] 查詢和更新命令，並將其傳送至 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 進行執行。</span><span class="sxs-lookup"><span data-stu-id="cd1c6-113">SQLXML dynamically generates [!INCLUDE[tsql](../../../includes/tsql-md.md)] queries and update commands and sends them to [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] for execution.</span></span> <span data-ttu-id="cd1c6-114">這是 SQLXML 查詢和更新伺服器的唯一方法。</span><span class="sxs-lookup"><span data-stu-id="cd1c6-114">This is the only way in which SQLXML queries and updates the server.</span></span> <span data-ttu-id="cd1c6-115">結果會以 XML 資料流或資料列集的方式接收。</span><span class="sxs-lookup"><span data-stu-id="cd1c6-115">Results will be received either as a stream (of XML) or as a rowset.</span></span>  
  
-   <span data-ttu-id="cd1c6-116">在接收查詢結果時，SQLXML 不會根據它接收的資料內容採取任何動作。</span><span class="sxs-lookup"><span data-stu-id="cd1c6-116">When receiving query results, SQLXML takes no actions based on the content of the data that it receives.</span></span> <span data-ttu-id="cd1c6-117">系統不會根據資料的類型或內容而進行任何其他處理。</span><span class="sxs-lookup"><span data-stu-id="cd1c6-117">No additional processing is done based on the type or contents of the data.</span></span> <span data-ttu-id="cd1c6-118">資料絕不會被視為用來執行動作的程式碼。</span><span class="sxs-lookup"><span data-stu-id="cd1c6-118">The data is never treated as code with which to execute actions.</span></span>  
  
-   <span data-ttu-id="cd1c6-119">在執行 XML 範本時，SQLXML 會將包含在所提交範本內的 XPath 和 DBObject 查詢轉譯為 [!INCLUDE[tsql](../../../includes/tsql-md.md)] 命令，之後這些命令會針對 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 執行。</span><span class="sxs-lookup"><span data-stu-id="cd1c6-119">When executing XML Templates, SQLXML translates the XPath and DBObject queries contained within the submitted template into [!INCLUDE[tsql](../../../includes/tsql-md.md)] commands that are then executed against [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="cd1c6-120">這些命令只會影響現有的資料。</span><span class="sxs-lookup"><span data-stu-id="cd1c6-120">These commands only ever affect existing data.</span></span> <span data-ttu-id="cd1c6-121">SQLXML 所產生的命令絕不會改變資料庫的結構。</span><span class="sxs-lookup"><span data-stu-id="cd1c6-121">Commands generated by SQLXML will never alter the structure of the database.</span></span> <span data-ttu-id="cd1c6-122">使用者必須發出明確的命令才能改變資料庫結構。</span><span class="sxs-lookup"><span data-stu-id="cd1c6-122">Users must issue explicit commands to alter the database structure.</span></span> <span data-ttu-id="cd1c6-123">例如，將此種命令包含在範本的 `sql:query` 區塊中。</span><span class="sxs-lookup"><span data-stu-id="cd1c6-123">For example, by including them in a `sql:query` block of a template.</span></span>  
  
-   <span data-ttu-id="cd1c6-124">在對應檔案上執行 DBObject 查詢和 XPath 陳述式時，SQLXML 不會對資料庫中的資料進行任何改變。</span><span class="sxs-lookup"><span data-stu-id="cd1c6-124">When executing DBObject queries and XPath statements over mapping files, SQLXML will not alter the data in the database in any way.</span></span>  
  
-   <span data-ttu-id="cd1c6-125">SQLXML 可能會根據 XML 和 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 資料模型之間的差異，對給定資料進行格式上的變更。</span><span class="sxs-lookup"><span data-stu-id="cd1c6-125">SQLXML may make formatting changes to the given data based on differences between the XML and [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] data models.</span></span> <span data-ttu-id="cd1c6-126">例如，指定時間的格式是不同的。</span><span class="sxs-lookup"><span data-stu-id="cd1c6-126">For example, the format for specifying a time is different.</span></span> <span data-ttu-id="cd1c6-127">SQLXML 會嘗試解決這些差異。</span><span class="sxs-lookup"><span data-stu-id="cd1c6-127">SQLXML will attempt to resolve these differences.</span></span> <span data-ttu-id="cd1c6-128">結果是某些精確度的資訊可能會遺失。</span><span class="sxs-lookup"><span data-stu-id="cd1c6-128">As a result, some precision information may be lost.</span></span>  
  
-   <span data-ttu-id="cd1c6-129">SQLXML 不會對其用來處理資料的時間量設定限制。</span><span class="sxs-lookup"><span data-stu-id="cd1c6-129">SQLXML sets no limit on the amount of time it takes to process the data.</span></span> <span data-ttu-id="cd1c6-130">在發生錯誤或處理完成之前，都會繼續進行處理。</span><span class="sxs-lookup"><span data-stu-id="cd1c6-130">Processing will continue until an error occurs or processing is complete.</span></span>  
  
-   <span data-ttu-id="cd1c6-131">SQLXML 不會寫入至檔案系統。</span><span class="sxs-lookup"><span data-stu-id="cd1c6-131">SQLXML does not write to the file system.</span></span> <span data-ttu-id="cd1c6-132">如果使用者想要儲存從資料庫所擷取的資料，則必須在其程式碼中進行這項作業。</span><span class="sxs-lookup"><span data-stu-id="cd1c6-132">If users wish to save the data they retrieve from the database, they must do this in their code.</span></span>  
  
-   <span data-ttu-id="cd1c6-133">SQLXML 可以讓使用者針對資料庫執行任何所要的 SQL 查詢。</span><span class="sxs-lookup"><span data-stu-id="cd1c6-133">SQLXML allows users to execute any SQL query they like against the database.</span></span> <span data-ttu-id="cd1c6-134">絕對不要將這項功能公開至不安全或未受控制的來源，因為這樣基本上是在未規定任何使用者的情況下，讓 SQL 資料庫門戶洞開。</span><span class="sxs-lookup"><span data-stu-id="cd1c6-134">This functionality should never be exposed to an unsecure or uncontrolled source, as this is essentially opening up the SQL database without provision to any users.</span></span>  
  
-   <span data-ttu-id="cd1c6-135">執行 Updategrams 時，SQLXML 會將 `updg:sync` 區塊針對 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 執行個體轉譯為 DELETE、UPDATE 和 INSERT 命令。</span><span class="sxs-lookup"><span data-stu-id="cd1c6-135">When executing Updategrams, SQLXML translates the `updg:sync` blocks into DELETE, UPDATE, and INSERT commands against the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance.</span></span> <span data-ttu-id="cd1c6-136">這些命令只會影響現有的資料。</span><span class="sxs-lookup"><span data-stu-id="cd1c6-136">These commands only ever affect existing data.</span></span> <span data-ttu-id="cd1c6-137">SQLXML 所產生的命令絕不會改變資料庫。</span><span class="sxs-lookup"><span data-stu-id="cd1c6-137">Commands generated by SQLXML will never alter the database.</span></span> <span data-ttu-id="cd1c6-138">使用者必須發出明確的命令才能改變資料庫結構。</span><span class="sxs-lookup"><span data-stu-id="cd1c6-138">Users must issue explicit commands to alter the database structure.</span></span> <span data-ttu-id="cd1c6-139">例如，將此種命令包含在範本的 `sql:query` 區塊中。</span><span class="sxs-lookup"><span data-stu-id="cd1c6-139">For example, by including them in a `sql:query` block of a template.</span></span>  
  
-   <span data-ttu-id="cd1c6-140">執行 DiffGrams 時，SQLXML 會將 DiffGram 針對 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 執行個體轉譯為 DELETE、UPDATE 和 INSERT 命令。</span><span class="sxs-lookup"><span data-stu-id="cd1c6-140">When executing DiffGrams, SQLXML translates the DiffGram into DELETE, UPDATE, and INSERT commands against the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance.</span></span> <span data-ttu-id="cd1c6-141">這些命令只會影響現有的資料。</span><span class="sxs-lookup"><span data-stu-id="cd1c6-141">These commands only ever affect existing data.</span></span> <span data-ttu-id="cd1c6-142">SQLXML 所產生的命令絕不會改變資料庫。</span><span class="sxs-lookup"><span data-stu-id="cd1c6-142">Commands generated by SQLXML will never alter the database.</span></span> <span data-ttu-id="cd1c6-143">使用者必須發出明確的命令才能改變資料庫結構。</span><span class="sxs-lookup"><span data-stu-id="cd1c6-143">Users must issue explicit commands to alter the database structure.</span></span> <span data-ttu-id="cd1c6-144">例如，將此種命令包含在範本的 `sql:query` 區塊中。</span><span class="sxs-lookup"><span data-stu-id="cd1c6-144">For example, by including them in a `sql:query` block of a template.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="cd1c6-145">另請參閱</span><span class="sxs-lookup"><span data-stu-id="cd1c6-145">See Also</span></span>  
 [<span data-ttu-id="cd1c6-146">SQLXML 4.0 安全性考量</span><span class="sxs-lookup"><span data-stu-id="cd1c6-146">SQLXML 4.0 Security Considerations</span></span>](sqlxml-4-0-security-considerations.md)  
  
  
