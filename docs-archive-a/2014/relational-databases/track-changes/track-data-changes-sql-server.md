---
title: 追蹤資料變更 (SQL Server) | Microsoft 文件
ms.custom: ''
ms.date: 05/24/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: ''
ms.topic: conceptual
f1_keywords:
- CHANGE_TRACKING_CLEANUP_VERSION
- change_tracking_databases
- sys.change_tracking_databases
- WITH CHANGE_TRACKING_CONTEXT
- CHANGE_TRACKING_IS_COLUMN_IN_MASK
- sys.fn_change_tracking_dump_change_table
- fn_change_tracking_dump_change_table
- sys.fn_change_tracking_columns
- CHANGE_TRACKING_CURRENT_VERSION
- sys.change_tracking_tables
- fn_change_tracking_columns
- change_tracking_tables
- CHANGETABLE
helpviewer_keywords:
- change data capture [SQL Server], compared to change tracking
- change data capture vs. change tracking
- change data capture [SQL Server], data type behaviors
- Sync Services for ADO.NET
- change tracking [SQL Server], Sync Services for ADO.NET
- change tracking [SQL Server]
- change data capture [SQL Server], security
- change data capture [SQL Server], other SQL Server features and
ms.assetid: 7a34be46-15b4-4b6b-8497-cfd8f9f14234
author: rothja
ms.author: jroth
ms.openlocfilehash: 8e9fb2a89aff63a69d7ad8df111d36f2b7ccafdd
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87597684"
---
# <a name="track-data-changes-sql-server"></a><span data-ttu-id="072bb-102">追蹤資料變更 (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="072bb-102">Track Data Changes (SQL Server)</span></span>
  [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] <span data-ttu-id="072bb-103">提供兩個追蹤資料庫資料變更的功能： [異動資料擷取](#Capture) 和 [變更追蹤](#Tracking)。</span><span class="sxs-lookup"><span data-stu-id="072bb-103">provides two features that track changes to data in a database: [change data capture](#Capture) and [change tracking](#Tracking).</span></span> <span data-ttu-id="072bb-104">這些功能可協助應用程式判斷對資料庫中使用者資料表所做的 DML 變更 (插入、更新和刪除作業)。</span><span class="sxs-lookup"><span data-stu-id="072bb-104">These features enable applications to determine the DML changes (insert, update, and delete operations) that were made to user tables in a database.</span></span> <span data-ttu-id="072bb-105">可在同一個資料庫上啟用異動資料擷取和變更追蹤；無需特殊考量。</span><span class="sxs-lookup"><span data-stu-id="072bb-105">Change data capture and change tracking can be enabled on the same database; no special considerations are required.</span></span> <span data-ttu-id="072bb-106">針對 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 支援變更資料捕獲和變更追蹤的版本，請參閱[SQL Server 2014 版本支援的功能](../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md)。</span><span class="sxs-lookup"><span data-stu-id="072bb-106">For the editions of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] that support change data capture and change tracking, see [Features Supported by the Editions of SQL Server 2014](../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span></span>  
  
## <a name="benefits-of-using-change-data-capture-or-change-tracking"></a><span data-ttu-id="072bb-107">使用異動資料擷取或變更追蹤的優點</span><span class="sxs-lookup"><span data-stu-id="072bb-107">Benefits of Using Change Data Capture or Change Tracking</span></span>  
 <span data-ttu-id="072bb-108">在資料庫中查詢已經變更之資料的能力，是讓某些應用程式具有效率的重要需求。</span><span class="sxs-lookup"><span data-stu-id="072bb-108">The ability to query for data that has changed in a database is an important requirement for some applications to be efficient.</span></span> <span data-ttu-id="072bb-109">一般而言，若要判斷資料變更，應用程式開發人員必須使用觸發程序、時間戳記資料行和其他資料表的組合，在其應用程式中實作自訂追蹤方法。</span><span class="sxs-lookup"><span data-stu-id="072bb-109">Typically, to determine data changes, application developers must implement a custom tracking method in their applications by using a combination of triggers, timestamp columns, and additional tables.</span></span> <span data-ttu-id="072bb-110">不過，建立這些應用程式通常需要實作大量工作、導致結構描述更新，而且經常會產生很高的效能負擔。</span><span class="sxs-lookup"><span data-stu-id="072bb-110">Creating these applications usually involves a lot of work to implement, leads to schema updates, and often carries a high performance overhead.</span></span>  
  
 <span data-ttu-id="072bb-111">在應用程式中使用異動資料擷取或變更追蹤來追蹤資料庫的變更 (以取代開發自訂方案) 有下列優點：</span><span class="sxs-lookup"><span data-stu-id="072bb-111">Using change data capture or change tracking in applications to track changes in a database, instead of developing a custom solution, has the following benefits:</span></span>  
  
-   <span data-ttu-id="072bb-112">開發時間縮短。</span><span class="sxs-lookup"><span data-stu-id="072bb-112">There is reduced development time.</span></span> <span data-ttu-id="072bb-113">由於 [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]提供了功能，因此您不需要開發自訂方案。</span><span class="sxs-lookup"><span data-stu-id="072bb-113">Because functionality is available in [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], you do not have to develop a custom solution.</span></span>  
  
-   <span data-ttu-id="072bb-114">不需要結構描述變更。</span><span class="sxs-lookup"><span data-stu-id="072bb-114">Schema changes are not required.</span></span> <span data-ttu-id="072bb-115">如果資料行無法加入至使用者資料表，您不必加入資料行、加入觸發程序或建立側邊資料表，以追蹤已刪除的資料列或儲存變更追蹤資訊。</span><span class="sxs-lookup"><span data-stu-id="072bb-115">You do not have to add columns, add triggers, or create side table in which to track deleted rows or to store change tracking information if columns cannot be added to the user tables.</span></span>  
  
-   <span data-ttu-id="072bb-116">有內建的清除機制。</span><span class="sxs-lookup"><span data-stu-id="072bb-116">There is a built-in cleanup mechanism.</span></span> <span data-ttu-id="072bb-117">變更追蹤的清除作業會自動在背景執行。</span><span class="sxs-lookup"><span data-stu-id="072bb-117">Cleanup for change tracking is performed automatically in the background.</span></span> <span data-ttu-id="072bb-118">不需要針對儲存在側邊資料表中的資料進行自訂清除作業。</span><span class="sxs-lookup"><span data-stu-id="072bb-118">Custom cleanup for data that is stored in a side table is not required.</span></span>  
  
-   <span data-ttu-id="072bb-119">系統提供了函數，可取得變更資訊。</span><span class="sxs-lookup"><span data-stu-id="072bb-119">Functions are provided to obtain change information.</span></span>  
  
-   <span data-ttu-id="072bb-120">DML 作業的負擔降低。</span><span class="sxs-lookup"><span data-stu-id="072bb-120">There is low overhead to DML operations.</span></span> <span data-ttu-id="072bb-121">同步的變更追蹤一定會產生一些負擔。</span><span class="sxs-lookup"><span data-stu-id="072bb-121">Synchronous change tracking will always have some overhead.</span></span> <span data-ttu-id="072bb-122">不過，使用變更追蹤有助於將負擔降到最低。</span><span class="sxs-lookup"><span data-stu-id="072bb-122">However, using change tracking can help minimize the overhead.</span></span> <span data-ttu-id="072bb-123">這項負擔通常會比使用替代方案的負擔更低，尤其是需要使用觸發程序的方案。</span><span class="sxs-lookup"><span data-stu-id="072bb-123">The overhead will frequently be less than that of using alternative solutions, especially solutions that require the use triggers.</span></span>  
  
-   <span data-ttu-id="072bb-124">變更追蹤是以認可的交易為基礎。</span><span class="sxs-lookup"><span data-stu-id="072bb-124">Change tracking is based on committed transactions.</span></span> <span data-ttu-id="072bb-125">變更的順序是根據交易認可時間而定。</span><span class="sxs-lookup"><span data-stu-id="072bb-125">The order of the changes is based on transaction commit time.</span></span> <span data-ttu-id="072bb-126">當長時間執行而且重疊的交易存在時，這點將確保能夠取得可靠的結果。</span><span class="sxs-lookup"><span data-stu-id="072bb-126">This allows for reliable results to be obtained when there are long-running and overlapping transactions.</span></span> <span data-ttu-id="072bb-127">使用 `timestamp` 值的自訂方案則必須經過特別設計，才能處理這些狀況。</span><span class="sxs-lookup"><span data-stu-id="072bb-127">Custom solutions that use `timestamp` values must be specifically designed to handle these scenarios.</span></span>  
  
-   <span data-ttu-id="072bb-128">提供可用於設定和管理的標準工具。</span><span class="sxs-lookup"><span data-stu-id="072bb-128">Standard tools are available that you can use to configure and manage.</span></span> [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] <span data-ttu-id="072bb-129">提供標準 DDL 陳述式、 [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]、目錄檢視和安全性權限。</span><span class="sxs-lookup"><span data-stu-id="072bb-129">provides standard DDL statements, [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], catalog views, and security permissions.</span></span>  
  
## <a name="feature-differences-between-change-data-capture-and-change-tracking"></a><span data-ttu-id="072bb-130">異動資料擷取與變更追蹤之間的功能差異</span><span class="sxs-lookup"><span data-stu-id="072bb-130">Feature Differences Between Change Data Capture and Change Tracking</span></span>  
 <span data-ttu-id="072bb-131">下表將列出異動資料擷取與變更追蹤之間的功能差異。</span><span class="sxs-lookup"><span data-stu-id="072bb-131">The following table lists the feature differences between change data capture and change tracking.</span></span> <span data-ttu-id="072bb-132">異動資料擷取中的追蹤機制包含從交易記錄中以非同步方式擷取變更，以便在 DML 作業之後可以使用變更。</span><span class="sxs-lookup"><span data-stu-id="072bb-132">The tracking mechanism in change data capture involves an asynchronous capture of changes from the transaction log so that changes are available after the DML operation.</span></span> <span data-ttu-id="072bb-133">但是，在變更追蹤中，其追蹤機制包含以同步方式追蹤變更而且與 DML 並列執行，以便可以立即使用變更資訊。</span><span class="sxs-lookup"><span data-stu-id="072bb-133">In change tracking, the tracking mechanism involves synchronous tracking of changes in line with DML operations so that change information is available immediately.</span></span>  
  
|<span data-ttu-id="072bb-134">特徵</span><span class="sxs-lookup"><span data-stu-id="072bb-134">Feature</span></span>|<span data-ttu-id="072bb-135">變更資料擷取</span><span class="sxs-lookup"><span data-stu-id="072bb-135">Change data capture</span></span>|<span data-ttu-id="072bb-136">Change tracking</span><span class="sxs-lookup"><span data-stu-id="072bb-136">Change tracking</span></span>|  
|-------------|-------------------------|---------------------|  
|<span data-ttu-id="072bb-137">**追蹤的變更**</span><span class="sxs-lookup"><span data-stu-id="072bb-137">**Tracked changes**</span></span>|||  
|<span data-ttu-id="072bb-138">DML 變更</span><span class="sxs-lookup"><span data-stu-id="072bb-138">DML changes</span></span>|<span data-ttu-id="072bb-139">是</span><span class="sxs-lookup"><span data-stu-id="072bb-139">Yes</span></span>|<span data-ttu-id="072bb-140">是</span><span class="sxs-lookup"><span data-stu-id="072bb-140">Yes</span></span>|  
|<span data-ttu-id="072bb-141">**追蹤的資訊**</span><span class="sxs-lookup"><span data-stu-id="072bb-141">**Tracked information**</span></span>|||  
|<span data-ttu-id="072bb-142">歷程記錄資料</span><span class="sxs-lookup"><span data-stu-id="072bb-142">Historical data</span></span>|<span data-ttu-id="072bb-143">是</span><span class="sxs-lookup"><span data-stu-id="072bb-143">Yes</span></span>|<span data-ttu-id="072bb-144">否</span><span class="sxs-lookup"><span data-stu-id="072bb-144">No</span></span>|  
|<span data-ttu-id="072bb-145">資料行是否已變更</span><span class="sxs-lookup"><span data-stu-id="072bb-145">Whether column was changed</span></span>|<span data-ttu-id="072bb-146">是</span><span class="sxs-lookup"><span data-stu-id="072bb-146">Yes</span></span>|<span data-ttu-id="072bb-147">是</span><span class="sxs-lookup"><span data-stu-id="072bb-147">Yes</span></span>|  
|<span data-ttu-id="072bb-148">DML 類型</span><span class="sxs-lookup"><span data-stu-id="072bb-148">DML type</span></span>|<span data-ttu-id="072bb-149">是</span><span class="sxs-lookup"><span data-stu-id="072bb-149">Yes</span></span>|<span data-ttu-id="072bb-150">是</span><span class="sxs-lookup"><span data-stu-id="072bb-150">Yes</span></span>|  
  
##  <a name="change-data-capture"></a><a name="Capture"></a> <span data-ttu-id="072bb-151">異動資料擷取</span><span class="sxs-lookup"><span data-stu-id="072bb-151">Change Data Capture</span></span>  
 <span data-ttu-id="072bb-152">異動資料擷取會透過擷取進行 DML 變更的事實以及變更的實際資料，提供使用者資料表的歷程記錄變更資訊。</span><span class="sxs-lookup"><span data-stu-id="072bb-152">Change data capture provides historical change information for a user table by capturing both the fact that DML changes were made and the actual data that was changed.</span></span> <span data-ttu-id="072bb-153">這些變更是使用讀取交易記錄而且對系統影響很小的非同步處理序擷取的。</span><span class="sxs-lookup"><span data-stu-id="072bb-153">Changes are captured by using an asynchronous process that reads the transaction log and has a low impact on the system.</span></span>  
  
 <span data-ttu-id="072bb-154">如下圖所示，對使用者資料表所做的變更會擷取在對應的變更資料表中。</span><span class="sxs-lookup"><span data-stu-id="072bb-154">As shown in the following illustration, the changes that were made to user tables are captured in corresponding change tables.</span></span> <span data-ttu-id="072bb-155">這些變更資料表會提供一段時間內變更的歷程記錄檢視。</span><span class="sxs-lookup"><span data-stu-id="072bb-155">These change tables provide an historical view of the changes over time.</span></span> <span data-ttu-id="072bb-156">[所提供的](/sql/relational-databases/system-functions/change-data-capture-functions-transact-sql)異動資料擷取 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 函數可讓您方便且有系統地取用變更資料。</span><span class="sxs-lookup"><span data-stu-id="072bb-156">The [change data capture](/sql/relational-databases/system-functions/change-data-capture-functions-transact-sql)functions that [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] provides enable the change data to be consumed easily and systematically.</span></span>  
  
 <span data-ttu-id="072bb-157">![異動資料擷取的概念圖例](../../database-engine/media/cdcart1.gif "異動資料擷取的概念圖例")</span><span class="sxs-lookup"><span data-stu-id="072bb-157">![Conceptual illustration of change data capture](../../database-engine/media/cdcart1.gif "Conceptual illustration of change data capture")</span></span>  
  
### <a name="security-model"></a><span data-ttu-id="072bb-158">安全性模型</span><span class="sxs-lookup"><span data-stu-id="072bb-158">Security Model</span></span>  
 <span data-ttu-id="072bb-159">本節描述異動資料擷取安全性模型。</span><span class="sxs-lookup"><span data-stu-id="072bb-159">This section describes the change data capture security model.</span></span>  
  
 <span data-ttu-id="072bb-160">**組態和管理**</span><span class="sxs-lookup"><span data-stu-id="072bb-160">**Configuration and Administration**</span></span>  
 <span data-ttu-id="072bb-161">若要啟用或停用資料庫的變更資料捕獲， [sys. sp_cdc_enable_db 的呼叫端 &#40;transact-sql&#41;](/sql/relational-databases/system-stored-procedures/sys-sp-cdc-enable-db-transact-sql)或[Sys.databases sp_cdc_disable_db &#40;transact-sql&#41;](/sql/relational-databases/system-stored-procedures/sys-sp-cdc-disable-db-transact-sql)必須是固定伺服器角色的成員 `sysadmin` 。</span><span class="sxs-lookup"><span data-stu-id="072bb-161">To either enable or disable change data capture for a database, the caller of [sys.sp_cdc_enable_db &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sys-sp-cdc-enable-db-transact-sql) or [sys.sp_cdc_disable_db &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sys-sp-cdc-disable-db-transact-sql) must be a member of the fixed server `sysadmin` role.</span></span> <span data-ttu-id="072bb-162">若要在資料表層級啟用和停用變更資料捕獲，必須要有 sys.databases 的呼叫端[sp_cdc_enable_table &#40;transact-sql&#41;](/sql/relational-databases/system-stored-procedures/sys-sp-cdc-enable-table-transact-sql)和[Sp_cdc_disable_table sys.databases &#40;transact-sql&#41;](/sql/relational-databases/system-stored-procedures/sys-sp-cdc-disable-table-transact-sql)為系統管理員（sysadmin）角色的成員或資料庫角色的成員 `database db_owner` 。</span><span class="sxs-lookup"><span data-stu-id="072bb-162">Enabling and disabling change data capture at the table level requires the caller of [sys.sp_cdc_enable_table &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sys-sp-cdc-enable-table-transact-sql) and [sys.sp_cdc_disable_table &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sys-sp-cdc-disable-table-transact-sql) to either be a member of the sysadmin role or a member of the database `database db_owner` role.</span></span>  
  
 <span data-ttu-id="072bb-163">只有伺服器 `sysadmin` 角色的成員和 `database db_owner` 角色的成員才能使用這些預存程序來支援異動資料擷取作業的管理。</span><span class="sxs-lookup"><span data-stu-id="072bb-163">Use of the stored procedures to support the administration of change data capture jobs is restricted to members of the server `sysadmin` role and members of the `database db_owner` role.</span></span>  
  
 <span data-ttu-id="072bb-164">**變更列舉和中繼資料查詢**</span><span class="sxs-lookup"><span data-stu-id="072bb-164">**Change Enumeration and Metadata Queries**</span></span>  
 <span data-ttu-id="072bb-165">若要存取與擷取執行個體相關聯的變更資料，使用者必須被授與相關聯來源資料表之所有擷取資料行的選取存取權。</span><span class="sxs-lookup"><span data-stu-id="072bb-165">To gain access to the change data that is associated with a capture instance, the user must be granted select access to all the captured columns of the associated source table.</span></span> <span data-ttu-id="072bb-166">此外，如果建立擷取執行個體時指定了控制角色，呼叫端也必須是指定之控制角色的成員。</span><span class="sxs-lookup"><span data-stu-id="072bb-166">In addition, if a gating role is specified when the capture instance is created, the caller must also be a member of the specified gating role.</span></span> <span data-ttu-id="072bb-167">雖然傳回中繼資料的存取權通常也會使用基礎來源資料表的選取存取權控制，以及任何已定義之控制角色的成員資格控制，但是所有資料庫使用者都可以透過 Public 角色存取用以存取中繼資料的其他一般異動資料擷取函數。</span><span class="sxs-lookup"><span data-stu-id="072bb-167">Other general change data capture functions for accessing metadata will be accessible to all database users through the public role, although access to the returned metadata will also typically be gated by using select access to the underlying source tables, and by membership in any defined gating roles.</span></span>  
  
 <span data-ttu-id="072bb-168">**啟用異動資料擷取之來源資料表的 DDL 作業**</span><span class="sxs-lookup"><span data-stu-id="072bb-168">**DDL Operations to Change Data Capture Enabled Source Tables**</span></span>  
 <span data-ttu-id="072bb-169">當某份資料表啟用異動資料擷取時，只有固定伺服器角色 `sysadmin` 的成員、`database role db_owner` 的成員或 `database role db_ddladmin` 的成員能夠將 DDL 作業套用至此資料表。</span><span class="sxs-lookup"><span data-stu-id="072bb-169">When a table is enabled for change data capture, DDL operations can only be applied to the table by a member of the fixed server role `sysadmin`, a member of the `database role db_owner`, or a member of the `database role db_ddladmin`.</span></span> <span data-ttu-id="072bb-170">如果擁有針對資料表執行 DDL 作業之明確授與權限的使用者嘗試執行這些作業，就會收到錯誤 22914。</span><span class="sxs-lookup"><span data-stu-id="072bb-170">Users who have explicit grants to perform DDL operations on the table will receive error 22914 if they try these operation.</span></span>  
  
### <a name="data-type-considerations-for-change-data-capture"></a><span data-ttu-id="072bb-171">異動資料擷取的資料類型考量</span><span class="sxs-lookup"><span data-stu-id="072bb-171">Data Type Considerations for Change Data Capture</span></span>  
 <span data-ttu-id="072bb-172">異動資料擷取支援所有基礎資料行類型。</span><span class="sxs-lookup"><span data-stu-id="072bb-172">All base column types are supported by change data capture.</span></span> <span data-ttu-id="072bb-173">下表將列出許多資料行類型的行為與限制。</span><span class="sxs-lookup"><span data-stu-id="072bb-173">The following table lists the behavior and limitations for several column types.</span></span>  
  
|<span data-ttu-id="072bb-174">資料行的類型</span><span class="sxs-lookup"><span data-stu-id="072bb-174">Type of Column</span></span>|<span data-ttu-id="072bb-175">在變更資料表中擷取的變更</span><span class="sxs-lookup"><span data-stu-id="072bb-175">Changes Captured in Change Tables</span></span>|<span data-ttu-id="072bb-176">限制</span><span class="sxs-lookup"><span data-stu-id="072bb-176">Limitations</span></span>|  
|--------------------|---------------------------------------|-----------------|  
|<span data-ttu-id="072bb-177">疏鬆資料行</span><span class="sxs-lookup"><span data-stu-id="072bb-177">Sparse Columns</span></span>|<span data-ttu-id="072bb-178">是</span><span class="sxs-lookup"><span data-stu-id="072bb-178">Yes</span></span>|<span data-ttu-id="072bb-179">使用資料行集時，不支援擷取變更。</span><span class="sxs-lookup"><span data-stu-id="072bb-179">Does not support capturing changes when using a columnset.</span></span>|  
|<span data-ttu-id="072bb-180">計算資料行</span><span class="sxs-lookup"><span data-stu-id="072bb-180">Computed Columns</span></span>|<span data-ttu-id="072bb-181">否</span><span class="sxs-lookup"><span data-stu-id="072bb-181">No</span></span>|<span data-ttu-id="072bb-182">不會追蹤對計算資料行所做的變更。</span><span class="sxs-lookup"><span data-stu-id="072bb-182">Changes to computed columns are not tracked.</span></span> <span data-ttu-id="072bb-183">此資料行將以適當的類型顯示在變更資料表中，但是將具有 NULL 值。</span><span class="sxs-lookup"><span data-stu-id="072bb-183">The column will appear in the change table with the appropriate type, but will have a value of NULL.</span></span>|  
|<span data-ttu-id="072bb-184">XML</span><span class="sxs-lookup"><span data-stu-id="072bb-184">XML</span></span>|<span data-ttu-id="072bb-185">是</span><span class="sxs-lookup"><span data-stu-id="072bb-185">Yes</span></span>|<span data-ttu-id="072bb-186">不會追蹤對個別 XML 元素所做的變更。</span><span class="sxs-lookup"><span data-stu-id="072bb-186">Changes to individual XML elements are not tracked.</span></span>|  
|<span data-ttu-id="072bb-187">時間戳記</span><span class="sxs-lookup"><span data-stu-id="072bb-187">Timestamp</span></span>|<span data-ttu-id="072bb-188">是</span><span class="sxs-lookup"><span data-stu-id="072bb-188">Yes</span></span>|<span data-ttu-id="072bb-189">變更資料表中的資料類型會轉換成二進位。</span><span class="sxs-lookup"><span data-stu-id="072bb-189">The data type in the change table is converted to binary.</span></span>|  
|<span data-ttu-id="072bb-190">BLOB 資料類型</span><span class="sxs-lookup"><span data-stu-id="072bb-190">BLOB data types</span></span>|<span data-ttu-id="072bb-191">是</span><span class="sxs-lookup"><span data-stu-id="072bb-191">Yes</span></span>|<span data-ttu-id="072bb-192">只有當資料行本身變更時，才會儲存 BLOB 資料行的先前影像。</span><span class="sxs-lookup"><span data-stu-id="072bb-192">The previous image of the BLOB column is stored only if the column itself is changed.</span></span>|  
  
### <a name="change-data-capture-and-other-sql-server-features"></a><span data-ttu-id="072bb-193">異動資料擷取和其他 SQL Server 功能</span><span class="sxs-lookup"><span data-stu-id="072bb-193">Change Data Capture and Other SQL Server Features</span></span>  
 <span data-ttu-id="072bb-194">本節描述下列功能如何與異動資料擷取互動：</span><span class="sxs-lookup"><span data-stu-id="072bb-194">This section describes how the following features interact with change data capture:</span></span>  
  
-   <span data-ttu-id="072bb-195">資料庫鏡像</span><span class="sxs-lookup"><span data-stu-id="072bb-195">Database mirroring</span></span>  
  
-   <span data-ttu-id="072bb-196">異動複寫</span><span class="sxs-lookup"><span data-stu-id="072bb-196">Transactional replication</span></span>  
  
-   <span data-ttu-id="072bb-197">資料庫還原或附加</span><span class="sxs-lookup"><span data-stu-id="072bb-197">Database restore or attach</span></span>  
  
#### <a name="database-mirroring"></a><span data-ttu-id="072bb-198">資料庫鏡像</span><span class="sxs-lookup"><span data-stu-id="072bb-198">Database Mirroring</span></span>  
 <span data-ttu-id="072bb-199">啟用變更資料擷取的資料庫可以進行鏡像。</span><span class="sxs-lookup"><span data-stu-id="072bb-199">A database that is enabled for change data capture can be mirrored.</span></span> <span data-ttu-id="072bb-200">若要確保擷取和清除會自動在鏡像上進行，請遵循下列步驟：</span><span class="sxs-lookup"><span data-stu-id="072bb-200">To ensure that capture and cleanup happen automatically on the mirror, follow these steps:</span></span>  
  
1.  <span data-ttu-id="072bb-201">確定 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent 正在鏡像上執行。</span><span class="sxs-lookup"><span data-stu-id="072bb-201">Ensure that [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent is running on the mirror.</span></span>  
  
2.  <span data-ttu-id="072bb-202">當主體已經容錯移轉至鏡像之後，在鏡像上建立擷取作業和清除作業。</span><span class="sxs-lookup"><span data-stu-id="072bb-202">Create the capture job and cleanup job on the mirror after the principal has failed over to the mirror.</span></span> <span data-ttu-id="072bb-203">若要建立這些作業，請使用 [sys.sp_cdc_add_job &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sys-sp-cdc-add-job-transact-sql) 預存程序。</span><span class="sxs-lookup"><span data-stu-id="072bb-203">To create the jobs, use the stored procedure [sys.sp_cdc_add_job &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sys-sp-cdc-add-job-transact-sql).</span></span>  
  
 <span data-ttu-id="072bb-204">如需資料庫鏡像的詳細資訊，請參閱[資料庫鏡像 &#40;SQL Server&#41;](../../database-engine/database-mirroring/database-mirroring-sql-server.md)。</span><span class="sxs-lookup"><span data-stu-id="072bb-204">For more information about database mirroring, see [Database Mirroring &#40;SQL Server&#41;](../../database-engine/database-mirroring/database-mirroring-sql-server.md).</span></span>  
  
#### <a name="transactional-replication"></a><span data-ttu-id="072bb-205">異動複寫</span><span class="sxs-lookup"><span data-stu-id="072bb-205">Transactional Replication</span></span>  
 <span data-ttu-id="072bb-206">雖然變更資料擷取和異動複寫可以同時存在同一個資料庫中，但是同時啟用這兩項功能時，系統會以不同的方式處理變更資料表的擴展。</span><span class="sxs-lookup"><span data-stu-id="072bb-206">Change data capture and transactional replication can coexist in the same database, but population of the change tables is handled differently when both features are enabled.</span></span> <span data-ttu-id="072bb-207">變更資料擷取和異動複寫一定會使用相同的程序 [sp_replcmds](/sql/relational-databases/system-stored-procedures/sp-replcmds-transact-sql)，從交易記錄中讀取變更。</span><span class="sxs-lookup"><span data-stu-id="072bb-207">Change data capture and transactional replication always use the same procedure, [sp_replcmds](/sql/relational-databases/system-stored-procedures/sp-replcmds-transact-sql), to read changes from the transaction log.</span></span> <span data-ttu-id="072bb-208">單獨啟用變更資料擷取時，[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent 作業就會呼叫 `sp_replcmds`。</span><span class="sxs-lookup"><span data-stu-id="072bb-208">When change data capture is enabled on its own, a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent job calls `sp_replcmds`.</span></span> <span data-ttu-id="072bb-209">當相同的資料庫上同時啟用這兩項功能時，記錄讀取器代理程式會呼叫 `sp_replcmds` 。</span><span class="sxs-lookup"><span data-stu-id="072bb-209">When both features are enabled on the same database, the Log Reader Agent calls `sp_replcmds`.</span></span> <span data-ttu-id="072bb-210">這個代理程式會同時擴展變更資料表和散發資料庫資料表。</span><span class="sxs-lookup"><span data-stu-id="072bb-210">This agent populates both the change tables and the distribution database tables.</span></span> <span data-ttu-id="072bb-211">如需詳細資訊，請參閱 [Replication Log Reader Agent](../replication/agents/replication-log-reader-agent.md)。</span><span class="sxs-lookup"><span data-stu-id="072bb-211">For more information, see [Replication Log Reader Agent](../replication/agents/replication-log-reader-agent.md).</span></span>  
  
 <span data-ttu-id="072bb-212">假設您在 [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] 資料庫上啟用了變更資料擷取，而且有兩份資料表啟用了擷取。</span><span class="sxs-lookup"><span data-stu-id="072bb-212">Consider a scenario in which change data capture is enabled on the [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] database, and two tables are enabled for capture.</span></span> <span data-ttu-id="072bb-213">為了擴展變更資料表，擷取作業會呼叫 `sp_replcmds`。</span><span class="sxs-lookup"><span data-stu-id="072bb-213">To populate the change tables, the capture job calls `sp_replcmds`.</span></span> <span data-ttu-id="072bb-214">資料庫啟用了異動複寫，而且建立了發行集。</span><span class="sxs-lookup"><span data-stu-id="072bb-214">The database is enabled for transactional replication, and a publication is created.</span></span> <span data-ttu-id="072bb-215">此時，會針對資料庫建立記錄讀取器代理程式，並且刪除擷取作業。</span><span class="sxs-lookup"><span data-stu-id="072bb-215">Now, the Log Reader Agent is created for the database and the capture job is deleted.</span></span> <span data-ttu-id="072bb-216">記錄讀取器代理程式會繼續掃描記錄，從變更資料表所認可的最後一個記錄序號開始。</span><span class="sxs-lookup"><span data-stu-id="072bb-216">The Log Reader Agent continues to scan the log from the last log sequence number that was committed to the change table.</span></span> <span data-ttu-id="072bb-217">如此可確保變更資料表中的資料保持一致。</span><span class="sxs-lookup"><span data-stu-id="072bb-217">This ensures data consistency in the change tables.</span></span> <span data-ttu-id="072bb-218">如果這個資料庫停用了異動複寫，系統就會移除記錄讀取器代理程式並且重新建立擷取作業。</span><span class="sxs-lookup"><span data-stu-id="072bb-218">If transactional replication is disabled in this database, the Log Reader Agent is removed and the capture job is re-created.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="072bb-219">當記錄讀取器代理程式同時用於變更資料擷取和異動複寫時，複寫的變更會先寫入散發資料庫。</span><span class="sxs-lookup"><span data-stu-id="072bb-219">When the Log Reader Agent is used for both change data capture and transactional replication, replicated changes are first written to the distribution database.</span></span> <span data-ttu-id="072bb-220">然後，擷取的變更才會寫入變更資料表。</span><span class="sxs-lookup"><span data-stu-id="072bb-220">Then, captured changes are written to the change tables.</span></span> <span data-ttu-id="072bb-221">這兩項作業會一起認可。</span><span class="sxs-lookup"><span data-stu-id="072bb-221">Both operations are committed together.</span></span> <span data-ttu-id="072bb-222">如果寫入散發資料庫時發生延遲，系統會建立對應的延遲，然後變更才會出現在變更資料表中。</span><span class="sxs-lookup"><span data-stu-id="072bb-222">If there is any latency in writing to the distribution database, there will be a corresponding latency before changes appear in the change tables.</span></span>  
  
#### <a name="restoring-or-attaching-a-database-enabled-for-change-data-capture"></a><span data-ttu-id="072bb-223">還原或附加啟用變更資料擷取的資料庫</span><span class="sxs-lookup"><span data-stu-id="072bb-223">Restoring or Attaching a Database Enabled for Change Data Capture</span></span>  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="072bb-224">會使用下列邏輯來判斷在還原或附加資料庫之後，變更資料擷取是否會維持啟用狀態：</span><span class="sxs-lookup"><span data-stu-id="072bb-224">uses the following logic to determine if change data capture remains enabled after a database is restored or attached:</span></span>  
  
-   <span data-ttu-id="072bb-225">如果資料庫還原至具有相同資料庫名稱的相同伺服器，變更資料擷取就會維持啟用狀態。</span><span class="sxs-lookup"><span data-stu-id="072bb-225">If a database is restored to the same server with the same database name, change data capture remains enabled.</span></span>  
  
-   <span data-ttu-id="072bb-226">如果資料庫還原至其他伺服器，預設會停用變更資料擷取並且刪除所有相關的中繼資料。</span><span class="sxs-lookup"><span data-stu-id="072bb-226">If a database is restored to another server, by default change data capture is disabled and all related metadata is deleted.</span></span>  
  
     <span data-ttu-id="072bb-227">若要保留變更資料擷取，請在還原資料庫時使用 `KEEP_CDC` 選項。</span><span class="sxs-lookup"><span data-stu-id="072bb-227">To retain change data capture, use the `KEEP_CDC` option when restoring the database.</span></span> <span data-ttu-id="072bb-228">如需有關這個選項的詳細資訊，請參閱＜ [RESTORE](/sql/t-sql/statements/restore-statements-transact-sql)＞。</span><span class="sxs-lookup"><span data-stu-id="072bb-228">For more information about this option, see [RESTORE](/sql/t-sql/statements/restore-statements-transact-sql).</span></span>  
  
-   <span data-ttu-id="072bb-229">如果資料庫卸離並附加至相同伺服器或其他伺服器，變更資料擷取就會維持啟用狀態。</span><span class="sxs-lookup"><span data-stu-id="072bb-229">If a database is detached and attached to the same server or another server, change data capture remains enabled.</span></span>  
  
-   <span data-ttu-id="072bb-230">如果您使用 `KEEP_CDC` 選項，將資料庫附加或還原至 Enterprise 以外的任何版本，此作業就會遭封鎖，因為異動資料擷取需要 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Enterprise。</span><span class="sxs-lookup"><span data-stu-id="072bb-230">If a database is attached or restored with the `KEEP_CDC` option to any edition other than Enterprise, the operation is blocked because change data capture requires [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Enterprise.</span></span> <span data-ttu-id="072bb-231">此時會顯示錯誤訊息 932：</span><span class="sxs-lookup"><span data-stu-id="072bb-231">Error message 932 is displayed:</span></span>  
  
     `SQL Server cannot load database '%.*ls' because change data capture is enabled. The currently installed edition of SQL Server does not support change data capture. Either disable change data capture in the database by using a supported edition of SQL Server, or upgrade the instance to one that supports change data capture.`  
  
 <span data-ttu-id="072bb-232">您可以使用 [sys.sp_cdc_disable_db](/sql/relational-databases/system-stored-procedures/sys-sp-cdc-disable-db-transact-sql) ，從還原或附加的資料庫中移除變更資料擷取。</span><span class="sxs-lookup"><span data-stu-id="072bb-232">You can use [sys.sp_cdc_disable_db](/sql/relational-databases/system-stored-procedures/sys-sp-cdc-disable-db-transact-sql) to remove change data capture from a restored or attached database.</span></span>  
 

  ##  <a name="change-tracking"></a><a name="Tracking"></a> <span data-ttu-id="072bb-233">變更追蹤</span><span class="sxs-lookup"><span data-stu-id="072bb-233">Change Tracking</span></span>  
 <span data-ttu-id="072bb-234">變更追蹤會擷取資料表中資料列變更的事實，但是不會擷取變更的資料。</span><span class="sxs-lookup"><span data-stu-id="072bb-234">Change tracking captures the fact that rows in a table were changed, but does not capture the data that was changed.</span></span> <span data-ttu-id="072bb-235">這項功能可讓應用程式使用直接從使用者資料表中取得的最新資料列資料，判斷已經變更的資料列。</span><span class="sxs-lookup"><span data-stu-id="072bb-235">This enables applications to determine the rows that have changed with the latest row data being obtained directly from the user tables.</span></span> <span data-ttu-id="072bb-236">因此，與異動資料擷取相較之下，變更追蹤在它可回答的歷程記錄問題方面具有較多限制。</span><span class="sxs-lookup"><span data-stu-id="072bb-236">Therefore, change tracking is more limited in the historical questions it can answer compared to change data capture.</span></span> <span data-ttu-id="072bb-237">不過，對於不需要歷程記錄資訊的應用程式而言，由於不會擷取變更的資料，因此儲存負擔會非常低。</span><span class="sxs-lookup"><span data-stu-id="072bb-237">However, for those applications that do not require the historical information, there is far less storage overhead because of the changed data not being captured.</span></span> <span data-ttu-id="072bb-238">這項功能會使用同步追蹤機制來追蹤變更。</span><span class="sxs-lookup"><span data-stu-id="072bb-238">A synchronous tracking mechanism is used to track the changes.</span></span> <span data-ttu-id="072bb-239">其設計目的是要對 DML 作業產生最低負擔。</span><span class="sxs-lookup"><span data-stu-id="072bb-239">This has been designed to have minimal overhead to the DML operations.</span></span>  
  
 <span data-ttu-id="072bb-240">下圖將顯示使用變更追蹤所獲益的同步處理狀況。</span><span class="sxs-lookup"><span data-stu-id="072bb-240">The following illustration shows a synchronization scenario that would benefit by using change tracking.</span></span> <span data-ttu-id="072bb-241">在此狀況中，應用程式需要下列資訊：自從資料表上次同步處理以來已經變更的所有資料表資料列，以及只有目前的資料列資料。</span><span class="sxs-lookup"><span data-stu-id="072bb-241">In the scenario, an application requires the following information: all the rows in the table that were changed since in the last time that the table was synchronized, and only the current row data.</span></span> <span data-ttu-id="072bb-242">由於使用了同步機制來追蹤變更，因此應用程式可以執行雙向同步處理，而且能夠可靠地偵測出可能已經發生的任何衝突。</span><span class="sxs-lookup"><span data-stu-id="072bb-242">Because a synchronous mechanism is used to track the changes, an application can perform two-way synchronization and reliably detect any conflicts that might have occurred.</span></span>  
  
 <span data-ttu-id="072bb-243">![變更追蹤的概念圖例](../../database-engine/media/cdcart2.gif "變更追蹤的概念圖例")</span><span class="sxs-lookup"><span data-stu-id="072bb-243">![Conceptual illustration of change tracking](../../database-engine/media/cdcart2.gif "Conceptual illustration of change tracking")</span></span>  
  
### <a name="change-tracking-and-sync-services-for-adonet"></a><span data-ttu-id="072bb-244">變更追蹤和 Sync Services for ADO.NET</span><span class="sxs-lookup"><span data-stu-id="072bb-244">Change Tracking and Sync Services for ADO.NET</span></span>  
 [!INCLUDE[sql_sync_long](../../includes/sql-sync-long-md.md)] <span data-ttu-id="072bb-245">可以在資料庫之間同步處理，並提供一套直覺式和具彈性的 API，可讓您用來建立針對離線和共同作業案例的應用程式。</span><span class="sxs-lookup"><span data-stu-id="072bb-245">enables synchronization between databases, providing an intuitive and flexible API that enables you to build applications that target offline and collaboration scenarios.</span></span> [!INCLUDE[sql_sync_long](../../includes/sql-sync-long-md.md)] <span data-ttu-id="072bb-246">提供了可同步處理變更的 API，但是它實際上不會追蹤伺服器或對等 (Peer) 資料庫中的變更。</span><span class="sxs-lookup"><span data-stu-id="072bb-246">provides an API to synchronize changes, but it does not actually track changes in the server or peer database.</span></span> <span data-ttu-id="072bb-247">您可以建立自訂變更追蹤系統，但是這樣做通常會大幅增加複雜度和效能負擔。</span><span class="sxs-lookup"><span data-stu-id="072bb-247">You can create a custom change tracking system, but this typically introduces significant complexity and performance overhead.</span></span> <span data-ttu-id="072bb-248">若要追蹤伺服器或對等資料庫中的變更，我們建議您使用 [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] 中的變更追蹤，因為這項功能容易設定而且可提供高效能追蹤。</span><span class="sxs-lookup"><span data-stu-id="072bb-248">To track changes in a server or peer database, we recommend that you use change tracking in [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] because it is easy to configure and provides high performance tracking.</span></span>  
  
 <span data-ttu-id="072bb-249">如需有關變更追蹤和 [!INCLUDE[sql_sync_long](../../includes/sql-sync-long-md.md)]的詳細資訊，請使用下列連結：</span><span class="sxs-lookup"><span data-stu-id="072bb-249">For more information about change tracking and [!INCLUDE[sql_sync_long](../../includes/sql-sync-long-md.md)], use the following links:</span></span>  
  
-   [<span data-ttu-id="072bb-250">關於變更追蹤 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="072bb-250">About Change Tracking &#40;SQL Server&#41;</span></span>](../track-changes/about-change-tracking-sql-server.md)  
  
     <span data-ttu-id="072bb-251">描述變更追蹤、提供變更追蹤之運作方式的高層級概觀，以及描述變更追蹤要如何與其他 [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] 功能互動。</span><span class="sxs-lookup"><span data-stu-id="072bb-251">Describes change tracking, provides a high-level overview of how change tracking works, and describes how change tracking interacts with other [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] features.</span></span>  
  
-   [<span data-ttu-id="072bb-252">Microsoft Sync Framework 開發人員中心</span><span class="sxs-lookup"><span data-stu-id="072bb-252">Microsoft Sync Framework Developer Center</span></span>](https://go.microsoft.com/fwlink/?LinkId=108054)  
  
     <span data-ttu-id="072bb-253">提供 [!INCLUDE[ssSyncFrameLong](../../includes/sssyncframelong-md.md)] 和 [!INCLUDE[sql_sync_short](../../includes/sql-sync-short-md.md)]的完整文件集。</span><span class="sxs-lookup"><span data-stu-id="072bb-253">Provides complete documentation for [!INCLUDE[ssSyncFrameLong](../../includes/sssyncframelong-md.md)] and [!INCLUDE[sql_sync_short](../../includes/sql-sync-short-md.md)].</span></span> <span data-ttu-id="072bb-254">在 [!INCLUDE[sql_sync_short](../../includes/sql-sync-short-md.md)]的文件集中，＜如何：使用 SQL Server 變更追蹤＞主題包含了詳細資訊和程式碼範例。</span><span class="sxs-lookup"><span data-stu-id="072bb-254">In the documentation for [!INCLUDE[sql_sync_short](../../includes/sql-sync-short-md.md)], the topic "How to: Use SQL Server Change Tracking" contains detailed information and code examples.</span></span>  
  
  
## <a name="related-tasks-required"></a><span data-ttu-id="072bb-255">相關工作 (必要)</span><span class="sxs-lookup"><span data-stu-id="072bb-255">Related Tasks (required)</span></span>  
  
|||  
|-|-|  
|<span data-ttu-id="072bb-256">**Task**</span><span class="sxs-lookup"><span data-stu-id="072bb-256">**Task**</span></span>|<span data-ttu-id="072bb-257">**主題**</span><span class="sxs-lookup"><span data-stu-id="072bb-257">**Topic**</span></span>|  
|<span data-ttu-id="072bb-258">提供異動資料擷取的概觀。</span><span class="sxs-lookup"><span data-stu-id="072bb-258">Provides an overview of change data capture.</span></span>|[<span data-ttu-id="072bb-259">關於異動資料擷取 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="072bb-259">About Change Data Capture &#40;SQL Server&#41;</span></span>](../track-changes/about-change-data-capture-sql-server.md)|  
|<span data-ttu-id="072bb-260">描述如何在資料庫或資料表上啟用及停用異動資料擷取。</span><span class="sxs-lookup"><span data-stu-id="072bb-260">Describes how to enable and disable change data capture on a database or table.</span></span>|[<span data-ttu-id="072bb-261">啟用和停用異動資料擷取 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="072bb-261">Enable and Disable Change Data Capture &#40;SQL Server&#41;</span></span>](../track-changes/enable-and-disable-change-data-capture-sql-server.md)|  
|<span data-ttu-id="072bb-262">描述如何管理及監視異動資料擷取。</span><span class="sxs-lookup"><span data-stu-id="072bb-262">Describes how to administer and monitor change data capture.</span></span>|[<span data-ttu-id="072bb-263">管理和監視異動資料擷取 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="072bb-263">Administer and Monitor Change Data Capture &#40;SQL Server&#41;</span></span>](../track-changes/administer-and-monitor-change-data-capture-sql-server.md)|  
|<span data-ttu-id="072bb-264">描述如何處理可用於異動資料擷取取用者的變更資料。</span><span class="sxs-lookup"><span data-stu-id="072bb-264">Describes how to work with the change data that is available to change data capture consumers.</span></span> <span data-ttu-id="072bb-265">此主題涵蓋驗證 LSN 界限、查詢函數和查詢函數案例。</span><span class="sxs-lookup"><span data-stu-id="072bb-265">This topic covers validating LSN boundaries, the query functions, and query function scenarios.</span></span>|[<span data-ttu-id="072bb-266">使用異動資料 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="072bb-266">Work with Change Data &#40;SQL Server&#41;</span></span>](../track-changes/work-with-change-data-sql-server.md)|  
|<span data-ttu-id="072bb-267">提供變更追蹤的概觀。</span><span class="sxs-lookup"><span data-stu-id="072bb-267">Provides an overview of change tracking.</span></span>|[<span data-ttu-id="072bb-268">關於變更追蹤 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="072bb-268">About Change Tracking &#40;SQL Server&#41;</span></span>](../track-changes/about-change-tracking-sql-server.md)|  
|<span data-ttu-id="072bb-269">描述如何在資料庫或資料表上啟用及停用變更追蹤。</span><span class="sxs-lookup"><span data-stu-id="072bb-269">Describes how to enable and disable change tracking on a database or table.</span></span>|[<span data-ttu-id="072bb-270">啟用和停用變更追蹤 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="072bb-270">Enable and Disable Change Tracking &#40;SQL Server&#41;</span></span>](../track-changes/enable-and-disable-change-tracking-sql-server.md)|  
|<span data-ttu-id="072bb-271">描述如何管理變更追蹤、設定安全性，以及判斷使用變更追蹤對儲存和效能產生的影響。</span><span class="sxs-lookup"><span data-stu-id="072bb-271">Describes how to manage change tracking, configure security, and determine the effects on storage and performance when change tracking is used.</span></span>|[<span data-ttu-id="072bb-272">管理變更追蹤 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="072bb-272">Manage Change Tracking &#40;SQL Server&#41;</span></span>](../track-changes/manage-change-tracking-sql-server.md)|  
|<span data-ttu-id="072bb-273">描述使用變更追蹤的應用程式如何取得追蹤變更、將這些變更套用至另一個資料存放區，以及更新來源資料庫。</span><span class="sxs-lookup"><span data-stu-id="072bb-273">Describes how applications that use change tracking can obtain tracked changes, apply these changes to another data store, and update the source database.</span></span> <span data-ttu-id="072bb-274">此主題也描述在進行容錯移轉而且必須從備份還原資料庫時，變更追蹤所扮演的角色。</span><span class="sxs-lookup"><span data-stu-id="072bb-274">This topic also describes the role change tracking plays when a failover occurs and a database must be restored from a backup.</span></span>|[<span data-ttu-id="072bb-275">使用變更追蹤 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="072bb-275">Work with Change Tracking &#40;SQL Server&#41;</span></span>](../track-changes/work-with-change-tracking-sql-server.md)|  
  
## <a name="see-also"></a><span data-ttu-id="072bb-276">另請參閱</span><span class="sxs-lookup"><span data-stu-id="072bb-276">See Also</span></span>  
 <span data-ttu-id="072bb-277">[&#40;Transact-sql&#41;變更資料捕獲函數](/sql/relational-databases/system-functions/change-data-capture-functions-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="072bb-277">[Change Data Capture Functions &#40;Transact-SQL&#41;](/sql/relational-databases/system-functions/change-data-capture-functions-transact-sql) </span></span>  
 <span data-ttu-id="072bb-278">[變更追蹤函數 &#40;Transact-sql&#41;](/sql/relational-databases/system-functions/change-tracking-functions-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="072bb-278">[Change Tracking Functions &#40;Transact-SQL&#41;](/sql/relational-databases/system-functions/change-tracking-functions-transact-sql) </span></span>  
 <span data-ttu-id="072bb-279">[變更資料捕獲預存程式 &#40;Transact-sql&#41;](/sql/relational-databases/system-stored-procedures/change-data-capture-stored-procedures-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="072bb-279">[Change Data Capture Stored Procedures &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/change-data-capture-stored-procedures-transact-sql) </span></span>  
 <span data-ttu-id="072bb-280">[&#40;Transact-sql&#41;變更資料捕獲資料表](/sql/relational-databases/system-tables/change-data-capture-tables-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="072bb-280">[Change Data Capture Tables &#40;Transact-SQL&#41;](/sql/relational-databases/system-tables/change-data-capture-tables-transact-sql) </span></span>  
 [<span data-ttu-id="072bb-281">異動資料擷取相關的動態管理檢視 &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="072bb-281">Change Data Capture Related Dynamic Management Views &#40;Transact-SQL&#41;</span></span>](../views/views.md)  
  
  
