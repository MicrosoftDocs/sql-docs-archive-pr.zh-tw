---
title: 使用 Azure Blob 儲存體服務 SQL Server 備份和還原 |Microsoft Docs
ms.custom: ''
ms.date: 03/07/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: backup-restore
ms.topic: conceptual
ms.assetid: 6a0c9b6a-cf71-4311-82f2-12c445f63935
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 943da9018e50e1f287858654d4639035f3aa4532
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87599520"
---
# <a name="sql-server-backup-and-restore-with-azure-blob-storage-service"></a><span data-ttu-id="1db30-102">使用 Azure Blob 儲存體服務的 SQL Server 備份及還原</span><span class="sxs-lookup"><span data-stu-id="1db30-102">SQL Server Backup and Restore with Azure Blob Storage Service</span></span>
  <span data-ttu-id="1db30-103">本主題介紹 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [Azure Blob 儲存體服務](https://www.windowsazure.com/develop/net/how-to-guides/blob-storage/)的備份與還原。</span><span class="sxs-lookup"><span data-stu-id="1db30-103">This topic introduces [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] backups to and restoring from the [Azure Blob storage service](https://www.windowsazure.com/develop/net/how-to-guides/blob-storage/).</span></span> <span data-ttu-id="1db30-104">它也提供使用 Azure Blob 服務來儲存備份的優點摘要 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 。</span><span class="sxs-lookup"><span data-stu-id="1db30-104">It also provides a summary of the benefits of using the Azure Blob service to store [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] backups.</span></span>  
  
 <span data-ttu-id="1db30-105">SQL Server 支援以下列方式將備份儲存到 Azure Blob 儲存體服務：</span><span class="sxs-lookup"><span data-stu-id="1db30-105">SQL Server supports storing backups to the Azure Blob storage service in the following ways:</span></span>  
  
-   <span data-ttu-id="1db30-106">**管理您的 Azure 備份：** 您現在可以使用用來備份至磁片和磁帶的相同方法，將 URL 指定為備份目的地，以備份至 Azure 儲存體。</span><span class="sxs-lookup"><span data-stu-id="1db30-106">**Manage your backups  to Azure:** Using the same methods used to backup to DISK and TAPE, you can now back up to Azure storage by Specifying URL as the backup destination.</span></span>  <span data-ttu-id="1db30-107">一如您對於本機儲存體或其他異地選項的處理方式，您可以使用此功能手動備份或設定您自己的備份策略。</span><span class="sxs-lookup"><span data-stu-id="1db30-107">You can use this feature to manually backup or configure your own backup strategy like you would for a local storage or other off-site options.</span></span> <span data-ttu-id="1db30-108">此功能又稱為 **SQL Server 備份至 URL**。</span><span class="sxs-lookup"><span data-stu-id="1db30-108">This feature is also referred to as **SQL Server Backup to URL**.</span></span> <span data-ttu-id="1db30-109">如需詳細資訊，請參閱 [SQL Server Backup to URL](sql-server-backup-to-url.md)。</span><span class="sxs-lookup"><span data-stu-id="1db30-109">For more information, see [SQL Server Backup to URL](sql-server-backup-to-url.md).</span></span> <span data-ttu-id="1db30-110">SQL Server 2012 SP1 CU2 或更新版本皆提供此功能。</span><span class="sxs-lookup"><span data-stu-id="1db30-110">This feature is available in SQL Server 2012 SP1 CU2 or later.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="1db30-111">針對 SQL Server 2014 之前的 SQL Server 版本，您可以使用增益集 SQL Server 備份至 Azure 工具，快速且輕鬆地建立 Azure 儲存體的備份。</span><span class="sxs-lookup"><span data-stu-id="1db30-111">For SQL Server versions previous to SQL Server 2014, you can use the add-in SQL Server Backup to Azure Tool to quickly and easily create backups to Azure storage.</span></span> <span data-ttu-id="1db30-112">如需詳細資訊，請參閱＜ [下載中心](https://go.microsoft.com/fwlink/?LinkID=324399)＞。</span><span class="sxs-lookup"><span data-stu-id="1db30-112">For more information, see [download center](https://go.microsoft.com/fwlink/?LinkID=324399).</span></span>  
  
-   <span data-ttu-id="1db30-113">**讓 SQL Server 管理 Azure 的備份：** 設定 SQL Server 來管理單一資料庫或多個資料庫的備份策略與排程備份，或在實例層級設定預設值。</span><span class="sxs-lookup"><span data-stu-id="1db30-113">**Let SQL Server Manage backups to Azure:** Configure SQL Server to manage the backup strategy and schedule backups for a single database, or several databases, or set defaults at the instance level.</span></span> <span data-ttu-id="1db30-114">這項功能稱為 **[!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]** 。</span><span class="sxs-lookup"><span data-stu-id="1db30-114">This feature is referred to as  **[!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]**.</span></span> <span data-ttu-id="1db30-115">如需詳細資訊，請參閱[SQL Server 受控備份至 Azure](sql-server-managed-backup-to-microsoft-azure.md)。</span><span class="sxs-lookup"><span data-stu-id="1db30-115">For more information see [SQL Server Managed  Backup to Azure](sql-server-managed-backup-to-microsoft-azure.md).</span></span> <span data-ttu-id="1db30-116">SQL Server 2014 或更新版本皆提供此功能。</span><span class="sxs-lookup"><span data-stu-id="1db30-116">This feature is available in SQL Server 2014 or later.</span></span>  
  
## <a name="benefits-of-using-the-azure-blob-service-for-ssnoversion-backups"></a><span data-ttu-id="1db30-117">使用 Azure Blob 服務進行備份的優點 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]</span><span class="sxs-lookup"><span data-stu-id="1db30-117">Benefits of Using the Azure Blob Service for [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Backups</span></span>  
  
-   <span data-ttu-id="1db30-118">彈性、可靠且無限制的異地儲存體：將您的備份儲存在 Azure Blob 服務可以是方便、彈性且容易存取的異地選項。</span><span class="sxs-lookup"><span data-stu-id="1db30-118">Flexible, reliable, and limitless off-site storage: Storing your backups on Azure Blob service can be a convenient, flexible, and easy to access off-site option.</span></span> <span data-ttu-id="1db30-119">針對您的 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 備份建立異地儲存體就像修改現有的指令碼/作業一樣簡單。</span><span class="sxs-lookup"><span data-stu-id="1db30-119">Creating off-site storage for your [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] backups can be as easy as modifying your existing scripts/jobs.</span></span> <span data-ttu-id="1db30-120">異地儲存體通常應該遠離實際執行資料庫位置，防止單一災害同時影響異地和實際執行資料庫位置。</span><span class="sxs-lookup"><span data-stu-id="1db30-120">Off-site storage should typically be far enough from the production database location to prevent a single disaster that might impact both the off-site and production database locations.</span></span> <span data-ttu-id="1db30-121">透過選擇異地備援 Blob 儲存體，您就可以在發生可能影響整個地區的災害時，獲得一層額外的保護。</span><span class="sxs-lookup"><span data-stu-id="1db30-121">By choosing to geo replicate the Blob storage you have an extra layer of protection in the event of a disaster that could affect the whole region.</span></span> <span data-ttu-id="1db30-122">此外，您可以隨時隨地取得備份，輕鬆地針對還原作業進行存取。</span><span class="sxs-lookup"><span data-stu-id="1db30-122">In addition, backups are available from anywhere and at any time and can easily be accessed for restores.</span></span>  
  
-   <span data-ttu-id="1db30-123">備份封存： Azure Blob 儲存體服務提供較佳的替代方案，讓您更容易保存備份的常用磁帶選項。</span><span class="sxs-lookup"><span data-stu-id="1db30-123">Backup Archive: The Azure Blob Storage service offers a better alternative to the often used tape option to archive backups.</span></span> <span data-ttu-id="1db30-124">磁帶儲存體可能需要實際運輸至異地設施並採取措施來保護媒體。</span><span class="sxs-lookup"><span data-stu-id="1db30-124">Tape storage might require physical transportation to an off-site facility and measures to protect the media.</span></span> <span data-ttu-id="1db30-125">將備份存放在 Azure Blob 儲存體提供了立即、高度可用且持久的封存選項。</span><span class="sxs-lookup"><span data-stu-id="1db30-125">Storing your backups in Azure Blob Storage provides an instant, highly available, and a durable archiving option.</span></span>  
  
-   <span data-ttu-id="1db30-126">沒有硬體管理的額外負荷： Azure 服務不會產生硬體管理的額外負荷。</span><span class="sxs-lookup"><span data-stu-id="1db30-126">No overhead of hardware management:There is no overhead of hardware management with Azure services.</span></span> <span data-ttu-id="1db30-127">Azure 服務會管理硬體，並提供地埋區域備援複寫，以提供備援及硬體故障的防護。</span><span class="sxs-lookup"><span data-stu-id="1db30-127">Azure services manage the hardware and provide geo-replication for redundancy and protection against hardware failures.</span></span>  
  
-   <span data-ttu-id="1db30-128">目前 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ，針對在 Azure 虛擬機器中執行的實例，您可以藉由建立連接的磁片來備份至 Azure Blob 儲存體服務。</span><span class="sxs-lookup"><span data-stu-id="1db30-128">Currently for instances of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] running in an Azure Virtual Machine, backing up to Azure Blob storage services can be done by creating attached disks.</span></span> <span data-ttu-id="1db30-129">不過，您可以連接到 Azure 虛擬機器的磁片數目有所限制。</span><span class="sxs-lookup"><span data-stu-id="1db30-129">However, there is a limit to the number of disks you can attach to an Azure Virtual Machine.</span></span> <span data-ttu-id="1db30-130">超大執行個體的限制為 16 個磁碟，而較小執行個體的限制則更低。</span><span class="sxs-lookup"><span data-stu-id="1db30-130">This limit is 16 disks for an extra large instance and fewer for smaller instances.</span></span> <span data-ttu-id="1db30-131">藉由啟用直接備份至 Azure Blob 儲存體，您可以略過16個磁片限制。</span><span class="sxs-lookup"><span data-stu-id="1db30-131">By enabling a direct backup to Azure Blob Storage, you can bypass the 16 disk limit.</span></span>  
  
     <span data-ttu-id="1db30-132">此外，現在儲存在 Azure Blob 儲存體服務中的備份檔案可以直接提供給內部部署 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 或在 Azure 虛擬機器中執行的另一個， [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 而不需要資料庫附加/卸離或下載並連結 VHD。</span><span class="sxs-lookup"><span data-stu-id="1db30-132">In addition, the backup file which now is stored in the Azure Blob storage service is directly available to either an on-premises [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] or another [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] running in an Azure Virtual Machine, without the need for database attach/detach or downloading and attaching the VHD.</span></span>  
  
-   <span data-ttu-id="1db30-133">成本效益：只有使用的服務才要付費。</span><span class="sxs-lookup"><span data-stu-id="1db30-133">Cost Benefits: Pay only for the service that is used.</span></span> <span data-ttu-id="1db30-134">成為符合成本效益的異地與備份封存選項。</span><span class="sxs-lookup"><span data-stu-id="1db30-134">Can be cost-effective as an off-site and backup archive option.</span></span> <span data-ttu-id="1db30-135">如需詳細資訊和連結，請參閱[Azure 計費考慮](#Billing)一節。</span><span class="sxs-lookup"><span data-stu-id="1db30-135">See the [Azure Billing Considerations](#Billing) section for more information and links.</span></span>  
  
##  <a name="azure-billing-considerations"></a><a name="Billing"></a><span data-ttu-id="1db30-136">Azure 計費考慮：</span><span class="sxs-lookup"><span data-stu-id="1db30-136">Azure Billing Considerations:</span></span>  
 <span data-ttu-id="1db30-137">瞭解 Azure 儲存體成本可讓您預測在 Azure 中建立和儲存備份的成本。</span><span class="sxs-lookup"><span data-stu-id="1db30-137">Understanding Azure storage costs enables you to forecast the cost of creating and storing backups in Azure.</span></span>  
  
 <span data-ttu-id="1db30-138">[Azure 定價計算機](https://go.microsoft.com/fwlink/?LinkId=277060)可以協助您預估成本。</span><span class="sxs-lookup"><span data-stu-id="1db30-138">The [Azure pricing calculator](https://go.microsoft.com/fwlink/?LinkId=277060) can help estimate your costs.</span></span>  
  
 <span data-ttu-id="1db30-139">**儲存體** ：費用是根據使用的空間收費，而計算方式採累進費率和備援等級計算。</span><span class="sxs-lookup"><span data-stu-id="1db30-139">**Storage:** Charges are based on the space used and are calculated on a graduated scale and the level of redundancy.</span></span> <span data-ttu-id="1db30-140">如需詳細資料與最新資訊，請參閱 **定價詳細資料** 文章的 [資料管理](https://go.microsoft.com/fwlink/?LinkId=277059) 一節。</span><span class="sxs-lookup"><span data-stu-id="1db30-140">For more details, and up-to-date information, see the **Data Management** section of the [Pricing Details](https://go.microsoft.com/fwlink/?LinkId=277059) article.</span></span>  
  
 <span data-ttu-id="1db30-141">**資料傳輸：** Azure 的輸入資料傳輸是免費的。</span><span class="sxs-lookup"><span data-stu-id="1db30-141">**Data Transfers:** Inbound data transfers to Azure are free.</span></span> <span data-ttu-id="1db30-142">輸出傳輸則必須支付頻寬使用量的費用，計算方式是根據地區特定的累進費率計算。</span><span class="sxs-lookup"><span data-stu-id="1db30-142">Outbound transfers are charged for the bandwidth use and calculated based on a graduated region-specific scale.</span></span> <span data-ttu-id="1db30-143">如需詳細資料，請參閱＜定價詳細資料＞文章的 [資料傳輸](https://go.microsoft.com/fwlink/?LinkId=277061) 一節。</span><span class="sxs-lookup"><span data-stu-id="1db30-143">For more details, see the [Data Transfers](https://go.microsoft.com/fwlink/?LinkId=277061) section of the Pricing Details article.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="1db30-144">另請參閱</span><span class="sxs-lookup"><span data-stu-id="1db30-144">See Also</span></span>  
 <span data-ttu-id="1db30-145">[SQL Server 備份至 URL 的最佳作法和疑難排解](sql-server-backup-to-url-best-practices-and-troubleshooting.md) </span><span class="sxs-lookup"><span data-stu-id="1db30-145">[SQL Server Backup to URL Best Practices and Troubleshooting](sql-server-backup-to-url-best-practices-and-troubleshooting.md) </span></span>  
 <span data-ttu-id="1db30-146">[系統資料庫的備份與還原 &#40;SQL Server&#41;](back-up-and-restore-of-system-databases-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="1db30-146">[Back Up and Restore of System Databases &#40;SQL Server&#41;](back-up-and-restore-of-system-databases-sql-server.md) </span></span>  
 <span data-ttu-id="1db30-147">[教學課程： SQL Server 備份和還原至 Azure Blob 儲存體服務](../tutorial-sql-server-backup-and-restore-to-azure-blob-storage-service.md) </span><span class="sxs-lookup"><span data-stu-id="1db30-147">[Tutorial: SQL Server Backup and Restore to Azure Blob Storage Service](../tutorial-sql-server-backup-and-restore-to-azure-blob-storage-service.md) </span></span>  
 [<span data-ttu-id="1db30-148">SQL Server 備份至 URL</span><span class="sxs-lookup"><span data-stu-id="1db30-148">SQL Server Backup to URL</span></span>](sql-server-backup-to-url.md)  
  
