---
title: 還原資料庫備份 (SQL Server Management Studio) |Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: backup-restore
ms.topic: conceptual
f1_keywords:
- sql12.swb.locatebackupfileazure.f1
- sql12.swb.specifybackup.f1
helpviewer_keywords:
- full backups [SQL Server]
- database restores [SQL Server], full backups
- backing up databases [SQL Server], full backups
- database backups [SQL Server], full backups
- restoring databases [SQL Server], full backups
ms.assetid: 24b3311d-5ce0-4581-9a05-5c7c726c7b21
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 82c3c7191ab686550885ebdc050f5fb1ac818cb9
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87598472"
---
# <a name="restore-a-database-backup-sql-server-management-studio"></a><span data-ttu-id="7257b-102">還原資料庫備份 (SQL Server Management Studio)</span><span class="sxs-lookup"><span data-stu-id="7257b-102">Restore a Database Backup (SQL Server Management Studio)</span></span>
  <span data-ttu-id="7257b-103">本主題說明如何還原完整資料庫備份。</span><span class="sxs-lookup"><span data-stu-id="7257b-103">This topic explains how to restore a full database backup.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="7257b-104">在完整或大量記錄復原模式下，您必須先備份使用中的交易記錄檔 (也稱為記錄檔的結尾)，才能在 [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] 中還原資料庫。</span><span class="sxs-lookup"><span data-stu-id="7257b-104">Under the full or bulk-logged recovery model, before you can restore a database in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], you must back up the active transaction log (known as the tail of the log).</span></span> <span data-ttu-id="7257b-105">如需詳細資訊，請參閱 [備份交易記錄 &#40;SQL Server&#41;](back-up-a-transaction-log-sql-server.md)資料庫還原至新位置，並選擇性地重新命名資料庫。</span><span class="sxs-lookup"><span data-stu-id="7257b-105">For more information, see [Back Up a Transaction Log &#40;SQL Server&#41;](back-up-a-transaction-log-sql-server.md).</span></span> <span data-ttu-id="7257b-106">若要還原加密的資料庫，您必須能夠存取之前用來加密資料庫的憑證或非對稱金鑰。</span><span class="sxs-lookup"><span data-stu-id="7257b-106">To restore a database that is encrypted, you must have access to the certificate or asymmetric key that was used to encrypt the database.</span></span> <span data-ttu-id="7257b-107">如果沒有該憑證或非對稱金鑰，就無法還原資料庫。</span><span class="sxs-lookup"><span data-stu-id="7257b-107">Without the certificate or asymmetric key, the database cannot be restored.</span></span> <span data-ttu-id="7257b-108">因此，只要需要備份，就必須保留用來加密資料庫加密金鑰的憑證。</span><span class="sxs-lookup"><span data-stu-id="7257b-108">As a result, the certificate that is used to encrypt the database encryption key must be retained as long as the backup is needed.</span></span> <span data-ttu-id="7257b-109">如需詳細資訊，請參閱 [SQL Server Certificates and Asymmetric Keys](../security/sql-server-certificates-and-asymmetric-keys.md)。</span><span class="sxs-lookup"><span data-stu-id="7257b-109">For more information, see [SQL Server Certificates and Asymmetric Keys](../security/sql-server-certificates-and-asymmetric-keys.md).</span></span>  
  
 <span data-ttu-id="7257b-110">請注意，如果您將 [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] 或更高版本的資料庫還原成 [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]，資料庫會自動升級。</span><span class="sxs-lookup"><span data-stu-id="7257b-110">Note that if you restore a [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] or higher database to [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], the database is automatically upgraded.</span></span> <span data-ttu-id="7257b-111">通常，資料庫立即變為可用。</span><span class="sxs-lookup"><span data-stu-id="7257b-111">Typically, the database becomes available immediately.</span></span> <span data-ttu-id="7257b-112">不過，如果 [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] 資料庫具有全文檢索索引，升級程序就會根據 [全文檢索升級選項] 伺服器屬性的設定，匯入、重設或重建這些索引。</span><span class="sxs-lookup"><span data-stu-id="7257b-112">However, if a [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] database has full-text indexes, the upgrade process either imports, resets, or rebuilds them, depending on the setting of the **Full-Text Upgrade Option** server property.</span></span> <span data-ttu-id="7257b-113">如果升級選項設定為 [匯入] 或 [重建]，則全文檢索索引在升級期間將無法使用。</span><span class="sxs-lookup"><span data-stu-id="7257b-113">If the upgrade option is set to **Import** or **Rebuild**, the full-text indexes will be unavailable during the upgrade.</span></span> <span data-ttu-id="7257b-114">根據進行索引的資料數量而定，匯入可能需要數個小時，而重建可能需要十倍以上的時間。</span><span class="sxs-lookup"><span data-stu-id="7257b-114">Depending upon the amount of data being indexed, importing can take several hours, and rebuilding can take up to ten times longer.</span></span> <span data-ttu-id="7257b-115">此外，請注意，當升級選項設定為 [匯入] 時，如果全文檢索目錄無法使用，系統就會重建相關聯的全文檢索索引。</span><span class="sxs-lookup"><span data-stu-id="7257b-115">Note also that when the upgrade option is set to **Import**, if a full-text catalog is not available, the associated full-text indexes are rebuilt.</span></span> <span data-ttu-id="7257b-116">如需有關檢視或變更 **全文檢索目錄升級選項** 屬性設定的詳細資訊，請參閱＜ [管理及監視伺服器執行個體的全文檢索搜尋](../search/manage-and-monitor-full-text-search-for-a-server-instance.md)＞。</span><span class="sxs-lookup"><span data-stu-id="7257b-116">For information about viewing or changing the setting of the **Full-Text Upgrade Option** property, see [Manage and Monitor Full-Text Search for a Server Instance](../search/manage-and-monitor-full-text-search-for-a-server-instance.md).</span></span>  
  
### <a name="to-restore-a-full-database-backup"></a><span data-ttu-id="7257b-117">還原完整資料庫備份</span><span class="sxs-lookup"><span data-stu-id="7257b-117">To restore a full database backup</span></span>  
  
1.  <span data-ttu-id="7257b-118">連線到適當的 [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] 執行個體之後，請在 [物件總管] 中按一下伺服器名稱以展開伺服器樹狀目錄。</span><span class="sxs-lookup"><span data-stu-id="7257b-118">After you connect to the appropriate instance of the [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)], in Object Explorer, click the server name to expand the server tree.</span></span>  
  
2.  <span data-ttu-id="7257b-119">展開 **[資料庫]** 。</span><span class="sxs-lookup"><span data-stu-id="7257b-119">Expand **Databases**.</span></span> <span data-ttu-id="7257b-120">視資料庫而定，選取使用者資料庫，或者展開 [系統資料庫] ，再選取系統資料庫。</span><span class="sxs-lookup"><span data-stu-id="7257b-120">Depending on the database, either select a user database or expand **System Databases**, and then select a system database.</span></span>  
  
3.  <span data-ttu-id="7257b-121">以滑鼠右鍵按一下資料庫，指向 [工作 **]，再**指向 [**還原**]，然後按一下 [**資料庫**]，這會開啟 [**還原資料庫**] 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="7257b-121">Right-click the database, point to **Tasks**, point to **Restore**, and then click **Database**, which opens the **Restore Database** dialog box.</span></span>  
  
4.  <span data-ttu-id="7257b-122">在 **[一般]** 頁面上，使用 **[來源]** 區段指定要還原之備份組的來源和位置。</span><span class="sxs-lookup"><span data-stu-id="7257b-122">On the **General** page, use the **Source** section to specify the source and location of the backup sets to restore.</span></span> <span data-ttu-id="7257b-123">選取下列其中一個選項：</span><span class="sxs-lookup"><span data-stu-id="7257b-123">Select one of the following options:</span></span>  
  
    -   <span data-ttu-id="7257b-124">**Database**</span><span class="sxs-lookup"><span data-stu-id="7257b-124">**Database**</span></span>  
  
         <span data-ttu-id="7257b-125">從下拉式清單中選取要還原的資料庫。</span><span class="sxs-lookup"><span data-stu-id="7257b-125">Select the database to restore from the drop-down list.</span></span> <span data-ttu-id="7257b-126">此清單僅包含已根據 **msdb** 備份記錄而備份的資料庫。</span><span class="sxs-lookup"><span data-stu-id="7257b-126">The list contains only databases that have been backed up according to the **msdb** backup history.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="7257b-127">如果備份是根據不同的伺服器建立的，目的地伺服器就沒有指定之資料庫的備份記錄資訊。</span><span class="sxs-lookup"><span data-stu-id="7257b-127">If the backup is taken from a different server, the destination server will not have the backup history information for the specified database.</span></span> <span data-ttu-id="7257b-128">在此情況下，請選取 **[裝置]** ，以便手動指定要還原的檔案或裝置。</span><span class="sxs-lookup"><span data-stu-id="7257b-128">In this case, select **Device** to manually specify the file or device to restore.</span></span>  
  
    -   <span data-ttu-id="7257b-129">**裝置**</span><span class="sxs-lookup"><span data-stu-id="7257b-129">**Device**</span></span>  
  
         <span data-ttu-id="7257b-130">按一下瀏覽 ( **...** ) 按鈕，開啟 [選取備份裝置]  對話方塊。</span><span class="sxs-lookup"><span data-stu-id="7257b-130">Click the browse (**...**) button to open the **Select backup devices** dialog box.</span></span> <span data-ttu-id="7257b-131">在 **[備份媒體類型]** 方塊中，選取列出的其中一種裝置類型。</span><span class="sxs-lookup"><span data-stu-id="7257b-131">In the **Backup media type** box, select one of the listed device types.</span></span> <span data-ttu-id="7257b-132">若要選取 **[備份媒體]** 方塊中的一個或多個裝置，請按一下 **[加入]** 。</span><span class="sxs-lookup"><span data-stu-id="7257b-132">To select one or more devices for the **Backup media** box, click **Add**.</span></span>  
  
         <span data-ttu-id="7257b-133">將您要的裝置加入 **[備份媒體]** 清單方塊後，按一下 **[確定]** 即可回到 **[一般]** 頁面。</span><span class="sxs-lookup"><span data-stu-id="7257b-133">After you add the devices you want to the **Backup media** list box, click **OK** to return to the **General** page.</span></span>  
  
         <span data-ttu-id="7257b-134">在 **[來源：裝置：資料庫]** 清單方塊中，選取應該還原的資料庫名稱。</span><span class="sxs-lookup"><span data-stu-id="7257b-134">In the **Source: Device: Database** list box, select the name of the database which should be restored.</span></span>  
  
        > [!NOTE]  
        >  <span data-ttu-id="7257b-135">這份清單只能在選取 **[裝置]** 時使用。</span><span class="sxs-lookup"><span data-stu-id="7257b-135">This list is only available when **Device** is selected.</span></span> <span data-ttu-id="7257b-136">只有在所選取裝置上有備份的資料庫才可供使用。</span><span class="sxs-lookup"><span data-stu-id="7257b-136">Only databases that have backups on the selected device will be available.</span></span>  
  
         <span data-ttu-id="7257b-137">**備份媒體**</span><span class="sxs-lookup"><span data-stu-id="7257b-137">**Backup media**</span></span>  
         <span data-ttu-id="7257b-138">選取還原作業的**媒體： [** 檔案]、[**磁帶**]、[ **URL**] 或 [**備份裝置**]。</span><span class="sxs-lookup"><span data-stu-id="7257b-138">Select the medium for the restore operation: **File**, **Tape**, **URL**or **Backup Device**.</span></span> <span data-ttu-id="7257b-139">只有在電腦上有掛載磁帶機時才會出現 **[磁帶]** 選項，而只有在至少有一個備份裝置時才會出現 **[備份裝置]** 選項。</span><span class="sxs-lookup"><span data-stu-id="7257b-139">The **Tape** option appears only if a tape drive is mounted on the computer, and the **Backup Device** option appears, only if at least one backup device exists.</span></span>  
  
         <span data-ttu-id="7257b-140">**備份位置**</span><span class="sxs-lookup"><span data-stu-id="7257b-140">**Backup location**</span></span>  
         <span data-ttu-id="7257b-141">檢視、加入或移除還原作業的媒體。</span><span class="sxs-lookup"><span data-stu-id="7257b-141">View, add, or remove media for the restore operation.</span></span> <span data-ttu-id="7257b-142">清單最多可以包含 64 個檔案、磁帶或備份裝置。</span><span class="sxs-lookup"><span data-stu-id="7257b-142">The list can contain up to 64 files, tapes, or backup devices.</span></span>  
  
         <span data-ttu-id="7257b-143">**加入**</span><span class="sxs-lookup"><span data-stu-id="7257b-143">**Add**</span></span>  
         <span data-ttu-id="7257b-144">將備份裝置的位置新增至 [**備份位置**] 清單。</span><span class="sxs-lookup"><span data-stu-id="7257b-144">Adds the location of a backup device to the **Backup location** list.</span></span> <span data-ttu-id="7257b-145">依據您在 **[備份媒體]** 欄位中選取的媒體類型，按一下 **[加入]** 就會開啟下列其中一個對話方塊。</span><span class="sxs-lookup"><span data-stu-id="7257b-145">Depending on the type of media you select in the **Backup media** field, clicking **Add** opens one of the following dialog boxes.</span></span>  
  
        |<span data-ttu-id="7257b-146">媒體類型</span><span class="sxs-lookup"><span data-stu-id="7257b-146">Media type</span></span>|<span data-ttu-id="7257b-147">對話方塊</span><span class="sxs-lookup"><span data-stu-id="7257b-147">Dialog box</span></span>|<span data-ttu-id="7257b-148">描述</span><span class="sxs-lookup"><span data-stu-id="7257b-148">Description</span></span>|  
        |----------------|----------------|-----------------|  
        |<span data-ttu-id="7257b-149">**檔案**</span><span class="sxs-lookup"><span data-stu-id="7257b-149">**File**</span></span>|<span data-ttu-id="7257b-150">**尋找備份檔案**</span><span class="sxs-lookup"><span data-stu-id="7257b-150">**Locate Backup File**</span></span>|<span data-ttu-id="7257b-151">在這個對話方塊中，您可以從樹狀目錄中選取本機檔案，或是使用完整的通用命名慣例 (UNC) 名稱指定遠端檔案。</span><span class="sxs-lookup"><span data-stu-id="7257b-151">In this dialog box, you can select a local file from the tree or specify a remote file using its fully qualified universal naming convention (UNC) name.</span></span> <span data-ttu-id="7257b-152">如需詳細資訊，請參閱 [備份裝置 &#40;SQL Server&#41;](backup-devices-sql-server.md)執行個體上建立資料庫備份，就需要這個選項。</span><span class="sxs-lookup"><span data-stu-id="7257b-152">For more information, see [Backup Devices &#40;SQL Server&#41;](backup-devices-sql-server.md).</span></span>|  
        |<span data-ttu-id="7257b-153">**裝置**</span><span class="sxs-lookup"><span data-stu-id="7257b-153">**Device**</span></span>|<span data-ttu-id="7257b-154">**選取備份裝置**</span><span class="sxs-lookup"><span data-stu-id="7257b-154">**Select Backup Device**</span></span>|<span data-ttu-id="7257b-155">在這個對話方塊中，您可以從伺服器執行個體上所定義的邏輯備份裝置清單中選取裝置。</span><span class="sxs-lookup"><span data-stu-id="7257b-155">In this dialog box, you can select from a list of the logical backup devices defined on the server instance.</span></span>|  
        |<span data-ttu-id="7257b-156">**磁帶**</span><span class="sxs-lookup"><span data-stu-id="7257b-156">**Tape**</span></span>|<span data-ttu-id="7257b-157">**選取備份磁帶**</span><span class="sxs-lookup"><span data-stu-id="7257b-157">**Select Backup Tape**</span></span>|<span data-ttu-id="7257b-158">在這個對話方塊中，您可以從實際連接到執行 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]執行個體之電腦的磁帶機清單中選取磁帶。</span><span class="sxs-lookup"><span data-stu-id="7257b-158">In this dialog box, you can select from a list of the tape drives that are physically connected to the computer running the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>|  
        |<span data-ttu-id="7257b-159">**URL**</span><span class="sxs-lookup"><span data-stu-id="7257b-159">**URL**</span></span>|<span data-ttu-id="7257b-160">這會依下列順序啟動兩個對話方塊：</span><span class="sxs-lookup"><span data-stu-id="7257b-160">This launches two dialog boxes in the following order:</span></span><br /><br /> <span data-ttu-id="7257b-161">1) **連接到 Azure 儲存體**</span><span class="sxs-lookup"><span data-stu-id="7257b-161">1) **Connect to Azure Storage**</span></span><br /><br /> <span data-ttu-id="7257b-162">2) **在 Azure 中尋找備份檔案**</span><span class="sxs-lookup"><span data-stu-id="7257b-162">2) **Locate Backup File in Azure**</span></span>|<span data-ttu-id="7257b-163">在 [**連接到 Azure 儲存體**] 對話方塊中，選取儲存 Azure 儲存體帳戶名稱和存取金鑰資訊的現有 sql 認證，或指定儲存體帳戶名稱和儲存體存取金鑰資訊，以建立新的 sql 認證。</span><span class="sxs-lookup"><span data-stu-id="7257b-163">In the **Connect to Azure Storage**  dialog box, Select an existing SQL Credential that stores the Azure storage account name and access key information, or create new SQL Credential by specifying the storage account name and storage access key information.</span></span> <span data-ttu-id="7257b-164">如需詳細資訊，請參閱[Connect to Azure 儲存體 &#40;Restore&#41;](connect-to-microsoft-azure-storage-restore.md)。</span><span class="sxs-lookup"><span data-stu-id="7257b-164">For more information, see [Connect to Azure Storage &#40;Restore&#41;](connect-to-microsoft-azure-storage-restore.md).</span></span><br /><br /> <span data-ttu-id="7257b-165">在 **[尋找備份檔案]** 對話方塊中，您可以從左框架所顯示的容器清單中選取檔案。</span><span class="sxs-lookup"><span data-stu-id="7257b-165">In the **Locate Backup File** dialog box, you can select a file from the list of containers displayed on the left frame.</span></span>|  
  
         <span data-ttu-id="7257b-166">如果清單已滿， **[加入]** 按鈕就無法使用。</span><span class="sxs-lookup"><span data-stu-id="7257b-166">If the list is full, the **Add** button is unavailable.</span></span>  
  
         <span data-ttu-id="7257b-167">**移除**</span><span class="sxs-lookup"><span data-stu-id="7257b-167">**Remove**</span></span>  
         <span data-ttu-id="7257b-168">移除一個或多個選取的檔案、磁帶或邏輯備份裝置。</span><span class="sxs-lookup"><span data-stu-id="7257b-168">Removes one or more selected files, tapes, or logical backup devices.</span></span>  
  
         <span data-ttu-id="7257b-169">**Contents**</span><span class="sxs-lookup"><span data-stu-id="7257b-169">**Contents**</span></span>  
         <span data-ttu-id="7257b-170">顯示選取之檔案、磁帶或邏輯備份裝置的媒體內容。</span><span class="sxs-lookup"><span data-stu-id="7257b-170">Displays the media contents of a selected file, tape, or logical backup device.</span></span>  
  
5.  <span data-ttu-id="7257b-171">在 **[目的地]** 區段中，會將要還原之資料庫的名稱自動填入 **[資料庫]** 方塊。</span><span class="sxs-lookup"><span data-stu-id="7257b-171">In the **Destination** section, the **Database** box is automatically populated with the name of the database to be restored.</span></span> <span data-ttu-id="7257b-172">若要變更資料庫的名稱，請在 **[資料庫]** 方塊中輸入新名稱。</span><span class="sxs-lookup"><span data-stu-id="7257b-172">To change the name of the database, enter the new name in the **Database** box.</span></span>  
  
6.  <span data-ttu-id="7257b-173">在 **[還原至]** 方塊中，保留 **[到上次建立的備份]** 預設值，或按一下 **[時間表]** 存取 **[備份時間表]** 對話方塊，手動選取停止復原動作的時間點。</span><span class="sxs-lookup"><span data-stu-id="7257b-173">In the **Restore to** box, leave the default as **To the last backup taken** or click on **Timeline** to access the **Backup Timeline** dialog box to manually select a point in time to stop the recovery action.</span></span> <span data-ttu-id="7257b-174">如需有關指定特定時間點的詳細資訊，請參閱＜ [Backup Timeline](backup-timeline.md)＞。</span><span class="sxs-lookup"><span data-stu-id="7257b-174">For more information on designating a specific point in time, see [Backup Timeline](backup-timeline.md).</span></span>  
  
7.  <span data-ttu-id="7257b-175">在 **[要還原的備份組]** 方格中，選取要還原的備份。</span><span class="sxs-lookup"><span data-stu-id="7257b-175">In the **Backup sets to restore** grid, select the backups to restore.</span></span> <span data-ttu-id="7257b-176">這個方格會顯示指定位置可用的備份。</span><span class="sxs-lookup"><span data-stu-id="7257b-176">This grid displays the backups available for the specified location.</span></span> <span data-ttu-id="7257b-177">依預設，會建議一個復原計畫。</span><span class="sxs-lookup"><span data-stu-id="7257b-177">By default, a recovery plan is suggested.</span></span> <span data-ttu-id="7257b-178">若要覆寫建議的復原計畫，您可以變更方格中的選取項目。</span><span class="sxs-lookup"><span data-stu-id="7257b-178">To override the suggested recovery plan, you can change the selections in the grid.</span></span> <span data-ttu-id="7257b-179">取消選取先前的備份時，會自動取消選取相依於先前備份還原的備份。</span><span class="sxs-lookup"><span data-stu-id="7257b-179">Backups that depend on the restoration of an earlier backup are automatically deselected when the earlier backup is deselected.</span></span> <span data-ttu-id="7257b-180">如需 [要還原的備份組]  方格中各資料行的相關資訊，請參閱[還原資料庫 &#40;一般頁面&#41;](../../integration-services/general-page-of-integration-services-designers-options.md)。</span><span class="sxs-lookup"><span data-stu-id="7257b-180">For information about the columns in the **Backup sets to restore** grid, see [Restore Database &#40;General Page&#41;](../../integration-services/general-page-of-integration-services-designers-options.md).</span></span>  
  
8.  <span data-ttu-id="7257b-181">(選擇性) 按一下 **[選取頁面]** 窗格中的 **[檔案]** 存取 **[檔案]** 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="7257b-181">Optionally, click **Files** in the **Select a page** pane to access the **Files** dialog box.</span></span> <span data-ttu-id="7257b-182">如此，您就可以在 **[將資料庫檔案還原為]** 方格中，為每個檔案指定新的還原目的地，藉以將資料庫還原到新的位置。</span><span class="sxs-lookup"><span data-stu-id="7257b-182">From here, you can restore the database to a new location by specifying a new restore destination for each file in the **Restore the database files as** grid.</span></span> <span data-ttu-id="7257b-183">如需這個方格的詳細資訊，請參閱[還原資料庫 &#40;檔案頁面&#41;](restore-database-files-page.md)。</span><span class="sxs-lookup"><span data-stu-id="7257b-183">For more information about this grid, see [Restore Database &#40;Files Page&#41;](restore-database-files-page.md).</span></span>  
  
9. <span data-ttu-id="7257b-184">若要檢視或選取進階選項，在 **[選項]** 頁面的 **[還原選項]** 面板中，您可以選取下列任何選項 (如果情況適用)：</span><span class="sxs-lookup"><span data-stu-id="7257b-184">To view or select the advanced options, on the **Options** page, in the **Restore options** panel, you can select any of the following options, if appropriate for your situation:</span></span>  
  
    1.  <span data-ttu-id="7257b-185">`WITH` 選項 (非必要)：</span><span class="sxs-lookup"><span data-stu-id="7257b-185">`WITH` options (not required):</span></span>  
  
        -   <span data-ttu-id="7257b-186">**覆寫現有的資料庫 (WITH REPLACE)**</span><span class="sxs-lookup"><span data-stu-id="7257b-186">**Overwrite the existing database (WITH REPLACE)**</span></span>  
  
        -   <span data-ttu-id="7257b-187">**保留複寫設定 (WITH KEEP_REPLICATION)**</span><span class="sxs-lookup"><span data-stu-id="7257b-187">**Preserve the replication settings (WITH KEEP_REPLICATION)**</span></span>  
  
        -   <span data-ttu-id="7257b-188">**限制對還原資料庫的存取 (WITH RESTRICTED_USER)**</span><span class="sxs-lookup"><span data-stu-id="7257b-188">**Restrict access to the restored database (WITH RESTRICTED_USER)**</span></span>  
  
    2.  <span data-ttu-id="7257b-189">針對 **[還原狀態]** 方塊，選取選項。</span><span class="sxs-lookup"><span data-stu-id="7257b-189">Select an option for the **Recovery state** box.</span></span> <span data-ttu-id="7257b-190">此方塊決定資料庫在還原作業之後的狀態。</span><span class="sxs-lookup"><span data-stu-id="7257b-190">This box determines the state of the database after the restore operation.</span></span>  
  
        -   <span data-ttu-id="7257b-191">**RESTORE WITH RECOVERY** 是預設行為，透過回復未認可的交易，讓資料庫保持備妥可用。</span><span class="sxs-lookup"><span data-stu-id="7257b-191">**RESTORE WITH RECOVERY** is the default behavior which leaves the database ready for use by rolling back the uncommitted transactions.</span></span> <span data-ttu-id="7257b-192">無法還原其他交易記錄。</span><span class="sxs-lookup"><span data-stu-id="7257b-192">Additional transaction logs cannot be restored.</span></span> <span data-ttu-id="7257b-193">若您要立即還原所有必要的備份，請選取這個選項。</span><span class="sxs-lookup"><span data-stu-id="7257b-193">Select this option if you are restoring all of the necessary backups now.</span></span>  
  
        -   <span data-ttu-id="7257b-194">**RESTORE WITH NORECOVERY** ，讓資料庫保持不運作，且不回復未認可的交易。</span><span class="sxs-lookup"><span data-stu-id="7257b-194">**RESTORE WITH NORECOVERY** which leaves the database non-operational, and does not roll back the uncommitted transactions.</span></span> <span data-ttu-id="7257b-195">可以還原其他交易記錄。</span><span class="sxs-lookup"><span data-stu-id="7257b-195">Additional transaction logs can be restored.</span></span> <span data-ttu-id="7257b-196">資料庫在復原之前都無法使用。</span><span class="sxs-lookup"><span data-stu-id="7257b-196">The database cannot be used until it is recovered.</span></span>  
  
        -   <span data-ttu-id="7257b-197">**RESTORE WITH STANDBY** ，讓資料庫處於唯讀模式。</span><span class="sxs-lookup"><span data-stu-id="7257b-197">**RESTORE WITH STANDBY** which leaves the database in read-only mode.</span></span> <span data-ttu-id="7257b-198">它會復原未認可的交易，但會將復原動作儲存在待命資料庫檔案中，以還原復原影響。</span><span class="sxs-lookup"><span data-stu-id="7257b-198">It undoes uncommitted transactions, but saves the undo actions in a standby file so that recovery effects can be reverted.</span></span>  
  
    3.  <span data-ttu-id="7257b-199">如果選取的時間點需要 [還原前先進行結尾記錄備份]\*\*\*\*，則會予以選取。</span><span class="sxs-lookup"><span data-stu-id="7257b-199">**Take tail-log backup before restore** will be selected if it is necessary for the point in time that you have selected.</span></span> <span data-ttu-id="7257b-200">您不需要修改這個設定，但是即使不需要，還是可以選擇備份記錄結尾。</span><span class="sxs-lookup"><span data-stu-id="7257b-200">You do not need to modify this setting, but you can choose to backup the tail of the log even if it is not required.</span></span> <span data-ttu-id="7257b-201">在這裡的檔案名稱？</span><span class="sxs-lookup"><span data-stu-id="7257b-201">filename here?</span></span> <span data-ttu-id="7257b-202">如果 [**一般**] 頁面中的第一個備份組是在 Azure 中，則結尾記錄也會備份至相同的儲存體容器。</span><span class="sxs-lookup"><span data-stu-id="7257b-202">If the first backup set in the **General** page is in Azure, the tail log will also be backed up to the same storage container.</span></span>  
  
    4.  <span data-ttu-id="7257b-203">若資料庫有使用中的連接，還原作業可能會失敗。</span><span class="sxs-lookup"><span data-stu-id="7257b-203">Restore operations may fail if there are active connections to the database.</span></span> <span data-ttu-id="7257b-204">核取 **[關閉現有的連接選項]** ，確定已關閉 [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)] 與資料庫之間的所有使用中連接。</span><span class="sxs-lookup"><span data-stu-id="7257b-204">Check the **Close existing connections option** to ensure that all active connections between [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)] and the database are closed.</span></span> <span data-ttu-id="7257b-205">這個核取方塊會在執行還原作業之前將資料庫設定為單一使用者模式，並在完成後將資料庫設定為多使用者模式。</span><span class="sxs-lookup"><span data-stu-id="7257b-205">This check box sets the database to single user mode before performing the restore operations, and sets the database to multi-user mode when complete.</span></span>  
  
    5.  <span data-ttu-id="7257b-206">如果想要系統在每個還原作業之間提示您，請選取 **[還原每個備份之前先提示]** 。</span><span class="sxs-lookup"><span data-stu-id="7257b-206">Select **Prompt before restoring each backup** if you wish to be prompted between each restore operation.</span></span> <span data-ttu-id="7257b-207">除非資料庫夠大，而且您想要監視還原作業的狀態，否則這通常不需要。</span><span class="sxs-lookup"><span data-stu-id="7257b-207">This is not usually necessary unless the database is large and you wish to monitor the status of the restore operation.</span></span>  
  
     <span data-ttu-id="7257b-208">如需這些還原選項的詳細資訊，請參閱 [還原資料庫 &#40;選項頁面&#41;](restore-database-options-page.md))，才能在完整或大量記錄復原模式下還原資料庫。</span><span class="sxs-lookup"><span data-stu-id="7257b-208">For more information about these restore options, see [Restore Database &#40;Options Page&#41;](restore-database-options-page.md).</span></span>  
  
10. [!INCLUDE[clickOK](../../includes/clickok-md.md)]  
  
## <a name="see-also"></a><span data-ttu-id="7257b-209">另請參閱</span><span class="sxs-lookup"><span data-stu-id="7257b-209">See Also</span></span>  
 <span data-ttu-id="7257b-210">[備份交易記錄 &#40;SQL Server&#41;](back-up-a-transaction-log-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="7257b-210">[Back Up a Transaction Log &#40;SQL Server&#41;](back-up-a-transaction-log-sql-server.md) </span></span>  
 <span data-ttu-id="7257b-211">[建立完整資料庫備份 &#40;SQL Server&#41;](create-a-full-database-backup-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="7257b-211">[Create a Full Database Backup &#40;SQL Server&#41;](create-a-full-database-backup-sql-server.md) </span></span>  
 <span data-ttu-id="7257b-212">[將資料庫還原到新位置 &#40;SQL Server&#41;](restore-a-database-to-a-new-location-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="7257b-212">[Restore a Database to a New Location &#40;SQL Server&#41;](restore-a-database-to-a-new-location-sql-server.md) </span></span>  
 <span data-ttu-id="7257b-213">[還原交易記錄備份 &#40;SQL Server&#41;](restore-a-transaction-log-backup-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="7257b-213">[Restore a Transaction Log Backup &#40;SQL Server&#41;](restore-a-transaction-log-backup-sql-server.md) </span></span>  
 <span data-ttu-id="7257b-214">[RESTORE &#40;Transact-SQL&#41;](/sql/t-sql/statements/restore-statements-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="7257b-214">[RESTORE &#40;Transact-SQL&#41;](/sql/t-sql/statements/restore-statements-transact-sql) </span></span>  
 <span data-ttu-id="7257b-215">[還原資料庫 &#40;選項頁面&#41;](restore-database-options-page.md) </span><span class="sxs-lookup"><span data-stu-id="7257b-215">[Restore Database &#40;Options Page&#41;](restore-database-options-page.md) </span></span>  
 [<span data-ttu-id="7257b-216">還原資料庫 &#40;一般頁面&#41;</span><span class="sxs-lookup"><span data-stu-id="7257b-216">Restore Database &#40;General Page&#41;</span></span>](../../integration-services/general-page-of-integration-services-designers-options.md)  
  
  
