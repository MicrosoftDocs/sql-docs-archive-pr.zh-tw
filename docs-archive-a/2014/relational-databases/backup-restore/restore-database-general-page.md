---
title: 還原資料庫 (一般頁面) | Microsoft 文件
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: backup-restore
ms.topic: conceptual
f1_keywords:
- sql12.swb.restoredb.general.f1
ms.assetid: 160cf58c-b06a-475f-9a69-2b051e5767ab
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 2a497e6a6e4584aa064783eba2076b7e50b36e8f
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87598460"
---
# <a name="restore-database-general-page"></a><span data-ttu-id="b979a-102">還原資料庫 (一般頁面)</span><span class="sxs-lookup"><span data-stu-id="b979a-102">Restore Database (General Page)</span></span>
  <span data-ttu-id="b979a-103">使用 [一般] 頁面，為資料庫還原作業指定目標和來源資料庫的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="b979a-103">Use the **General** page to specify information about the target and source databases for a database-restore operation.</span></span>  
  
 <span data-ttu-id="b979a-104">**若要使用 SQL Server Management Studio 還原資料庫備份**</span><span class="sxs-lookup"><span data-stu-id="b979a-104">**To use SQL Server Management Studio to restore a database backup**</span></span>  
  
-   [<span data-ttu-id="b979a-105">還原資料庫備份 &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="b979a-105">Restore a Database Backup &#40;SQL Server Management Studio&#41;</span></span>](restore-a-database-backup-using-ssms.md)  
  
-   [<span data-ttu-id="b979a-106">定義磁帶機的邏輯備份裝置 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="b979a-106">Define a Logical Backup Device for a Tape Drive &#40;SQL Server&#41;</span></span>](define-a-logical-backup-device-for-a-tape-drive-sql-server.md)  
  
> [!NOTE]  
>  <span data-ttu-id="b979a-107">當您使用指定還原工作時 [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] ，可以 [!INCLUDE[tsql](../../includes/tsql-md.md)] 按一下 [**腳本**]，然後選取腳本的目的地，以產生對應的[還原](/sql/t-sql/statements/restore-statements-transact-sql)腳本。</span><span class="sxs-lookup"><span data-stu-id="b979a-107">When you specify a restore task by using [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], you can generate the corresponding [!INCLUDE[tsql](../../includes/tsql-md.md)][RESTORE](/sql/t-sql/statements/restore-statements-transact-sql) script by clicking **Script** and then selecting a destination for the script.</span></span>  
  
## <a name="permissions"></a><span data-ttu-id="b979a-108">權限</span><span class="sxs-lookup"><span data-stu-id="b979a-108">Permissions</span></span>  
 <span data-ttu-id="b979a-109">如果還原的資料庫不存在，使用者必須有 CREATE DATABASE 權限，才能執行 RESTORE。</span><span class="sxs-lookup"><span data-stu-id="b979a-109">If the database being restored does not exist, the user must have CREATE DATABASE permissions to be able to execute RESTORE.</span></span> <span data-ttu-id="b979a-110">如果資料庫存在，則 RESTORE 權限預設為 **系統管理員** 和 **dbcreator** 固定伺服器角色的成員，以及資料庫的擁有者 (**dbo**)。</span><span class="sxs-lookup"><span data-stu-id="b979a-110">If the database exists, RESTORE permissions default to members of the **sysadmin** and **dbcreator** fixed server roles and the owner (**dbo**) of the database.</span></span>  
  
 <span data-ttu-id="b979a-111">RESTORE 權限提供給伺服器隨時可以取得其成員資格資訊的角色。</span><span class="sxs-lookup"><span data-stu-id="b979a-111">RESTORE permissions are given to roles in which membership information is always readily available to the server.</span></span> <span data-ttu-id="b979a-112">由於資料庫必須是可存取且未損毀，才能夠檢查固定資料庫角色成員資格，但執行 RESTORE 時未必如此；因此， **db_owner** 固定資料庫角色的成員並沒有 RESTORE 權限。</span><span class="sxs-lookup"><span data-stu-id="b979a-112">Because fixed database role membership can be checked only when the database is accessible and undamaged, which is not always the case when RESTORE is executed, members of the **db_owner** fixed database role do not have RESTORE permissions.</span></span>  
  
 <span data-ttu-id="b979a-113">從加密備份還原，需要憑證的 `VIEW DEFINITION` 權限或在備份期間用於加密的非對稱金鑰。</span><span class="sxs-lookup"><span data-stu-id="b979a-113">Restoring from an encrypted backup requires `VIEW DEFINITION` permissions to the certificate or asymmetric key used to encrypt during backup.</span></span>  
  
## <a name="options"></a><span data-ttu-id="b979a-114">選項。</span><span class="sxs-lookup"><span data-stu-id="b979a-114">Options</span></span>  
  
### <a name="source"></a><span data-ttu-id="b979a-115">來源</span><span class="sxs-lookup"><span data-stu-id="b979a-115">Source</span></span>  
 <span data-ttu-id="b979a-116">[還原來源] 面板的選項會識別資料庫備份組的位置以及您想要還原的備份組。</span><span class="sxs-lookup"><span data-stu-id="b979a-116">The options of the **Restore from**panel identify the location of the backup sets for the database and which backup sets you want to restore.</span></span>  
  
|<span data-ttu-id="b979a-117">詞彙</span><span class="sxs-lookup"><span data-stu-id="b979a-117">Term</span></span>|<span data-ttu-id="b979a-118">定義</span><span class="sxs-lookup"><span data-stu-id="b979a-118">Definition</span></span>|  
|----------|----------------|  
|<span data-ttu-id="b979a-119">**Database**</span><span class="sxs-lookup"><span data-stu-id="b979a-119">**Database**</span></span>|<span data-ttu-id="b979a-120">從下拉式清單中選取要還原的資料庫。</span><span class="sxs-lookup"><span data-stu-id="b979a-120">Select the database to restore from the drop-down list.</span></span> <span data-ttu-id="b979a-121">此清單僅包含已根據 **msdb** 備份記錄而備份的資料庫。</span><span class="sxs-lookup"><span data-stu-id="b979a-121">The list contains only databases that have been backed up according to the **msdb** backup history.</span></span>|  
|<span data-ttu-id="b979a-122">**裝置**</span><span class="sxs-lookup"><span data-stu-id="b979a-122">**Device**</span></span>|<span data-ttu-id="b979a-123">選取內含您要還原之一個或多個備份的邏輯或實體備份裝置 (磁帶、URL 或檔案)。</span><span class="sxs-lookup"><span data-stu-id="b979a-123">Select the logical or physical backup devices (tapes, URL or files) that contain the backup or backups you want to restore.</span></span> <span data-ttu-id="b979a-124">如果在其他 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]執行個體上建立資料庫備份，就需要這個選項。</span><span class="sxs-lookup"><span data-stu-id="b979a-124">This is required if the database backup was taken on a different instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span><br /><br /> <span data-ttu-id="b979a-125">若要選取一個或多個邏輯或實體備份裝置，請按一下瀏覽按鈕以開啟 **[選取備份裝置]** 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="b979a-125">To select one or more logical or physical backup devices, click the browse button which opens the **Select backup devices** dialog box.</span></span> <span data-ttu-id="b979a-126">您可以在這個對話方塊中選取屬於單一媒體集的裝置，最多可選取 64 個裝置。</span><span class="sxs-lookup"><span data-stu-id="b979a-126">There, you can select up to 64 devices that belong to a single media set.</span></span> <span data-ttu-id="b979a-127">磁帶裝置必須實際連接到執行 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]執行個體的電腦。</span><span class="sxs-lookup"><span data-stu-id="b979a-127">Tape devices must be physically connected to the computer that is running the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="b979a-128">備份檔案可位於本機磁碟裝置或抽取式磁碟裝置上。</span><span class="sxs-lookup"><span data-stu-id="b979a-128">A backup file can be on a local or remove disk device.</span></span> <span data-ttu-id="b979a-129">如需詳細資訊，請參閱 [備份裝置 &#40;SQL Server&#41;](backup-devices-sql-server.md)執行個體上建立資料庫備份，就需要這個選項。</span><span class="sxs-lookup"><span data-stu-id="b979a-129">For more information, see [Backup Devices &#40;SQL Server&#41;](backup-devices-sql-server.md).</span></span> <span data-ttu-id="b979a-130">您也可以選取 [URL] 作為裝置類型，以將備份檔案儲存在 Azure 儲存體中。</span><span class="sxs-lookup"><span data-stu-id="b979a-130">You can also select **URL** as the  device type for backup files stored in Azure storage.</span></span><br /><br /> <span data-ttu-id="b979a-131">當您結束 [選取備份裝置] 對話方塊時，選取的裝置將會以唯讀值的形式顯示在 [裝置] 清單中。</span><span class="sxs-lookup"><span data-stu-id="b979a-131">When you exit the **Select backup devices** dialog box, the selected device will appear as read-only values in the **Device** list.</span></span>|  
|<span data-ttu-id="b979a-132">**Database**</span><span class="sxs-lookup"><span data-stu-id="b979a-132">**Database**</span></span>|<span data-ttu-id="b979a-133">從下拉式清單中選取應該從中還原備份的資料庫名稱。</span><span class="sxs-lookup"><span data-stu-id="b979a-133">Select the database name from which the backups should be restored from the dropdown list.</span></span><br /><br /> <span data-ttu-id="b979a-134">注意:這份清單只能在選取 **[裝置]** 時使用。</span><span class="sxs-lookup"><span data-stu-id="b979a-134">Note: This list is only available when **Device** is selected.</span></span> <span data-ttu-id="b979a-135">只有在所選取裝置上有備份的資料庫才可供使用。</span><span class="sxs-lookup"><span data-stu-id="b979a-135">Only databases that have backups on the selected devices will be available.</span></span>|  
  
### <a name="destination"></a><span data-ttu-id="b979a-136">Destination</span><span class="sxs-lookup"><span data-stu-id="b979a-136">Destination</span></span>  
 <span data-ttu-id="b979a-137">**[還原至]** 面板的選項會識別資料庫和還原點。</span><span class="sxs-lookup"><span data-stu-id="b979a-137">The options of the **Restore to** panel identify the database and restore point.</span></span>  
  
|<span data-ttu-id="b979a-138">詞彙</span><span class="sxs-lookup"><span data-stu-id="b979a-138">Term</span></span>|<span data-ttu-id="b979a-139">定義</span><span class="sxs-lookup"><span data-stu-id="b979a-139">Definition</span></span>|  
|----------|----------------|  
|<span data-ttu-id="b979a-140">**Database**</span><span class="sxs-lookup"><span data-stu-id="b979a-140">**Database**</span></span>|<span data-ttu-id="b979a-141">輸入清單中要還原的資料庫。</span><span class="sxs-lookup"><span data-stu-id="b979a-141">Enter the database to restore in the list.</span></span> <span data-ttu-id="b979a-142">您可以輸入新的資料庫，或者從下拉式清單中選擇現有的資料庫。</span><span class="sxs-lookup"><span data-stu-id="b979a-142">You can enter a new database or choose an existing database from the drop-down list.</span></span> <span data-ttu-id="b979a-143">清單包含伺服器上的所有資料庫，排除系統資料庫 **master** 和 **tempdb**。</span><span class="sxs-lookup"><span data-stu-id="b979a-143">The list includes all databases on the server, excluding the system databases **master** and **tempdb**.</span></span><br /><br /> <span data-ttu-id="b979a-144">注意:若要還原受密碼保護的備份，必須使用 [RESTORE](/sql/t-sql/statements/restore-statements-transact-sql) 陳述式。</span><span class="sxs-lookup"><span data-stu-id="b979a-144">Note: To restore a password-protected backup, you must use the [RESTORE](/sql/t-sql/statements/restore-statements-transact-sql) statement.</span></span>|  
|<span data-ttu-id="b979a-145">**[還原至]**</span><span class="sxs-lookup"><span data-stu-id="b979a-145">**Restore to**</span></span>|<span data-ttu-id="b979a-146">**[還原至]** 方塊預設為 [到上次建立的備份]。</span><span class="sxs-lookup"><span data-stu-id="b979a-146">The **Restore to** box will be set "To the last backup taken" by default.</span></span> <span data-ttu-id="b979a-147">您也可以按一下 **[時間表]** 顯示 **[備份時間表]** 對話方塊，這個對話方塊會以時間表的形式顯示資料庫備份記錄。</span><span class="sxs-lookup"><span data-stu-id="b979a-147">You can also click **Timeline** to show the **Backup Timeline** dialog box, which displays the database backup history in the form of a timeline.</span></span> <span data-ttu-id="b979a-148">按一下 [**時程表**]，指定 `datetime` 您要還原資料庫的特定。</span><span class="sxs-lookup"><span data-stu-id="b979a-148">Click **Timeline** to designate a specific `datetime` to which you want to restore the database.</span></span> <span data-ttu-id="b979a-149">然後，資料庫將還原至這個指定之時間點的狀態。</span><span class="sxs-lookup"><span data-stu-id="b979a-149">The database will then be restored to the state it was in at this specified point in time.</span></span> <span data-ttu-id="b979a-150">請參閱 [Backup Timeline](backup-timeline.md)。</span><span class="sxs-lookup"><span data-stu-id="b979a-150">See [Backup Timeline](backup-timeline.md).</span></span>|  
  
### <a name="restore-plan"></a><span data-ttu-id="b979a-151">還原計畫</span><span class="sxs-lookup"><span data-stu-id="b979a-151">Restore Plan</span></span>  
  
|<span data-ttu-id="b979a-152">詞彙</span><span class="sxs-lookup"><span data-stu-id="b979a-152">Term</span></span>|<span data-ttu-id="b979a-153">定義</span><span class="sxs-lookup"><span data-stu-id="b979a-153">Definition</span></span>|  
|----------|----------------|  
|<span data-ttu-id="b979a-154">**要還原的備份組**</span><span class="sxs-lookup"><span data-stu-id="b979a-154">**Backup sets to restore**</span></span>|<span data-ttu-id="b979a-155">顯示指定的位置可使用的備份組。</span><span class="sxs-lookup"><span data-stu-id="b979a-155">Displays the backup sets available for the specified location.</span></span> <span data-ttu-id="b979a-156">每個備份組 (即單一備份作業的結果) 都會分散放在媒體集中的所有裝置上。</span><span class="sxs-lookup"><span data-stu-id="b979a-156">Each backup set, the result of a single backup operation, is distributed across all of the devices in the media set.</span></span> <span data-ttu-id="b979a-157">根據預設，建議以還原計畫達到還原作業的目標 (此作業是根據必要備份組的選取項目而定)。</span><span class="sxs-lookup"><span data-stu-id="b979a-157">By default, a recovery plan is suggested to achieve the goal of the restore operation that is based on the selection of the required backup sets.</span></span> [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] <span data-ttu-id="b979a-158">會使用 **msdb** 中的備份記錄識別還原資料庫所需的備份，並建立還原計畫。</span><span class="sxs-lookup"><span data-stu-id="b979a-158">uses the backup history in **msdb** to identify which backups are required to restore a database, and creates a restore plan.</span></span> <span data-ttu-id="b979a-159">例如，以資料庫還原而言，還原計畫會選取最近的完整資料庫備份，之後再加上最近的後續差異資料庫備份 (若有的話)。</span><span class="sxs-lookup"><span data-stu-id="b979a-159">For example, for a database restore, the restore plan selects the most recent full database backup followed by the most recent subsequent differential database backup, if any.</span></span> <span data-ttu-id="b979a-160">在完整復原模式之下，還原計畫會接著選取所有後續的記錄備份。</span><span class="sxs-lookup"><span data-stu-id="b979a-160">Under the full recovery model, the restore plan then selects all subsequent log backups.</span></span><br /><br /> <span data-ttu-id="b979a-161">若要覆寫建議的復原計畫，您可以變更方格中的下列選項。</span><span class="sxs-lookup"><span data-stu-id="b979a-161">To override the suggested recovery plan, you can change the following selections in the grid.</span></span> <span data-ttu-id="b979a-162">任何相依於已取消選取備份的備份，會自動被取消選取。</span><span class="sxs-lookup"><span data-stu-id="b979a-162">Any backups that depend on a deselected backup are deselected automatically.</span></span><br /><br /> <span data-ttu-id="b979a-163">**還原**：</span><span class="sxs-lookup"><span data-stu-id="b979a-163">**Restore**:</span></span><br />                          <span data-ttu-id="b979a-164">選取的核取方塊會指出要還原的備份組。</span><span class="sxs-lookup"><span data-stu-id="b979a-164">The selected check boxes indicate the backup sets to be restored.</span></span><br /><span data-ttu-id="b979a-165">**名稱**：備份組的名稱。</span><span class="sxs-lookup"><span data-stu-id="b979a-165">**Name**: The name of the backup set.</span></span><br /><span data-ttu-id="b979a-166">**元件**：備份的元件：交易記錄) 的**資料庫** **、檔案**或 **\<blank>** (。</span><span class="sxs-lookup"><span data-stu-id="b979a-166">**Component**: The backed-up component: **Database**, **File**, or **\<blank>** (for transaction logs).</span></span><br /><span data-ttu-id="b979a-167">**類型**：執行的備份類型：[完整]、[差異] 或 [交易記錄]。</span><span class="sxs-lookup"><span data-stu-id="b979a-167">**Type**: The type of backup performed: **Full**, **Differential**, or **Transaction Log**.</span></span><br /><span data-ttu-id="b979a-168">**伺服器**：[!INCLUDE[ssDE](../../includes/ssde-md.md)] 執行備份作業的  執行個體名稱。</span><span class="sxs-lookup"><span data-stu-id="b979a-168">**Server**: The name of the [!INCLUDE[ssDE](../../includes/ssde-md.md)] instance that performed the backup operation.</span></span><br /><span data-ttu-id="b979a-169">**Database**：與備份作業相關的資料庫名稱。</span><span class="sxs-lookup"><span data-stu-id="b979a-169">**Database**: The name of the database involved in the backup operation.</span></span><br /><span data-ttu-id="b979a-170">**位置**：備份組在磁碟區中的位置。</span><span class="sxs-lookup"><span data-stu-id="b979a-170">**Position**: The position of the backup set in the volume.</span></span><br /><span data-ttu-id="b979a-171">**第一個 LSN**：備份組中第一個交易的記錄序號。</span><span class="sxs-lookup"><span data-stu-id="b979a-171">**First LSN**: The log sequence number of the first transaction in the backup set.</span></span> <span data-ttu-id="b979a-172">針對檔案備份為空白。</span><span class="sxs-lookup"><span data-stu-id="b979a-172">Blank for file backups.</span></span><br /><span data-ttu-id="b979a-173">**最後一個 LSN**：備份組中最後一個交易的記錄序號。</span><span class="sxs-lookup"><span data-stu-id="b979a-173">**Last LSN**: The log sequence number of the last transaction in the backup set.</span></span> <span data-ttu-id="b979a-174">針對檔案備份為空白。</span><span class="sxs-lookup"><span data-stu-id="b979a-174">Blank for file backups.</span></span><br /><span data-ttu-id="b979a-175">**檢查點 LSN**：建立備份時最近檢查點)  (LSN 的記錄序號。</span><span class="sxs-lookup"><span data-stu-id="b979a-175">**Checkpoint LSN**: The log sequence number (LSN) of the most recent checkpoint at the time the backup was created.</span></span><br /><span data-ttu-id="b979a-176">**完整 LSN**：最新完整資料庫備份的記錄序號。</span><span class="sxs-lookup"><span data-stu-id="b979a-176">**Full LSN**: The log sequence number of the most recent full database backup.</span></span><br /><span data-ttu-id="b979a-177">**開始日期**：備份作業開始的日期和時間，出現在用戶端的地區設定中。</span><span class="sxs-lookup"><span data-stu-id="b979a-177">**Start Date**: The date and time when the backup operation began, presented in the regional setting of the client.</span></span><br /><span data-ttu-id="b979a-178">**完成日期**：備份作業完成時的日期和時間，顯示在用戶端的地區設定中。</span><span class="sxs-lookup"><span data-stu-id="b979a-178">**Finish Date**: The date and time when the backup operation finished, presented in the regional setting of the client.</span></span><br /><span data-ttu-id="b979a-179">**大小**：備份組的大小（以位元組為單位）。</span><span class="sxs-lookup"><span data-stu-id="b979a-179">**Size**: The size of the backup set in bytes.</span></span><br /><span data-ttu-id="b979a-180">**使用者名稱**：執行備份作業的使用者名稱。</span><span class="sxs-lookup"><span data-stu-id="b979a-180">**User Name**: The name of the user who performed the backup operation.</span></span><br /><br /> <span data-ttu-id="b979a-181">**到期**日：備份組到期的日期和時間。</span><span class="sxs-lookup"><span data-stu-id="b979a-181">**Expiration**: The date and time the backup set expires.</span></span><br /><br /> <span data-ttu-id="b979a-182">只有當您核取 **[手動選擇]** 方塊時，這些核取方塊才會啟用。</span><span class="sxs-lookup"><span data-stu-id="b979a-182">The checkboxes are only enabled when the **Manual Selection** box is checked.</span></span> <span data-ttu-id="b979a-183">這可讓您選取要還原的備份組。</span><span class="sxs-lookup"><span data-stu-id="b979a-183">This allows you to select which backup-sets are to be restored.</span></span><br /><br /> <span data-ttu-id="b979a-184">核取 **[手動選取]** 方塊之後，每次修改 [還原計畫] 時，都會檢查其正確性。</span><span class="sxs-lookup"><span data-stu-id="b979a-184">When the **Manual Selection** box is checked, the accuracy of the Restore Plan is checked each time it is modified.</span></span> <span data-ttu-id="b979a-185">如果備份的順序不正確，就會顯示錯誤訊息。</span><span class="sxs-lookup"><span data-stu-id="b979a-185">If the sequence of backups is incorrect, an error message will appear.</span></span>|  
|<span data-ttu-id="b979a-186">**驗證備份媒體**</span><span class="sxs-lookup"><span data-stu-id="b979a-186">**Verify Backup Media**</span></span>|<span data-ttu-id="b979a-187">針對選取的備份組呼叫 RESTORE VERIFY_ONLY 陳述式。</span><span class="sxs-lookup"><span data-stu-id="b979a-187">Calls a RESTORE VERIFY_ONLY statement on the selected backup-sets.</span></span><br /><br /> <span data-ttu-id="b979a-188">注意：這是一項長時間執行的作業，而且您可以使用對話方塊架構上的進度監視器來追蹤和取消其進度。</span><span class="sxs-lookup"><span data-stu-id="b979a-188">Note: This is a long-running operation, and its progress can be tracked and cancelled by using the Progress Monitor on the Dialog Framework.</span></span><br /><br /> <span data-ttu-id="b979a-189">這個按鈕可讓您先檢查選取之備份檔案的完整性，然後再進行還原。</span><span class="sxs-lookup"><span data-stu-id="b979a-189">This button allows you to check the integrity of the selected backup files prior to restoring them.</span></span><br /><br /> <span data-ttu-id="b979a-190">檢查備份組的完整性時，位於對話方塊左下方的進度狀態會顯示「驗證中」而非「執行中」。</span><span class="sxs-lookup"><span data-stu-id="b979a-190">When checking the integrity of backup sets, the progress status at the bottom left of the dialog box will read "Verifying" rather than "Executing."</span></span>|  
  
## <a name="compatibility-support"></a><span data-ttu-id="b979a-191">相容性支援</span><span class="sxs-lookup"><span data-stu-id="b979a-191">Compatibility Support</span></span>  
 <span data-ttu-id="b979a-192">在 [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]中，您可以從使用 [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] 或更新版本所建立的資料庫備份還原使用者資料庫。</span><span class="sxs-lookup"><span data-stu-id="b979a-192">In [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], you can restore a user database from a database backup that was created by using [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] or a later version.</span></span> <span data-ttu-id="b979a-193">但是， **無法還原使用**至 **所建立的** master **、** model [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] 和 [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] msdb [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]備份。</span><span class="sxs-lookup"><span data-stu-id="b979a-193">However, backups of **master**, **model** and **msdb** that were created by using [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] through [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] cannot be restored by [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span></span> <span data-ttu-id="b979a-194">此外，任何舊版 [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] 都無法還原在 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]中建立的備份。</span><span class="sxs-lookup"><span data-stu-id="b979a-194">Also, backups created in [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] cannot be restored by any earlier version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
 [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] <span data-ttu-id="b979a-195">使用與之前版本不同的預設路徑。</span><span class="sxs-lookup"><span data-stu-id="b979a-195">uses a different default path than earlier versions.</span></span> <span data-ttu-id="b979a-196">因此，若要還原在舊版 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]之預設位置中所建立的資料庫，就必須使用 MOVE 選項。</span><span class="sxs-lookup"><span data-stu-id="b979a-196">Therefore, to restore a database that was created in the default location of an earlier version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], you must use the MOVE option.</span></span>  
  
 <span data-ttu-id="b979a-197">將舊版資料庫還原成 [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]之後，資料庫會自動升級。</span><span class="sxs-lookup"><span data-stu-id="b979a-197">After you restore an earlier version database to [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], the database is automatically upgraded.</span></span> <span data-ttu-id="b979a-198">通常，資料庫立即變為可用。</span><span class="sxs-lookup"><span data-stu-id="b979a-198">Typically, the database becomes available immediately.</span></span> <span data-ttu-id="b979a-199">不過，如果 [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] 資料庫具有全文檢索索引，升級程序就會根據 [全文檢索升級選項] 伺服器屬性的設定，匯入、重設或重建這些索引。</span><span class="sxs-lookup"><span data-stu-id="b979a-199">However, if a [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] database has full-text indexes, the upgrade process either imports, resets, or rebuilds them, depending on the setting of the **Full-Text Upgrade Option** server property.</span></span> <span data-ttu-id="b979a-200">如果升級選項設定為 [匯入] 或 [重建]，則全文檢索索引在升級期間將無法使用。</span><span class="sxs-lookup"><span data-stu-id="b979a-200">If the upgrade option is set to **Import** or **Rebuild**, the full-text indexes will be unavailable during the upgrade.</span></span> <span data-ttu-id="b979a-201">根據進行索引的資料數量而定，匯入可能需要數個小時，而重建可能需要十倍以上的時間。</span><span class="sxs-lookup"><span data-stu-id="b979a-201">Depending upon the amount of data being indexed, importing can take several hours, and rebuilding can take up to ten times longer.</span></span> <span data-ttu-id="b979a-202">此外，請注意，當升級選項設定為 [匯入] 時，如果全文檢索目錄無法使用，系統就會重建相關聯的全文檢索索引。</span><span class="sxs-lookup"><span data-stu-id="b979a-202">Note also that when the upgrade option is set to **Import**, if a full-text catalog is not available, the associated full-text indexes are rebuilt.</span></span>  
  
## <a name="restoring-from-an-encrypted-backup"></a><span data-ttu-id="b979a-203">從加密備份還原</span><span class="sxs-lookup"><span data-stu-id="b979a-203">Restoring from an Encrypted Backup</span></span>  
 <span data-ttu-id="b979a-204">您要還原的目的地執行個體上，必須提供原本用於建立備份的憑證或非對稱金鑰，才能進行還原。</span><span class="sxs-lookup"><span data-stu-id="b979a-204">Restore requires that the certificate or asymmetric key that was originally used to create the backup is available on the instance you are restoring to.</span></span> <span data-ttu-id="b979a-205">執行還原的帳戶應擁有憑證的 `VIEW DEFINITIONS` 權限或非對稱金鑰。</span><span class="sxs-lookup"><span data-stu-id="b979a-205">The account performing the restore should have `VIEW DEFINITIONS` on the certificate or asymmetric key.</span></span> <span data-ttu-id="b979a-206">您不應該更新用於加密備份的憑證。</span><span class="sxs-lookup"><span data-stu-id="b979a-206">Certificates used to encrypt backup should not be renewed or updated.</span></span>  
  
## <a name="restoring-from-azure-storage"></a><span data-ttu-id="b979a-207">從 Azure 儲存體還原</span><span class="sxs-lookup"><span data-stu-id="b979a-207">Restoring from Azure Storage</span></span>  
 <span data-ttu-id="b979a-208">還原儲存在 Azure 儲存體中的備份時，還原 UI 會有新的 [備份裝置] 選項。</span><span class="sxs-lookup"><span data-stu-id="b979a-208">When restoring a backup stored in Azure storage, the Restore UI has a new backup device option.</span></span> <span data-ttu-id="b979a-209">**[選取備份裝置]** ] 對話方塊上的 **[URL]** 。</span><span class="sxs-lookup"><span data-stu-id="b979a-209">**URL** on the **Select backup devices** dialog.</span></span> <span data-ttu-id="b979a-210">當您按一下 [**新增**] 時，這會帶您前往 [**連接到 Azure** ] 對話方塊，讓您指定要向儲存體帳戶驗證的 SQL 認證資訊。</span><span class="sxs-lookup"><span data-stu-id="b979a-210">When you click **Add**, this takes you to the **Connect to Azure** dialog that allows you to specify the SQL Credential information to authenticate to the storage account.</span></span>  <span data-ttu-id="b979a-211">連線到儲存體帳戶後，備份檔案會顯示在 [在**Azure 中尋找備份檔案**] 對話方塊中，您可以在其中選取要用於還原的檔案。</span><span class="sxs-lookup"><span data-stu-id="b979a-211">Once connected to the storage account, the backup files are displayed in the **Locate a Backup file in Azure** dialog where you can select the file to use for the restore.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="b979a-212">另請參閱</span><span class="sxs-lookup"><span data-stu-id="b979a-212">See Also</span></span>  
 <span data-ttu-id="b979a-213">[備份裝置 &#40;SQL Server&#41;](backup-devices-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="b979a-213">[Backup Devices &#40;SQL Server&#41;](backup-devices-sql-server.md) </span></span>  
 <span data-ttu-id="b979a-214">[從裝置還原備份 &#40;SQL Server&#41;](restore-a-backup-from-a-device-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="b979a-214">[Restore a Backup from a Device &#40;SQL Server&#41;](restore-a-backup-from-a-device-sql-server.md) </span></span>  
 <span data-ttu-id="b979a-215">[還原資料庫至標示的交易 &#40;SQL Server Management Studio&#41;](restore-a-database-to-a-marked-transaction-sql-server-management-studio.md) </span><span class="sxs-lookup"><span data-stu-id="b979a-215">[Restore a Database to a Marked Transaction &#40;SQL Server Management Studio&#41;](restore-a-database-to-a-marked-transaction-sql-server-management-studio.md) </span></span>  
 <span data-ttu-id="b979a-216">[還原交易記錄備份 &#40;SQL Server&#41;](restore-a-transaction-log-backup-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="b979a-216">[Restore a Transaction Log Backup &#40;SQL Server&#41;](restore-a-transaction-log-backup-sql-server.md) </span></span>  
 <span data-ttu-id="b979a-217">[檢視備份磁帶或檔案的內容 &#40;SQL Server&#41;](view-the-contents-of-a-backup-tape-or-file-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="b979a-217">[View the Contents of a Backup Tape or File &#40;SQL Server&#41;](view-the-contents-of-a-backup-tape-or-file-sql-server.md) </span></span>  
 <span data-ttu-id="b979a-218">[檢視邏輯備份裝置的屬性和內容 &#40;SQL Server&#41;](view-the-properties-and-contents-of-a-logical-backup-device-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="b979a-218">[View the Properties and Contents of a Logical Backup Device &#40;SQL Server&#41;](view-the-properties-and-contents-of-a-logical-backup-device-sql-server.md) </span></span>  
 <span data-ttu-id="b979a-219">[媒體集、媒體家族與備份組 &#40;SQL Server&#41;](media-sets-media-families-and-backup-sets-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="b979a-219">[Media Sets, Media Families, and Backup Sets &#40;SQL Server&#41;](media-sets-media-families-and-backup-sets-sql-server.md) </span></span>  
 <span data-ttu-id="b979a-220">[RESTORE 引數 &#40;Transact-SQL&#41;](/sql/t-sql/statements/restore-statements-arguments-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="b979a-220">[RESTORE Arguments &#40;Transact-SQL&#41;](/sql/t-sql/statements/restore-statements-arguments-transact-sql) </span></span>  
 [<span data-ttu-id="b979a-221">套用交易記錄備份 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="b979a-221">Apply Transaction Log Backups &#40;SQL Server&#41;</span></span>](transaction-log-backups-sql-server.md)  
  
  
