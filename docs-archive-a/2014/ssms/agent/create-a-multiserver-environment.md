---
title: 建立多伺服器環境 | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: ssms
ms.topic: conceptual
helpviewer_keywords:
- SQL Server Agent, multiserver environments
- master servers [SQL Server], about master servers
- target servers [SQL Server], about target servers
- multiserver environments [SQL Server]
ms.assetid: edc2b60d-15da-40a1-8ba3-f1d473366ee6
author: stevestein
ms.author: sstein
ms.openlocfilehash: a6920920aa603c615cdc5f84a34a93204842052d
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87705898"
---
# <a name="create-a-multiserver-environment"></a><span data-ttu-id="4c784-102">建立多伺服器環境</span><span class="sxs-lookup"><span data-stu-id="4c784-102">Create a Multiserver Environment</span></span>
  <span data-ttu-id="4c784-103">多伺服器管理會要求您設定一部主要伺服器 (MSX) 以及一或多部目標伺服器 (TSX)。</span><span class="sxs-lookup"><span data-stu-id="4c784-103">Multiserver administration requires that you set up a master server (MSX) and one or more target servers (TSX).</span></span> <span data-ttu-id="4c784-104">將在所有目標伺服器上處理的作業會先在主要伺服器上定義，然後再下載至目標伺服器。</span><span class="sxs-lookup"><span data-stu-id="4c784-104">Jobs that will be processed on all the target servers are first defined on the master server and then downloaded to the target servers.</span></span>  
  
 <span data-ttu-id="4c784-105">根據預設，系統會針對主要伺服器與目標伺服器之間的連接，啟用完整的安全通訊端層 (SSL) 加密和憑證驗證。</span><span class="sxs-lookup"><span data-stu-id="4c784-105">By default, full Secure Sockets Layer (SSL) encryption and certificate validation are enabled for connections between master servers and target servers.</span></span> <span data-ttu-id="4c784-106">如需詳細資訊，請參閱 [在目標伺服器上設定加密選項](set-encryption-options-on-target-servers.md)。</span><span class="sxs-lookup"><span data-stu-id="4c784-106">For more information, see [Set Encryption Options on Target Servers](set-encryption-options-on-target-servers.md).</span></span>  
  
 <span data-ttu-id="4c784-107">如果您有許多台目標伺服器，請避免在 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 其他功能具有重大效能要求的實際伺服器上定義主要伺服器，因為目標伺服器可能會拖慢實際伺服器的效能。</span><span class="sxs-lookup"><span data-stu-id="4c784-107">If you have a large number of target servers, avoid defining your master server on a production server that has significant performance requirements from other [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] functionality, because target server traffic can slow performance on your production server.</span></span> <span data-ttu-id="4c784-108">如果也將事件轉寄到專用的主要伺服器，您就可以在一部伺服器上集中化管理。</span><span class="sxs-lookup"><span data-stu-id="4c784-108">If you also forward events to a dedicated master server, you can centralize administration on one server.</span></span> <span data-ttu-id="4c784-109">如需詳細資訊，請參閱 [管理作業步驟](manage-events.md)。</span><span class="sxs-lookup"><span data-stu-id="4c784-109">For more information, see [Manage Events](manage-events.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="4c784-110">若要使用多伺服器作業處理， [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent 服務帳戶必須是主要伺服器上 **msdb** 資料庫角色 **TargetServersRole** 的成員。</span><span class="sxs-lookup"><span data-stu-id="4c784-110">To use multiserver job processing, the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent service account must be a member of the **msdb** database role **TargetServersRole** on the master server.</span></span> <span data-ttu-id="4c784-111">[主要伺服器精靈] 會在編列處理序的過程中，自動將服務帳戶加入至此角色</span><span class="sxs-lookup"><span data-stu-id="4c784-111">The Master Server Wizard automatically adds the service account to this role as part of the enlistment process</span></span>  
  
## <a name="considerations-for-multiserver-environments"></a><span data-ttu-id="4c784-112">多伺服器環境的考量事項</span><span class="sxs-lookup"><span data-stu-id="4c784-112">Considerations for Multiserver Environments</span></span>  
 <span data-ttu-id="4c784-113">如需受支援的 MSX/TSX 組態，請參閱下表。</span><span class="sxs-lookup"><span data-stu-id="4c784-113">See the table below for supported MSX/TSX configurations.</span></span>  
  
||<span data-ttu-id="4c784-114">**TSX = 7.0**</span><span class="sxs-lookup"><span data-stu-id="4c784-114">**TSX = 7.0**</span></span>|<span data-ttu-id="4c784-115">**TSX = 8.0 < SP3**</span><span class="sxs-lookup"><span data-stu-id="4c784-115">**TSX = 8.0 < SP3**</span></span>|<span data-ttu-id="4c784-116">**TSX = 8.0 SP3 或更高版本**</span><span class="sxs-lookup"><span data-stu-id="4c784-116">**TSX = 8.0 SP3 or higher**</span></span>|<span data-ttu-id="4c784-117">**TSX = 9.0**</span><span class="sxs-lookup"><span data-stu-id="4c784-117">**TSX = 9.0**</span></span>|<span data-ttu-id="4c784-118">**TSX = 10.0**</span><span class="sxs-lookup"><span data-stu-id="4c784-118">**TSX= 10.0**</span></span>|<span data-ttu-id="4c784-119">**TSX = 10.5**</span><span class="sxs-lookup"><span data-stu-id="4c784-119">**TSX = 10.5**</span></span>|<span data-ttu-id="4c784-120">**TSX = 11.0**</span><span class="sxs-lookup"><span data-stu-id="4c784-120">**TSX = 11.0**</span></span>|  
|-|--------------------|---------------------------|----------------------------------|--------------------|--------------------|---------------------|---------------------|  
|<span data-ttu-id="4c784-121">**MSX = 7.0**</span><span class="sxs-lookup"><span data-stu-id="4c784-121">**MSX = 7.0**</span></span>|<span data-ttu-id="4c784-122">是</span><span class="sxs-lookup"><span data-stu-id="4c784-122">Yes</span></span>|<span data-ttu-id="4c784-123">是</span><span class="sxs-lookup"><span data-stu-id="4c784-123">Yes</span></span>|<span data-ttu-id="4c784-124">否</span><span class="sxs-lookup"><span data-stu-id="4c784-124">No</span></span>|<span data-ttu-id="4c784-125">否</span><span class="sxs-lookup"><span data-stu-id="4c784-125">No</span></span>|<span data-ttu-id="4c784-126">否</span><span class="sxs-lookup"><span data-stu-id="4c784-126">No</span></span>|<span data-ttu-id="4c784-127">否</span><span class="sxs-lookup"><span data-stu-id="4c784-127">No</span></span>|<span data-ttu-id="4c784-128">否</span><span class="sxs-lookup"><span data-stu-id="4c784-128">No</span></span>|  
|<span data-ttu-id="4c784-129">**MSX = 8.0 < SP3**</span><span class="sxs-lookup"><span data-stu-id="4c784-129">**MSX = 8.0 < SP3**</span></span>|<span data-ttu-id="4c784-130">是</span><span class="sxs-lookup"><span data-stu-id="4c784-130">Yes</span></span>|<span data-ttu-id="4c784-131">是</span><span class="sxs-lookup"><span data-stu-id="4c784-131">Yes</span></span>|<span data-ttu-id="4c784-132">否</span><span class="sxs-lookup"><span data-stu-id="4c784-132">No</span></span>|<span data-ttu-id="4c784-133">否</span><span class="sxs-lookup"><span data-stu-id="4c784-133">No</span></span>|<span data-ttu-id="4c784-134">否</span><span class="sxs-lookup"><span data-stu-id="4c784-134">No</span></span>|<span data-ttu-id="4c784-135">否</span><span class="sxs-lookup"><span data-stu-id="4c784-135">No</span></span>|<span data-ttu-id="4c784-136">否</span><span class="sxs-lookup"><span data-stu-id="4c784-136">No</span></span>|  
|<span data-ttu-id="4c784-137">**MSX = 8.0 SP3 或更高版本**</span><span class="sxs-lookup"><span data-stu-id="4c784-137">**MSX = 8.0 SP3 or higher**</span></span>|<span data-ttu-id="4c784-138">否</span><span class="sxs-lookup"><span data-stu-id="4c784-138">No</span></span>|<span data-ttu-id="4c784-139">否</span><span class="sxs-lookup"><span data-stu-id="4c784-139">No</span></span>|<span data-ttu-id="4c784-140">是</span><span class="sxs-lookup"><span data-stu-id="4c784-140">Yes</span></span>|<span data-ttu-id="4c784-141">是</span><span class="sxs-lookup"><span data-stu-id="4c784-141">Yes</span></span>|<span data-ttu-id="4c784-142">是</span><span class="sxs-lookup"><span data-stu-id="4c784-142">Yes</span></span>|<span data-ttu-id="4c784-143">是</span><span class="sxs-lookup"><span data-stu-id="4c784-143">Yes</span></span>|<span data-ttu-id="4c784-144">是</span><span class="sxs-lookup"><span data-stu-id="4c784-144">Yes</span></span>|  
|<span data-ttu-id="4c784-145">**MSX = 9.0**</span><span class="sxs-lookup"><span data-stu-id="4c784-145">**MSX = 9.0**</span></span>|<span data-ttu-id="4c784-146">否</span><span class="sxs-lookup"><span data-stu-id="4c784-146">No</span></span>|<span data-ttu-id="4c784-147">否</span><span class="sxs-lookup"><span data-stu-id="4c784-147">No</span></span>|<span data-ttu-id="4c784-148">否</span><span class="sxs-lookup"><span data-stu-id="4c784-148">No</span></span>|<span data-ttu-id="4c784-149">是</span><span class="sxs-lookup"><span data-stu-id="4c784-149">Yes</span></span>|<span data-ttu-id="4c784-150">是</span><span class="sxs-lookup"><span data-stu-id="4c784-150">Yes</span></span>|<span data-ttu-id="4c784-151">是</span><span class="sxs-lookup"><span data-stu-id="4c784-151">Yes</span></span>|<span data-ttu-id="4c784-152">是</span><span class="sxs-lookup"><span data-stu-id="4c784-152">Yes</span></span>|  
|<span data-ttu-id="4c784-153">**MSX = 10.0**</span><span class="sxs-lookup"><span data-stu-id="4c784-153">**MSX = 10.0**</span></span>|<span data-ttu-id="4c784-154">否</span><span class="sxs-lookup"><span data-stu-id="4c784-154">No</span></span>|<span data-ttu-id="4c784-155">否</span><span class="sxs-lookup"><span data-stu-id="4c784-155">No</span></span>|<span data-ttu-id="4c784-156">否</span><span class="sxs-lookup"><span data-stu-id="4c784-156">No</span></span>|<span data-ttu-id="4c784-157">否</span><span class="sxs-lookup"><span data-stu-id="4c784-157">No</span></span>|<span data-ttu-id="4c784-158">是</span><span class="sxs-lookup"><span data-stu-id="4c784-158">Yes</span></span>|<span data-ttu-id="4c784-159">是</span><span class="sxs-lookup"><span data-stu-id="4c784-159">Yes</span></span>|<span data-ttu-id="4c784-160">是</span><span class="sxs-lookup"><span data-stu-id="4c784-160">Yes</span></span>|  
|<span data-ttu-id="4c784-161">**MSX = 10.5**</span><span class="sxs-lookup"><span data-stu-id="4c784-161">**MSX = 10.5**</span></span>|<span data-ttu-id="4c784-162">否</span><span class="sxs-lookup"><span data-stu-id="4c784-162">No</span></span>|<span data-ttu-id="4c784-163">否</span><span class="sxs-lookup"><span data-stu-id="4c784-163">No</span></span>|<span data-ttu-id="4c784-164">否</span><span class="sxs-lookup"><span data-stu-id="4c784-164">No</span></span>|<span data-ttu-id="4c784-165">否</span><span class="sxs-lookup"><span data-stu-id="4c784-165">No</span></span>|<span data-ttu-id="4c784-166">否</span><span class="sxs-lookup"><span data-stu-id="4c784-166">No</span></span>|<span data-ttu-id="4c784-167">是</span><span class="sxs-lookup"><span data-stu-id="4c784-167">Yes</span></span>|<span data-ttu-id="4c784-168">是</span><span class="sxs-lookup"><span data-stu-id="4c784-168">Yes</span></span>|  
|<span data-ttu-id="4c784-169">**MSX = 11.0**</span><span class="sxs-lookup"><span data-stu-id="4c784-169">**MSX = 11.0**</span></span>|<span data-ttu-id="4c784-170">否</span><span class="sxs-lookup"><span data-stu-id="4c784-170">No</span></span>|<span data-ttu-id="4c784-171">否</span><span class="sxs-lookup"><span data-stu-id="4c784-171">No</span></span>|<span data-ttu-id="4c784-172">否</span><span class="sxs-lookup"><span data-stu-id="4c784-172">No</span></span>|<span data-ttu-id="4c784-173">否</span><span class="sxs-lookup"><span data-stu-id="4c784-173">No</span></span>|<span data-ttu-id="4c784-174">否</span><span class="sxs-lookup"><span data-stu-id="4c784-174">No</span></span>|<span data-ttu-id="4c784-175">否</span><span class="sxs-lookup"><span data-stu-id="4c784-175">No</span></span>|<span data-ttu-id="4c784-176">是</span><span class="sxs-lookup"><span data-stu-id="4c784-176">Yes</span></span>|  
  
 <span data-ttu-id="4c784-177">建立多伺服器環境時，請考慮下列問題：</span><span class="sxs-lookup"><span data-stu-id="4c784-177">Consider the following issues when creating a multiserver environment:</span></span>  
  
-   <span data-ttu-id="4c784-178">每個目標伺服器只能向一個主要伺服器報告。</span><span class="sxs-lookup"><span data-stu-id="4c784-178">Each target server reports to only one master server.</span></span> <span data-ttu-id="4c784-179">您必須先使目標伺服器脫離主要伺服器，才能將它編列到不同的主要伺服器中。</span><span class="sxs-lookup"><span data-stu-id="4c784-179">You must defect a target server from one master server before you can enlist it into a different one.</span></span>  
  
-   <span data-ttu-id="4c784-180">變更目標伺服器的名稱時，必須先將它脫離後才能變更名稱，等變更後再重新編列。</span><span class="sxs-lookup"><span data-stu-id="4c784-180">When changing the name of a target server, you must defect it before changing the name and re-enlist it after the change.</span></span>  
  
-   <span data-ttu-id="4c784-181">如果您想要解除多重伺服器組態，您必須使所有的目標伺服器脫離主伺服器。</span><span class="sxs-lookup"><span data-stu-id="4c784-181">If you want to dismantle a multiserver configuration, you must defect all the target servers from the master server.</span></span>  
  
-   <span data-ttu-id="4c784-182">SQL Server Integration Services 僅支援與主要伺服器版本相同或更新版本的目標伺服器。</span><span class="sxs-lookup"><span data-stu-id="4c784-182">SQL Server Integration Services only supports target servers that are the same version or higher than the master server version.</span></span>  
  
## <a name="related-tasks"></a><span data-ttu-id="4c784-183">相關工作</span><span class="sxs-lookup"><span data-stu-id="4c784-183">Related Tasks</span></span>  
 <span data-ttu-id="4c784-184">下列主題說明建立多伺服器環境的常見工作。</span><span class="sxs-lookup"><span data-stu-id="4c784-184">The following topics document common tasks for creating a multiserver environment.</span></span>  
  
|<span data-ttu-id="4c784-185">描述</span><span class="sxs-lookup"><span data-stu-id="4c784-185">Description</span></span>|<span data-ttu-id="4c784-186">主題</span><span class="sxs-lookup"><span data-stu-id="4c784-186">Topic</span></span>|  
|-----------------|-----------|  
|<span data-ttu-id="4c784-187">描述如何建立主要伺服器。</span><span class="sxs-lookup"><span data-stu-id="4c784-187">Describes how to create a master server.</span></span>|[<span data-ttu-id="4c784-188">設為主要伺服器</span><span class="sxs-lookup"><span data-stu-id="4c784-188">Make a Master Server</span></span>](make-a-master-server.md)|  
|<span data-ttu-id="4c784-189">描述如何建立目標伺服器。</span><span class="sxs-lookup"><span data-stu-id="4c784-189">Describes how to create a target server.</span></span>|[<span data-ttu-id="4c784-190">設為目標伺服器</span><span class="sxs-lookup"><span data-stu-id="4c784-190">Make a Target Server</span></span>](make-a-target-server.md)|  
|<span data-ttu-id="4c784-191">描述如何將目標伺服器編列到主要伺服器中。</span><span class="sxs-lookup"><span data-stu-id="4c784-191">Describes how to enlist a target server into a master server.</span></span>|[<span data-ttu-id="4c784-192">將目標伺服器編列至主要伺服器</span><span class="sxs-lookup"><span data-stu-id="4c784-192">Enlist a Target Server to a Master Server</span></span>](enlist-a-target-server-to-a-master-server.md)|  
|<span data-ttu-id="4c784-193">描述如何使目標伺服器脫離主要伺服器，</span><span class="sxs-lookup"><span data-stu-id="4c784-193">Describes how to defect a target server from a master server.</span></span>|[<span data-ttu-id="4c784-194">使目標伺服器脫離主要伺服器</span><span class="sxs-lookup"><span data-stu-id="4c784-194">Defect a Target Server from a Master Server</span></span>](defect-a-target-server-from-a-master-server.md)|  
|<span data-ttu-id="4c784-195">描述如何從主要伺服器脫離多部目標伺服器。</span><span class="sxs-lookup"><span data-stu-id="4c784-195">Describes how to defect multiple target servers from a master server.</span></span>|[<span data-ttu-id="4c784-196">從主要伺服器脫離多個目標伺服器</span><span class="sxs-lookup"><span data-stu-id="4c784-196">Defect Multiple Target Servers from a Master Server</span></span>](defect-multiple-target-servers-from-a-master-server.md)|  
|<span data-ttu-id="4c784-197">描述如何檢查目標伺服器的狀態。</span><span class="sxs-lookup"><span data-stu-id="4c784-197">Describes how to check the status of a target server.</span></span>|[<span data-ttu-id="4c784-198">sp_help_targetserver &#40;Transact-sql&#41;</span><span class="sxs-lookup"><span data-stu-id="4c784-198">sp_help_targetserver &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-help-targetserver-transact-sql)<br /><br /> [<span data-ttu-id="4c784-199">sp_help_targetservergroup &#40;Transact-sql&#41;</span><span class="sxs-lookup"><span data-stu-id="4c784-199">sp_help_targetservergroup &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-help-targetservergroup-transact-sql)|  
  
## <a name="see-also"></a><span data-ttu-id="4c784-200">另請參閱</span><span class="sxs-lookup"><span data-stu-id="4c784-200">See Also</span></span>  
 [<span data-ttu-id="4c784-201">為使用 Proxy 的多伺服器作業疑難排解</span><span class="sxs-lookup"><span data-stu-id="4c784-201">Troubleshoot Multiserver Jobs That Use Proxies</span></span>](troubleshoot-multiserver-jobs-that-use-proxies.md)  
  
  
