---
title: 警示 | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: ssms
ms.topic: conceptual
helpviewer_keywords:
- SQL Server Agent alerts, event types
- SQL Server Agent alerts, names
- alerts [SQL Server], performance conditions
- alerts [SQL Server], about alerts
- WMI event responses [SQL Server Agent alerts]
- events [WMI]
- performance condition alerts [SQL Server Agent]
- alerts [SQL Server], event types
- SQL Server Agent alerts, performance conditions
- SQL Server Agent alerts, about alerts
- alerts [SQL Server], names
ms.assetid: 3f57d0f0-4781-46ec-82cd-b751dc5affef
author: stevestein
ms.author: sstein
ms.openlocfilehash: 946bfd0c05e7739af4bfebf799980a0dc27de245
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87705894"
---
# <a name="alerts"></a><span data-ttu-id="eda1f-102">警示</span><span class="sxs-lookup"><span data-stu-id="eda1f-102">Alerts</span></span>
  <span data-ttu-id="eda1f-103">事件會由 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 產生，並輸入 [!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows 應用程式記錄檔中。</span><span class="sxs-lookup"><span data-stu-id="eda1f-103">Events are generated by [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] and entered into the [!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows application log.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="eda1f-104">Agent 會讀取應用程式記錄檔，然後比較寫入其中的事件與您所定義的警示。</span><span class="sxs-lookup"><span data-stu-id="eda1f-104">Agent reads the application log and compares events written there to alerts that you have defined.</span></span> <span data-ttu-id="eda1f-105">當 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent 找到相符項目時，即會發出警示，這是對事件的自動回應。</span><span class="sxs-lookup"><span data-stu-id="eda1f-105">When [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent finds a match, it fires an alert, which is an automated response to an event.</span></span> <span data-ttu-id="eda1f-106">除了監視 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 事件以外， [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent 還可以監視效能條件與 Windows Management Instrumentation (WMI) 事件。</span><span class="sxs-lookup"><span data-stu-id="eda1f-106">In addition to monitoring [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] events, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent can also monitor performance conditions and Windows Management Instrumentation (WMI) events.</span></span>  
  
 <span data-ttu-id="eda1f-107">若要定義警示，您必須指定：</span><span class="sxs-lookup"><span data-stu-id="eda1f-107">To define an alert, you specify:</span></span>  
  
-   <span data-ttu-id="eda1f-108">警示的名稱。</span><span class="sxs-lookup"><span data-stu-id="eda1f-108">The name of the alert.</span></span>  
  
-   <span data-ttu-id="eda1f-109">觸發警示的事件或效能條件。</span><span class="sxs-lookup"><span data-stu-id="eda1f-109">The event or performance condition that triggers the alert.</span></span>  
  
-   <span data-ttu-id="eda1f-110">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent 為回應事件或效能條件所採取的動作。</span><span class="sxs-lookup"><span data-stu-id="eda1f-110">The action that [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent takes in response to the event or performance condition.</span></span>  
  
## <a name="naming-an-alert"></a><span data-ttu-id="eda1f-111">為警示命名</span><span class="sxs-lookup"><span data-stu-id="eda1f-111">Naming an Alert</span></span>  
 <span data-ttu-id="eda1f-112">每個警示必須有一個名稱。</span><span class="sxs-lookup"><span data-stu-id="eda1f-112">Every alert must have a name.</span></span> <span data-ttu-id="eda1f-113">警示名稱在 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 的執行個體中必須是唯一的，而且不可超過 **128** 個字元。</span><span class="sxs-lookup"><span data-stu-id="eda1f-113">Alert names must be unique within the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] and can be no longer than **128** characters.</span></span>  
  
## <a name="selecting-an-event-type"></a><span data-ttu-id="eda1f-114">選取事件類型</span><span class="sxs-lookup"><span data-stu-id="eda1f-114">Selecting an Event Type</span></span>  
 <span data-ttu-id="eda1f-115">警示會回應特定的事件類型。</span><span class="sxs-lookup"><span data-stu-id="eda1f-115">An alert responds to an event of a specific type.</span></span> <span data-ttu-id="eda1f-116">警示會回應下列事件類型：</span><span class="sxs-lookup"><span data-stu-id="eda1f-116">Alerts respond to the following event types:</span></span>  
  
-   [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="eda1f-117">事件</span><span class="sxs-lookup"><span data-stu-id="eda1f-117">events</span></span>  
  
-   [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="eda1f-118">效能條件</span><span class="sxs-lookup"><span data-stu-id="eda1f-118">performance conditions</span></span>  
  
-   <span data-ttu-id="eda1f-119">WMI 事件</span><span class="sxs-lookup"><span data-stu-id="eda1f-119">WMI events</span></span>  
  
 <span data-ttu-id="eda1f-120">事件類型將決定您用來指定精確事件的參數。</span><span class="sxs-lookup"><span data-stu-id="eda1f-120">The type of the event determines the parameters that you use to specify the precise event.</span></span>  
  
## <a name="specifying-a-sql-server-event"></a><span data-ttu-id="eda1f-121">指定 SQL Server 事件</span><span class="sxs-lookup"><span data-stu-id="eda1f-121">Specifying a SQL Server Event</span></span>  
 <span data-ttu-id="eda1f-122">您可以指定要發生的警示，以回應一或多個事件。</span><span class="sxs-lookup"><span data-stu-id="eda1f-122">You can specify an alert to occur in response to one or more events.</span></span> <span data-ttu-id="eda1f-123">請使用下列參數來指定可觸發警示的事件：</span><span class="sxs-lookup"><span data-stu-id="eda1f-123">Use the following parameters to specify the events that trigger an alert:</span></span>  
  
-   <span data-ttu-id="eda1f-124">**錯誤號碼**</span><span class="sxs-lookup"><span data-stu-id="eda1f-124">**Error number**</span></span>  
  
     [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="eda1f-125">Agent 會在特定錯誤發生時發出警示。</span><span class="sxs-lookup"><span data-stu-id="eda1f-125">Agent fires an alert when a specific error occurs.</span></span> <span data-ttu-id="eda1f-126">例如，您可以指定錯誤號碼 2571 來回應對「資料庫主控命令 (DBCC)」的未經授權叫用嘗試。</span><span class="sxs-lookup"><span data-stu-id="eda1f-126">For example, you might specify error number 2571 to respond to unauthorized attempts to invoke Database Console Commands (DBCC).</span></span>  
  
-   <span data-ttu-id="eda1f-127">**嚴重性層級**</span><span class="sxs-lookup"><span data-stu-id="eda1f-127">**Severity level**</span></span>  
  
     [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="eda1f-128">Agent 會在特定嚴重性的任何錯誤發生時發出警示。</span><span class="sxs-lookup"><span data-stu-id="eda1f-128">Agent fires an alert when any error of the specific severity occurs.</span></span> <span data-ttu-id="eda1f-129">例如，您可以指定嚴重性層級 15 來回應 Transact-SQL 陳述式中的語法錯誤。</span><span class="sxs-lookup"><span data-stu-id="eda1f-129">For example, you might specify a severity level of 15 to respond to syntax errors in Transact-SQL statements.</span></span>  
  
-   <span data-ttu-id="eda1f-130">**Database**</span><span class="sxs-lookup"><span data-stu-id="eda1f-130">**Database**</span></span>  
  
     [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="eda1f-131">Agent 只有在特定資料庫中發生事件時，才會發出警示。</span><span class="sxs-lookup"><span data-stu-id="eda1f-131">Agent fires an alert only when the event occurs in a particular database.</span></span> <span data-ttu-id="eda1f-132">您可以在錯誤號碼或嚴重性層級以外搭配套用此選項。</span><span class="sxs-lookup"><span data-stu-id="eda1f-132">This option applies in addition to the error number or severity level.</span></span> <span data-ttu-id="eda1f-133">例如，若某個執行個體中含有一個實際執行用的資料庫和一個報告用的資料庫，您就可以定義一個只會針對實際資料庫回應語法錯誤的警示。</span><span class="sxs-lookup"><span data-stu-id="eda1f-133">For example, if an instance contains one database that is used for production and one database that is used for reporting, you can define an alert that responds to syntax errors in the production database only.</span></span>  
  
-   <span data-ttu-id="eda1f-134">**事件文字**</span><span class="sxs-lookup"><span data-stu-id="eda1f-134">**Event text**</span></span>  
  
     [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="eda1f-135">Agent 會在指定事件的事件訊息中含有特定的文字字串時發出警示。</span><span class="sxs-lookup"><span data-stu-id="eda1f-135">Agent fires an alert when the specified event contains a particular text string in the event message.</span></span> <span data-ttu-id="eda1f-136">例如，您可以定義警示來回應含有特定資料表名稱或特定條件約束名稱的訊息。</span><span class="sxs-lookup"><span data-stu-id="eda1f-136">For example, you might define an alert that responds to messages that contain the name of a particular table or a particular constraint.</span></span>  
  
## <a name="selecting-a-performance-condition"></a><span data-ttu-id="eda1f-137">選取效能條件</span><span class="sxs-lookup"><span data-stu-id="eda1f-137">Selecting a Performance Condition</span></span>  
 <span data-ttu-id="eda1f-138">您可以指定一個為回應特定效能條件而產生的警示。</span><span class="sxs-lookup"><span data-stu-id="eda1f-138">You can specify an alert to occur in response to a particular performance condition.</span></span> <span data-ttu-id="eda1f-139">此時您必須指定所要監視的效能計數器、警示的臨界值以及計數器在警示產生時必須顯示的行為。</span><span class="sxs-lookup"><span data-stu-id="eda1f-139">In this case, you specify the performance counter to monitor, a threshold for the alert, and the behavior that the counter must show if the alert is to occur.</span></span> <span data-ttu-id="eda1f-140">若要設定效能條件，您必須在 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent 的 [一般]\*\*\*\* 頁面上定義 [新增警示]\*\*\*\* 或 [警示屬性]\*\*\*\* 對話方塊中的下列項目：</span><span class="sxs-lookup"><span data-stu-id="eda1f-140">To set a performance condition, you must define the following items on the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent **General** page of the **New Alert** or the **Alert Properties** dialog box:</span></span>  
  
-   <span data-ttu-id="eda1f-141">**Object**</span><span class="sxs-lookup"><span data-stu-id="eda1f-141">**Object**</span></span>  
  
     <span data-ttu-id="eda1f-142">此物件為要監視的效能區域。</span><span class="sxs-lookup"><span data-stu-id="eda1f-142">The object is the area of performance to be monitored.</span></span>  
  
-   <span data-ttu-id="eda1f-143">**計數器**</span><span class="sxs-lookup"><span data-stu-id="eda1f-143">**Counter**</span></span>  
  
     <span data-ttu-id="eda1f-144">計數器是要監視之區域的屬性。</span><span class="sxs-lookup"><span data-stu-id="eda1f-144">A counter is an attribute of the area to be monitored.</span></span>  
  
-   <span data-ttu-id="eda1f-145">**執行個體**</span><span class="sxs-lookup"><span data-stu-id="eda1f-145">**Instance**</span></span>  
  
     <span data-ttu-id="eda1f-146">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 執行個體可為要監視的屬性定義特定的執行個體 (如果有的話)。</span><span class="sxs-lookup"><span data-stu-id="eda1f-146">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance defines the specific instance (if any) of the attribute to be monitored.</span></span>  
  
-   <span data-ttu-id="eda1f-147">\*\*如果是計數器和值則發出警示\*\*\*\*\*\*</span><span class="sxs-lookup"><span data-stu-id="eda1f-147">**Alert if counter** and **Value**</span></span>  
  
     <span data-ttu-id="eda1f-148">警示的臨界值和產生警示的行為。</span><span class="sxs-lookup"><span data-stu-id="eda1f-148">The threshold for the alert and the behavior that produces the alert.</span></span> <span data-ttu-id="eda1f-149">臨界值是一個數值。</span><span class="sxs-lookup"><span data-stu-id="eda1f-149">The threshold is a number.</span></span> <span data-ttu-id="eda1f-150">此行為是下列其中一項：低於\*\*\*\*、變成等於\*\*\*\* 或高於在 [值] 中指定的數值\*\*\*\*。</span><span class="sxs-lookup"><span data-stu-id="eda1f-150">The behavior is one **of the following: falls below**, **becomes equal to**, or **rises above a number specified for Value**.</span></span> <span data-ttu-id="eda1f-151">[值]\*\*\*\* 是一個描述效能行況計數器的數值。</span><span class="sxs-lookup"><span data-stu-id="eda1f-151">The **Value** is a number that describes the performance condition counter.</span></span> <span data-ttu-id="eda1f-152">例如，若要設定警示在效能物件 **SQLServer:Locks** 的 **Lock Wait Time** 超過 30 分鐘時產生，您就必須選擇 [高於]\*\*\*\*，並指定 30 為 [值]\*\*\*\*。</span><span class="sxs-lookup"><span data-stu-id="eda1f-152">For example, to set an alert to occur for the performance object **SQLServer:Locks** when the **Lock Wait Time** exceeds 30 minutes, you would choose **rises above** and **specify 30 as the value**.</span></span>  
  
     <span data-ttu-id="eda1f-153">至於另一個範例，您可以指定效能物件 **SQLServer:Transactions** 在 **tempdb** 中的可用空間低於 1000 KB 時發出警示。</span><span class="sxs-lookup"><span data-stu-id="eda1f-153">As another example, you might specify that an alert occurs for the performance object **SQLServer:Transactions** when the free space in **tempdb** falls below 1000 KB.</span></span> <span data-ttu-id="eda1f-154">若要進行此設定，您必須選擇計數器 **Free space in tempdb (KB)**、低於\*\*\*\*，並在 [值]\*\*\*\* 中指定 **1000**。</span><span class="sxs-lookup"><span data-stu-id="eda1f-154">To set this, you would choose the counter **Free space in tempdb (KB)**, **falls below**,and a **Value** of **1000**.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="eda1f-155">效能資料是定期取樣的，因此在到達臨界值與發出效能警示之間可能會有一點延遲 (幾秒鐘)。</span><span class="sxs-lookup"><span data-stu-id="eda1f-155">Performance data is sampled periodically, which can lead to a small delay (a few seconds) between the threshold being reached and the occurrence of the performance alert.</span></span>  
  
## <a name="selecting-a-wmi-event"></a><span data-ttu-id="eda1f-156">選取 WMI 事件</span><span class="sxs-lookup"><span data-stu-id="eda1f-156">Selecting a WMI Event</span></span>  
 <span data-ttu-id="eda1f-157">您可以指定一個為回應特定 WMI 事件而產生的警示。</span><span class="sxs-lookup"><span data-stu-id="eda1f-157">You can specify that an alert occur in response to a particular WMI event.</span></span> <span data-ttu-id="eda1f-158">若要選取 WMI 事件，您必須在 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent 的 [一般]\*\*\*\* 頁面上定義 [新增警示]\*\*\*\* 或 [警示屬性]\*\*\*\* 對話方塊中的下列項目：</span><span class="sxs-lookup"><span data-stu-id="eda1f-158">To select a WMI event, you must define the following on the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent **General** page of the **New Alert** or the **Alert Properties** dialog box:</span></span>  
  
-   <span data-ttu-id="eda1f-159">**Namespace**</span><span class="sxs-lookup"><span data-stu-id="eda1f-159">**Namespace**</span></span>  
  
     [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="eda1f-160">Agent 會對可用的 WMI 命名空間註冊為 WMI 用戶端，以進行事件查詢。</span><span class="sxs-lookup"><span data-stu-id="eda1f-160">Agent registers as a WMI client to the WMI namespace that is provided to query for events.</span></span>  
  
-   <span data-ttu-id="eda1f-161">**查詢**</span><span class="sxs-lookup"><span data-stu-id="eda1f-161">**Query**</span></span>  
  
     [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="eda1f-162">Agent 會使用可用的 Windows Management Instrumentation 查詢語言 (WQL) 陳述式來識別特定的事件。</span><span class="sxs-lookup"><span data-stu-id="eda1f-162">Agent uses the Windows Management Instrumentation Query Language (WQL) statement provided to identify the specific event.</span></span>  
  
 <span data-ttu-id="eda1f-163">以下是一般工作的連結：</span><span class="sxs-lookup"><span data-stu-id="eda1f-163">Following are links to common tasks:</span></span>  
  
 <span data-ttu-id="eda1f-164">**若要以訊息編號為基礎建立警示**</span><span class="sxs-lookup"><span data-stu-id="eda1f-164">**To create an alert based on a message number**</span></span>  
  
-   [<span data-ttu-id="eda1f-165">SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="eda1f-165">SQL Server Management Studio</span></span>](create-an-alert-using-an-error-number.md)  
  
-   [<span data-ttu-id="eda1f-166">Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="eda1f-166">Transact-SQL</span></span>](/sql/relational-databases/system-stored-procedures/sp-add-alert-transact-sql)  
  
 <span data-ttu-id="eda1f-167">**若要以嚴重性層級為基礎建立警示**</span><span class="sxs-lookup"><span data-stu-id="eda1f-167">**To create an alert based on severity levels**</span></span>  
  
-   [<span data-ttu-id="eda1f-168">SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="eda1f-168">SQL Server Management Studio</span></span>](create-an-alert-using-severity-level.md)  
  
-   [<span data-ttu-id="eda1f-169">Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="eda1f-169">Transact-SQL</span></span>](/sql/relational-databases/system-stored-procedures/sp-add-alert-transact-sql)  
  
 <span data-ttu-id="eda1f-170">**若要根據 WMI 事件建立警示**</span><span class="sxs-lookup"><span data-stu-id="eda1f-170">**To create an alert based on a WMI event**</span></span>  
  
-   [<span data-ttu-id="eda1f-171">SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="eda1f-171">SQL Server Management Studio</span></span>](create-a-wmi-event-alert.md)  
  
-   [<span data-ttu-id="eda1f-172">Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="eda1f-172">Transact-SQL</span></span>](/sql/relational-databases/system-stored-procedures/sp-add-alert-transact-sql)  
  
 <span data-ttu-id="eda1f-173">**若要定義對警示的回應**</span><span class="sxs-lookup"><span data-stu-id="eda1f-173">**To define the response to an alert**</span></span>  
  
-   [<span data-ttu-id="eda1f-174">SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="eda1f-174">SQL Server Management Studio</span></span>](../sql-server-management-studio-ssms.md)  
  
-   [<span data-ttu-id="eda1f-175">Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="eda1f-175">Transact-SQL</span></span>](/sql/relational-databases/system-stored-procedures/sp-add-notification-transact-sql)  
  
 <span data-ttu-id="eda1f-176">**若要建立使用者自訂的事件錯誤訊息**</span><span class="sxs-lookup"><span data-stu-id="eda1f-176">**To create a user-defined event error message**</span></span>  
  
-   [<span data-ttu-id="eda1f-177">Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="eda1f-177">Transact-SQL</span></span>](/sql/relational-databases/system-stored-procedures/sp-addmessage-transact-sql)  
  
 <span data-ttu-id="eda1f-178">**若要修改使用者自訂的事件錯誤訊息**</span><span class="sxs-lookup"><span data-stu-id="eda1f-178">**To modify a user-defined event error message**</span></span>  
  
-   [<span data-ttu-id="eda1f-179">Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="eda1f-179">Transact-SQL</span></span>](/sql/relational-databases/system-stored-procedures/sp-altermessage-transact-sql)  
  
 <span data-ttu-id="eda1f-180">**若要刪除使用者自訂的事件錯誤訊息**</span><span class="sxs-lookup"><span data-stu-id="eda1f-180">**To delete a user-defined event error message**</span></span>  
  
-   [<span data-ttu-id="eda1f-181">Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="eda1f-181">Transact-SQL</span></span>](/sql/relational-databases/system-stored-procedures/sp-dropmessage-transact-sql)  
  
 <span data-ttu-id="eda1f-182">**若要停用或重新啟動警示**</span><span class="sxs-lookup"><span data-stu-id="eda1f-182">**To disable or reactivate an alert**</span></span>  
  
-   [<span data-ttu-id="eda1f-183">SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="eda1f-183">SQL Server Management Studio</span></span>](disable-or-reactivate-an-alert.md)  
  
-   [<span data-ttu-id="eda1f-184">Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="eda1f-184">Transact-SQL</span></span>](/sql/relational-databases/system-stored-procedures/sp-update-alert-transact-sql)  
  
## <a name="see-also"></a><span data-ttu-id="eda1f-185">另請參閱</span><span class="sxs-lookup"><span data-stu-id="eda1f-185">See Also</span></span>  
 [<span data-ttu-id="eda1f-186">使用 SQL Server 物件</span><span class="sxs-lookup"><span data-stu-id="eda1f-186">Use SQL Server Objects</span></span>](../../relational-databases/performance-monitor/use-sql-server-objects.md)  
  
  
