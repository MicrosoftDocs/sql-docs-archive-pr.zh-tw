---
title: 資料庫鏡像監視器概觀 | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
f1_keywords:
- sql12.swb.dbmmonitor.main.f1
helpviewer_keywords:
- Database Mirroring Monitor [SQL Server], interface
ms.assetid: 8ebbdcd6-565a-498f-b674-289c84b985eb
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: d19f9a2aa66aaee30bcf623e254d6f24aa690277
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87701869"
---
# <a name="database-mirroring-monitor-overview"></a>資料庫鏡像監視器概觀
  如果您擁有正確的權限，就可以使用「資料庫鏡像監視器」來監視伺服器執行個體上的任何鏡像資料庫子集。 監視可以讓您確認資料庫鏡像工作階段中的資料是否有流動，以及資料流動是否順暢。 「資料庫鏡像監視器」對於疑難排解資料流動減緩的原因也很有用。  
  
 您可以註冊任何鏡像資料庫，以便在各容錯移轉夥伴上個別進行監視。 當您註冊資料庫時，「資料庫鏡像監視器」會快取下列有關資料庫的資訊：  
  
-   資料庫名稱  
  
-   兩個夥伴伺服器執行個體的名稱  
  
-   各夥伴最後的已知角色 (主體或鏡像)  
  
## <a name="permissions"></a>權限  
 若要監視資料庫鏡像，您必須是伺服器執行個體上 **系統管理員** 固定伺服器角色或 **msdb** 資料庫之 **dbm_monitor** 固定資料庫角色的成員。 如果您只是其中一個夥伴伺服器執行個體上 **系統管理員** 或 **dbm_monitor** 的成員，則監視器只能連接到該夥伴，不能從其他夥伴那裡擷取資訊。  
  
 如果您只是某個伺服器執行個體上 **dbm_monitor** 的成員，則您在該伺服器執行個體上將只具備有限的權限。 您只能檢視最近的狀態資料列。 如果您使用 **dbm_monitor** 權限連接到伺服器執行個體，則「資料庫鏡像監視器」會通知您，您的權限有限。  
  
> [!IMPORTANT]  
>  **dbm_monitor** 固定資料庫角色是在「資料庫鏡像監視器」中註冊第一個資料庫時，於 **msdb** 資料庫中建立的。 新的 **dbm_monitor** 角色沒有任何成員，必須由系統管理員指派使用者給該角色。  
  
## <a name="navigation-tree"></a>導覽樹狀目錄  
 如果已經有任何資料庫註冊要由「資料庫鏡像監視器」進行監視，則已註冊的資料庫清單便會顯示在導覽樹狀目錄中。 此樹狀目錄會每隔 30 秒自動重新整理一次。 若要查看已註冊之資料庫的狀態，請選取該資料庫。 如需詳細資訊，請參閱此主題稍後的「詳細資料窗格」。  
  
 每一個已註冊的資料庫都會顯示下列資訊：  
  
 _<資料庫名稱>_ **(** _\<Status>_ **,** _<主體伺服器>_ **->** _<鏡像伺服器>_ **)**  
  
 *<Database_name>*  
 已向「資料庫鏡像監視器」註冊的鏡像資料庫名稱。  
  
 *\<Status>*  
 可能的狀態及其相關聯的圖示如下所示：  
  
|圖示|狀態|描述|  
|----------|------------|-----------------|  
|警告圖示|**Unknown**|監視器未連接到任何一個夥伴。 唯一的可用資訊就是監視器所快取的內容。|  
|警告圖示|**正在同步處理**|鏡像資料庫的內容落後於主體資料庫的內容。 主體伺服器執行個體正在將記錄傳送到鏡像伺服器執行個體，這時會將變更套用至鏡像資料庫，以便向前復原。<br /><br /> 在資料庫鏡像工作階段開始時，鏡像資料庫和主體資料庫都是處於這個狀態。|  
|標準資料庫圓柱|**已同步處理**|當鏡像伺服器足以追趕上主體伺服器時，資料庫狀態就會變成 [已同步處理]。 只要主體伺服器繼續傳送變更到鏡像伺服器，而鏡像伺服器也繼續將變更套用到鏡像資料庫，資料庫便會保持在這種狀態。<br /><br /> 在高安全性模式中，可以進行自動容錯移轉和手動容錯移轉，不會遺失任何資料。<br /><br /> 在高效能模式中，永遠都有可能遺失部分資料，即使是在 [已同步處理] 狀態也是如此。|  
|警告圖示|**已暫停**|主體資料庫可供使用，但是不會將任何記錄傳送到鏡像伺服器。|  
|錯誤圖示|**已中斷連線**|伺服器執行個體無法連接到其夥伴。|  
  
 *<PRINCIPAL_SERVER>*  
 目前為主體伺服器執行個體的夥伴名稱。 此名稱採用下列格式：  
  
 <系統名稱>[ **\\** <執行個體名稱>]  
  
 其中 <系統名稱> 是伺服器執行個體所在的系統名稱。 如果是非預設的伺服器執行個體，則也會顯示執行個體名稱：<系統名稱> **\\** <執行個體名稱>。  
  
 *<MIRROR_SERVER>*  
 目前為鏡像伺服器執行個體的夥伴名稱。 其格式和主體伺服器相同。  
  
## <a name="detail-pane"></a>詳細資料窗格  
 監視器的外觀是依據是否選取資料庫而定。 當您開啟監視器時，詳細資料窗格會顯示 [註冊鏡像資料庫] 連結。 按一下這個連結即可註冊資料庫。 已註冊的資料庫會列在導覽樹狀目錄中的 [資料庫鏡像監視器] 節點下面。 「資料庫鏡像監視器」一定會嘗試連接到它已儲存認證的每一個伺服器執行個體。  
  
 當您選取資料庫時，其狀態就會顯示在詳細資料窗格中的 [狀態] 索引標籤頁面上。 此頁面的內容來自於主體伺服器執行個體和鏡像伺服器執行個體。 透過與主體和鏡像伺服器執行個體的個別連接蒐集狀態時，會以非同步方式填滿頁面。 此狀態會每隔 30 秒自動重新整理一次。  
  
> [!NOTE]  
>  您無法變更監視器的重新整理頻率，但是可以從 [資料庫鏡像記錄] 對話方塊中重新整理狀態資料表。  
  
 系統管理員只要選取 [警告] 索引標籤頁面，即可檢視資料庫目前的警告組態。 系統管理員可以在這個頁面上啟動 [設定警告臨界值] 對話方塊，以啟用和設定一或多個警告臨界值。  
  
 在索引標籤上方的橫幅中，詳細資料窗格會將監視器上次重新整理狀態資訊的時間顯示為 [上次重新整理 **：**] _\<date>_ *\<time>* 。 「資料庫鏡像監視器」通常會在不同的時間，分別從主體伺服器執行個體和鏡像伺服器執行個體擷取狀態資訊。 所顯示的時間是這兩個重新整理時間中較早的一個。  
  
## <a name="action-menu"></a>動作功能表  
 [動作] 功能表一定會包含下列命令：  
  
|Command|描述|  
|-------------|-----------------|  
|**註冊鏡像資料庫...**|開啟 [註冊鏡像資料庫] 對話方塊。 使用這個對話方塊可在特定的伺服器執行個體上註冊一或多個鏡像資料庫，只要將資料庫加入至「資料庫鏡像監視器」即可。 加入資料庫之後，「資料庫鏡像監視器」就會在本機快取有關資料庫、其夥伴以及如何連接到夥伴的資訊。|  
|**管理伺服器執行個體連線...**|當您選取這個命令時，便會開啟 [管理伺服器連接] 對話方塊。 您可以在這個對話方塊中選擇您要指定認證的伺服器執行個體，以供監視器連接到特定夥伴時使用。<br /><br /> 若要編輯夥伴的認證，請在 [伺服器執行個體]  方格中找到其項目，然後按一下該資料列上的 [編輯]  。 [連接到伺服器] 對話方塊隨即顯示，而且會固定伺服器執行個體的名稱，並且將認證控制項初始化為目前的快取值。 視需要變更驗證資訊，然後按一下 [連接]。 如果認證具有足夠的權限，就會以新的認證更新 [連接方式]  資料行。|  
  
 如果您選取資料庫，則 [動作] 功能表還會包含下列命令。  
  
|Command|描述|  
|-------------|-----------------|  
|**取消註冊此資料庫**|從「資料庫鏡像監視器」中移除選取的資料庫。|  
|**設定警告臨界值...**|開啟 [設定警告臨界值] 對話方塊。 系統管理員可以在這個對話方塊中啟用或停用各個夥伴上的資料庫警告，也可以變更各個警告的臨界值。 建議您針對兩個夥伴上的特定警告都設定臨界值，以確保如果資料庫發生容錯移轉時，警告都能持續顯示。 適合於每個夥伴的臨界值需視該夥伴系統的效能功能而定。<br /><br /> 在更新狀態資料表時，只有當效能值達到或超過臨界值時，才會將事件寫入該效能的事件記錄檔中。 如果尖峰值只在兩次狀態更新之間短暫達到臨界值，則會遺漏該尖峰值。|  
  
 **若要使用 SQL Server Management Studio 監視資料庫鏡像**  
  
-   [啟動資料庫鏡像監視器 &#40;SQL Server Management Studio&#41;](../database-mirroring/start-database-mirroring-monitor-sql-server-management-studio.md)  
  
## <a name="see-also"></a>另請參閱  
 [監視資料庫鏡像 &#40;SQL Server&#41;](database-mirroring-sql-server.md)   
 [啟動設定資料庫鏡像安全性精靈 &#40;SQL Server Management Studio&#41;](start-the-configuring-database-mirroring-security-wizard.md)  
  
  
