---
title: 資料庫鏡像 (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- partners [SQL Server]
- standby servers [SQL Server]
- principal database [SQL Server]
- principal server [SQL Server]
- mirroring partners [SQL Server]
- mirrored databases [SQL Server] See database mirroring
- database mirroring [SQL Server], partners
- availability [SQL Server]
- hot standby servers (see database monitoring [SQL Server])
- database mirroring [SQL Server], about database mirroring
- mirror database [SQL Server]
- mirror server [SQL Server] See database mirroring
ms.assetid: a7f95ddc-5154-4ed5-8117-c9fcf2221f13
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 9e6fcce7d861fd5757f822080fb05d05e32d799a
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87592221"
---
# <a name="database-mirroring-sql-server"></a><span data-ttu-id="6447b-102">資料庫鏡像 (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="6447b-102">Database Mirroring (SQL Server)</span></span>
    
> [!NOTE]  
>  [!INCLUDE[ssNoteDepFutureAvoid](../../includes/ssnotedepfutureavoid-md.md)] <span data-ttu-id="6447b-103">請改用 [!INCLUDE[ssHADR](../../includes/sshadr-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="6447b-103">Use [!INCLUDE[ssHADR](../../includes/sshadr-md.md)] instead.</span></span>  
  
 <span data-ttu-id="6447b-104">*「資料庫鏡像」* (Database Mirroring) 是增加 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 資料庫可用性的方案。</span><span class="sxs-lookup"><span data-stu-id="6447b-104">*Database mirroring* is a solution for increasing the availability of a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database.</span></span> <span data-ttu-id="6447b-105">鏡像是以每個資料庫為基準實作，只適用於使用完整復原模式的資料庫。</span><span class="sxs-lookup"><span data-stu-id="6447b-105">Mirroring is implemented on a per-database basis and works only with databases that use the full recovery model.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="6447b-106">如需資料庫鏡像支援、限制、必要條件、設定夥伴伺服器之建議及部署資料庫鏡像之建議的資訊，請參閱 [資料庫鏡像的必要條件、限制和建議事項](prerequisites-restrictions-and-recommendations-for-database-mirroring.md)。</span><span class="sxs-lookup"><span data-stu-id="6447b-106">For information about support for database mirroring, restrictions, prerequisites, recommendations for configuring partner servers, and recommendations for deploying database mirroring, see [Prerequisites, Restrictions, and Recommendations for Database Mirroring](prerequisites-restrictions-and-recommendations-for-database-mirroring.md).</span></span>  
  

  
##  <a name="benefits-of-database-mirroring"></a><a name="Benefits"></a> <span data-ttu-id="6447b-107">資料庫鏡像的優點</span><span class="sxs-lookup"><span data-stu-id="6447b-107">Benefits of Database Mirroring</span></span>  
 <span data-ttu-id="6447b-108">資料庫鏡像是一種簡單的策略，提供了下列優點：</span><span class="sxs-lookup"><span data-stu-id="6447b-108">Database mirroring is a simple strategy that offers the following benefits:</span></span>  
  
-   <span data-ttu-id="6447b-109">提高資料庫的可用性。</span><span class="sxs-lookup"><span data-stu-id="6447b-109">Increases availability of a database.</span></span>  
  
     <span data-ttu-id="6447b-110">萬一發生損毀時，在具有自動容錯移轉的高安全性模式下，容錯移轉便會迅速將資料庫的待命副本變成線上狀態 (無資料遺失)。</span><span class="sxs-lookup"><span data-stu-id="6447b-110">In the event of a disaster, in high-safety mode with automatic failover, failover quickly brings the standby copy of the database online (without data loss).</span></span> <span data-ttu-id="6447b-111">在其他作業模式下，資料庫管理員則可選擇對資料庫的待命副本進行強制服務 (可能發生資料遺失)。</span><span class="sxs-lookup"><span data-stu-id="6447b-111">In the other operating modes, the database administrator has the alternative of forcing service (with possible data loss) to the standby copy of the database.</span></span> <span data-ttu-id="6447b-112">如需詳細資訊，請參閱本主題稍後的 [角色切換](#RoleSwitching)。</span><span class="sxs-lookup"><span data-stu-id="6447b-112">For more information, see [Role Switching](#RoleSwitching), later in this topic.</span></span>  
  
-   <span data-ttu-id="6447b-113">增加資料保護。</span><span class="sxs-lookup"><span data-stu-id="6447b-113">Increases data protection.</span></span>  
  
     <span data-ttu-id="6447b-114">資料庫鏡像可提供完整或近乎完整的資料備援性，端視作業模式是高安全性模式或高效能模式而定。</span><span class="sxs-lookup"><span data-stu-id="6447b-114">Database mirroring provides complete or almost complete redundancy of the data, depending on whether the operating mode is high-safety or high-performance.</span></span> <span data-ttu-id="6447b-115">如需詳細資訊，請參閱本主題稍後的 [作業模式](#OperatingModes)。</span><span class="sxs-lookup"><span data-stu-id="6447b-115">For more information, see [Operating Modes](#OperatingModes), later in this topic.</span></span>  
  
     <span data-ttu-id="6447b-116">在 [!INCLUDE[ssEnterpriseEd10](../../includes/ssenterpriseed10-md.md)] 或更新版本上執行的資料庫鏡像夥伴會自動嘗試解決阻礙讀取資料頁面的特定錯誤類型。</span><span class="sxs-lookup"><span data-stu-id="6447b-116">A database mirroring partner running on [!INCLUDE[ssEnterpriseEd10](../../includes/ssenterpriseed10-md.md)] or later versions automatically tries to resolve certain types of errors that prevent reading a data page.</span></span> <span data-ttu-id="6447b-117">無法讀取頁面的夥伴會向其他夥伴要求全新副本。</span><span class="sxs-lookup"><span data-stu-id="6447b-117">The partner that is unable to read a page requests a fresh copy from the other partner.</span></span> <span data-ttu-id="6447b-118">如果這個要求成功，無法讀取的頁面就會使用副本取代，這通常會解決錯誤。</span><span class="sxs-lookup"><span data-stu-id="6447b-118">If this request succeeds, the unreadable page is replaced by the copy, which usually resolves the error.</span></span> <span data-ttu-id="6447b-119">如需詳細資訊，請參閱[自動修復頁面 &#40;適用於可用性群組和資料庫鏡像&#41;](../../sql-server/failover-clusters/automatic-page-repair-availability-groups-database-mirroring.md)。</span><span class="sxs-lookup"><span data-stu-id="6447b-119">For more information, see [Automatic Page Repair &#40;For Availability Groups and Database Mirroring&#41;](../../sql-server/failover-clusters/automatic-page-repair-availability-groups-database-mirroring.md).</span></span>  
  
-   <span data-ttu-id="6447b-120">提升實際執行的資料庫在升級期間的可用性。</span><span class="sxs-lookup"><span data-stu-id="6447b-120">Improves the availability of the production database during upgrades.</span></span>  
  
     <span data-ttu-id="6447b-121">若要將鏡像資料庫的停機時間減至最少，您可以循序升級裝載容錯移轉夥伴的 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 執行個體。</span><span class="sxs-lookup"><span data-stu-id="6447b-121">To minimize downtime for a mirrored database, you can sequentially upgrade the instances of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] that are hosting the failover partners.</span></span> <span data-ttu-id="6447b-122">這只需要承擔單一容錯移轉的停機時間。</span><span class="sxs-lookup"><span data-stu-id="6447b-122">This will incur the downtime of only a single failover.</span></span> <span data-ttu-id="6447b-123">這種升級形式就稱為 *「輪流升級」* 。</span><span class="sxs-lookup"><span data-stu-id="6447b-123">This form of upgrade is known as a *rolling upgrade*.</span></span> <span data-ttu-id="6447b-124">如需詳細資訊，請參閱[在鏡像資料庫停機時間最短的系統上安裝 Service Pack](../install-a-service-pack-on-a-system-with-minimal-downtime-for-mirrored-databases.md)。</span><span class="sxs-lookup"><span data-stu-id="6447b-124">For more information, see [Install a Service Pack on a System with Minimal Downtime for Mirrored Databases](../install-a-service-pack-on-a-system-with-minimal-downtime-for-mirrored-databases.md).</span></span>  
  
##  <a name="database-mirroring-terms-and-definitions"></a><a name="TermsAndDefinitions"></a> <span data-ttu-id="6447b-125">資料庫鏡像詞彙和定義</span><span class="sxs-lookup"><span data-stu-id="6447b-125">Database Mirroring Terms and Definitions</span></span>  
 <span data-ttu-id="6447b-126">自動容錯移轉</span><span class="sxs-lookup"><span data-stu-id="6447b-126">automatic failover</span></span>  
 <span data-ttu-id="6447b-127">如果主體伺服器變得無法使用，鏡像伺服器接替主體伺服器的角色，並使其資料庫副本連接成為主體資料庫的程序。</span><span class="sxs-lookup"><span data-stu-id="6447b-127">The process by which, when the principal server becomes unavailable, the mirror server to take over the role of principal server and brings its copy of the database online as the principal database.</span></span>  
  
 <span data-ttu-id="6447b-128">容錯移轉夥伴</span><span class="sxs-lookup"><span data-stu-id="6447b-128">failover partners</span></span>  
 <span data-ttu-id="6447b-129">充當鏡像資料庫之角色切換夥伴的兩個伺服器執行個體 (主體伺服器或鏡像伺服器)。</span><span class="sxs-lookup"><span data-stu-id="6447b-129">The two server instances (the principal server or the mirror server) that act as role-switching partners for a mirrored database.</span></span>  
  
 <span data-ttu-id="6447b-130">強制的服務</span><span class="sxs-lookup"><span data-stu-id="6447b-130">forced service</span></span>  
 <span data-ttu-id="6447b-131">資料庫擁有者在主體伺服器失敗時所起始的容錯移轉，它會將服務傳送至鏡像資料庫 (處於未知狀態)。</span><span class="sxs-lookup"><span data-stu-id="6447b-131">A failover initiated by the database owner upon the failure of the principal server that transfers service to the mirror database while it is in an unknown state.</span></span>  
  
 <span data-ttu-id="6447b-132">高效能模式</span><span class="sxs-lookup"><span data-stu-id="6447b-132">High-performance mode</span></span>  
 <span data-ttu-id="6447b-133">資料庫鏡像工作階段會以非同步方式作業，而且僅使用主體伺服器和鏡像伺服器。</span><span class="sxs-lookup"><span data-stu-id="6447b-133">The database mirroring session operates asynchronously and uses only the principal server and mirror server.</span></span> <span data-ttu-id="6447b-134">唯一的角色切換形式是強制的服務 (可能造成資料遺失)。</span><span class="sxs-lookup"><span data-stu-id="6447b-134">The only form of role switching is forced service (with possible data loss).</span></span>  
  
 <span data-ttu-id="6447b-135">高安全性模式</span><span class="sxs-lookup"><span data-stu-id="6447b-135">High-safety mode</span></span>  
 <span data-ttu-id="6447b-136">資料庫鏡像工作階段會以同步方式作業，並選擇性地使用見證以及主體伺服器和鏡像伺服器。</span><span class="sxs-lookup"><span data-stu-id="6447b-136">The database mirroring session operates synchronously and, optionally, uses a witness, as well as the principal server and mirror server.</span></span>  
  
 <span data-ttu-id="6447b-137">手動容錯移轉</span><span class="sxs-lookup"><span data-stu-id="6447b-137">manual failover</span></span>  
 <span data-ttu-id="6447b-138">資料庫擁有者在主體伺服器仍然在執行時所起始的容錯移轉，它會將服務從主體資料庫傳送至鏡像資料庫 (它們都處於已同步處理狀態)。</span><span class="sxs-lookup"><span data-stu-id="6447b-138">A failover initiated by the database owner, while the principal server is still running, that transfers service from the principal database to the mirror database while they are in a synchronized state.</span></span>  
  
 <span data-ttu-id="6447b-139">鏡像資料庫</span><span class="sxs-lookup"><span data-stu-id="6447b-139">mirror database</span></span>  
 <span data-ttu-id="6447b-140">通常會與主體資料庫完全同步處理的資料庫副本。</span><span class="sxs-lookup"><span data-stu-id="6447b-140">The copy of the database that is typically fully synchronized with the principal database.</span></span>  
  
 <span data-ttu-id="6447b-141">鏡像伺服器</span><span class="sxs-lookup"><span data-stu-id="6447b-141">mirror server</span></span>  
 <span data-ttu-id="6447b-142">在資料庫鏡像組態中，指鏡像資料庫所在的伺服器執行個體。</span><span class="sxs-lookup"><span data-stu-id="6447b-142">In a database mirroring configuration, the server instance on which the mirror database resides.</span></span>  
  
 <span data-ttu-id="6447b-143">鏡像伺服器</span><span class="sxs-lookup"><span data-stu-id="6447b-143">mirror server</span></span>  
 <span data-ttu-id="6447b-144">在資料庫鏡像組態中，指鏡像資料庫所在的伺服器執行個體。</span><span class="sxs-lookup"><span data-stu-id="6447b-144">In a database mirroring configuration, the server instance on which the mirror database resides.</span></span>  
  
 <span data-ttu-id="6447b-145">主體資料庫</span><span class="sxs-lookup"><span data-stu-id="6447b-145">principal database</span></span>  
 <span data-ttu-id="6447b-146">資料庫鏡像中的一種可讀寫資料庫，該資料庫的交易記錄檔記錄會套用至資料庫的唯讀副本 (鏡像資料庫)。</span><span class="sxs-lookup"><span data-stu-id="6447b-146">In database mirroring, a read-write database whose transaction log records are applied to a read-only copy of the database (a mirror database).</span></span>  
  
 <span data-ttu-id="6447b-147">主體伺服器</span><span class="sxs-lookup"><span data-stu-id="6447b-147">principal server</span></span>  
 <span data-ttu-id="6447b-148">資料庫鏡像中的夥伴，它的資料庫目前是主體資料庫。</span><span class="sxs-lookup"><span data-stu-id="6447b-148">In database mirroring, the partner whose database is currently the principal database.</span></span>  
  
 <span data-ttu-id="6447b-149">重做佇列</span><span class="sxs-lookup"><span data-stu-id="6447b-149">redo queue</span></span>  
 <span data-ttu-id="6447b-150">在鏡像伺服器磁碟上等待且接收的交易記錄檔記錄。</span><span class="sxs-lookup"><span data-stu-id="6447b-150">Received transaction log records that are waiting on the disk of a mirror server.</span></span>  
  
 <span data-ttu-id="6447b-151">角色 (role)</span><span class="sxs-lookup"><span data-stu-id="6447b-151">role</span></span>  
 <span data-ttu-id="6447b-152">主體伺服器和鏡像伺服器會執行互補的主體與鏡像角色。</span><span class="sxs-lookup"><span data-stu-id="6447b-152">The principal server and mirror server perform complementary principal and mirror roles.</span></span> <span data-ttu-id="6447b-153">另外，也可以選擇由第三個伺服器執行個體扮演見證的角色。</span><span class="sxs-lookup"><span data-stu-id="6447b-153">Optionally, the role of witness is performed by a third server instance.</span></span>  
  
 <span data-ttu-id="6447b-154">角色切換</span><span class="sxs-lookup"><span data-stu-id="6447b-154">role switching</span></span>  
 <span data-ttu-id="6447b-155">由鏡像接管主體角色。</span><span class="sxs-lookup"><span data-stu-id="6447b-155">The taking over of the principal role by the mirror.</span></span>  
  
 <span data-ttu-id="6447b-156">傳送佇列</span><span class="sxs-lookup"><span data-stu-id="6447b-156">send queue</span></span>  
 <span data-ttu-id="6447b-157">已經在主體伺服器的記錄檔磁碟上累積的未傳送交易記錄檔記錄。</span><span class="sxs-lookup"><span data-stu-id="6447b-157">Unsent transaction log records that have accumulated on the log disk of the principal server.</span></span>  
  
 <span data-ttu-id="6447b-158">工作階段 (session)</span><span class="sxs-lookup"><span data-stu-id="6447b-158">session</span></span>  
 <span data-ttu-id="6447b-159">在資料庫鏡像期間，於主體伺服器、鏡像伺服器與見證伺服器 (如果存在的話) 之間所發生的關係。</span><span class="sxs-lookup"><span data-stu-id="6447b-159">The relationship that occurs during database mirroring among the principal server, mirror server, and witness server (if present).</span></span>  
  
 <span data-ttu-id="6447b-160">當鏡像工作階段開始或繼續之後，將主體伺服器上所累積的主體資料庫記錄檔記錄傳送到鏡像伺服器的程序，這個程序會盡快將這些記錄檔記錄寫入磁碟，以便能趕上主體伺服器。</span><span class="sxs-lookup"><span data-stu-id="6447b-160">After a mirroring session starts or resumes, the process by which log records of the principal database that have accumulated on the principal server are sent to the mirror server, which writes these log records to disk as quickly as possible to catch up with the principal server.</span></span>  
  
 <span data-ttu-id="6447b-161">交易安全性</span><span class="sxs-lookup"><span data-stu-id="6447b-161">Transaction safety</span></span>  
 <span data-ttu-id="6447b-162">鏡像特有的資料庫屬性，用來決定資料庫鏡像工作階段是以同步或非同步方式作業。</span><span class="sxs-lookup"><span data-stu-id="6447b-162">A mirroring-specific database property that determines whether a database mirroring session operates synchronously or asynchronously.</span></span> <span data-ttu-id="6447b-163">有兩個安全性層級：FULL 和 OFF。</span><span class="sxs-lookup"><span data-stu-id="6447b-163">There are two safety levels: FULL and OFF.</span></span>  
  
 <span data-ttu-id="6447b-164">見證</span><span class="sxs-lookup"><span data-stu-id="6447b-164">Witness</span></span>  
 <span data-ttu-id="6447b-165">只能搭配高安全性模式使用的一種 SQL Server 選擇性執行個體，可讓鏡像伺服器辨別何時要起始自動容錯移轉。</span><span class="sxs-lookup"><span data-stu-id="6447b-165">For use only with high-safety mode, an optional instance of SQL Server that enables the mirror server to recognize when to initiate an automatic failover.</span></span> <span data-ttu-id="6447b-166">與兩個容錯移轉夥伴不同的是，見證並不是為資料庫服務。</span><span class="sxs-lookup"><span data-stu-id="6447b-166">Unlike the two failover partners, the witness does not serve the database.</span></span> <span data-ttu-id="6447b-167">支援自動容錯移轉是見證的唯一角色。</span><span class="sxs-lookup"><span data-stu-id="6447b-167">Supporting automatic failover is the only role of the witness.</span></span>  
  
##  <a name="overview-of-database-mirroring"></a><a name="HowWorks"></a> <span data-ttu-id="6447b-168">資料庫鏡像概觀</span><span class="sxs-lookup"><span data-stu-id="6447b-168">Overview of Database Mirroring</span></span>  
 <span data-ttu-id="6447b-169">資料庫鏡像會維護單一資料庫的兩份副本，而這兩份副本必須位於不同的 [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)]伺服器執行個體上。</span><span class="sxs-lookup"><span data-stu-id="6447b-169">Database mirroring maintains two copies of a single database that must reside on different server instances of [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)].</span></span> <span data-ttu-id="6447b-170">這些伺服器執行個體通常位於不同位置的電腦上。</span><span class="sxs-lookup"><span data-stu-id="6447b-170">Typically, these server instances reside on computers in different locations.</span></span> <span data-ttu-id="6447b-171">在資料庫上啟動資料庫鏡像，起始這些伺服器執行個體之間的關係，稱為 *「資料庫鏡像工作階段」* (database mirroring session)。</span><span class="sxs-lookup"><span data-stu-id="6447b-171">Starting database mirroring on a database, initiates a relationship, known as a *database mirroring session*, between these server instances.</span></span>  
  
 <span data-ttu-id="6447b-172">其中一個伺服器執行個體會提供資料庫給用戶端 (「主體伺服器」)。</span><span class="sxs-lookup"><span data-stu-id="6447b-172">One server instance serves the database to clients (the *principal server*).</span></span> <span data-ttu-id="6447b-173">另一個執行個體則當做熱或暖待命伺服器 (「鏡像伺服器」)，端視鏡像工作階段的組態而定。</span><span class="sxs-lookup"><span data-stu-id="6447b-173">The other instance acts as a hot or warm standby server (the *mirror server*), depending on the configuration and state of the mirroring session.</span></span> <span data-ttu-id="6447b-174">同步處理資料庫鏡像工作階段時，資料庫鏡像會提供熱待命伺服器來支援快速容錯移轉，因而不會遺失任何已認可的交易資料。</span><span class="sxs-lookup"><span data-stu-id="6447b-174">When a database mirroring session is synchronized, database mirroring provides a hot standby server that supports rapid failover without a loss of data from committed transactions.</span></span> <span data-ttu-id="6447b-175">當工作階段無法同步處理時，鏡像伺服器通常會當做暖待命伺服器使用 (可能發生資料遺失)。</span><span class="sxs-lookup"><span data-stu-id="6447b-175">When the session is not synchronized, the mirror server is typically available as a warm standby server (with possible data loss).</span></span>  
  
 <span data-ttu-id="6447b-176">主體和鏡像伺服器會在 *「資料庫鏡像工作階段」* 內互相通訊，並如同 *「夥伴」* 般彼此合作。</span><span class="sxs-lookup"><span data-stu-id="6447b-176">The principal and mirror servers communicate and cooperate as *partners* in a *database mirroring session*.</span></span> <span data-ttu-id="6447b-177">這兩個夥伴在工作階段中扮演互補的角色： *「主體角色」* (Principal Role) 和 *「鏡像角色」* (Mirror Role)。</span><span class="sxs-lookup"><span data-stu-id="6447b-177">The two partners perform complementary roles in the session: the *principal role* and the *mirror role*.</span></span> <span data-ttu-id="6447b-178">在任何時間內，一定有一個夥伴扮演主體角色，而另一個夥伴就扮演鏡像角色。</span><span class="sxs-lookup"><span data-stu-id="6447b-178">At any given time, one partner performs the principal role, and the other partner performs the mirror role.</span></span> <span data-ttu-id="6447b-179">我們會以每個夥伴所 *「擁有」* 的目前角色來描述它們，</span><span class="sxs-lookup"><span data-stu-id="6447b-179">Each partner is described as *owning* its current role.</span></span> <span data-ttu-id="6447b-180">擁有主體角色的夥伴稱為 *「主體伺服器」* ，其資料庫副本就是目前的主體資料庫；</span><span class="sxs-lookup"><span data-stu-id="6447b-180">The partner that owns the principal role is known as the *principal server*, and its copy of the database is the current principal database.</span></span> <span data-ttu-id="6447b-181">而擁有鏡像角色的夥伴則稱為 *「鏡像伺服器」* ，其資料庫副本就是目前的鏡像資料庫。</span><span class="sxs-lookup"><span data-stu-id="6447b-181">The partner that owns the mirror role is known as the *mirror server*, and its copy of the database is the current mirror database.</span></span> <span data-ttu-id="6447b-182">在實際執行環境中部署資料庫鏡像時，主體資料庫就是 *「實際執行的資料庫」* 。</span><span class="sxs-lookup"><span data-stu-id="6447b-182">When database mirroring is deployed in a production environment, the principal database is the *production database*.</span></span>  
  
 <span data-ttu-id="6447b-183">資料庫鏡像涉及將主體資料庫上發生的每一項插入、更新和刪除作業，儘快 *「重做」* 到鏡像資料庫上。</span><span class="sxs-lookup"><span data-stu-id="6447b-183">Database mirroring involves *redoing* every insert, update, and delete operation that occurs on the principal database onto the mirror database as quickly as possible.</span></span> <span data-ttu-id="6447b-184">完成重做的方式是將使用中交易記錄檔記錄的資料流傳送到鏡像伺服器，再由鏡像伺服器盡快依序將記錄套用到鏡像資料庫。</span><span class="sxs-lookup"><span data-stu-id="6447b-184">Redoing is accomplished by sending a stream of active transaction log records to the mirror server, which applies log records to the mirror database, in sequence, as quickly as possible.</span></span> <span data-ttu-id="6447b-185">與在邏輯層級運作的複寫不同，資料庫鏡像是在實體記錄層級運作。</span><span class="sxs-lookup"><span data-stu-id="6447b-185">Unlike replication, which works at the logical level, database mirroring works at the level of the physical log record.</span></span> <span data-ttu-id="6447b-186">從 [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)]開始，主體伺服器會先壓縮交易記錄檔記錄的資料流，然後再將它傳送至鏡像伺服器。</span><span class="sxs-lookup"><span data-stu-id="6447b-186">Beginning in [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)], the principal server compresses the stream of transaction log records before sending it to the mirror server.</span></span> <span data-ttu-id="6447b-187">這個記錄檔壓縮作業會在所有鏡像工作階段中進行。</span><span class="sxs-lookup"><span data-stu-id="6447b-187">This log compression occurs in all mirroring sessions.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="6447b-188">給定的伺服器執行個體可參與具有相同或不同夥伴的多個並行資料庫鏡像工作階段。</span><span class="sxs-lookup"><span data-stu-id="6447b-188">A given server instance can participate in multiple concurrent database mirroring sessions with the same or different partners.</span></span> <span data-ttu-id="6447b-189">伺服器執行個體可以在某些工作階段中是夥伴，在其他工作階段中是見證。</span><span class="sxs-lookup"><span data-stu-id="6447b-189">A server instance can be a partner in some sessions and a witness in other sessions.</span></span> <span data-ttu-id="6447b-190">鏡像伺服器執行個體必須執行相同版本的 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="6447b-190">The mirror server instance must be running the same edition of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
 
  
###  <a name="operating-modes"></a><a name="OperatingModes"></a> <span data-ttu-id="6447b-191">作業模式</span><span class="sxs-lookup"><span data-stu-id="6447b-191">Operating Modes</span></span>  
 <span data-ttu-id="6447b-192">資料庫鏡像工作階段可與同步或非同步作業一起執行。</span><span class="sxs-lookup"><span data-stu-id="6447b-192">A database mirroring session runs with either synchronous or asynchronous operation.</span></span> <span data-ttu-id="6447b-193">在非同步作業下，交易不會等待鏡像伺服器將記錄寫入磁碟，即逕行認可，藉以達到最大效能。</span><span class="sxs-lookup"><span data-stu-id="6447b-193">Under asynchronous operation, the transactions commit without waiting for the mirror server to write the log to disk, which maximizes performance.</span></span> <span data-ttu-id="6447b-194">在同步作業下，交易將同時在兩個夥伴上進行認可，代價是會增加交易延遲性。</span><span class="sxs-lookup"><span data-stu-id="6447b-194">Under synchronous operation, a transaction is committed on both partners, but at the cost of increased transaction latency.</span></span>  
  
 <span data-ttu-id="6447b-195">鏡像作業模式共有兩種。</span><span class="sxs-lookup"><span data-stu-id="6447b-195">There are two mirroring operating modes.</span></span> <span data-ttu-id="6447b-196">其中一種模式 (「高安全性模式」) 可支援同步作業。</span><span class="sxs-lookup"><span data-stu-id="6447b-196">One of them, *high-safety mode* supports synchronous operation.</span></span> <span data-ttu-id="6447b-197">在高安全性模式下，當工作階段開始時，鏡像伺服器會儘快將鏡像資料庫與主體資料庫進行同步處理。</span><span class="sxs-lookup"><span data-stu-id="6447b-197">Under high-safety mode, when a session starts, the mirror server synchronizes the mirror database together with the principal database as quickly as possible.</span></span> <span data-ttu-id="6447b-198">一旦資料庫同步處理完成之後，交易將同時在兩個夥伴上進行認可，代價是會增加交易延遲性。</span><span class="sxs-lookup"><span data-stu-id="6447b-198">As soon as the databases are synchronized, a transaction is committed on both partners, at the cost of increased transaction latency.</span></span>  
  
 <span data-ttu-id="6447b-199">第二種作業模式 (「高效能模式」) 則以非同步方式執行。</span><span class="sxs-lookup"><span data-stu-id="6447b-199">The second operating mode, *high-performance mode*, runs asynchronously.</span></span> <span data-ttu-id="6447b-200">鏡像伺服器會盡量跟上主體伺服器所傳送的記錄。</span><span class="sxs-lookup"><span data-stu-id="6447b-200">The mirror server tries to keep up with the log records sent by the principal server.</span></span> <span data-ttu-id="6447b-201">鏡像資料庫可能會稍微落後主體資料庫。</span><span class="sxs-lookup"><span data-stu-id="6447b-201">The mirror database might lag somewhat behind the principal database.</span></span> <span data-ttu-id="6447b-202">然而，在資料庫之間的間距通常很小。</span><span class="sxs-lookup"><span data-stu-id="6447b-202">However, typically, the gap between the databases is small.</span></span> <span data-ttu-id="6447b-203">但是，若主體伺服器的工作負載很大，或鏡像伺服器的系統超載時，此差距就會變大。</span><span class="sxs-lookup"><span data-stu-id="6447b-203">However, the gap can become significant if the principal server is under a heavy work load or the system of the mirror server is overloaded.</span></span>  
  
 <span data-ttu-id="6447b-204">在高效能模式中，當主體伺服器傳送記錄到鏡像伺服器時，主體伺服器會立即傳送確認給用戶端。</span><span class="sxs-lookup"><span data-stu-id="6447b-204">In high-performance mode, as soon as the principal server sends a log record to the mirror server, the principal server sends a confirmation to the client.</span></span> <span data-ttu-id="6447b-205">它不會等候鏡像伺服器的收條。</span><span class="sxs-lookup"><span data-stu-id="6447b-205">It does not wait for an acknowledgement from the mirror server.</span></span> <span data-ttu-id="6447b-206">這表示交易不會等待鏡像伺服器將記錄寫入磁碟，即逕行認可。</span><span class="sxs-lookup"><span data-stu-id="6447b-206">This means that transactions commit without waiting for the mirror server to write the log to disk.</span></span> <span data-ttu-id="6447b-207">這種非同步作業可以讓主體伺服器在執行時將交易延遲性降到最低，但必須承擔可能遺失資料的風險。</span><span class="sxs-lookup"><span data-stu-id="6447b-207">Such asynchronous operation enables the principal server to run with minimum transaction latency, at the potential risk of some data loss.</span></span>  
  
 <span data-ttu-id="6447b-208">所有的資料庫鏡像工作階段都只能支援一部主體伺服器和一部鏡像伺服器。</span><span class="sxs-lookup"><span data-stu-id="6447b-208">All database mirroring sessions support only one principal server and one mirror server.</span></span> <span data-ttu-id="6447b-209">這種組態顯示在下圖中。</span><span class="sxs-lookup"><span data-stu-id="6447b-209">This configuration is shown in the following illustration.</span></span>  
  
 <span data-ttu-id="6447b-210">![資料庫鏡像工作階段中的夥伴](../media/dbm-2-way-session-intro.gif "資料庫鏡像工作階段中的夥伴")</span><span class="sxs-lookup"><span data-stu-id="6447b-210">![Partners in a database mirroring session](../media/dbm-2-way-session-intro.gif "Partners in a database mirroring session")</span></span>  
  
 <span data-ttu-id="6447b-211">具有自動容錯移轉的高安全性模式需要第三個伺服器執行個體，稱為「見證」。</span><span class="sxs-lookup"><span data-stu-id="6447b-211">High-safety mode with automatic failover requires a third server instance, known as a *witness*.</span></span> <span data-ttu-id="6447b-212">與兩位夥伴不同的是，見證並不是為資料庫服務。</span><span class="sxs-lookup"><span data-stu-id="6447b-212">Unlike the two partners, the witness does not serve the database.</span></span> <span data-ttu-id="6447b-213">見證會藉由確認主體伺服器是否已啟動而且可以正常運作，支援自動容錯移轉。</span><span class="sxs-lookup"><span data-stu-id="6447b-213">The witness supports automatic failover by verifying whether the principal server is up and functioning.</span></span> <span data-ttu-id="6447b-214">只有當鏡像和見證與主體伺服器中斷連接後仍然保持相互連接時，鏡像伺服器才會開始進行自動容錯移轉。</span><span class="sxs-lookup"><span data-stu-id="6447b-214">The mirror server initiates automatic failover only if the mirror and the witness remain connected to each other after both have been disconnected from the principal server.</span></span>  
  
 <span data-ttu-id="6447b-215">下圖顯示包括見證的組態。</span><span class="sxs-lookup"><span data-stu-id="6447b-215">The following illustration shows a configuration that includes a witness.</span></span>  
  
 <span data-ttu-id="6447b-216">![包含見證的鏡像工作階段](../media/dbm-3-way-session-intro-ov.gif "包含見證的鏡像工作階段")</span><span class="sxs-lookup"><span data-stu-id="6447b-216">![A mirroring session that includes a witness](../media/dbm-3-way-session-intro-ov.gif "A mirroring session that includes a witness")</span></span>  
  
 <span data-ttu-id="6447b-217">如需詳細資訊，請參閱本主題稍後的 [角色切換](#RoleSwitching)。</span><span class="sxs-lookup"><span data-stu-id="6447b-217">For more information, see [Role Switching](#RoleSwitching), later in this topic.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="6447b-218">建立新的鏡像工作階段或將見證加入至現有鏡像組態時，會要求所有涉及的伺服器執行個體都執行相同版本的 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="6447b-218">Establishing a new mirroring session or adding a witness to an existing mirroring configuration requires that all involved server instances run the same version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="6447b-219">不過，當您升級為 [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] 或更新版本時，這些相關執行個體的版本可能會不同。</span><span class="sxs-lookup"><span data-stu-id="6447b-219">However, when you are upgrading to [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] or a later version, the versions of the involved instances can vary.</span></span> <span data-ttu-id="6447b-220">如需詳細資訊，請參閱 [Minimize Downtime for Mirrored Databases When Upgrading Server Instances](upgrading-mirrored-instances.md)。</span><span class="sxs-lookup"><span data-stu-id="6447b-220">For more information, see [Minimize Downtime for Mirrored Databases When Upgrading Server Instances](upgrading-mirrored-instances.md).</span></span>  
  
####  <a name="transaction-safety-and-operating-modes"></a><a name="TxnSafety"></a> <span data-ttu-id="6447b-221">交易安全性與作業模式</span><span class="sxs-lookup"><span data-stu-id="6447b-221">Transaction Safety and Operating Modes</span></span>  
 <span data-ttu-id="6447b-222">作業模式為同步或非同步作業需視其交易安全性設定而定。</span><span class="sxs-lookup"><span data-stu-id="6447b-222">Whether an operating mode is asynchronous or synchronous depends on the transaction safety setting.</span></span> <span data-ttu-id="6447b-223">如果您以獨佔模式使用 [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] 來設定資料庫鏡像，系統便會在您選取作業模式時自動設定交易安全性設定。</span><span class="sxs-lookup"><span data-stu-id="6447b-223">If you exclusively use [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] to configure database mirroring, transaction safety settings are configured automatically when you select the operation mode.</span></span>  
  
 <span data-ttu-id="6447b-224">如果使用 [!INCLUDE[tsql](../../includes/tsql-md.md)] 來設定資料庫鏡像，您就必須了解設定交易安全性的方式。</span><span class="sxs-lookup"><span data-stu-id="6447b-224">If you use [!INCLUDE[tsql](../../includes/tsql-md.md)] to configure database mirroring, you must understand how to set transaction safety.</span></span> <span data-ttu-id="6447b-225">交易安全性是由 ALTER DATABASE 陳述式的 SAFETY 屬性所控制。</span><span class="sxs-lookup"><span data-stu-id="6447b-225">Transaction safety is controlled by the SAFETY property of the ALTER DATABASE statement.</span></span> <span data-ttu-id="6447b-226">在要進行鏡像的資料庫上，SAFETY 不是 FULL 就是 OFF。</span><span class="sxs-lookup"><span data-stu-id="6447b-226">On a database that is being mirrored, SAFETY is either FULL or OFF.</span></span>  
  
-   <span data-ttu-id="6447b-227">如果 SAFETY 選項設為 FULL，在初始同步處理階段之後的資料庫鏡像便為同步作業。</span><span class="sxs-lookup"><span data-stu-id="6447b-227">If the SAFETY option is set to FULL, database mirroring operation is synchronous, after the initial synchronizing phase.</span></span> <span data-ttu-id="6447b-228">如果見證是在高安全性模式下設定，工作階段就會支援自動容錯移轉。</span><span class="sxs-lookup"><span data-stu-id="6447b-228">If a witness is set in high-safety mode, the session supports automatic failover.</span></span>  
  
-   <span data-ttu-id="6447b-229">如果 SAFETY 選項設為 OFF，資料庫鏡像便為非同步作業。</span><span class="sxs-lookup"><span data-stu-id="6447b-229">If the SAFETY option is set to OFF, database mirroring operation is asynchronous.</span></span> <span data-ttu-id="6447b-230">工作階段將以高效能模式執行，而且 WITNESS 選項也應該設為 OFF。</span><span class="sxs-lookup"><span data-stu-id="6447b-230">The session runs in high-performance mode, and the WITNESS option should also be OFF.</span></span>  
  
 <span data-ttu-id="6447b-231">如需詳細資訊，請參閱 [Database Mirroring Operating Modes](database-mirroring-operating-modes.md)。</span><span class="sxs-lookup"><span data-stu-id="6447b-231">For more information, see [Database Mirroring Operating Modes](database-mirroring-operating-modes.md).</span></span>  
  
###  <a name="role-switching"></a><a name="RoleSwitching"></a> <span data-ttu-id="6447b-232">角色切換</span><span class="sxs-lookup"><span data-stu-id="6447b-232">Role Switching</span></span>  
 <span data-ttu-id="6447b-233">在資料庫鏡像工作階段的內容中，主體與鏡像角色通常可以用一種稱為 *「角色切換」* 的程序交換。</span><span class="sxs-lookup"><span data-stu-id="6447b-233">Within the context of a database mirroring session, the principal and mirror roles are typically interchangeable in a process known as *role switching*.</span></span> <span data-ttu-id="6447b-234">角色切換包括將主體角色傳送給鏡像伺服器。</span><span class="sxs-lookup"><span data-stu-id="6447b-234">Role switching involves transferring the principal role to the mirror server.</span></span> <span data-ttu-id="6447b-235">在角色切換中，鏡像伺服器將充當主體伺服器的 *「容錯移轉夥伴」* 。</span><span class="sxs-lookup"><span data-stu-id="6447b-235">In role switching, the mirror server acts as the *failover partner* for the principal server.</span></span> <span data-ttu-id="6447b-236">發生角色切換時，鏡像伺服器將接替主體角色，並使其資料庫副本變成線上狀態以做為主體資料庫。</span><span class="sxs-lookup"><span data-stu-id="6447b-236">When a role switch occurs, the mirror server takes over the principal role and brings its copy of the database online as the new principal database.</span></span> <span data-ttu-id="6447b-237">先前的主體伺服器 (如果有的話) 將會擔任鏡像角色，而其資料庫則會變成新的鏡像資料庫。</span><span class="sxs-lookup"><span data-stu-id="6447b-237">The former principal server, if available, assumes the mirror role, and its database becomes the new mirror database.</span></span> <span data-ttu-id="6447b-238">原則上，各角色可以重複來回切換。</span><span class="sxs-lookup"><span data-stu-id="6447b-238">Potentially, the roles can switch back and forth repeatedly.</span></span>  
  
 <span data-ttu-id="6447b-239">角色切換有下列三種形式。</span><span class="sxs-lookup"><span data-stu-id="6447b-239">The following three forms of role switching exist.</span></span>  
  
-   <span data-ttu-id="6447b-240">*Automatic failover*</span><span class="sxs-lookup"><span data-stu-id="6447b-240">*Automatic failover*</span></span>  
  
     <span data-ttu-id="6447b-241">這種形式需要使用高安全性模式而且鏡像伺服器和見證必須存在。</span><span class="sxs-lookup"><span data-stu-id="6447b-241">This requires high-safety mode and the presence of the mirror server and a witness.</span></span> <span data-ttu-id="6447b-242">資料庫必須已同步處理，而見證也必須連接到鏡像伺服器。</span><span class="sxs-lookup"><span data-stu-id="6447b-242">The database must already be synchronized, and the witness must be connected to the mirror server.</span></span>  
  
     <span data-ttu-id="6447b-243">見證角色是用來驗證特定的夥伴伺服器是否已啟動而且可以正常運作。</span><span class="sxs-lookup"><span data-stu-id="6447b-243">The role of the witness is to verify whether a given partner server is up and functioning.</span></span> <span data-ttu-id="6447b-244">如果鏡像伺服器與主體伺服器的連接中斷，但見證仍與主體伺服器連接，鏡像伺服器就不會起始容錯移轉。</span><span class="sxs-lookup"><span data-stu-id="6447b-244">If the mirror server loses its connection to the principal server but the witness is still connected to the principal server, the mirror server does not initiate a failover.</span></span> <span data-ttu-id="6447b-245">如需詳細資訊，請參閱 [資料庫鏡像見證](database-mirroring-witness.md)。</span><span class="sxs-lookup"><span data-stu-id="6447b-245">For more information, see [Database Mirroring Witness](database-mirroring-witness.md).</span></span>  
  
-   <span data-ttu-id="6447b-246">*手動容錯移轉*</span><span class="sxs-lookup"><span data-stu-id="6447b-246">*Manual failover*</span></span>  
  
     <span data-ttu-id="6447b-247">這種形式需要使用高安全性模式。</span><span class="sxs-lookup"><span data-stu-id="6447b-247">This requires high-safety mode.</span></span> <span data-ttu-id="6447b-248">夥伴必須互相連接，而且資料庫也必須已完成同步處理。</span><span class="sxs-lookup"><span data-stu-id="6447b-248">The partners must be connected to each other, and the database must already be synchronized.</span></span>  
  
-   <span data-ttu-id="6447b-249">強制服務 (可能發生資料遺失)</span><span class="sxs-lookup"><span data-stu-id="6447b-249">*Forced service* (with possible data loss)</span></span>  
  
     <span data-ttu-id="6447b-250">在高效能模式與不含自動容錯移轉的高安全性模式中，如果主體伺服器已經故障，但鏡像伺服器仍然可用，就可以使用強制服務。</span><span class="sxs-lookup"><span data-stu-id="6447b-250">Under high-performance mode and high-safety mode without automatic failover, forcing service is possible if the principal server has failed and the mirror server is available.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="6447b-251">高效能模式是在沒有見證的情況下執行的模式。</span><span class="sxs-lookup"><span data-stu-id="6447b-251">High-performance mode is intended to run without a witness.</span></span> <span data-ttu-id="6447b-252">但是如果有見證存在，該見證就必須連接到鏡像伺服器，才能使用強制服務。</span><span class="sxs-lookup"><span data-stu-id="6447b-252">But if a witness exists, forcing service requires that the witness is connected to the mirror server.</span></span>  
  
 <span data-ttu-id="6447b-253">在任何角色切換案例中，一旦新主體資料庫變成線上狀態之後，用戶端應用程式就可以重新連接到該資料庫來快速復原。</span><span class="sxs-lookup"><span data-stu-id="6447b-253">In any role-switching scenario, as soon as the new principal database comes online, the client applications can recover quickly by reconnecting to the database.</span></span>  
  
###  <a name="concurrent-sessions"></a><a name="ConcurrentSessions"></a> <span data-ttu-id="6447b-254">並行工作階段</span><span class="sxs-lookup"><span data-stu-id="6447b-254">Concurrent Sessions</span></span>  
 <span data-ttu-id="6447b-255">給定的伺服器執行個體可以參與具有相同或不同伺服器執行個體的多個並行資料庫鏡像工作階段 (每個鏡像資料庫一個)。</span><span class="sxs-lookup"><span data-stu-id="6447b-255">A given server instance can participate in multiple, concurrent database mirroring sessions (once per mirrored database) with the same or different server instances.</span></span> <span data-ttu-id="6447b-256">通常，伺服器執行個體在所有資料庫鏡像工作階段中會專門當做夥伴或見證服務。</span><span class="sxs-lookup"><span data-stu-id="6447b-256">Often, a server instance serves exclusively as a partner or a witness in all of its database mirroring sessions.</span></span> <span data-ttu-id="6447b-257">不過，由於每個工作階段獨立於其他工作階段，所以伺服器執行個體可以在某些工作階段中當做夥伴，而在其他工作階段中當做見證。</span><span class="sxs-lookup"><span data-stu-id="6447b-257">However, because each session is independent of the other sessions, a server instance can act as a partner in some sessions and as a witness in other sessions.</span></span> <span data-ttu-id="6447b-258">例如，請考慮下列在三個伺服器執行個體 (`SSInstance_1`、 `SSInstance_2`及 `SSInstance_3`) 中的四個工作階段。</span><span class="sxs-lookup"><span data-stu-id="6447b-258">For example, consider the following four sessions among three server instances (`SSInstance_1`, `SSInstance_2`, and `SSInstance_3`).</span></span> <span data-ttu-id="6447b-259">每個伺服器執行個體會在某些工作階段中當做夥伴服務，而在其他工作階段中當做見證服務：</span><span class="sxs-lookup"><span data-stu-id="6447b-259">Each server instance serves as a partner in some sessions and as a witness in others:</span></span>  
  
|<span data-ttu-id="6447b-260">伺服器執行個體</span><span class="sxs-lookup"><span data-stu-id="6447b-260">Server instance</span></span>|<span data-ttu-id="6447b-261">資料庫 A 的工作階段</span><span class="sxs-lookup"><span data-stu-id="6447b-261">Session for database A</span></span>|<span data-ttu-id="6447b-262">資料庫 B 的工作階段</span><span class="sxs-lookup"><span data-stu-id="6447b-262">Session for database B</span></span>|<span data-ttu-id="6447b-263">資料庫 C 的工作階段</span><span class="sxs-lookup"><span data-stu-id="6447b-263">Session for database C</span></span>|<span data-ttu-id="6447b-264">資料庫 D 的工作階段</span><span class="sxs-lookup"><span data-stu-id="6447b-264">Session for database D</span></span>|  
|---------------------|----------------------------|----------------------------|----------------------------|----------------------------|  
|`SSInstance_1`|<span data-ttu-id="6447b-265">見證</span><span class="sxs-lookup"><span data-stu-id="6447b-265">Witness</span></span>|<span data-ttu-id="6447b-266">Partner</span><span class="sxs-lookup"><span data-stu-id="6447b-266">Partner</span></span>|<span data-ttu-id="6447b-267">Partner</span><span class="sxs-lookup"><span data-stu-id="6447b-267">Partner</span></span>|<span data-ttu-id="6447b-268">Partner</span><span class="sxs-lookup"><span data-stu-id="6447b-268">Partner</span></span>|  
|`SSInstance_2`|<span data-ttu-id="6447b-269">Partner</span><span class="sxs-lookup"><span data-stu-id="6447b-269">Partner</span></span>|<span data-ttu-id="6447b-270">見證</span><span class="sxs-lookup"><span data-stu-id="6447b-270">Witness</span></span>|<span data-ttu-id="6447b-271">Partner</span><span class="sxs-lookup"><span data-stu-id="6447b-271">Partner</span></span>|<span data-ttu-id="6447b-272">Partner</span><span class="sxs-lookup"><span data-stu-id="6447b-272">Partner</span></span>|  
|`SSInstance_3`|<span data-ttu-id="6447b-273">Partner</span><span class="sxs-lookup"><span data-stu-id="6447b-273">Partner</span></span>|<span data-ttu-id="6447b-274">Partner</span><span class="sxs-lookup"><span data-stu-id="6447b-274">Partner</span></span>|<span data-ttu-id="6447b-275">見證</span><span class="sxs-lookup"><span data-stu-id="6447b-275">Witness</span></span>|<span data-ttu-id="6447b-276">見證</span><span class="sxs-lookup"><span data-stu-id="6447b-276">Witness</span></span>|  
  
 <span data-ttu-id="6447b-277">下圖說明兩個伺服器執行個體以夥伴伺服器的角色，共同參與兩個鏡像工作階段。</span><span class="sxs-lookup"><span data-stu-id="6447b-277">The following figure illustrates two server instances that are participating as partners together in two mirroring sessions.</span></span> <span data-ttu-id="6447b-278">其中一個工作階段用於名為 **Db_1**的資料庫，另一個工作階段則用於名為 **Db_2**的資料庫。</span><span class="sxs-lookup"><span data-stu-id="6447b-278">One session is for a database named **Db_1**, and the other session is for a database named **Db_2**.</span></span>  
  
 <span data-ttu-id="6447b-279">![兩個並行工作階段中的兩個伺服器執行個體](../media/dbm-concurrent-sessions.gif "兩個並行工作階段中的兩個伺服器執行個體")</span><span class="sxs-lookup"><span data-stu-id="6447b-279">![Two server instances in two concurrent sessions](../media/dbm-concurrent-sessions.gif "Two server instances in two concurrent sessions")</span></span>  
  
 <span data-ttu-id="6447b-280">資料庫彼此之間無關。</span><span class="sxs-lookup"><span data-stu-id="6447b-280">Each of the databases is independent of the others.</span></span> <span data-ttu-id="6447b-281">例如，一個伺服器執行個體最初可能同時是兩個資料庫的鏡像伺服器。</span><span class="sxs-lookup"><span data-stu-id="6447b-281">For example, a server instance might initially be the mirror server for two databases.</span></span> <span data-ttu-id="6447b-282">如果其中一個資料庫發生容錯移轉，該伺服器執行個體會變成容錯移轉資料庫的主體伺服器，但同時維持另一個資料庫的鏡像伺服器身分。</span><span class="sxs-lookup"><span data-stu-id="6447b-282">If one of those databases fails over, the server instance becomes the principal server for the failed-over database while remaining the mirror server for the other database.</span></span>  
  
 <span data-ttu-id="6447b-283">另舉一例，假設有一個伺服器執行個體做為兩個以上資料庫的主體伺服器，並在具有自動容錯移轉的高安全性模式下執行；如果這個伺服器執行個體故障了，則所有資料庫都會自動容錯移轉到其各自的鏡像資料庫。</span><span class="sxs-lookup"><span data-stu-id="6447b-283">As another example, consider a server instance that is the principal server for two or more databases running in high-safety mode with automatic failover, If the server instance fails, all of the databases automatically failover to their respective mirror databases.</span></span>  
  
 <span data-ttu-id="6447b-284">將伺服器執行個體設定為同時以夥伴與見證來運作時，請確定資料庫鏡像端點支援這兩個角色 (如需詳細資訊，請參閱 [資料庫鏡像端點 &#40;SQL Server&#41;](the-database-mirroring-endpoint-sql-server.md)) 中的四個工作階段。</span><span class="sxs-lookup"><span data-stu-id="6447b-284">When setting up a server instance to operate both as a partner and a witness, be sure that the database mirroring endpoint supports both roles (for more information, see [The Database Mirroring Endpoint &#40;SQL Server&#41;](the-database-mirroring-endpoint-sql-server.md)).</span></span> <span data-ttu-id="6447b-285">另外，也請確定系統具有足夠資源，以減少資源競爭問題。</span><span class="sxs-lookup"><span data-stu-id="6447b-285">Also, ensure that the system has sufficient resources to reduce resource contention.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="6447b-286">由於鏡像資料庫彼此獨立，因此資料庫不能當做群組來容錯移轉。</span><span class="sxs-lookup"><span data-stu-id="6447b-286">Because mirrored databases are independent of each other, databases cannot fail over as a group.</span></span>  
  
###  <a name="client-connections"></a><a name="ClientConnections"></a> <span data-ttu-id="6447b-287">用戶端連接</span><span class="sxs-lookup"><span data-stu-id="6447b-287">Client Connections</span></span>  
 <span data-ttu-id="6447b-288">資料庫鏡像工作階段的用戶端連接支援是由 [!INCLUDE[msCoName](../../includes/msconame-md.md)] .NET Data Provider for [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]提供。</span><span class="sxs-lookup"><span data-stu-id="6447b-288">Client-connection support for database mirroring sessions is provided by the [!INCLUDE[msCoName](../../includes/msconame-md.md)] .NET Data Provider for [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="6447b-289">如需詳細資訊，請參閱本主題稍後的 [將用戶端連接至資料庫鏡像工作階段 &#40;SQL Server&#41;](connect-clients-to-a-database-mirroring-session-sql-server.md)。</span><span class="sxs-lookup"><span data-stu-id="6447b-289">For more information, see [Connect Clients to a Database Mirroring Session &#40;SQL Server&#41;](connect-clients-to-a-database-mirroring-session-sql-server.md).</span></span>  
  
###  <a name="impact-of-pausing-a-session-on-the-principal-transaction-log"></a><a name="ImpactOfPausing"></a> <span data-ttu-id="6447b-290">暫停工作階段對主體交易記錄的影響</span><span class="sxs-lookup"><span data-stu-id="6447b-290">Impact of Pausing a Session on the Principal Transaction Log</span></span>  
 <span data-ttu-id="6447b-291">資料庫擁有者可以隨時暫停工作階段。</span><span class="sxs-lookup"><span data-stu-id="6447b-291">At any time, the database owner can pause a session.</span></span> <span data-ttu-id="6447b-292">暫停會保留工作階段狀態，同時移除鏡像。</span><span class="sxs-lookup"><span data-stu-id="6447b-292">Pausing preserves the session state while removing mirroring.</span></span> <span data-ttu-id="6447b-293">工作階段暫停時，主體伺服器不會將任何新的記錄傳送到鏡像伺服器。</span><span class="sxs-lookup"><span data-stu-id="6447b-293">When a session is paused, the principal server does not send any new log records to the mirror server.</span></span> <span data-ttu-id="6447b-294">這些記錄全都保持使用中狀態，並累積到主體資料庫的交易記錄中。</span><span class="sxs-lookup"><span data-stu-id="6447b-294">All of these records remain active and accumulate in the transaction log of the principal database.</span></span> <span data-ttu-id="6447b-295">只要資料庫鏡像工作階段保持暫停狀態，交易記錄便無法截斷。</span><span class="sxs-lookup"><span data-stu-id="6447b-295">As long as a database mirroring session remains paused, the transaction log cannot be truncated.</span></span> <span data-ttu-id="6447b-296">因此，如果資料庫鏡像工作階段暫停太久，就會填滿記錄。</span><span class="sxs-lookup"><span data-stu-id="6447b-296">Therefore, if the database mirroring session is paused for too long, the log can fill up.</span></span>  
  
 <span data-ttu-id="6447b-297">如需詳細資訊，請參閱本主題稍後的 [暫停與繼續資料庫鏡像 &#40;SQL Server&#41;](database-mirroring-sql-server.md)。</span><span class="sxs-lookup"><span data-stu-id="6447b-297">For more information, see [Pausing and Resuming Database Mirroring &#40;SQL Server&#41;](database-mirroring-sql-server.md).</span></span>  
  
##  <a name="setting-up-database-mirroring-session"></a><a name="SettingUpDbmSession"></a> <span data-ttu-id="6447b-298">設定資料庫鏡像工作階段</span><span class="sxs-lookup"><span data-stu-id="6447b-298">Setting Up Database Mirroring Session</span></span>  
 <span data-ttu-id="6447b-299">資料庫擁有者或系統管理員必須先建立鏡像資料庫、設定端點與登入，而在某些情況下，還必須建立並設定憑證，之後才可以開始鏡像工作階段。</span><span class="sxs-lookup"><span data-stu-id="6447b-299">Before a mirroring session can begin, the database owner or system administrator must create the mirror database, set up endpoints and logins, and, in some cases, create and set up certificates.</span></span> <span data-ttu-id="6447b-300">如需詳細資訊，請參閱本主題稍後的 [設定資料庫鏡像 &#40;SQL Server&#41;](setting-up-database-mirroring-sql-server.md)。</span><span class="sxs-lookup"><span data-stu-id="6447b-300">For more information, see [Setting Up Database Mirroring &#40;SQL Server&#41;](setting-up-database-mirroring-sql-server.md).</span></span>  
  
##  <a name="interoperability-and-coexistence-with-other-database-engine-features"></a><a name="InterOp"></a> <span data-ttu-id="6447b-301">與其他 Database Engine 功能的互通性和共存性</span><span class="sxs-lookup"><span data-stu-id="6447b-301">Interoperability and Coexistence with Other Database Engine Features</span></span>  
 <span data-ttu-id="6447b-302">資料庫鏡像可與 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]的下列功能或元件搭配使用。</span><span class="sxs-lookup"><span data-stu-id="6447b-302">Database mirroring can be used with the following features or components of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
-   [<span data-ttu-id="6447b-303">記錄傳送</span><span class="sxs-lookup"><span data-stu-id="6447b-303">Log shipping</span></span>](database-mirroring-and-log-shipping-sql-server.md)  
  
-   [<span data-ttu-id="6447b-304">全文檢索目錄</span><span class="sxs-lookup"><span data-stu-id="6447b-304">Full-text catalogs</span></span>](database-mirroring-and-full-text-catalogs-sql-server.md)  
  
-   [<span data-ttu-id="6447b-305">資料庫快照集</span><span class="sxs-lookup"><span data-stu-id="6447b-305">Database snapshots</span></span>](../../relational-databases/databases/database-snapshots-sql-server.md)  
  
-   [<span data-ttu-id="6447b-306">複寫</span><span class="sxs-lookup"><span data-stu-id="6447b-306">Replication</span></span>](database-mirroring-and-replication-sql-server.md)  
  
##  <a name="in-this-section"></a><a name="InThisSection"></a> <span data-ttu-id="6447b-307">本節內容</span><span class="sxs-lookup"><span data-stu-id="6447b-307">In This Section</span></span>  
 [<span data-ttu-id="6447b-308">資料庫鏡像的必要條件、限制和建議事項</span><span class="sxs-lookup"><span data-stu-id="6447b-308">Prerequisites, Restrictions, and Recommendations for Database Mirroring</span></span>](prerequisites-restrictions-and-recommendations-for-database-mirroring.md)  
 <span data-ttu-id="6447b-309">描述設定資料庫鏡像的必要條件和建議事項。</span><span class="sxs-lookup"><span data-stu-id="6447b-309">Describes the prerequisites and recommendations for setting up database mirroring.</span></span>  
  
 [<span data-ttu-id="6447b-310">Database Mirroring Operating Modes</span><span class="sxs-lookup"><span data-stu-id="6447b-310">Database Mirroring Operating Modes</span></span>](database-mirroring-operating-modes.md)  
 <span data-ttu-id="6447b-311">包含有關資料庫鏡像工作階段的同步與非同步作業模式，以及在資料庫鏡像工作階段期間切換夥伴角色的資訊。</span><span class="sxs-lookup"><span data-stu-id="6447b-311">Contains information about the synchronous and asynchronous operating modes for database mirroring sessions, and about switching partner roles during a database mirroring session.</span></span>  
  
 [<span data-ttu-id="6447b-312">資料庫鏡像見證</span><span class="sxs-lookup"><span data-stu-id="6447b-312">Database Mirroring Witness</span></span>](database-mirroring-witness.md)  
 <span data-ttu-id="6447b-313">說明資料庫鏡像中見證的角色、如何在多個鏡像工作階段中使用單一見證、見證的軟體和硬體建議以及自動容錯移轉中見證的角色。</span><span class="sxs-lookup"><span data-stu-id="6447b-313">Describes the role of a witness in database mirroring, how to use a single witness in multiple mirroring sessions, software and hardware recommendations for witnesses, and the role of the witness in automatic failover.</span></span> <span data-ttu-id="6447b-314">也包括有關加入或移除見證的資訊。</span><span class="sxs-lookup"><span data-stu-id="6447b-314">It also contains information about adding or removing a witness.</span></span>  
  
 [<span data-ttu-id="6447b-315">資料庫鏡像工作階段期間的角色切換 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="6447b-315">Role Switching During a Database Mirroring Session &#40;SQL Server&#41;</span></span>](role-switching-during-a-database-mirroring-session-sql-server.md)  
 <span data-ttu-id="6447b-316">包含有關在資料庫鏡像工作階段期間切換夥伴角色，包括自動容錯移轉、手動容錯移轉，以及強制服務 (資料可能會遺失) 的資訊。</span><span class="sxs-lookup"><span data-stu-id="6447b-316">Contains information about switching partner roles during a database mirroring session, including automatic failover, manual failover, and forced service (with possible data loss).</span></span> <span data-ttu-id="6447b-317">同時包含有關評估角色切換期間服務中斷的資訊。</span><span class="sxs-lookup"><span data-stu-id="6447b-317">Also, contains information about estimating the interruption of service during role switching.</span></span>  
  
 [<span data-ttu-id="6447b-318">資料庫鏡像期間可能發生的失敗</span><span class="sxs-lookup"><span data-stu-id="6447b-318">Possible Failures During Database Mirroring</span></span>](possible-failures-during-database-mirroring.md)  
 <span data-ttu-id="6447b-319">討論可能導致資料庫鏡像工作階段中發生失敗的實體、作業系統和 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 問題，包括重大錯誤和軟性錯誤。</span><span class="sxs-lookup"><span data-stu-id="6447b-319">Discusses physical, operating system, and [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] problems, including hard errors and soft errors, that can cause a failure in a database mirroring session.</span></span> <span data-ttu-id="6447b-320">討論鏡像逾時機制如何回應軟性錯誤。</span><span class="sxs-lookup"><span data-stu-id="6447b-320">Discusses how the mirroring time-out mechanism responds to soft errors.</span></span>  
  
 [<span data-ttu-id="6447b-321">資料庫鏡像端點 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="6447b-321">The Database Mirroring Endpoint &#40;SQL Server&#41;</span></span>](the-database-mirroring-endpoint-sql-server.md)  
 <span data-ttu-id="6447b-322">討論資料庫鏡像端點的運作方式。</span><span class="sxs-lookup"><span data-stu-id="6447b-322">Discusses how the database mirroring endpoint functions.</span></span>  
  
 [<span data-ttu-id="6447b-323">設定資料庫鏡像 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="6447b-323">Setting Up Database Mirroring &#40;SQL Server&#41;</span></span>](setting-up-database-mirroring-sql-server.md)  
 <span data-ttu-id="6447b-324">包含有關設定資料庫鏡像之必要條件、建議事項及步驟的主題。</span><span class="sxs-lookup"><span data-stu-id="6447b-324">Contains topics about the prerequisites, recommendations, and steps for setting up database mirroring.</span></span>  
  
 [<span data-ttu-id="6447b-325">將用戶端連接至資料庫鏡像工作階段 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="6447b-325">Connect Clients to a Database Mirroring Session &#40;SQL Server&#41;</span></span>](connect-clients-to-a-database-mirroring-session-sql-server.md)  
 <span data-ttu-id="6447b-326">包含涵蓋用戶端連接字串屬性以及將用戶端連接和重新連接至鏡像資料庫之演算法的主題。</span><span class="sxs-lookup"><span data-stu-id="6447b-326">Contains topics covering client connection-string attributes and the algorithms for connecting and reconnecting a client to a mirrored database.</span></span>  
  
 [<span data-ttu-id="6447b-327">暫停與繼續資料庫鏡像 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="6447b-327">Pausing and Resuming Database Mirroring &#40;SQL Server&#41;</span></span>](database-mirroring-sql-server.md)  
 <span data-ttu-id="6447b-328">討論當資料庫鏡像暫停時會發生什麼事 (包括對交易記錄截斷的影響) 並包含有關如何暫停和繼續資料庫鏡像的說明。</span><span class="sxs-lookup"><span data-stu-id="6447b-328">Discusses what happens while database mirroring is paused, including the impact on transaction log truncation, and contains descriptions about how to pause and resume database mirroring.</span></span>  
  
 [<span data-ttu-id="6447b-329">移除資料庫鏡像 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="6447b-329">Removing Database Mirroring &#40;SQL Server&#41;</span></span>](removing-database-mirroring-sql-server.md)  
 <span data-ttu-id="6447b-330">討論移除鏡像的影響，並包含有關如何結束工作階段的說明。</span><span class="sxs-lookup"><span data-stu-id="6447b-330">Discusses the impact of removing mirroring and contains descriptions about how to end a session</span></span>  
  
 [<span data-ttu-id="6447b-331">監視資料庫鏡像 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="6447b-331">Monitoring Database Mirroring &#40;SQL Server&#41;</span></span>](monitoring-database-mirroring-sql-server.md)  
 <span data-ttu-id="6447b-332">包含有關如何使用「資料庫鏡像監視器」或 **dbmmonitor** 預存程序來監視資料庫鏡像或工作階段的資訊。</span><span class="sxs-lookup"><span data-stu-id="6447b-332">Contains information about using Database Mirroring Monitor or the **dbmmonitor** stored procedures to monitor database mirroring or sessions.</span></span>  
  
##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="6447b-333">相關工作</span><span class="sxs-lookup"><span data-stu-id="6447b-333">Related Tasks</span></span>  
  
### <a name="configuration-tasks"></a><span data-ttu-id="6447b-334">組態工作</span><span class="sxs-lookup"><span data-stu-id="6447b-334">Configuration Tasks</span></span>  
 <span data-ttu-id="6447b-335">**使用 SQL Server Management Studio**</span><span class="sxs-lookup"><span data-stu-id="6447b-335">**Using SQL Server Management Studio**</span></span>  
  
-   [<span data-ttu-id="6447b-336">啟動設定資料庫鏡像安全性精靈 &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="6447b-336">Start the Configuring Database Mirroring Security Wizard &#40;SQL Server Management Studio&#41;</span></span>](start-the-configuring-database-mirroring-security-wizard.md)  
  
-   [<span data-ttu-id="6447b-337">使用 Windows 驗證建立資料庫鏡像工作階段 &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="6447b-337">Establish a Database Mirroring Session Using Windows Authentication &#40;SQL Server Management Studio&#41;</span></span>](establish-database-mirroring-session-windows-authentication.md)  
  
 <span data-ttu-id="6447b-338">**使用 Transact-SQL**</span><span class="sxs-lookup"><span data-stu-id="6447b-338">**Using Transact-SQL**</span></span>  
  
-   [<span data-ttu-id="6447b-339">使用 Windows 驗證允許資料庫鏡像的網路存取 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="6447b-339">Allow Network Access to a Database Mirroring Endpoint Using Windows Authentication &#40;SQL Server&#41;</span></span>](../database-mirroring-allow-network-access-windows-authentication.md)  
  
-   [<span data-ttu-id="6447b-340">允許資料庫鏡像端點使用輸出連線的憑證 &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="6447b-340">Allow a Database Mirroring Endpoint to Use Certificates for Outbound Connections &#40;Transact-SQL&#41;</span></span>](database-mirroring-use-certificates-for-outbound-connections.md)  
  
-   [<span data-ttu-id="6447b-341">允許資料庫鏡像端點使用輸入連線的憑證 &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="6447b-341">Allow a Database Mirroring Endpoint to Use Certificates for Inbound Connections &#40;Transact-SQL&#41;</span></span>](database-mirroring-use-certificates-for-inbound-connections.md)  
  
-   [<span data-ttu-id="6447b-342">建立 Windows 驗證的資料庫鏡像端點 &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="6447b-342">Create a Database Mirroring Endpoint for Windows Authentication &#40;Transact-SQL&#41;</span></span>](create-a-database-mirroring-endpoint-for-windows-authentication-transact-sql.md)  
  
-   [<span data-ttu-id="6447b-343">使用 Windows 驗證建立資料庫鏡像工作階段 &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="6447b-343">Establish a Database Mirroring Session Using Windows Authentication &#40;Transact-SQL&#41;</span></span>](database-mirroring-establish-session-windows-authentication.md)  
  
-   [<span data-ttu-id="6447b-344">使用 Windows 驗證新增資料庫鏡像見證 &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="6447b-344">Add a Database Mirroring Witness Using Windows Authentication &#40;Transact-SQL&#41;</span></span>](add-a-database-mirroring-witness-using-windows-authentication-transact-sql.md)  
  
-   [<span data-ttu-id="6447b-345">設定鏡像資料庫以使用 Trustworthy 屬性 &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="6447b-345">Set Up a Mirror Database to Use the Trustworthy Property &#40;Transact-SQL&#41;</span></span>](set-up-a-mirror-database-to-use-the-trustworthy-property-transact-sql.md)  
  
 <span data-ttu-id="6447b-346">**使用 Transact-SQL 或 SQL Server Management Studio**</span><span class="sxs-lookup"><span data-stu-id="6447b-346">**Using Transact-SQL or SQL Server Management Studio**</span></span>  
  
-   [<span data-ttu-id="6447b-347">在升級伺服器執行個體時將鏡像資料庫的停機時間減至最少</span><span class="sxs-lookup"><span data-stu-id="6447b-347">Minimize Downtime for Mirrored Databases When Upgrading Server Instances</span></span>](upgrading-mirrored-instances.md)  
  
-   [<span data-ttu-id="6447b-348">準備鏡像資料庫以進行鏡像 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="6447b-348">Prepare a Mirror Database for Mirroring &#40;SQL Server&#41;</span></span>](prepare-a-mirror-database-for-mirroring-sql-server.md)  
  
### <a name="administrative-tasks"></a><span data-ttu-id="6447b-349">系統管理工作</span><span class="sxs-lookup"><span data-stu-id="6447b-349">Administrative Tasks</span></span>  
 <span data-ttu-id="6447b-350">**Transact-SQL**</span><span class="sxs-lookup"><span data-stu-id="6447b-350">**Transact-SQL**</span></span>  
  
-   [<span data-ttu-id="6447b-351">在資料庫鏡像工作階段中變更交易安全性 &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="6447b-351">Change Transaction Safety in a Database Mirroring Session &#40;Transact-SQL&#41;</span></span>](change-transaction-safety-in-a-database-mirroring-session-transact-sql.md)  
  
-   [<span data-ttu-id="6447b-352">手動容錯移轉資料庫鏡像工作階段 &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="6447b-352">Manually Fail Over a Database Mirroring Session &#40;Transact-SQL&#41;</span></span>](manually-fail-over-a-database-mirroring-session-transact-sql.md)  
  
-   [<span data-ttu-id="6447b-353">在資料庫鏡像工作階段中強制服務 &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="6447b-353">Force Service in a Database Mirroring Session &#40;Transact-SQL&#41;</span></span>](force-service-in-a-database-mirroring-session-transact-sql.md)  
  
-   [<span data-ttu-id="6447b-354">暫停或繼續資料庫鏡像工作階段 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="6447b-354">Pause or Resume a Database Mirroring Session &#40;SQL Server&#41;</span></span>](pause-or-resume-a-database-mirroring-session-sql-server.md)  
  
-   [<span data-ttu-id="6447b-355">從資料庫鏡像工作階段移除見證 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="6447b-355">Remove the Witness from a Database Mirroring Session &#40;SQL Server&#41;</span></span>](remove-the-witness-from-a-database-mirroring-session-sql-server.md)  
  
-   [<span data-ttu-id="6447b-356">移除資料庫鏡像 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="6447b-356">Remove Database Mirroring &#40;SQL Server&#41;</span></span>](remove-database-mirroring-sql-server.md)  
  
 <span data-ttu-id="6447b-357">**SQL Server Management Studio**</span><span class="sxs-lookup"><span data-stu-id="6447b-357">**SQL Server Management Studio**</span></span>  
  
-   [<span data-ttu-id="6447b-358">新增或取代資料庫鏡像見證 &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="6447b-358">Add or Replace a Database Mirroring Witness &#40;SQL Server Management Studio&#41;</span></span>](../database-mirroring/add-or-replace-a-database-mirroring-witness-sql-server-management-studio.md)  
  
-   [<span data-ttu-id="6447b-359">手動容錯移轉資料庫鏡像工作階段 &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="6447b-359">Manually Fail Over a Database Mirroring Session &#40;SQL Server Management Studio&#41;</span></span>](manually-fail-over-a-database-mirroring-session-sql-server-management-studio.md)  
  
-   [<span data-ttu-id="6447b-360">暫停或繼續資料庫鏡像工作階段 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="6447b-360">Pause or Resume a Database Mirroring Session &#40;SQL Server&#41;</span></span>](pause-or-resume-a-database-mirroring-session-sql-server.md)  
  
-   [<span data-ttu-id="6447b-361">從資料庫鏡像工作階段移除見證 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="6447b-361">Remove the Witness from a Database Mirroring Session &#40;SQL Server&#41;</span></span>](remove-the-witness-from-a-database-mirroring-session-sql-server.md)  
  
-   [<span data-ttu-id="6447b-362">移除資料庫鏡像 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="6447b-362">Remove Database Mirroring &#40;SQL Server&#41;</span></span>](remove-database-mirroring-sql-server.md)  
  
## <a name="see-also"></a><span data-ttu-id="6447b-363">另請參閱</span><span class="sxs-lookup"><span data-stu-id="6447b-363">See Also</span></span>  
 <span data-ttu-id="6447b-364">[資料庫鏡像端點 &#40;SQL Server&#41;](the-database-mirroring-endpoint-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="6447b-364">[The Database Mirroring Endpoint &#40;SQL Server&#41;](the-database-mirroring-endpoint-sql-server.md) </span></span>  
 <span data-ttu-id="6447b-365">[可用性群組和資料庫鏡像的自動修復頁面 &#40;&#41;](../../sql-server/failover-clusters/automatic-page-repair-availability-groups-database-mirroring.md) </span><span class="sxs-lookup"><span data-stu-id="6447b-365">[Automatic Page Repair &#40;For Availability Groups and Database Mirroring&#41;](../../sql-server/failover-clusters/automatic-page-repair-availability-groups-database-mirroring.md) </span></span>  
 <span data-ttu-id="6447b-366">[為資料庫鏡像組態進行疑難排解 &#40;SQL Server&#41; &#40;SQL Server&#41;](troubleshoot-database-mirroring-configuration-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="6447b-366">[Troubleshoot Database Mirroring Configuration &#40;SQL Server&#41;](troubleshoot-database-mirroring-configuration-sql-server.md) </span></span>  
 <span data-ttu-id="6447b-367">[資料庫鏡像：互通性與共存性 &#40;SQL Server&#41;](database-mirroring-interoperability-and-coexistence-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="6447b-367">[Database Mirroring: Interoperability and Coexistence &#40;SQL Server&#41;](database-mirroring-interoperability-and-coexistence-sql-server.md) </span></span>  
 <span data-ttu-id="6447b-368">[資料庫鏡像的必要條件、限制和建議事項](prerequisites-restrictions-and-recommendations-for-database-mirroring.md) </span><span class="sxs-lookup"><span data-stu-id="6447b-368">[Prerequisites, Restrictions, and Recommendations for Database Mirroring](prerequisites-restrictions-and-recommendations-for-database-mirroring.md) </span></span>  
 <span data-ttu-id="6447b-369">[AlwaysOn 可用性群組 &#40;SQL Server 的總覽&#41;](../availability-groups/windows/overview-of-always-on-availability-groups-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="6447b-369">[Overview of AlwaysOn Availability Groups &#40;SQL Server&#41;](../availability-groups/windows/overview-of-always-on-availability-groups-sql-server.md) </span></span>  
 [<span data-ttu-id="6447b-370">關於記錄傳送 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="6447b-370">About Log Shipping &#40;SQL Server&#41;</span></span>](../log-shipping/about-log-shipping-sql-server.md)  
  
  
