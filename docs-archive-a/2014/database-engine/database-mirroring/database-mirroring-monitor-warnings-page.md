---
title: 資料庫鏡像監視器 (警告頁面) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
f1_keywords:
- sql12.swb.dbmmonitor.warningsandalerts.f1
ms.assetid: 01936122-961d-436b-ba3c-5f79fefe5469
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: e7afc4ff0e6b69c70535ef39677f3d834edbee15
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87709938"
---
# <a name="database-mirroring-monitor-warnings-page"></a><span data-ttu-id="227a1-102">資料庫鏡像監視器 (警告頁面)</span><span class="sxs-lookup"><span data-stu-id="227a1-102">Database Mirroring Monitor (Warnings Page)</span></span>
  <span data-ttu-id="227a1-103">會顯示一份唯讀清單，列出資料庫鏡像事件所支援的警告和指定的警告臨界值 (如果有的話)。</span><span class="sxs-lookup"><span data-stu-id="227a1-103">Displays a read-only list of warnings supported on database mirroring events and the specified warning threshold values, if available.</span></span>  
  
 <span data-ttu-id="227a1-104">**若要使用 SQL Server Management Studio 監視資料庫鏡像**</span><span class="sxs-lookup"><span data-stu-id="227a1-104">**To use SQL Server Management Studio to monitor database mirroring**</span></span>  
  
-   [<span data-ttu-id="227a1-105">啟動資料庫鏡像監視器 &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="227a1-105">Start Database Mirroring Monitor &#40;SQL Server Management Studio&#41;</span></span>](../database-mirroring/start-database-mirroring-monitor-sql-server-management-studio.md)  
  
## <a name="columns"></a><span data-ttu-id="227a1-106">資料行</span><span class="sxs-lookup"><span data-stu-id="227a1-106">Columns</span></span>  
 <span data-ttu-id="227a1-107">**警告**</span><span class="sxs-lookup"><span data-stu-id="227a1-107">**Warning**</span></span>  
 <span data-ttu-id="227a1-108">可定義臨界值的警告包括：</span><span class="sxs-lookup"><span data-stu-id="227a1-108">The warnings for which you can define a threshold include:</span></span>  
  
|<span data-ttu-id="227a1-109">警告</span><span class="sxs-lookup"><span data-stu-id="227a1-109">Warning</span></span>|<span data-ttu-id="227a1-110">閾值</span><span class="sxs-lookup"><span data-stu-id="227a1-110">Threshold</span></span>|  
|-------------|---------------|  
|<span data-ttu-id="227a1-111">**如果未傳送的記錄超過臨界值，即發出警告**</span><span class="sxs-lookup"><span data-stu-id="227a1-111">**Warn if the unsent log exceeds the threshold**</span></span>|<span data-ttu-id="227a1-112">指定會在主體伺服器執行個體上產生警告之未傳送記錄的 KB 數。</span><span class="sxs-lookup"><span data-stu-id="227a1-112">Specifies how many kilobytes (KB) of unsent log will generate a warning on the principal server instance.</span></span> <span data-ttu-id="227a1-113">這個警告有助於依據 KB 數來測量資料遺失的可能性，與高效能模式特別有關係。</span><span class="sxs-lookup"><span data-stu-id="227a1-113">This warning helps measure the potential for data loss in terms of KB, and is particularly relevant for high-performance mode.</span></span> <span data-ttu-id="227a1-114">但是，當鏡像因為夥伴中斷連接而暫停或暫止時，這個警告也會與高安全性模式有關。</span><span class="sxs-lookup"><span data-stu-id="227a1-114">However, the warning is also relevant for high-safety mode when mirroring is paused or suspended because the partners become disconnected.</span></span>|  
|<span data-ttu-id="227a1-115">**如果未還原的記錄超過臨界值，即發出警告**</span><span class="sxs-lookup"><span data-stu-id="227a1-115">**Warn if the unrestored log exceeds the threshold**</span></span>|<span data-ttu-id="227a1-116">指定會在鏡像伺服器執行個體上產生警告之未還原記錄的 KB 數。</span><span class="sxs-lookup"><span data-stu-id="227a1-116">Specifies how many KB of unrestored log will generate a warning on the mirror server instance.</span></span> <span data-ttu-id="227a1-117">這個警告對於依據 KB 數來測量容錯移轉時間很有用。</span><span class="sxs-lookup"><span data-stu-id="227a1-117">This warning is useful for measuring failover time in terms of kilobytes.</span></span> <span data-ttu-id="227a1-118">*容錯移轉時間* 主要包含先前的鏡像伺服器向前復原其重做佇列中剩餘之所有記錄所需的時間，再加上一段很短的額外時間。</span><span class="sxs-lookup"><span data-stu-id="227a1-118">*Failover time* consists mainly of the time that the former mirror server requires to roll forward any log remaining in its redo queue, plus a short additional time.</span></span><br /><br /> <span data-ttu-id="227a1-119">注意:如果是自動容錯移轉，則系統發現錯誤的時間與容錯移轉時間無關。</span><span class="sxs-lookup"><span data-stu-id="227a1-119">Note: For an automatic failover, the time for the system to notice the error is independent of the failover time.</span></span><br /><br /> <span data-ttu-id="227a1-120">如需詳細資訊，請參閱 [預估角色切換期間的服務中斷時間 &#40;資料庫鏡像&#41;](estimate-the-interruption-of-service-during-role-switching-database-mirroring.md)的程序交換。</span><span class="sxs-lookup"><span data-stu-id="227a1-120">For more information, see [Estimate the Interruption of Service During Role Switching &#40;Database Mirroring&#41;](estimate-the-interruption-of-service-during-role-switching-database-mirroring.md).</span></span>|  
|<span data-ttu-id="227a1-121">**如果最舊未傳送交易的時間超過臨界值，即發出警告**</span><span class="sxs-lookup"><span data-stu-id="227a1-121">**Warn if the age of the oldest unsent transaction exceeds the threshold**</span></span>|<span data-ttu-id="227a1-122">指定在主體伺服器執行個體上產生警告之前，傳送佇列中可以累積的交易分鐘數。</span><span class="sxs-lookup"><span data-stu-id="227a1-122">Specifies the number of minutes worth of transactions that can accumulate in the send queue before a warning is generated on the principal server instance.</span></span> <span data-ttu-id="227a1-123">這個警告有助於從時間方面來測量資料遺失的可能性，與高效能模式特別有關係。</span><span class="sxs-lookup"><span data-stu-id="227a1-123">This warning helps measure the potential for data loss in terms of time, and is particularly relevant for high-performance mode.</span></span> <span data-ttu-id="227a1-124">但是，當鏡像因為夥伴中斷連接而暫停或暫止時，這個警告也會與高安全性模式有關。</span><span class="sxs-lookup"><span data-stu-id="227a1-124">However, the warning is also relevant for high-safety mode when mirroring is paused or suspended because the partners become disconnected.</span></span>|  
|<span data-ttu-id="227a1-125">**如果鏡像認可負擔超過臨界值，即發出警告**</span><span class="sxs-lookup"><span data-stu-id="227a1-125">**Warn if the mirror commit overhead exceeds the threshold**</span></span>|<span data-ttu-id="227a1-126">指定在主體伺服器上產生警告之前，所容許之每項交易的平均延遲毫秒數。</span><span class="sxs-lookup"><span data-stu-id="227a1-126">Specifies the number of milliseconds of average delay per transaction tolerated before a warning is generated on the principal server.</span></span> <span data-ttu-id="227a1-127">這項延遲是當主體伺服器執行個體等待鏡像伺服器執行個體將交易記錄寫入重做佇列中時所產生的負擔量。</span><span class="sxs-lookup"><span data-stu-id="227a1-127">This delay is the amount of overhead incurred while the principal server instance waits for the mirror server instance to write the transaction's log record into the redo queue.</span></span> <span data-ttu-id="227a1-128">只有在高安全性模式中才會顯出這個值的重要性。</span><span class="sxs-lookup"><span data-stu-id="227a1-128">This value is relevant only in high-safety mode.</span></span>|  
  
 <span data-ttu-id="227a1-129">**'** <伺服器執行個體> **' 的閾值**</span><span class="sxs-lookup"><span data-stu-id="227a1-129">**Threshold at '** _<server_instance>_ **'**</span></span>  
 <span data-ttu-id="227a1-130">針對每一個警告，顯示其中一個伺服器執行個體目前使用者指定的臨界值 (如果有的話)。</span><span class="sxs-lookup"><span data-stu-id="227a1-130">For each of the warnings, displays the current user-specified threshold, if any, for one of the server instances.</span></span> <span data-ttu-id="227a1-131">在對應的資料行標題中，會指出伺服器執行個體的完整執行個體名稱。</span><span class="sxs-lookup"><span data-stu-id="227a1-131">The full instance name of the server instance is indicated in the corresponding column heading.</span></span>  
  
 <span data-ttu-id="227a1-132">如需詳細資訊，請參閱此主題稍後的「備註」。</span><span class="sxs-lookup"><span data-stu-id="227a1-132">For more information, see "Remarks," later in this topic.</span></span>  
  
 <span data-ttu-id="227a1-133">**設定臨界值**</span><span class="sxs-lookup"><span data-stu-id="227a1-133">**Set Thresholds**</span></span>  
 <span data-ttu-id="227a1-134">按一下這個按鈕，即可在每個容錯移轉夥伴上設定其中一個警告的臨界值。</span><span class="sxs-lookup"><span data-stu-id="227a1-134">Click this button to set a threshold for one warning on each of the failover partners.</span></span>  
  
 <span data-ttu-id="227a1-135">如需詳細資訊，請參閱此主題稍後的「備註」。</span><span class="sxs-lookup"><span data-stu-id="227a1-135">For more information, see "Remarks," later in this topic.</span></span>  
  
## <a name="remarks"></a><span data-ttu-id="227a1-136">備註</span><span class="sxs-lookup"><span data-stu-id="227a1-136">Remarks</span></span>  
 <span data-ttu-id="227a1-137">如果伺服器執行個體目前無法使用資訊，則對應之 **[於...的臨界值]** 資料行的資料格便會顯示灰色背景和浮水印文字。</span><span class="sxs-lookup"><span data-stu-id="227a1-137">If information is currently unavailable for a server instance, the cells of the corresponding **Threshold at** column display a gray background and watermark text.</span></span> <span data-ttu-id="227a1-138">如果監視器未連線到伺服器執行個體，則每個資料格中的方格會依據該執行個體是預設執行個體還是具名執行個體而顯示 [未連線到 <系統名稱>] 或 [未連線到<系統名稱>\\<執行個體名稱>]。</span><span class="sxs-lookup"><span data-stu-id="227a1-138">If the monitor is not connected to the server instance, in every cell the grid displays either **Not connected to** _<SYSTEM_NAME>_ or **Not connected to** _<SYSTEM_NAME>_**\\**_<instance_name>_, depending on whether the instance is the default instance or a named instance.</span></span> <span data-ttu-id="227a1-139">如果監視器正在等候查詢傳回資料，則每個資料格中的方格會顯示 [正在等候資料...]。</span><span class="sxs-lookup"><span data-stu-id="227a1-139">If the monitor is waiting for a query to return, the grid displays **Waiting for data...** in every cell.</span></span>  
  
 <span data-ttu-id="227a1-140">當資訊可以使用時，每個警告的資料格會顯示指定的臨界值 (和度量單位) 或 [未啟用]。</span><span class="sxs-lookup"><span data-stu-id="227a1-140">When information is available, the cell for each warning displays either a specified threshold value (and unit of measurement), or **Not enabled**.</span></span>  
  
 <span data-ttu-id="227a1-141">如果在重新整理狀態資料表時超過臨界值，在記錄狀態資料列時，就會在 Windows 事件記錄檔中記錄一個事件。</span><span class="sxs-lookup"><span data-stu-id="227a1-141">If a threshold is exceeded at the time the status table is refreshed, an event is logged to the Windows event log when the status row is recorded.</span></span> <span data-ttu-id="227a1-142">依預設，如果監視器不在執行中，則會每分鐘記錄一次狀態資料列。</span><span class="sxs-lookup"><span data-stu-id="227a1-142">By default, the status row is recorded once a minute if the monitor is not running.</span></span> <span data-ttu-id="227a1-143">您可以使用 SQL Server Agent 或如 Microsoft Management Operations Manager (MOM) 之類的其他程式，針對每種類型的記錄事件設定警示。</span><span class="sxs-lookup"><span data-stu-id="227a1-143">You can configure an alert on each type of logged event by using the SQL Server Agent or another program, such as Microsoft Management Operations Manager (MOM).</span></span>  
  
 <span data-ttu-id="227a1-144">在特定的夥伴上，記錄的事件會依據其目前的角色是主體還是鏡像而定。</span><span class="sxs-lookup"><span data-stu-id="227a1-144">On a given partner, the events logged depend on its current role, principal or mirror.</span></span> <span data-ttu-id="227a1-145">但是，建議您針對兩個夥伴上的特定事件都設定警告臨界值，以確保如果資料庫發生容錯移轉時，警告都能持續顯示。</span><span class="sxs-lookup"><span data-stu-id="227a1-145">However, we recommend that you set a warning threshold for a given event on both partners to ensure that the warning persists if the database fails over.</span></span> <span data-ttu-id="227a1-146">適合於每個夥伴的臨界值需視該夥伴系統的效能功能而定。</span><span class="sxs-lookup"><span data-stu-id="227a1-146">The appropriate threshold for each partner depends on the performance capabilities of that partner's system.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="227a1-147">您也可以使用 **sp_dbmmonitorchangealert** 系統預存程序來設定對等事件的臨界值，例如未傳送的記錄、未復原的記錄、最舊尚未傳送的交易和鏡像認可負擔。</span><span class="sxs-lookup"><span data-stu-id="227a1-147">You can also use the **sp_dbmmonitorchangealert** system stored procedure to configure thresholds for the equivalent events-unsent log, unrecovered log, oldest unsent transaction, and mirror commit overhead.</span></span> <span data-ttu-id="227a1-148">如需詳細資訊，請參閱 [sp_dbmmonitorchangealert &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorchangealert-transact-sql)。</span><span class="sxs-lookup"><span data-stu-id="227a1-148">For more information, see [sp_dbmmonitorchangealert &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorchangealert-transact-sql).</span></span>  
  
 <span data-ttu-id="227a1-149">下表會顯示與各個警告相關的事件識別碼。</span><span class="sxs-lookup"><span data-stu-id="227a1-149">The following table shows the event ID associated with each warning.</span></span>  
  
|<span data-ttu-id="227a1-150">資料庫鏡像監視器警告</span><span class="sxs-lookup"><span data-stu-id="227a1-150">Database Mirroring Monitor warning</span></span>|<span data-ttu-id="227a1-151">事件名稱</span><span class="sxs-lookup"><span data-stu-id="227a1-151">Event name</span></span>|<span data-ttu-id="227a1-152">事件識別碼</span><span class="sxs-lookup"><span data-stu-id="227a1-152">Event ID</span></span>|  
|----------------------------------------|----------------|--------------|  
|<span data-ttu-id="227a1-153">**如果未傳送的記錄超過臨界值，即發出警告**</span><span class="sxs-lookup"><span data-stu-id="227a1-153">**Warn if the unsent log exceeds the threshold**</span></span>|<span data-ttu-id="227a1-154">未傳送的記錄</span><span class="sxs-lookup"><span data-stu-id="227a1-154">Unsent log</span></span>|<span data-ttu-id="227a1-155">32042</span><span class="sxs-lookup"><span data-stu-id="227a1-155">32042</span></span>|  
|<span data-ttu-id="227a1-156">**如果未還原的記錄超過臨界值，即發出警告**</span><span class="sxs-lookup"><span data-stu-id="227a1-156">**Warn if the unrestored log exceeds the threshold**</span></span>|<span data-ttu-id="227a1-157">未還原的記錄</span><span class="sxs-lookup"><span data-stu-id="227a1-157">Unrestored log</span></span>|<span data-ttu-id="227a1-158">32043</span><span class="sxs-lookup"><span data-stu-id="227a1-158">32043</span></span>|  
|<span data-ttu-id="227a1-159">**如果最舊未傳送交易的時間超過臨界值，即發出警告**</span><span class="sxs-lookup"><span data-stu-id="227a1-159">**Warn if the age of the oldest unsent transaction exceeds the threshold**</span></span>|<span data-ttu-id="227a1-160">最舊尚未傳送的交易</span><span class="sxs-lookup"><span data-stu-id="227a1-160">Oldest unsent transaction</span></span>|<span data-ttu-id="227a1-161">32044</span><span class="sxs-lookup"><span data-stu-id="227a1-161">32044</span></span>|  
|<span data-ttu-id="227a1-162">**如果鏡像認可負擔超過臨界值，即發出警告**</span><span class="sxs-lookup"><span data-stu-id="227a1-162">**Warn if the mirror commit overhead exceeds the threshold**</span></span>|<span data-ttu-id="227a1-163">鏡像認可負擔</span><span class="sxs-lookup"><span data-stu-id="227a1-163">Mirror commit overhead</span></span>|<span data-ttu-id="227a1-164">32045</span><span class="sxs-lookup"><span data-stu-id="227a1-164">32045</span></span>|  
  
## <a name="permissions"></a><span data-ttu-id="227a1-165">權限</span><span class="sxs-lookup"><span data-stu-id="227a1-165">Permissions</span></span>  
 <span data-ttu-id="227a1-166">如需完整存取權，需要 **sysadmin** 固定伺服器角色中的成員資格。</span><span class="sxs-lookup"><span data-stu-id="227a1-166">For full access, requires membership in the **sysadmin** fixed server role.</span></span> <span data-ttu-id="227a1-167">只有 **sysadmin** 的成員可以設定並檢視關鍵效能標準的警告臨界值。</span><span class="sxs-lookup"><span data-stu-id="227a1-167">Only members of **sysadmin** can configure and view warning thresholds for key performance metrics.</span></span>  
  
 <span data-ttu-id="227a1-168">**dbm_monitor** 角色中的成員資格可讓您僅檢視 [警告] 頁面上的最新狀態資料列。</span><span class="sxs-lookup"><span data-stu-id="227a1-168">Membership in the **dbm_monitor** role enables you to view only the most recent status row on the **Warnings** Page.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="227a1-169">另請參閱</span><span class="sxs-lookup"><span data-stu-id="227a1-169">See Also</span></span>  
 <span data-ttu-id="227a1-170">[啟動資料庫鏡像監視器 &#40;SQL Server Management Studio&#41;](../database-mirroring/start-database-mirroring-monitor-sql-server-management-studio.md) </span><span class="sxs-lookup"><span data-stu-id="227a1-170">[Start Database Mirroring Monitor &#40;SQL Server Management Studio&#41;](../database-mirroring/start-database-mirroring-monitor-sql-server-management-studio.md) </span></span>  
 <span data-ttu-id="227a1-171">[監視資料庫鏡像 &#40;SQL Server&#41;](database-mirroring-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="227a1-171">[Monitoring Database Mirroring &#40;SQL Server&#41;](database-mirroring-sql-server.md) </span></span>  
 [<span data-ttu-id="227a1-172">啟動設定資料庫鏡像安全性精靈 &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="227a1-172">Start the Configuring Database Mirroring Security Wizard &#40;SQL Server Management Studio&#41;</span></span>](start-the-configuring-database-mirroring-security-wizard.md)  
  
  
