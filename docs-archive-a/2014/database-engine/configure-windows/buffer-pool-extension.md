---
title: 緩衝集區延伸模組 | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: configuration
ms.topic: conceptual
ms.assetid: 909ab7d2-2b29-46f5-aea1-280a5f8fedb4
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 42a8873f4046a307e3b8ec1ce703a34bf8cb0df2
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87707873"
---
# <a name="buffer-pool-extension"></a><span data-ttu-id="8a118-102">緩衝集區擴充</span><span class="sxs-lookup"><span data-stu-id="8a118-102">Buffer Pool Extension</span></span>
  <span data-ttu-id="8a118-103">在 [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)]中導入緩衝集區擴充，可將非動態隨機存取記憶體 (也就是固態硬碟) 擴充完全整合到 [!INCLUDE[ssDE](../../includes/ssde-md.md)] 緩衝集區，如此能大幅提升 I/O 輸送量。</span><span class="sxs-lookup"><span data-stu-id="8a118-103">Introduced in [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)], the buffer pool extension provides the seamless integration of a nonvolatile random access memory (that is, solid-state drive) extension to the [!INCLUDE[ssDE](../../includes/ssde-md.md)] buffer pool to significantly improve I/O throughput.</span></span> <span data-ttu-id="8a118-104">並非每個 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 版本都有提供緩衝集區擴充。</span><span class="sxs-lookup"><span data-stu-id="8a118-104">The buffer pool extension is not available in every [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] edition.</span></span> <span data-ttu-id="8a118-105">如需詳細資訊，請參閱＜ [Features Supported by the Editions of SQL Server 2014](../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md)＞。</span><span class="sxs-lookup"><span data-stu-id="8a118-105">For more information, see [Features Supported by the Editions of SQL Server 2014](../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span></span>

## <a name="benefits-of-the-buffer-pool-extension"></a><span data-ttu-id="8a118-106">緩衝集區擴充的優點</span><span class="sxs-lookup"><span data-stu-id="8a118-106">Benefits of the Buffer Pool Extension</span></span>
 <span data-ttu-id="8a118-107">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 資料庫的主要用途是為了儲存和擷取資料，因此大量磁碟 I/O 是 Database Engine 的核心特性。</span><span class="sxs-lookup"><span data-stu-id="8a118-107">The primary purpose of a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database is to store and retrieve data, so intensive disk I/O is a core characteristic of the Database Engine.</span></span> <span data-ttu-id="8a118-108">因為磁碟 I/O 作業會秏用許多資源，而且相對上需要較長的時間才能完成，所以 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 非常著重提高 I/O 的效率。</span><span class="sxs-lookup"><span data-stu-id="8a118-108">Because disk I/O operations can consume many resources and take a relatively long time to finish, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] focuses on making I/O highly efficient.</span></span> <span data-ttu-id="8a118-109">緩衝集區可做為 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]的主要記憶體配置來源。</span><span class="sxs-lookup"><span data-stu-id="8a118-109">The buffer pool serves as a primary memory allocation source of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="8a118-110">緩衝區管理是達成這種效率的重要元件。</span><span class="sxs-lookup"><span data-stu-id="8a118-110">Buffer management is a key component in achieving this efficiency.</span></span> <span data-ttu-id="8a118-111">緩衝區管理元件包含兩種機制：可存取和更新資料庫頁面的緩衝區管理員，以及可減少資料庫檔案 I/O 的緩衝集區快取。</span><span class="sxs-lookup"><span data-stu-id="8a118-111">The buffer management component consists of two mechanisms: the buffer manager to access and update database pages, and the buffer pool), to reduce database file I/O.</span></span>

 <span data-ttu-id="8a118-112">資料與索引頁面都會從磁碟讀入緩衝集區，而修改的頁面 (也稱為中途分頁) 則會重新寫入磁碟。</span><span class="sxs-lookup"><span data-stu-id="8a118-112">Data and index pages are read from disk into the buffer pool and modified pages (also known as dirty pages) are written back to disk.</span></span> <span data-ttu-id="8a118-113">伺服器和資料庫檢查點的記憶體壓力會導致緩衝區快取中使用頻繁 (使用中) 的中途分頁從快取收回並寫入機械磁碟，然後再重新讀入快取中。</span><span class="sxs-lookup"><span data-stu-id="8a118-113">Memory pressure on the server and database checkpoints cause hot (active) dirty pages in the buffer cache to be evicted from the cache and written to mechanical disks and then read back into the cache.</span></span> <span data-ttu-id="8a118-114">這些 I/O 作業通常是很小的隨機讀取和寫入 (4 到 16 KB 的資料順序)。</span><span class="sxs-lookup"><span data-stu-id="8a118-114">These I/O operations are typically small random reads and writes on the order of 4 to 16 KB of data.</span></span> <span data-ttu-id="8a118-115">小型隨機 I/O 模式會產生頻繁的搜尋、競爭機械磁碟臂、增加 I/O 延遲，並降低系統的彙總 I/O 輸送量。</span><span class="sxs-lookup"><span data-stu-id="8a118-115">Small random I/O patterns incur frequent seeks, competing for the mechanical disk arm, increasing I/O latency, and reducing aggregate I/O throughput of the system.</span></span>

 <span data-ttu-id="8a118-116">解決這些 I/O 瓶頸的一般方法是加入更多 DRAM，或者加入高效能的 SAS 主軸。</span><span class="sxs-lookup"><span data-stu-id="8a118-116">The typical approach to resolving these I/O bottlenecks is to add more DRAM, or alternatively, added high-performance SAS spindles.</span></span> <span data-ttu-id="8a118-117">雖然這些選項很有用，但是有很大的缺點：DRAM 比資料存放磁碟更為昂貴，且增加主軸會增加硬體採購的資本支出，且也會因為增加用電量和元件故障機率而增加營運成本。</span><span class="sxs-lookup"><span data-stu-id="8a118-117">While these options are helpful, they have significant drawbacks: DRAM is more expensive than data storage drives and adding spindles increases capital expenditure in hardware acquisition and increases operational costs by increased power consumption and increased probability of component failure.</span></span>

 <span data-ttu-id="8a118-118">緩衝集區擴充功能可透過非動態儲存 (通常是 SSD) 延伸緩衝集區快取。</span><span class="sxs-lookup"><span data-stu-id="8a118-118">The buffer pool extension feature extends the buffer pool cache with nonvolatile storage (usually SSD).</span></span> <span data-ttu-id="8a118-119">因為有了這個延伸模組，緩衝集區可以容納更大的資料庫工作集，強制將 RAM 與 SSD 之間的 I/O 分頁。</span><span class="sxs-lookup"><span data-stu-id="8a118-119">Because of this extension, the buffer pool can accommodate a larger database working set, which forces the paging of I/Os between RAM and the SSDs.</span></span> <span data-ttu-id="8a118-120">這樣可有效地將機械磁碟中的小型隨機 I/O 卸載到 SSD。</span><span class="sxs-lookup"><span data-stu-id="8a118-120">This effectively offloads small random I/Os from mechanical disks to SSDs.</span></span> <span data-ttu-id="8a118-121">由於 SSD 的延遲較低而且隨機 I/O 效能更好，所以緩衝集區擴充會大幅提高 I/O 輸送量。</span><span class="sxs-lookup"><span data-stu-id="8a118-121">Because of the lower latency and better random I/O performance of SSDs, the buffer pool extension significantly improves I/O throughput.</span></span>

 <span data-ttu-id="8a118-122">下列清單描述緩衝集區擴充功能的優點。</span><span class="sxs-lookup"><span data-stu-id="8a118-122">The following list describes the benefits of the buffer pool extension feature.</span></span>

-   <span data-ttu-id="8a118-123">增加隨機 I/O 輸送量</span><span class="sxs-lookup"><span data-stu-id="8a118-123">Increased random I/O throughput</span></span>

-   <span data-ttu-id="8a118-124">減少 I/O 延遲</span><span class="sxs-lookup"><span data-stu-id="8a118-124">Reduced I/O latency</span></span>

-   <span data-ttu-id="8a118-125">增加交易輸送量</span><span class="sxs-lookup"><span data-stu-id="8a118-125">Increased transaction throughput</span></span>

-   <span data-ttu-id="8a118-126">透過更大的混合式緩衝集區來提升讀取效能</span><span class="sxs-lookup"><span data-stu-id="8a118-126">Improved read performance with a larger hybrid buffer pool</span></span>

-   <span data-ttu-id="8a118-127">可以充分利用現有和將來的低成本記憶體磁碟的快取架構</span><span class="sxs-lookup"><span data-stu-id="8a118-127">A caching architecture that can take advantage of present and future low-cost memory drives</span></span>

### <a name="concepts"></a><span data-ttu-id="8a118-128">概念</span><span class="sxs-lookup"><span data-stu-id="8a118-128">Concepts</span></span>
 <span data-ttu-id="8a118-129">下列詞彙適用於緩衝集區擴充功能。</span><span class="sxs-lookup"><span data-stu-id="8a118-129">The following terms are applicable to the buffer pool extension feature.</span></span>

 <span data-ttu-id="8a118-130">固態硬碟 (SSD) 固態硬碟會以持續的方式將資料儲存在記憶體 (RAM) 中。</span><span class="sxs-lookup"><span data-stu-id="8a118-130">Solid-state drive (SSD) Solid-state drives store data in memory (RAM) in a persistent manner.</span></span> <span data-ttu-id="8a118-131">如需詳細資訊，請參閱 [這個定義](http://en.wikipedia.org/wiki/Solid-state_drive)。</span><span class="sxs-lookup"><span data-stu-id="8a118-131">For more information, see [this definition](http://en.wikipedia.org/wiki/Solid-state_drive).</span></span>

 <span data-ttu-id="8a118-132">緩衝區在中 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ，緩衝區是 8 KB 的記憶體頁面，大小與資料或索引頁面相同。</span><span class="sxs-lookup"><span data-stu-id="8a118-132">Buffer In [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], A buffer is an 8-KB page in memory, the same size as a data or index page.</span></span> <span data-ttu-id="8a118-133">因此，緩衝區快取也分成 8 KB 的頁面。</span><span class="sxs-lookup"><span data-stu-id="8a118-133">Thus, the buffer cache is divided into 8-KB pages.</span></span> <span data-ttu-id="8a118-134">頁面會保留在緩衝區快取中，直到緩衝區管理員需要緩衝區來讀取更多資料為止。</span><span class="sxs-lookup"><span data-stu-id="8a118-134">A page remains in the buffer cache until the buffer manager needs the buffer area to read in more data.</span></span> <span data-ttu-id="8a118-135">只有資料修改後，才會重新寫入磁碟。</span><span class="sxs-lookup"><span data-stu-id="8a118-135">Data is written back to disk only if it is modified.</span></span> <span data-ttu-id="8a118-136">這些記憶體中已修改的頁面稱為中途分頁。</span><span class="sxs-lookup"><span data-stu-id="8a118-136">These in-memory modified pages are known as dirty pages.</span></span> <span data-ttu-id="8a118-137">如果頁面相當於它在磁碟上的資料庫映像，就表示它不是中途頁面。</span><span class="sxs-lookup"><span data-stu-id="8a118-137">A page is clean when it is equivalent to its database image on disk.</span></span> <span data-ttu-id="8a118-138">在重新寫入磁碟之前，可以多次修改緩衝區快取中的資料。</span><span class="sxs-lookup"><span data-stu-id="8a118-138">Data in the buffer cache can be modified multiple times before being written back to disk.</span></span>

 <span data-ttu-id="8a118-139">緩衝集區也稱為緩衝區快取。</span><span class="sxs-lookup"><span data-stu-id="8a118-139">Buffer pool Also called buffer cache.</span></span> <span data-ttu-id="8a118-140">緩衝集區是所有資料庫的快取資料頁面所共用的全域資源。</span><span class="sxs-lookup"><span data-stu-id="8a118-140">The buffer pool is a global resource shared by all databases for their cached data pages.</span></span> <span data-ttu-id="8a118-141">緩衝集區快取大小的上限和下限是在啟動期間決定，或者當使用 sp_configure 來動態重新設定 SQL Server 的執行個體時所決定。</span><span class="sxs-lookup"><span data-stu-id="8a118-141">The maximum and minimum size of the buffer pool cache is determined during startup or when the instance of SQL server is dynamically reconfigured by using sp_configure.</span></span> <span data-ttu-id="8a118-142">此大小會決定執行中的執行個體內隨時可在緩衝集區內快取的最大頁數。</span><span class="sxs-lookup"><span data-stu-id="8a118-142">This size determines the maximum number of pages that can be cached in the buffer pool at any time in the running instance.</span></span>

 <span data-ttu-id="8a118-143">檢查點會建立一個已知的正確點， [!INCLUDE[ssDE](../../includes/ssde-md.md)] 以便在非預期的關機或損毀之後，于復原期間開始套用包含在交易記錄中的變更。</span><span class="sxs-lookup"><span data-stu-id="8a118-143">Checkpoint A checkpoint creates a known good point from which the [!INCLUDE[ssDE](../../includes/ssde-md.md)] can start applying changes contained in the transaction log during recovery after an unexpected shutdown or crash.</span></span> <span data-ttu-id="8a118-144">檢查點會將中途分頁和交易記錄資訊從記憶體寫入磁碟，也會記錄有關交易記錄的資訊。</span><span class="sxs-lookup"><span data-stu-id="8a118-144">A checkpoint writes the dirty pages and transaction log information from memory to disk and, also, records information about the transaction log.</span></span> <span data-ttu-id="8a118-145">如需詳細資訊，請參閱[資料庫檢查點 &#40;SQL Server&#41;](../../relational-databases/logs/database-checkpoints-sql-server.md)。</span><span class="sxs-lookup"><span data-stu-id="8a118-145">For more information, see [Database Checkpoints &#40;SQL Server&#41;](../../relational-databases/logs/database-checkpoints-sql-server.md).</span></span>

## <a name="buffer-pool-extension-details"></a><span data-ttu-id="8a118-146">緩衝集區擴充詳細資料</span><span class="sxs-lookup"><span data-stu-id="8a118-146">Buffer Pool Extension Details</span></span>
 <span data-ttu-id="8a118-147">SSD 儲存體是當做記憶體子系統的延伸模組來使用，而非磁碟儲存體的子系統。</span><span class="sxs-lookup"><span data-stu-id="8a118-147">SSD storage is used as an extension to the memory subsystem rather than the disk storage subsystem.</span></span> <span data-ttu-id="8a118-148">也就是說，緩衝集區擴充檔案允許緩衝集區管理員使用 DRAM 和 NAND 快閃記憶體，在 SSD 支援的非揮發性隨機存取記憶體中維護較大的 lukewarm 頁面緩衝集區。</span><span class="sxs-lookup"><span data-stu-id="8a118-148">That is, the buffer pool extension file allows the buffer pool manager to use both DRAM and NAND-Flash memory to maintain a much larger buffer pool of lukewarm pages in nonvolatile random access memory backed by SSDs.</span></span> <span data-ttu-id="8a118-149">這樣會建立多層級快取階層，其中的層級 1 (L1) 為 DRAM，而層級 (L2) 為 SSD 上的緩衝集區擴充檔案。</span><span class="sxs-lookup"><span data-stu-id="8a118-149">This creates a multilevel caching hierarchy with level 1 (L1) as the DRAM and level 2 (L2) as the buffer pool extension file on the SSD.</span></span> <span data-ttu-id="8a118-150">只有乾淨的頁面會寫入 L2 快取中，如此有助於維護資料安全。</span><span class="sxs-lookup"><span data-stu-id="8a118-150">Only clean pages are written to the L2 cache, which helps maintain data safety.</span></span> <span data-ttu-id="8a118-151">緩衝區管理員會處理 L1 與 L2 快取之間非中途頁面的移動。</span><span class="sxs-lookup"><span data-stu-id="8a118-151">The buffer manager handles the movement of clean pages between the L1 and L2 caches.</span></span>

 <span data-ttu-id="8a118-152">下圖提供緩衝集區相較於其他 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 元件的高階架構概觀。</span><span class="sxs-lookup"><span data-stu-id="8a118-152">The following illustration provides a high-level architectural overview of the buffer pool relative to other [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] components.</span></span>

 <span data-ttu-id="8a118-153">![SSD 緩衝集區延伸模組架構](../media/ssdbufferpoolextensionarchitecture.gif "SSD 緩衝集區延伸模組架構")</span><span class="sxs-lookup"><span data-stu-id="8a118-153">![SSD Buffer Pool Extension Architecture](../media/ssdbufferpoolextensionarchitecture.gif "SSD Buffer Pool Extension Architecture")</span></span>

 <span data-ttu-id="8a118-154">啟用時，緩衝集區擴充會指定 SSD 上緩衝集區快取檔案的大小和檔案路徑。</span><span class="sxs-lookup"><span data-stu-id="8a118-154">When enabled, the buffer pool extension specifies the size and file path of the buffer pool caching file on the SSD.</span></span> <span data-ttu-id="8a118-155">這個檔案是 SSD 上連續的儲存範圍，而且會在啟動 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]執行個體的期間以靜態方式設定。</span><span class="sxs-lookup"><span data-stu-id="8a118-155">This file is a contiguous extent of storage on the SSD and is statically configured during startup of the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="8a118-156">只有當緩衝集區擴充功能停用時，才能執行檔案組態參數的更改。</span><span class="sxs-lookup"><span data-stu-id="8a118-156">Alterations to the file configuration parameters can only be done when the buffer pool extension feature is disabled.</span></span> <span data-ttu-id="8a118-157">當停用緩衝集區擴充時，所有相關的組態設定都會從登錄中移除。</span><span class="sxs-lookup"><span data-stu-id="8a118-157">When the buffer pool extension is disabled, all related configuration settings are removed from the registry.</span></span> <span data-ttu-id="8a118-158">當 SQL Server 執行個體關機後，便會刪除緩衝集區擴充檔案。</span><span class="sxs-lookup"><span data-stu-id="8a118-158">The buffer pool extension file is deleted upon shutdown of the instance of SQL Server.</span></span>

## <a name="best-practices"></a><span data-ttu-id="8a118-159">最佳做法</span><span class="sxs-lookup"><span data-stu-id="8a118-159">Best Practices</span></span>
 <span data-ttu-id="8a118-160">我們建議您依照以下的最佳作法進行。</span><span class="sxs-lookup"><span data-stu-id="8a118-160">We recommend that you follow these best practices.</span></span>

-   <span data-ttu-id="8a118-161">建議您在初次啟用緩衝集區延伸模組後重新啟動 SQL Server 執行個體，讓效能達到最高效益。</span><span class="sxs-lookup"><span data-stu-id="8a118-161">After enabling Buffer Pool Extension for the first time it is recommended to restart the SQL Server instance to get the maximum performance benefits.</span></span>

-   <span data-ttu-id="8a118-162">對於 Enterprise Edition，緩衝集區擴充大小最大可達 max_server_memory 之值的 32 倍，Standard Edition 則是 4 倍。</span><span class="sxs-lookup"><span data-stu-id="8a118-162">The buffer pool extension size can be up to 32 times the value of max_server_memory for Enterprise editions, and up to 4 times for Standard edition.</span></span>  <span data-ttu-id="8a118-163">建議的實體記憶體大小 (max_server_memory) 與緩衝集區擴充大小比率為 1:16 或更低。</span><span class="sxs-lookup"><span data-stu-id="8a118-163">We recommend a ratio between the size of the physical memory (max_server_memory) and the size of the buffer pool extension of 1:16 or less.</span></span> <span data-ttu-id="8a118-164">1:4 到 1:8 的範圍內的較低比率可能會比較理想。</span><span class="sxs-lookup"><span data-stu-id="8a118-164">A lower ratio in the range of 1:4 to 1:8 may be optimal.</span></span> <span data-ttu-id="8a118-165">如需設定 max_server_memory 選項的資訊，請參閱 [伺服器記憶體伺服器組態選項](server-memory-server-configuration-options.md)。</span><span class="sxs-lookup"><span data-stu-id="8a118-165">For information about setting the max_server_memory option, see [Server Memory Server Configuration Options](server-memory-server-configuration-options.md).</span></span>

-   <span data-ttu-id="8a118-166">在生產環境中實作之前，請徹底測試緩衝集區擴充。</span><span class="sxs-lookup"><span data-stu-id="8a118-166">Test the buffer pool extension thoroughly before implementing in a production environment.</span></span> <span data-ttu-id="8a118-167">一旦實際執行之後，請避免對檔案進行組態變更或關閉此功能。</span><span class="sxs-lookup"><span data-stu-id="8a118-167">Once in production, avoid making configuration changes to the file or turning the feature off.</span></span> <span data-ttu-id="8a118-168">這些活動可能對伺服器效能造成負面影響，因為功能停用時，緩衝集區的大小會大幅減少。</span><span class="sxs-lookup"><span data-stu-id="8a118-168">These activities may have a negative impact on server performance because the buffer pool is significantly reduced in size when the feature is disabled.</span></span> <span data-ttu-id="8a118-169">停用時，直到 SQL Server 執行個體重新啟動為止，才會開始回收用於支援功能的記憶體。</span><span class="sxs-lookup"><span data-stu-id="8a118-169">When disabled, the memory used to support the feature is not reclaimed until the instance of SQL Server is restarted.</span></span> <span data-ttu-id="8a118-170">不過，如果重新啟用功能，則會重複使用記憶體而不需重新啟動執行個體。</span><span class="sxs-lookup"><span data-stu-id="8a118-170">However, if the feature is re-enabled, the memory will be reused without restarting the instance.</span></span>

## <a name="return-information-about-the-buffer-pool-extension"></a><span data-ttu-id="8a118-171">傳回有關緩衝集區擴充的資訊</span><span class="sxs-lookup"><span data-stu-id="8a118-171">Return Information about the Buffer Pool Extension</span></span>
 <span data-ttu-id="8a118-172">您可以使用下列動態管理檢視顯示緩衝集區擴充的組態，並傳回有關擴充中資料頁的資訊。</span><span class="sxs-lookup"><span data-stu-id="8a118-172">You can use the following dynamic management views to display the configuration of the buffer pool extension and return information about the data pages in the extension.</span></span>

-   [<span data-ttu-id="8a118-173">sys.dm_os_buffer_pool_extension_configuration &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="8a118-173">sys.dm_os_buffer_pool_extension_configuration &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-dynamic-management-views/sys-dm-os-buffer-pool-extension-configuration-transact-sql)

-   [<span data-ttu-id="8a118-174">sys.dm_os_buffer_descriptors &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="8a118-174">sys.dm_os_buffer_descriptors &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-dynamic-management-views/sys-dm-os-buffer-descriptors-transact-sql)

 <span data-ttu-id="8a118-175">SQL Server 中的緩衝區管理員物件有提供效能計數器，以便追蹤緩衝集區擴充檔案中的資料頁面。</span><span class="sxs-lookup"><span data-stu-id="8a118-175">Performance counters are available in the SQL Server, Buffer Manager Object to track the data pages in the buffer pool extension file.</span></span> <span data-ttu-id="8a118-176">如需詳細資訊，請參閱＜ [緩衝集區擴充效能計數器](../../relational-databases/performance-monitor/sql-server-buffer-manager-object.md)＞。</span><span class="sxs-lookup"><span data-stu-id="8a118-176">For more information, see [buffer pool extension performance counters](../../relational-databases/performance-monitor/sql-server-buffer-manager-object.md).</span></span>

 <span data-ttu-id="8a118-177">下列是可以使用的 Xevent。</span><span class="sxs-lookup"><span data-stu-id="8a118-177">The following Xevents are available.</span></span>

|<span data-ttu-id="8a118-178">XEvent</span><span class="sxs-lookup"><span data-stu-id="8a118-178">XEvent</span></span>|<span data-ttu-id="8a118-179">描述</span><span class="sxs-lookup"><span data-stu-id="8a118-179">Description</span></span>|<span data-ttu-id="8a118-180">參數</span><span class="sxs-lookup"><span data-stu-id="8a118-180">Parameters</span></span>|
|------------|-----------------|----------------|
|<span data-ttu-id="8a118-181">sqlserver.buffer_pool_extension_pages_written</span><span class="sxs-lookup"><span data-stu-id="8a118-181">sqlserver.buffer_pool_extension_pages_written</span></span>|<span data-ttu-id="8a118-182">會在從緩衝集區收回一個頁面或一組頁面，並將頁面寫入緩衝集區擴充檔時引發。</span><span class="sxs-lookup"><span data-stu-id="8a118-182">Fires when a page or group of pages are evicted from the buffer pool and written to the buffer pool extension file.</span></span>|<span data-ttu-id="8a118-183">number_page</span><span class="sxs-lookup"><span data-stu-id="8a118-183">number_page</span></span><br /><br /> <span data-ttu-id="8a118-184">first_page_id</span><span class="sxs-lookup"><span data-stu-id="8a118-184">first_page_id</span></span><br /><br /> <span data-ttu-id="8a118-185">first_page_offset</span><span class="sxs-lookup"><span data-stu-id="8a118-185">first_page_offset</span></span><br /><br /> <span data-ttu-id="8a118-186">initiator_numa_node_id</span><span class="sxs-lookup"><span data-stu-id="8a118-186">initiator_numa_node_id</span></span>|
|<span data-ttu-id="8a118-187">sqlserver.buffer_pool_extension_pages_read</span><span class="sxs-lookup"><span data-stu-id="8a118-187">sqlserver.buffer_pool_extension_pages_read</span></span>|<span data-ttu-id="8a118-188">會在從緩衝集區擴充檔案將頁面讀到緩衝集區時引發。</span><span class="sxs-lookup"><span data-stu-id="8a118-188">Fires when a page is read from the buffer pool extension file to the buffer pool.</span></span>|<span data-ttu-id="8a118-189">number_page</span><span class="sxs-lookup"><span data-stu-id="8a118-189">number_page</span></span><br /><br /> <span data-ttu-id="8a118-190">first_page_id</span><span class="sxs-lookup"><span data-stu-id="8a118-190">first_page_id</span></span><br /><br /> <span data-ttu-id="8a118-191">first_page_offset</span><span class="sxs-lookup"><span data-stu-id="8a118-191">first_page_offset</span></span><br /><br /> <span data-ttu-id="8a118-192">initiator_numa_node_id</span><span class="sxs-lookup"><span data-stu-id="8a118-192">initiator_numa_node_id</span></span>|
|<span data-ttu-id="8a118-193">sqlserver.buffer_pool_extension_pages_evicted</span><span class="sxs-lookup"><span data-stu-id="8a118-193">sqlserver.buffer_pool_extension_pages_evicted</span></span>|<span data-ttu-id="8a118-194">會在從緩衝集區擴充檔收回頁面時引發。</span><span class="sxs-lookup"><span data-stu-id="8a118-194">Fires when a page is evicted from the buffer pool extension file.</span></span>|<span data-ttu-id="8a118-195">number_page</span><span class="sxs-lookup"><span data-stu-id="8a118-195">number_page</span></span><br /><br /> <span data-ttu-id="8a118-196">first_page_id</span><span class="sxs-lookup"><span data-stu-id="8a118-196">first_page_id</span></span><br /><br /> <span data-ttu-id="8a118-197">first_page_offset</span><span class="sxs-lookup"><span data-stu-id="8a118-197">first_page_offset</span></span><br /><br /> <span data-ttu-id="8a118-198">initiator_numa_node_id</span><span class="sxs-lookup"><span data-stu-id="8a118-198">initiator_numa_node_id</span></span>|
|<span data-ttu-id="8a118-199">sqlserver.buffer_pool_eviction_thresholds_recalculated</span><span class="sxs-lookup"><span data-stu-id="8a118-199">sqlserver.buffer_pool_eviction_thresholds_recalculated</span></span>|<span data-ttu-id="8a118-200">會在計算收回臨界值時引發。</span><span class="sxs-lookup"><span data-stu-id="8a118-200">Fires when the eviction threshold is calculated.</span></span>|<span data-ttu-id="8a118-201">warm_threshold</span><span class="sxs-lookup"><span data-stu-id="8a118-201">warm_threshold</span></span><br /><br /> <span data-ttu-id="8a118-202">cold_threshold</span><span class="sxs-lookup"><span data-stu-id="8a118-202">cold_threshold</span></span><br /><br /> <span data-ttu-id="8a118-203">pages_bypassed_eviction</span><span class="sxs-lookup"><span data-stu-id="8a118-203">pages_bypassed_eviction</span></span><br /><br /> <span data-ttu-id="8a118-204">eviction_bypass_reason</span><span class="sxs-lookup"><span data-stu-id="8a118-204">eviction_bypass_reason</span></span><br /><br /> <span data-ttu-id="8a118-205">eviction_bypass_reason_description</span><span class="sxs-lookup"><span data-stu-id="8a118-205">eviction_bypass_reason_description</span></span>|

## <a name="related-tasks"></a><span data-ttu-id="8a118-206">相關工作</span><span class="sxs-lookup"><span data-stu-id="8a118-206">Related Tasks</span></span>

|||
|-|-|
|<span data-ttu-id="8a118-207">**工作描述**</span><span class="sxs-lookup"><span data-stu-id="8a118-207">**Task Description**</span></span>|<span data-ttu-id="8a118-208">**主題**</span><span class="sxs-lookup"><span data-stu-id="8a118-208">**Topic**</span></span>|
|<span data-ttu-id="8a118-209">啟用及設定緩衝集區擴充</span><span class="sxs-lookup"><span data-stu-id="8a118-209">Enable and configure the buffer pool extension.</span></span>|[<span data-ttu-id="8a118-210">ALTER SERVER CONFIGURATION &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="8a118-210">ALTER SERVER CONFIGURATION &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/alter-server-configuration-transact-sql)|
|<span data-ttu-id="8a118-211">修改緩衝集區擴充組態</span><span class="sxs-lookup"><span data-stu-id="8a118-211">Modify the buffer pool extension configuration</span></span>|[<span data-ttu-id="8a118-212">ALTER SERVER CONFIGURATION &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="8a118-212">ALTER SERVER CONFIGURATION &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/alter-server-configuration-transact-sql)|
|<span data-ttu-id="8a118-213">檢視緩衝集區擴充組態</span><span class="sxs-lookup"><span data-stu-id="8a118-213">View the buffer pool extension configuration</span></span>|[<span data-ttu-id="8a118-214">sys.dm_os_buffer_pool_extension_configuration &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="8a118-214">sys.dm_os_buffer_pool_extension_configuration &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-dynamic-management-views/sys-dm-os-buffer-pool-extension-configuration-transact-sql)|
|<span data-ttu-id="8a118-215">監視緩衝集區擴充</span><span class="sxs-lookup"><span data-stu-id="8a118-215">Monitor the buffer pool extension</span></span>|[<span data-ttu-id="8a118-216">sys.dm_os_buffer_descriptors &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="8a118-216">sys.dm_os_buffer_descriptors &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-dynamic-management-views/sys-dm-os-buffer-descriptors-transact-sql)<br /><br /> [<span data-ttu-id="8a118-217">效能計數器</span><span class="sxs-lookup"><span data-stu-id="8a118-217">Performance counters</span></span>](../../relational-databases/performance-monitor/sql-server-buffer-manager-object.md)|


