---
title: 伺服器記憶體設定選項 | Microsoft Docs
ms.custom: ''
ms.date: 07/22/2020
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: configuration
ms.topic: conceptual
helpviewer_keywords:
- Virtual Memory Manager
- max server memory option
- virtual memory [SQL Server]
- VMM
- server memory options [SQL Server]
- servers [SQL Server], memory
- buffer pools [SQL Server]
- min server memory option
- manual memory options [SQL Server]
- memory [SQL Server], servers
ms.assetid: 29ce373e-18f8-46ff-aea6-15bbb10fb9c2
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 46a4bb354b78d25c6667e9ff67c6eda697a0369e
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87706738"
---
# <a name="server-memory-configuration-options"></a><span data-ttu-id="aaf6b-102">伺服器記憶體設定選項</span><span class="sxs-lookup"><span data-stu-id="aaf6b-102">Server Memory Configuration Options</span></span>
  <span data-ttu-id="aaf6b-103">您可以使用 [最小伺服器記憶體]\*\*\*\* 和 [最大伺服器記憶體]\*\*\*\* 這兩個伺服器記憶體選項，針對 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 執行個體所使用的 SQL Server 處理序重新設定 SQL Server Memory Manager 所管理的記憶體數量 (以 MB 為單位)。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-103">Use the two server memory options, **min server memory** and **max server memory**, to reconfigure the amount of memory (in megabytes) that is managed by the SQL Server Memory Manager for a SQL Server process used by an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
 <span data-ttu-id="aaf6b-104">[最小伺服器記憶體]\*\*\*\* 的預設值是 0，而 [最大伺服器記憶體]\*\*\*\* 的預設值是 2147483647 MB。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-104">The default setting for **min server memory** is 0, and the default setting for **max server memory** is 2147483647 MB.</span></span> <span data-ttu-id="aaf6b-105">根據預設，[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 可以根據可用的系統資源，動態變更其記憶體需求。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-105">By default, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] can change its memory requirements dynamically based on available system resources.</span></span>  
  
> [!NOTE]  
> <span data-ttu-id="aaf6b-106">將 [最大伺服器記憶體]\*\*\*\* 設定為最小值可能會大幅降低 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 效能，甚至讓伺服器無法啟動。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-106">Setting **max server memory** to the minimum value can severely reduce [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] performance and even prevent it from starting.</span></span> <span data-ttu-id="aaf6b-107">如果您在 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 變更此選項後無法啟動，請使用 **-f**啟動選項啟動它，並將 [**最大伺服器記憶體**] 重設為先前的值。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-107">If you cannot start [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] after changing this option, start it using the **-f** startup option and reset **max server memory** to its previous value.</span></span> <span data-ttu-id="aaf6b-108">如需詳細資訊，請參閱 [Database Engine Service Startup Options](database-engine-service-startup-options.md)。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-108">For more information, see [Database Engine Service Startup Options](database-engine-service-startup-options.md).</span></span>  
  
 <span data-ttu-id="aaf6b-109">當 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 動態使用記憶體時，它會定期查詢系統以判定可用的記憶體量。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-109">When [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is using memory dynamically, it queries the system periodically to determine the amount of free memory.</span></span> <span data-ttu-id="aaf6b-110">維持這個可用記憶體數量可避免作業系統 (OS) 進行分頁。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-110">Maintaining this free memory prevents the operating system (OS) from paging.</span></span> <span data-ttu-id="aaf6b-111">如果可用記憶體少於這個數量， [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 會將記憶體釋出給 OS。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-111">If less memory is free, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] releases memory to the OS.</span></span> <span data-ttu-id="aaf6b-112">如果可用記憶體多於這個數量， [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 可能會配置更多記憶體。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-112">If more memory is free, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] may allocate more memory.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="aaf6b-113">只有當工作負載需要更多的記憶體時，它才會增加記憶體。休息中的伺服器不會增加其虛擬位址空間的大小。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-113">adds memory only when its workload requires more memory; a server at rest does not increase the size of its virtual address space.</span></span>  
  
 <span data-ttu-id="aaf6b-114">請參閱範例 B，以取得傳回目前使用之記憶體的查詢。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-114">See example B for a query to return the currently used memory.</span></span> <span data-ttu-id="aaf6b-115">[最大伺服器記憶體]\*\*\*\* 控制 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 記憶體配置，包括緩衝集區、編譯記憶體、所有快取、qe 記憶體授權、鎖定管理員記憶體及 clr 記憶體 (基本上任何在 **sys.dm_os_memory_clerks** 中找到的記憶體 Clerk 皆是)。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-115">**max server memory** controls the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] memory allocation, including the buffer pool, compile memory, all caches, qe memory grants, lock manager memory, and clr memory (essentially any memory clerk found in **sys.dm_os_memory_clerks**).</span></span> <span data-ttu-id="aaf6b-116">執行緒堆疊的記憶體、記憶體堆積、連結的伺服器提供者 ( [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]除外)，以及任何由非 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] DLL 所配置的記憶體，皆不受伺服器記憶體上限的控制。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-116">Memory for thread stacks, memory heaps, linked server providers other than [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], and any memory allocated by a non [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] DLL are not controlled by max server memory.</span></span>  
  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]<span data-ttu-id="aaf6b-117">會使用記憶體通知 API **QueryMemoryResourceNotification**來判斷 SQL Server memory Manager 何時會配置記憶體和釋放記憶體。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-117">uses the memory notification API **QueryMemoryResourceNotification** to determine when the SQL Server Memory Manager may allocate memory and release memory.</span></span>  
  
 <span data-ttu-id="aaf6b-118">建議允許 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 動態使用記憶體。不過，您可以手動設定記憶體選項和限制 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 可存取的記憶體數量。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-118">Allowing [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] to use memory dynamically is recommended; however, you can set the memory options manually and restrict the amount of memory that [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] can access.</span></span> <span data-ttu-id="aaf6b-119">在您設定 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]的記憶體數量之前，要先決定適當的記憶體設定，請將實體記憶體總數減去 OS 以及任何其他 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 執行個體 (以及當電腦不專用於 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]時，其他的系統用途) 需要的記憶體。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-119">Before you set the amount of memory for [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], determine the appropriate memory setting by subtracting, from the total physical memory, the memory required for the OS and any other instances of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] (and other system uses, if the computer is not wholly dedicated to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]).</span></span> <span data-ttu-id="aaf6b-120">這個差額是可指派給 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]的最大記憶體數量。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-120">This difference is the maximum amount of memory you can assign to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
## <a name="setting-the-memory-options-manually"></a><span data-ttu-id="aaf6b-121">手動設定記憶體選項</span><span class="sxs-lookup"><span data-stu-id="aaf6b-121">Setting the Memory Options Manually</span></span>  
<span data-ttu-id="aaf6b-122">您可以將伺服器選項 [最小伺服器記憶體] 與 [最大伺服器記憶體] 設定成跨某範圍的記憶體值。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-122">The server options **min server memory** and **max server memory** can be set to span a range of memory values.</span></span> <span data-ttu-id="aaf6b-123">這樣的做法有助於讓系統或資料庫管理員，將 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 執行個體配合同一部電腦上執行的其他應用程式或其他 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 執行個體的記憶體需求，一併設定。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-123">This method is useful for system or database administrators to configure an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] in conjunction with the memory requirements of other applications, or other instances of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] that run on the same host.</span></span>

> [!NOTE]
> <span data-ttu-id="aaf6b-124">[最小伺服器記憶體] 和 [最大伺服器記憶體] 選項屬於進階選項。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-124">The **min server memory** and **max server memory** options are advanced options.</span></span> <span data-ttu-id="aaf6b-125">如果您要使用 **sp_configure** 系統預存程序來變更這些設定，只有當 **show advanced options** 設為 1 時，才能變更它們。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-125">If you are using the **sp_configure** system stored procedure to change these settings, you can change them only when **show advanced options** is set to 1.</span></span> <span data-ttu-id="aaf6b-126">這些設定會立即生效，不需要重新啟動伺服器。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-126">These settings take effect immediately without a server restart.</span></span>  
  
<a name="min_server_memory"></a> <span data-ttu-id="aaf6b-127">您可使用 **min_server_memory** 確保 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 執行個體的 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 記憶體管理員，能有最少的記憶體數量可用。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-127">Use **min_server_memory** to guarantee a minimum amount of memory available to the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Memory Manager for an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="aaf6b-128">啟動時，[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 不會立即配置 [最小伺服器記憶體] 中指定的記憶體數量。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-128">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] will not immediately allocate the amount of memory specified in **min server memory** on startup.</span></span> <span data-ttu-id="aaf6b-129">不過，由於用戶端負載使記憶體使用量達到這個值後，除非降低 [最小伺服器記憶體] 的值，否則 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 無法釋出記憶體。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-129">However, after memory usage has reached this value due to client load, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] cannot free memory unless the value of **min server memory** is reduced.</span></span> <span data-ttu-id="aaf6b-130">例如，當多個 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 執行個體可以同時存在於相同的主機上時，設定 min_server_memory 參數而非 max_server_memory 可為執行個體保留記憶體。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-130">For example, when several instances of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] can exist concurrently in the same host, set the min_server_memory parameter instead of max_server_memory for the purpose of reserving memory for an instance.</span></span> <span data-ttu-id="aaf6b-131">此外，也需要設定虛擬環境中的 min_server_memory 值，以確保基礎主機的記憶體壓力不會為了得到可接受的效能，而嘗試從客體 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 虛擬機器 (VM) 的緩衝集區，解除超過所需的記憶體。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-131">Also, setting a min_server_memory value is essential in a virtualized environment to ensure memory pressure from the underlying host does not attempt to deallocate memory from the buffer pool on a guest [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] virtual machine (VM) beyond what is needed for acceptable performance.</span></span>
 
> [!NOTE]  
> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="aaf6b-132">不保證能夠配置 [最小伺服器記憶體] 中指定的記憶體數量。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-132">is not guaranteed to allocate the amount of memory specified in **min server memory**.</span></span> <span data-ttu-id="aaf6b-133">如果伺服器的負載從不需要配置 [最小伺服器記憶體] 中指定的記憶體大小，則 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 會以較少的記憶體執行。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-133">If the load on the server never requires allocating the amount of memory specified in **min server memory**, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] will run with less memory.</span></span>  
  
<a name="max_server_memory"></a> <span data-ttu-id="aaf6b-134">您可使用 **max_server_memory** 確保 OS 不會遇到有害的記憶體壓力。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-134">Use **max_server_memory** to guarantee the OS does not experience detrimental memory pressure.</span></span> <span data-ttu-id="aaf6b-135">若要設定最大伺服器記憶體設定，請監視 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 處理序的整體取用量，以判斷記憶體需求。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-135">To set max server memory configuration, monitor overall consumption of the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] process in order to determine memory requirements.</span></span> <span data-ttu-id="aaf6b-136">若要為單一執行個體進行更準確的計算：</span><span class="sxs-lookup"><span data-stu-id="aaf6b-136">To be more accurate with these calculations for a single instance:</span></span>
 -  <span data-ttu-id="aaf6b-137">從 OS 總記憶體中保留 1GB - 4GB 的記憶體給 OS 本身。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-137">From the total OS memory, reserve 1GB-4GB to the OS itself.</span></span>
 -  <span data-ttu-id="aaf6b-138">然後減去等於不受 [最大伺服器記憶體]\*\*\*\* 控制的潛在 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 記憶體配置，該配置的算法為**堆疊大小 <sup>1</sup> \* 計算得出的最大背景工作執行緒數 <sup>2</sup> + -g 啟動參數 <sup>3</sup>__** (若未設定 *-g*，則預設為 256MB)。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-138">Then subtract the equivalent of potential [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] memory allocations outside the **max server memory** control, which is comprised of **_stack size <sup>1</sup> \* calculated max worker threads <sup>2</sup> + -g startup parameter <sup>3</sup>_** (or 256MB by default if *-g* is not set).</span></span> <span data-ttu-id="aaf6b-139">餘數即為單一執行個體安裝的 max_server_memory 設定。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-139">What remains should be the max_server_memory setting for a single instance setup.</span></span>
 
<span data-ttu-id="aaf6b-140"><sup>1</sup> 如需每個架構之執行緒堆疊大小的資訊，請參閱[記憶體管理架構指南](https://docs.microsoft.com/sql/relational-databases/memory-management-architecture-guide#stacksizes)。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-140"><sup>1</sup> Refer to the [Memory Management Architecture guide](https://docs.microsoft.com/sql/relational-databases/memory-management-architecture-guide#stacksizes) for information on thread stack sizes per architecture.</span></span>

<span data-ttu-id="aaf6b-141"><sup>2</sup> 如需在目前主機中，為指定數量之親和 CPU 而計算出的預設背景工作執行緒數目相關資訊，請參閱如何[設定最大背景工作執行緒伺服器設定選項](../../database-engine/configure-windows/configure-the-max-worker-threads-server-configuration-option.md)的文件頁面。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-141"><sup>2</sup> Refer to the documentation page on how to [Configure the max worker threads Server Configuration Option](../../database-engine/configure-windows/configure-the-max-worker-threads-server-configuration-option.md), for information on the calculated default worker threads for a given number of affinitized CPUs in the current host.</span></span>

<span data-ttu-id="aaf6b-142"><sup>3</sup> 如需 *-g* 啟動參數的資訊，請參閱[資料庫引擎服務啟動選項](database-engine-service-startup-options.md?view=sql-server-2014)的文件頁面。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-142"><sup>3</sup> Refer to the documentation page on [Database Engine Service Startup Options](database-engine-service-startup-options.md?view=sql-server-2014) for information on the *-g* startup parameter.</span></span> <span data-ttu-id="aaf6b-143">僅適用於 32 位元 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ([!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] 至 [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)])。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-143">Aplicable only to 32-bit [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ([!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] through [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)]).</span></span>

|<span data-ttu-id="aaf6b-144">OS 類型</span><span class="sxs-lookup"><span data-stu-id="aaf6b-144">OS Type</span></span>|<span data-ttu-id="aaf6b-145">最**大伺服器記憶體**允許的最小記憶體數量</span><span class="sxs-lookup"><span data-stu-id="aaf6b-145">Minimum Memory Amounts Allowable for **max server memory**</span></span>|  
|-------------|----------------------------------------------------------------|  
|<span data-ttu-id="aaf6b-146">32 位元</span><span class="sxs-lookup"><span data-stu-id="aaf6b-146">32-bit</span></span>|<span data-ttu-id="aaf6b-147">64 MB</span><span class="sxs-lookup"><span data-stu-id="aaf6b-147">64 MB</span></span>|  
|<span data-ttu-id="aaf6b-148">64 位元</span><span class="sxs-lookup"><span data-stu-id="aaf6b-148">64-bit</span></span>|<span data-ttu-id="aaf6b-149">128 MB</span><span class="sxs-lookup"><span data-stu-id="aaf6b-149">128 MB</span></span>| 

## <a name="how-to-configure-memory-options-using-sql-server-management-studio"></a><span data-ttu-id="aaf6b-150">如何使用 SQL Server Management Studio 設定記憶體選項</span><span class="sxs-lookup"><span data-stu-id="aaf6b-150">How to configure memory options using SQL Server Management Studio</span></span>  
 <span data-ttu-id="aaf6b-151">您可以使用 [最小伺服器記憶體]\*\*\*\* 與 [最大伺服器記憶體]\*\*\*\* 這兩個伺服器記憶體選項，針對 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 執行個體重新設定 SQL Server Memory Manager 所管理的記憶體數量 (以 MB 為單位)。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-151">Use the two server memory options, **min server memory** and **max server memory**, to reconfigure the amount of memory (in megabytes) managed by the SQL Server Memory Manager for an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="aaf6b-152">根據預設，[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 可以根據可用的系統資源，動態變更其記憶體需求。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-152">By default, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] can change its memory requirements dynamically based on available system resources.</span></span>  
  
### <a name="procedure-for-configuring-a-fixed-amount-of-memory"></a><span data-ttu-id="aaf6b-153">設定固定記憶體數量的程序</span><span class="sxs-lookup"><span data-stu-id="aaf6b-153">Procedure for configuring a fixed amount of memory</span></span>  
 <span data-ttu-id="aaf6b-154">**若要設定固定的記憶體數量：**</span><span class="sxs-lookup"><span data-stu-id="aaf6b-154">**To set a fixed amount of memory:**</span></span>  
  
1.  <span data-ttu-id="aaf6b-155">在物件總管中，請以滑鼠右鍵按一下伺服器，然後選取 [屬性]。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-155">In Object Explorer, right-click a server and select **Properties**.</span></span>  
  
2.  <span data-ttu-id="aaf6b-156">按一下 **[記憶體]** 節點。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-156">Click the **Memory** node.</span></span>  
  
3.  <span data-ttu-id="aaf6b-157">在 [伺服器記憶體選項]\*\*\*\* 底下，輸入 [最小伺服器記憶體]\*\*\*\* 和 [最大伺服器記憶體]\*\*\*\* 所要的數量。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-157">Under **Server Memory Options**, enter the amount that you want for **Minimum server memory** and **Maximum server memory**.</span></span>  
  
     <span data-ttu-id="aaf6b-158">使用預設值可允許 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 根據可用的系統資源來動態變更它的記憶體需求。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-158">Use the default settings to allow [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] to change its memory requirements dynamically based on available system resources.</span></span> <span data-ttu-id="aaf6b-159">[**最小伺服器記憶體**] 的預設設定為0，而 [**最大伺服器記憶體**] 的預設設定為 2147483647 mb (MB) 。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-159">The default setting for **min server memory** is 0, and the default setting for **max server memory** is 2147483647 megabytes (MB).</span></span>  
  
## <a name="maximize-data-throughput-for-network-applications"></a><span data-ttu-id="aaf6b-160">網路應用程式的資料輸送量最大化</span><span class="sxs-lookup"><span data-stu-id="aaf6b-160">Maximize Data Throughput for Network Applications</span></span>  
 <span data-ttu-id="aaf6b-161">若要最佳化 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 的系統記憶體使用量，您應該限制系統用於檔案快取的記憶體數量。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-161">To optimize system memory use for [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], you should limit the amount of memory that is used by the system for file caching.</span></span> <span data-ttu-id="aaf6b-162">若要限制檔案系統快取，請確定沒有選取 [檔案共用的資料輸送量最大化]\*\*\*\*。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-162">To limit the file system cache, make sure that **Maximize data throughput for file sharing** is not selected.</span></span> <span data-ttu-id="aaf6b-163">您可以選取 [記憶體使用最小化]\*\*\*\* 或 [平衡]\*\*\*\*，藉以指定最小的檔案系統快取。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-163">You can specify the smallest file system cache by selecting **Minimize memory used** or **Balance**.</span></span>  
  
#### <a name="to-check-the-current-setting-on-your-operating-system"></a><span data-ttu-id="aaf6b-164">若要檢查作業系統的現有設定</span><span class="sxs-lookup"><span data-stu-id="aaf6b-164">To check the current setting on your operating system</span></span>  
  
1.  <span data-ttu-id="aaf6b-165">按一下 [開始]\*\*\*\* 及 [控制台]\*\*\*\*、按兩下 [網路連線]\*\*\*\*，然後按兩下 [區域連線]\*\*\*\*。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-165">Click **Start**, click **Control Panel**, double-click **Network Connections**, and then double-click **Local Area Connection**.</span></span>  
  
2.  <span data-ttu-id="aaf6b-166">在 [一般]\*\*\*\* 索引標籤上按一下 [內容]\*\*\*\*，選取 [File and Printer Sharing Microsoft Networks]\*\*\*\*，然後按一下 [內容]\*\*\*\*。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-166">On the **General** tab, click **Properties**, select **File and Printer Sharing Microsoft Networks**, and then click **Properties**.</span></span>  
  
3.  <span data-ttu-id="aaf6b-167">如果已選取 [網路應用程式的資料輸送量最大化]\*\*\*\*，請選擇其他任何選項，按一下 [確定]\*\*\*\*，然後關閉其餘的對話方塊。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-167">If **Maximize data throughput for network applications** is selected, choose any other option, click **OK**, and then close the rest of the dialog boxes.</span></span>  
  
## <a name="lock-pages-in-memory"></a><span data-ttu-id="aaf6b-168">鎖定記憶體分頁</span><span class="sxs-lookup"><span data-stu-id="aaf6b-168">Lock Pages in Memory</span></span>  
 <span data-ttu-id="aaf6b-169">此 Windows 原則決定哪些帳戶可以使用處理序將資料保留在實體記憶體中，以防止系統將資料傳送到磁碟上的虛擬記憶體。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-169">This Windows policy determines which accounts can use a process to keep data in physical memory, preventing the system from paging the data to virtual memory on disk.</span></span> <span data-ttu-id="aaf6b-170">將記憶體分頁到磁碟時，鎖定記憶體分頁可能會讓伺服器保持回應狀態。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-170">Locking pages in memory may keep the server responsive when paging memory to disk occurs.</span></span> <span data-ttu-id="aaf6b-171">當具有執行許可權 sqlservr.exe 的帳戶已被授與 Windows [已鎖定記憶體中的分頁] (LPIM) 使用者權限時，在32位和64位 Standard edition 和更新版本的實例中，[SQL Server**鎖定記憶體中的分頁**] 選項會設定為 ON [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] 。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-171">The SQL Server **Lock Pages in Memory** option is set to ON in 32-bit and 64-bit instances of [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] Standard edition and higher when the account with privileges to run sqlservr.exe has been granted the Windows "Locked Pages in Memory" (LPIM) user right.</span></span> <span data-ttu-id="aaf6b-172">在舊版 SQL Server 中，設定 32 位元 SQL Server 執行個體的 [鎖定分頁] 選項時，需要具有 sqlservr.exe 執行權限的帳戶具有 LPIM 使用者權限，而且 'awe_enabled' 組態選項設定為 ON。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-172">In earlier versions of SQL Server, setting the Lock Pages option for a 32-bit instance of SQL Server, requires that the account with privileges to run sqlservr.exe have the LPIM user right and the 'awe_enabled' configuration option is set to ON.</span></span>  
  
 <span data-ttu-id="aaf6b-173">若要停**用 [鎖定記憶體中的分頁** [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ] 選項，請移除 SQL Server 啟動帳戶的 [鎖定記憶體中的分頁] 使用者權限。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-173">To disable the **Lock Pages In Memory** option for [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], remove the "Locked Pages in Memory" user right for the SQL Server startup account.</span></span>  
  
### <a name="to-disable-lock-pages-in-memory"></a><span data-ttu-id="aaf6b-174">停用鎖定記憶體中的分頁</span><span class="sxs-lookup"><span data-stu-id="aaf6b-174">To Disable Lock Pages in Memory</span></span>  
 <span data-ttu-id="aaf6b-175">**若要停用 [鎖定記憶體中的分頁] 選項：**</span><span class="sxs-lookup"><span data-stu-id="aaf6b-175">**To disable the lock pages in memory option:**</span></span>  
  
1.  <span data-ttu-id="aaf6b-176">在 **[開始]** 功能表上，按一下 **[執行]** 。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-176">On the **Start** menu, click **Run**.</span></span> <span data-ttu-id="aaf6b-177">在 [**開啟**] 方塊中，輸入 `gpedit.msc` 。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-177">In the **Open** box, type `gpedit.msc`.</span></span>  
  
     <span data-ttu-id="aaf6b-178">[群組原則] 對話方塊隨即開啟。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-178">The **Group Policy** dialog box opens.</span></span>  
  
2.  <span data-ttu-id="aaf6b-179">在 [群組原則] 主控台上，依序展開 [電腦組態] 和 [Windows 設定]。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-179">On the **Group Policy** console, expand **Computer Configuration**, and then expand **Windows Settings**.</span></span>  
  
3.  <span data-ttu-id="aaf6b-180">展開 [安全性設定]，然後展開 [本機原則]。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-180">Expand **Security Settings**, and then expand **Local Policies**.</span></span>  
  
4.  <span data-ttu-id="aaf6b-181">選取 [使用者權限指派] 資料夾。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-181">Select the **User Rights Assignment** folder.</span></span>  
  
     <span data-ttu-id="aaf6b-182">這些原則會顯示在詳細資料窗格中。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-182">The policies will be displayed in the details pane.</span></span>  
  
5.  <span data-ttu-id="aaf6b-183">在窗格中按兩下 [鎖定記憶體中的分頁]。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-183">In the pane, double-click **Lock pages in memory**.</span></span>  
  
6.  <span data-ttu-id="aaf6b-184">在 [本機安全性原則設定]\*\*\*\* 對話方塊中，選取具有 sqlservr.exe 執行權限的帳戶，然後按一下 [移除]\*\*\*\*。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-184">In the **Local Security Policy Setting** dialog box, select the account with privileges to run sqlservr.exe and click **Remove**.</span></span>  
  
## <a name="virtual-memory-manager"></a><span data-ttu-id="aaf6b-185">虛擬記憶體管理員</span><span class="sxs-lookup"><span data-stu-id="aaf6b-185">Virtual Memory Manager</span></span>  
 <span data-ttu-id="aaf6b-186">32 位元作業系統可存取 4 GB 的虛擬位址空間。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-186">The 32-bit operating systems provide access to 4 GB of virtual address space.</span></span> <span data-ttu-id="aaf6b-187">其中 2 GB 的虛擬記憶體專供各個處理序使用，而且可供應用程式使用。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-187">2 GB of virtual memory is private per process and available for application use.</span></span> <span data-ttu-id="aaf6b-188">另外 2 GB 是保留給作業系統使用的。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-188">2 GB is reserved for operating system use.</span></span> <span data-ttu-id="aaf6b-189">所有作業系統版本都包括可提供應用程式存取 3 GB 虛擬位址空間的參數，並將作業系統限制成 1 GB。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-189">All operating system editions include a switch that can provide applications with access up to 3 GB of virtual address space, limiting the operating system to 1 GB.</span></span> <span data-ttu-id="aaf6b-190">如需有關如何使用參數記憶體組態的詳細資訊，請參閱有關 4 GB 微調 (4GT) 的 Windows 文件集。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-190">For more information about how to use the switch memory configuration, see the Windows documentation about 4-gigabyte tuning (4GT).</span></span> <span data-ttu-id="aaf6b-191">在 64 位元作業系統上執行 32 位元 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 時，其使用者可用的虛擬位址空間是完整的 4 GB。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-191">When the 32-bit [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is running on 64-bit operating system its user available virtual address space is the full 4 GB.</span></span>  
  
 <span data-ttu-id="aaf6b-192">此位址空間的認可區域是由「Windows 虛擬記憶體管理員 (VMM)」對應到可用的實體記憶體。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-192">The committed regions of address space are mapped to the available physical memory by the Windows Virtual Memory Manager (VMM).</span></span>  
  
 <span data-ttu-id="aaf6b-193">如需有關不同作業系統所支援之實體記憶體數量的詳細資訊，請參閱 Windows 文件集：＜Windows 版本的記憶體限制＞。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-193">For more information on the amount of physical memory supported by different operating systems, see the Windows documentation "Memory Limits for Windows Releases".</span></span>  
  
 <span data-ttu-id="aaf6b-194">虛擬記憶體系統會允許超額認可實體記憶體，所以虛擬記憶體與實體記憶體的比率可超過 1:1。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-194">Virtual memory systems allow the over-commitment of physical memory, so that the ratio of virtual-to-physical memory can exceed 1:1.</span></span> <span data-ttu-id="aaf6b-195">因此，大型程式可以在各種實體記憶體組態的電腦上執行。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-195">As a result, larger programs can run on computers with a variety of physical memory configurations.</span></span> <span data-ttu-id="aaf6b-196">然而，使用的虛擬記憶體若遠大於所有處理序的平均工作集組合，可能會導致效能降低。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-196">However, using significantly more virtual memory than the combined average working sets of all the processes can cause poor performance.</span></span>  
  
 <span data-ttu-id="aaf6b-197">[最小伺服器記憶體] 和 [最大伺服器記憶體] 選項屬於進階選項。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-197">The **min server memory** and **max server memory** options are advanced options.</span></span> <span data-ttu-id="aaf6b-198">如果您要使用 **sp_configure** 系統預存程序來變更這些設定，只有當 **show advanced options** 設為 1 時，才能變更它們。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-198">If you are using the **sp_configure** system stored procedure to change these settings, you can change them only when **show advanced options** is set to 1.</span></span> <span data-ttu-id="aaf6b-199">這些設定會立即生效，不需要重新啟動伺服器。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-199">These settings take effect immediately without a server restart.</span></span>  
  
## <a name="running-multiple-instances-of-sql-server"></a><span data-ttu-id="aaf6b-200">執行 SQL Server 的多個執行個體</span><span class="sxs-lookup"><span data-stu-id="aaf6b-200">Running Multiple Instances of SQL Server</span></span>  
 <span data-ttu-id="aaf6b-201">當您執行 [!INCLUDE[ssDE](../../includes/ssde-md.md)] 的多個執行個體時，您有三個方式可以用來管理記憶體：</span><span class="sxs-lookup"><span data-stu-id="aaf6b-201">When you are running multiple instances of the [!INCLUDE[ssDE](../../includes/ssde-md.md)], there are three approaches you can use to manage memory:</span></span>  
  
-   <span data-ttu-id="aaf6b-202">使用 [最大伺服器記憶體]\*\*\*\* 來控制記憶體使用量。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-202">Use **max server memory** to control memory usage.</span></span> <span data-ttu-id="aaf6b-203">建立每一個執行個體的最大設定值，注意，扣除總額不大於機器的總實體記憶體。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-203">Establish maximum settings for each instance, being careful that the total allowance is not more than the total physical memory on your machine.</span></span> <span data-ttu-id="aaf6b-204">您想要提供與執行個體的預期工作負載或資料庫大小成比例的記憶體給每一個執行個體。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-204">You might want to give each instance memory proportional to its expected workload or database size.</span></span> <span data-ttu-id="aaf6b-205">此方式的優點是當新的處理序或執行個體啟動時，立刻有記憶體可用。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-205">This approach has the advantage that when new processes or instances start up, free memory will be available to them immediately.</span></span> <span data-ttu-id="aaf6b-206">缺點是，如果您不是執行所有執行個體，則任何執行中執行個體都不能利用剩餘可用的記憶體。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-206">The drawback is that if you are not running all of the instances, none of the running instances will be able to utilize the remaining free memory.</span></span>  
  
-   <span data-ttu-id="aaf6b-207">使用 [最小伺服器記憶體]\*\*\*\* 來控制記憶體使用量。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-207">Use **min server memory** to control memory usage.</span></span> <span data-ttu-id="aaf6b-208">建立每一個執行個體的最小設定值，使這些最小值的總和小於機器的總實體記憶體 1-2 GB。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-208">Establish minimum settings for each instance, so that the sum of these minimums is 1-2 GB less than the total physical memory on your machine.</span></span> <span data-ttu-id="aaf6b-209">同樣地，您可以建立與該執行個體的預期負載成比例的最小值。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-209">Again, you may establish these minimums proportionately to the expected load of that instance.</span></span> <span data-ttu-id="aaf6b-210">此方式的優點是，若沒有同時執行所有執行個體，則執行的執行個體可使用剩餘可用的記憶體。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-210">This approach has the advantage that if not all instances are running at the same time, the ones that are running can use the remaining free memory.</span></span> <span data-ttu-id="aaf6b-211">當電腦上有另一個記憶體密集處理序時，此方法也很有用，因為它可確保 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 至少取得合理的記憶體數量。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-211">This approach is also useful when there is another memory-intensive process on the computer, since it would insure that [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] would at least get a reasonable amount of memory.</span></span> <span data-ttu-id="aaf6b-212">其缺點是，當新的執行個體 (或任何其他處理序) 啟動時，執行中的執行個體可能需要花一些時間來釋出記憶體，尤其如果它們必須將已修改的頁面寫回其資料庫才能這麼做的話。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-212">The drawback is that when a new instance (or any other process) starts, it may take some time for the running instances to release memory, especially if they must write modified pages back to their databases to do so.</span></span>  
  
-   <span data-ttu-id="aaf6b-213">不執行任何動作 (不建議)。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-213">Do nothing (not recommended).</span></span> <span data-ttu-id="aaf6b-214">有呈現工作負載的前幾個執行個體傾向於配置所有記憶體。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-214">The first instances presented with a workload will tend to allocate all of memory.</span></span> <span data-ttu-id="aaf6b-215">閒置執行個體或稍後啟動的執行個體最後可能只剩少量的記憶體可用。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-215">Idle instances, or instances started later, may end up running with only a minimal amount of memory available.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="aaf6b-216">不會嘗試在執行個體之間平衡記憶體使用量。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-216">makes no attempt to balance memory usage across instances.</span></span> <span data-ttu-id="aaf6b-217">不過，所有執行個體將回應 Windows 記憶體通知訊號，以便調整其記憶體使用量的大小。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-217">All instances will, however, respond to Windows Memory Notification signals to adjust the size of their memory footprint.</span></span> <span data-ttu-id="aaf6b-218">Windows 不會平衡具有記憶體通知 API 的應用程式之間的記憶體。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-218">Windows does not balance memory across applications with the Memory Notification API.</span></span> <span data-ttu-id="aaf6b-219">它只提供對系統上記憶體可用性的全域回應。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-219">It merely provides global feedback as to the availability of memory on the system.</span></span>  
  
 <span data-ttu-id="aaf6b-220">您可以變更這些設定，而不必重新啟動執行個體，因此，您可以輕易體驗來尋找使用模式的最佳設定。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-220">You can change these settings without restarting the instances, so you can easily experiment to find the best settings for your usage pattern.</span></span>  
  
## <a name="providing-the-maximum-amount-of-memory-to-sql-server"></a><span data-ttu-id="aaf6b-221">提供最大的記憶體量給 SQL Server</span><span class="sxs-lookup"><span data-stu-id="aaf6b-221">Providing the Maximum Amount of Memory to SQL Server</span></span>  
  
||<span data-ttu-id="aaf6b-222">32 位元</span><span class="sxs-lookup"><span data-stu-id="aaf6b-222">32-bit</span></span>|<span data-ttu-id="aaf6b-223">64 位元</span><span class="sxs-lookup"><span data-stu-id="aaf6b-223">64-bit</span></span>|  
|-|-------------|-------------|  
|<span data-ttu-id="aaf6b-224">傳統記憶體</span><span class="sxs-lookup"><span data-stu-id="aaf6b-224">Conventional memory</span></span>|<span data-ttu-id="aaf6b-225">在所有 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 版本中，處理虛擬位址空間的最大限制：</span><span class="sxs-lookup"><span data-stu-id="aaf6b-225">Up to process virtual address space limit in all [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] editions:</span></span><br /><br /> <span data-ttu-id="aaf6b-226">2 GB</span><span class="sxs-lookup"><span data-stu-id="aaf6b-226">2 GB</span></span><br /><br /> <span data-ttu-id="aaf6b-227">使用 **/3gb**開機參數的 3 GB \*</span><span class="sxs-lookup"><span data-stu-id="aaf6b-227">3 GB with **/3gb** boot parameter\*</span></span><br /><br /> <span data-ttu-id="aaf6b-228">在 WOW64 上為 4 GB\*\*</span><span class="sxs-lookup"><span data-stu-id="aaf6b-228">4 GB on WOW64\*\*</span></span>|<span data-ttu-id="aaf6b-229">在所有 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 版本中，處理虛擬位址空間的最大限制：</span><span class="sxs-lookup"><span data-stu-id="aaf6b-229">Up to process virtual address space limit in all [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] editions:</span></span><br /><br /> <span data-ttu-id="aaf6b-230">在 x64 架構上為 8 TB</span><span class="sxs-lookup"><span data-stu-id="aaf6b-230">8 TB on x64 architecture</span></span>|  
  
 <span data-ttu-id="aaf6b-231">\***/3gb**是作業系統開機參數。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-231">\***/3gb** is an operating-system boot parameter.</span></span> <span data-ttu-id="aaf6b-232">如需詳細資訊，請造訪[MSDN library](https://go.microsoft.com/fwlink/?LinkID=10257&clcid=0x409)。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-232">For more information, visit the [MSDN Library](https://go.microsoft.com/fwlink/?LinkID=10257&clcid=0x409).</span></span>  
  
 <span data-ttu-id="aaf6b-233">\* \* WOW64 (windows on Windows 64) 是在 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 64 位作業系統上執行32位的模式。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-233">\*\*WOW64 (Windows on Windows 64) is a mode in which 32-bit [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] runs on a 64-bit operating system.</span></span> <span data-ttu-id="aaf6b-234">如需詳細資訊，請造訪[MSDN library](https://go.microsoft.com/fwlink/?LinkID=10257&clcid=0x409)。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-234">For more information, visit the [MSDN Library](https://go.microsoft.com/fwlink/?LinkID=10257&clcid=0x409).</span></span>  
  
## <a name="examples"></a><span data-ttu-id="aaf6b-235">範例</span><span class="sxs-lookup"><span data-stu-id="aaf6b-235">Examples</span></span>  
  
### <a name="example-a"></a><span data-ttu-id="aaf6b-236">範例 A</span><span class="sxs-lookup"><span data-stu-id="aaf6b-236">Example A</span></span>  
 <span data-ttu-id="aaf6b-237">下列範例會將 `max server memory` 選項設定為 4 GB：</span><span class="sxs-lookup"><span data-stu-id="aaf6b-237">The following example sets the `max server memory` option to 4 GB:</span></span>  
  
```  
sp_configure 'show advanced options', 1;  
GO  
RECONFIGURE;  
GO  
sp_configure 'max server memory', 4096;  
GO  
RECONFIGURE;  
GO  
```  
  
### <a name="example-b-determining-current-memory-allocation"></a><span data-ttu-id="aaf6b-238">範例 B：決定目前的記憶體配置</span><span class="sxs-lookup"><span data-stu-id="aaf6b-238">Example B. Determining Current Memory Allocation</span></span>  
 <span data-ttu-id="aaf6b-239">以下查詢會傳回目前配置之記憶體的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="aaf6b-239">The following query returns information about currently allocated memory.</span></span>  
  
```  
SELECT  
(physical_memory_in_use_kb/1024) AS Memory_usedby_Sqlserver_MB,  
(locked_page_allocations_kb/1024) AS Locked_pages_used_Sqlserver_MB,  
(total_virtual_address_space_kb/1024) AS Total_VAS_in_MB,  
process_physical_memory_low,  
process_virtual_memory_low  
FROM sys.dm_os_process_memory;  
```  
  
## <a name="see-also"></a><span data-ttu-id="aaf6b-240">另請參閱</span><span class="sxs-lookup"><span data-stu-id="aaf6b-240">See Also</span></span>  
 <span data-ttu-id="aaf6b-241">[效能的監視與微調](../../relational-databases/performance/monitor-and-tune-for-performance.md) </span><span class="sxs-lookup"><span data-stu-id="aaf6b-241">[Monitor and Tune for Performance](../../relational-databases/performance/monitor-and-tune-for-performance.md) </span></span>  
 <span data-ttu-id="aaf6b-242">[RECONFIGURE &#40;Transact-SQL&#41;](/sql/t-sql/language-elements/reconfigure-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="aaf6b-242">[RECONFIGURE &#40;Transact-SQL&#41;](/sql/t-sql/language-elements/reconfigure-transact-sql) </span></span>  
 <span data-ttu-id="aaf6b-243">[伺服器組態選項 &#40;SQL Server&#41;](server-configuration-options-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="aaf6b-243">[Server Configuration Options &#40;SQL Server&#41;](server-configuration-options-sql-server.md) </span></span>  
 [<span data-ttu-id="aaf6b-244">sp_configure &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="aaf6b-244">sp_configure &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-configure-transact-sql)  
  
  
