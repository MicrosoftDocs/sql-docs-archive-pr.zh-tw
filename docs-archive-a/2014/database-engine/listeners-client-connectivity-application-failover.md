---
title: 可用性群組接聽程式、用戶端連接和應用程式容錯移轉 (SQL Server) |Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- Availability Groups [SQL Server], listeners
- read-only routing
- read-intent connections [AlwaysOn Availability Groups]
- Availability Groups [SQL Server], configuring
- Availability Groups [SQL Server], read-only routing
- Availability Groups [SQL Server], client connectivity
ms.assetid: 76fb3eca-6b08-4610-8d79-64019dd56c44
author: rothja
ms.author: jroth
ms.openlocfilehash: f66046625ca0078904e9555d1cf586873b9f697f
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87698500"
---
# <a name="availability-group-listeners-client-connectivity-and-application-failover-sql-server"></a><span data-ttu-id="57741-102">可用性群組接聽程式、用戶端連接及應用程式容錯移轉 (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="57741-102">Availability Group Listeners, Client Connectivity, and Application Failover (SQL Server)</span></span>
  <span data-ttu-id="57741-103">此主題包含有關 [!INCLUDE[ssHADR](../includes/sshadr-md.md)] 用戶端連接和應用程式容錯移轉功能的考量資訊。</span><span class="sxs-lookup"><span data-stu-id="57741-103">This topic contains information about considerations for [!INCLUDE[ssHADR](../includes/sshadr-md.md)] client connectivity and application-failover functionality.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="57741-104">對於大多數的一般接聽程式組態，您只需要使用 [!INCLUDE[tsql](../includes/tsql-md.md)] 陳述式或 PowerShell 指令程式，就可以建立第一個可用性群組接聽程式。</span><span class="sxs-lookup"><span data-stu-id="57741-104">For the majority of the common listener configurations, you can create the first availability group listener simply by using [!INCLUDE[tsql](../includes/tsql-md.md)] statements or PowerShell cmdlets.</span></span> <span data-ttu-id="57741-105">如需詳細資訊，請參閱本主題稍後的 [相關工作](#RelatedTasks)。</span><span class="sxs-lookup"><span data-stu-id="57741-105">For more information, see [Related Tasks](#RelatedTasks), later in this topic.</span></span>  
  
 
  
##  <a name="availability-group-listeners"></a><a name="AGlisteners"></a> <span data-ttu-id="57741-106">可用性群組接聽程式</span><span class="sxs-lookup"><span data-stu-id="57741-106">Availability Group Listeners</span></span>  
 <span data-ttu-id="57741-107">您可以透過建立可用性群組接聽程式，將用戶端連接提供給給定可用性群組的資料庫。</span><span class="sxs-lookup"><span data-stu-id="57741-107">You can provide client connectivity to the database of a given availability group by creating an availability group listener.</span></span> <span data-ttu-id="57741-108">可用性群組接聽程式是用戶端可連接的虛擬網路名稱 (VNN)，以便存取 AlwaysOn 可用性群組之主要或次要複本中的資料庫。</span><span class="sxs-lookup"><span data-stu-id="57741-108">An availability group listener is a virtual network name (VNN) to which clients can connect in order to access a database in a primary or secondary replica of an AlwaysOn availability group.</span></span> <span data-ttu-id="57741-109">可用性群組接聽程式讓用戶端不需要知道用戶端所連接的 SQL Server 實體執行個體名稱，即可連接至可用性複本。</span><span class="sxs-lookup"><span data-stu-id="57741-109">An availability group listener enables a client to connect to an availability replica without knowing the name of the physical instance of SQL Server to which the client is connecting.</span></span>  <span data-ttu-id="57741-110">不需要修改用戶端連接字串，即可連接到目前主要複本的目前位置。</span><span class="sxs-lookup"><span data-stu-id="57741-110">The client connection string does not need to be modified to connect to the current location of the current primary replica.</span></span>  
  
 <span data-ttu-id="57741-111">可用性群組接聽程式是由網域名稱系統 (DNS) 接聽程式名稱、接聽程式通訊埠指定和一個或多個 IP 位址所組成。</span><span class="sxs-lookup"><span data-stu-id="57741-111">An availability group listener consists of a Domain Name System (DNS) listener name, listener port designation, and one or more IP addresses.</span></span> <span data-ttu-id="57741-112">可用性群組接聽程式只支援 TCP 通訊協定。</span><span class="sxs-lookup"><span data-stu-id="57741-112">Only the TCP protocol is supported by availability group listener.</span></span>  <span data-ttu-id="57741-113">接聽程式的 DNS 名稱在網域中和在 NetBIOS 中必須是唯一的。</span><span class="sxs-lookup"><span data-stu-id="57741-113">The DNS name of the listener must also be unique in the domain and in NetBIOS.</span></span>  <span data-ttu-id="57741-114">當您建立新的可用性群組接聽程式時，它會成為叢集中具有相關虛擬網路名稱 (VNN)、虛擬 IP (VIP)，以及可用性群組相依性的資源。</span><span class="sxs-lookup"><span data-stu-id="57741-114">When you create a new availability group listener it becomes a resource in a cluster with an associated virtual network name (VNN), virtual IP (VIP), and availability group dependency.</span></span> <span data-ttu-id="57741-115">用戶端使用 DNS 將 VNN 解析為多個 IP 位址，然後嘗試連接到每個位址，直到連接要求成功為止，或直到連接要求逾時為止。</span><span class="sxs-lookup"><span data-stu-id="57741-115">A client uses DNS to resolve the VNN into multiple IP addresses and then tries to connect to each address, until a connection request succeeds or until the connection requests time out.</span></span>  
  
 <span data-ttu-id="57741-116">如果一或多個[可讀取的次要複本](availability-groups/windows/active-secondaries-readable-secondary-replicas-always-on-availability-groups.md)設定為唯讀路由，主要複本的讀取意圖用戶端連接會重新導向至可讀取的次要複本。</span><span class="sxs-lookup"><span data-stu-id="57741-116">If read-only routing is configured for one or more[readable secondary replicas](availability-groups/windows/active-secondaries-readable-secondary-replicas-always-on-availability-groups.md), read-intent client connections to the primary replica are redirected to a readable secondary replica.</span></span> <span data-ttu-id="57741-117">此外，如果主要複本在某個 SQL Server 執行個體上離線，而且在另一個 SQL Server 執行個體上新的主要複本變為上線，可用性群組接聽程式會將用戶端連接到新的主要複本。</span><span class="sxs-lookup"><span data-stu-id="57741-117">Also, if the primary replica goes offline on one instance of SQL Server, and a new primary replica comes online on another instance of SQL Server, the availability group listener enables clients to connect to the new primary replica.</span></span>  
  
 <span data-ttu-id="57741-118">如需可用性群組接聽程式的詳細資訊，請參閱 [建立或設定可用性群組接聽程式 &#40;SQL Server&#41;](availability-groups/windows/create-or-configure-an-availability-group-listener-sql-server.md)。</span><span class="sxs-lookup"><span data-stu-id="57741-118">For essential information about availability group listeners, see [Create or Configure an Availability Group Listener &#40;SQL Server&#41;](availability-groups/windows/create-or-configure-an-availability-group-listener-sql-server.md).</span></span>  
  
 
  
###  <a name="availability-group-listener-configuration"></a><a name="AGlConfig"></a> <span data-ttu-id="57741-119">可用性群組接聽程式組態</span><span class="sxs-lookup"><span data-stu-id="57741-119">Availability Group Listener Configuration</span></span>  
 <span data-ttu-id="57741-120">可用性群組接聽程式是由下列所定義：</span><span class="sxs-lookup"><span data-stu-id="57741-120">An availability group listener is defined by the following:</span></span>  
  
 <span data-ttu-id="57741-121">唯一的 DNS 名稱</span><span class="sxs-lookup"><span data-stu-id="57741-121">A unique DNS name</span></span>  
 <span data-ttu-id="57741-122">這也稱為虛擬網路名稱 (VNN)。</span><span class="sxs-lookup"><span data-stu-id="57741-122">This is also known as a Virtual Network Name (VNN).</span></span> <span data-ttu-id="57741-123">套用 DNS 主機名稱的 Active Directory 命名規則。</span><span class="sxs-lookup"><span data-stu-id="57741-123">Active Directory naming rules for DNS host names apply.</span></span> <span data-ttu-id="57741-124">如需詳細資訊，請參閱 [Active Directory 中的電腦、網域、站台及 OU 的命名慣例](https://support.microsoft.com/kb/909264) 知識庫文件。</span><span class="sxs-lookup"><span data-stu-id="57741-124">For more information, see the [Naming conventions in Active Directory for computers, domains, sites, and OUs](https://support.microsoft.com/kb/909264) KB article.</span></span>  
  
 <span data-ttu-id="57741-125">一個或多個虛擬 IP 位址 (VIP)</span><span class="sxs-lookup"><span data-stu-id="57741-125">One or more Virtual IP addresses (VIPs)</span></span>  
 <span data-ttu-id="57741-126">為可用性群組可容錯移轉的一個或多個目標子網路設定 VIP。</span><span class="sxs-lookup"><span data-stu-id="57741-126">VIPs are configured for one or more subnets to which the availability group can failover.</span></span>  
  
 <span data-ttu-id="57741-127">IP 位址組態</span><span class="sxs-lookup"><span data-stu-id="57741-127">IP address configuration</span></span>  
 <span data-ttu-id="57741-128">對於給定的可用性群組接聽程式而言，此 IP 位址會使用動態主機設定通訊協定 (DHCP) 或一個或多個靜態 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="57741-128">For a given availability group listener, the IP address uses either Dynamic Host Configuration Protocol (DHCP) or one or more static IP addresses.</span></span>  
  
-   <span data-ttu-id="57741-129">動態主機設定通訊協定 (DHCP)</span><span class="sxs-lookup"><span data-stu-id="57741-129">Dynamic Host Configuration Protocol (DHCP)</span></span>  
  
     <span data-ttu-id="57741-130">如果可用性群組位於單一子網路，您可以設定所有的可用性群組接聽程式 IP 位址使用 DHCP。</span><span class="sxs-lookup"><span data-stu-id="57741-130">If an availability group resides on a single subnet, you can configure all the availability group listener IP addresses to use DHCP.</span></span> <span data-ttu-id="57741-131">如果是實際執行之前的環境，DHCP 會針對不需要災害復原至另一個子網路上的遠端網站的可用性群組提供簡單設定。</span><span class="sxs-lookup"><span data-stu-id="57741-131">For pre-production environments, DHCP offers an easy setup for an availability group that does not require disaster recovery to a remote site on a separate subnet.</span></span> <span data-ttu-id="57741-132">但是，您不應該在實際執行環境中搭配可用性群組接聽程式使用 DHCP。</span><span class="sxs-lookup"><span data-stu-id="57741-132">However, you should not use DHCP in conjunction with an availability group listener in a production environment.</span></span> <span data-ttu-id="57741-133">這是因為在停機時，如果 DHCP IP 租用過期，則需要額外的時間來重新註冊與接聽程式 DNS 名稱相關聯的新 DHCP IP 位址。</span><span class="sxs-lookup"><span data-stu-id="57741-133">This is because, in the event of down time, if the DHCP IP lease expires, extra time is required to re-register the new DHCP IP address associated with the listener DNS name.</span></span> <span data-ttu-id="57741-134">額外的時間將會造成用戶端連接失敗。</span><span class="sxs-lookup"><span data-stu-id="57741-134">The extra time will cause client-connection failure.</span></span>  
  
-   <span data-ttu-id="57741-135">靜態 IP 位址</span><span class="sxs-lookup"><span data-stu-id="57741-135">Static IP addresses</span></span>  
  
     <span data-ttu-id="57741-136">在實際執行環境中，我們建議可用性群組接聽程式使用靜態 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="57741-136">In production environments, we recommend that availability group listeners use static IP addresses.</span></span> <span data-ttu-id="57741-137">此外，在可用性群組橫跨多重子網路網域的多個子網路時，可用性群組接聽程式必須使用靜態 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="57741-137">Furthermore, where availability groups extend across subnets in a multi-subnet domain, an availability group listener must use static IP addresses.</span></span>  
  
 <span data-ttu-id="57741-138">可用性群組接聽程式不支援混合網路組態和跨子網路的 DHCP。</span><span class="sxs-lookup"><span data-stu-id="57741-138">Hybrid network configurations and DHCP across subnets are not supported for availability group listeners.</span></span> <span data-ttu-id="57741-139">這是因為當發生容錯移轉時，動態 IP 可能會過期或釋出，而威脅整體高可用性。</span><span class="sxs-lookup"><span data-stu-id="57741-139">This is because when a failover happens, a dynamic IP might expire or be released, which jeopardizes overall high availability.</span></span>  
  
###  <a name="selecting-an-availability-group-listener-port"></a><a name="SelectListenerPort"></a> <span data-ttu-id="57741-140">選取可用性群組接聽程式通訊埠</span><span class="sxs-lookup"><span data-stu-id="57741-140">Selecting an Availability Group Listener Port</span></span>  
 <span data-ttu-id="57741-141">當您設定可用性群組接聽程式時，必須指定通訊埠。</span><span class="sxs-lookup"><span data-stu-id="57741-141">When configuring an availability group listener, you must designate a port.</span></span>  <span data-ttu-id="57741-142">您可以將預設通訊埠設定為 1433，以便提供用戶端連接字串的簡易性。</span><span class="sxs-lookup"><span data-stu-id="57741-142">You can configure the default port to 1433 in order to allow for simplicity of the client connection strings.</span></span> <span data-ttu-id="57741-143">如果使用 1433，則不需要在連接字串中指定通訊埠編號。</span><span class="sxs-lookup"><span data-stu-id="57741-143">If using 1433, you do not need to designate a port number in a connection string.</span></span>   <span data-ttu-id="57741-144">此外，因為每個可用性群組接聽程式都有個別的虛擬網路名稱，所以單一 WSFC 上設定的每個可用性群組接聽程式都可以設定為參考相同的預設通訊埠 1433。</span><span class="sxs-lookup"><span data-stu-id="57741-144">Also, since each availability group listener will have a separate virtual network name, each availability group listener configured on a single WSFC can be configured to reference the same default port of 1433.</span></span>  
  
 <span data-ttu-id="57741-145">您也可以指定非標準接聽程式通訊埠，但這表示每當連接到可用性群組接聽程式時，您也需要在連接字串中明確指定目標通訊埠。</span><span class="sxs-lookup"><span data-stu-id="57741-145">You can also designate a non-standard listener port; however this means that you will also need to explicitly specify a target port in your connection string whenever connecting to the availability group listener.</span></span>  <span data-ttu-id="57741-146">此外，也需要在防火牆上開啟非標準通訊埠的權限。</span><span class="sxs-lookup"><span data-stu-id="57741-146">You will also need to open permission on the firewall for the non-standard port.</span></span>  
  
 <span data-ttu-id="57741-147">如果您將預設通訊埠 1433 用於可用性群組接聽程式 VNN，仍然需要確定叢集節點上沒有其他服務正在使用此通訊埠，否則會導致通訊埠衝突。</span><span class="sxs-lookup"><span data-stu-id="57741-147">If you use the default port of 1433 for availability group listener VNNs, you will still need to ensure that no other services on the cluster node are using this port; otherwise this would cause a port conflict.</span></span>  
  
 <span data-ttu-id="57741-148">如果其中一個 SQL Server 執行個體已經透過執行個體接聽程式在 TCP 通訊埠 1433 上接聽，而且在電腦上沒有其他服務 (包括其他 SQL Server 執行個體) 正在通訊埠 1433 上接聽，就不會導致與可用性群組接聽程式通訊埠相衝突。</span><span class="sxs-lookup"><span data-stu-id="57741-148">If one of the instances of SQL Server is already listening on TCP port 1433 via the instance listener and there are no other services (including additional instances of SQL Server) on the computer listening on port 1433, this will not cause a port conflict with the availability group listener.</span></span>  <span data-ttu-id="57741-149">這是因為可用性群組接聽程式可在同一個服務處理序內共用相同的 TCP 通訊埠。</span><span class="sxs-lookup"><span data-stu-id="57741-149">This is because the availability group listener can share the same TCP port inside the same service process.</span></span>  <span data-ttu-id="57741-150">但是不應該將多個 SQL Server (並存) 執行個體設定為在相同通訊埠上接聽。</span><span class="sxs-lookup"><span data-stu-id="57741-150">However multiple instances of SQL Server (side-by-side)should not be configured to listen on the same port.</span></span>  
  
##  <a name="using-a-listener-to-connect-to-the-primary-replica"></a><a name="ConnectToPrimary"></a><span data-ttu-id="57741-151">使用接聽程式連接到主要複本</span><span class="sxs-lookup"><span data-stu-id="57741-151">Using a Listener to Connect to the Primary Replica</span></span>  
 <span data-ttu-id="57741-152">若要使用可用性群組接聽程式，連接到主要複本進行讀寫存取，連接字串要指定可用性群組接聽程式 DNS 名稱。</span><span class="sxs-lookup"><span data-stu-id="57741-152">To use an availability group listener to connect to the primary replica for read-write access, the connection string specifies the availability group listener DNS name.</span></span>  <span data-ttu-id="57741-153">如果可用性群組主要複本變更為新複本，使用可用性群組接聽程式網路名稱的現有連接會中斷連接。</span><span class="sxs-lookup"><span data-stu-id="57741-153">If an availability group primary replica changes to a new replica, existing connections that use an availability group listener's network name are disconnected.</span></span>  <span data-ttu-id="57741-154">然後對可用性群組接聽程式的新連接會被導向至新的主要複本。</span><span class="sxs-lookup"><span data-stu-id="57741-154">New connections to the availability group listener are then directed to the new primary replica.</span></span> <span data-ttu-id="57741-155">ADO.NET 提供者 (System.Data.SqlClient) 的基本連接字串範例如下：</span><span class="sxs-lookup"><span data-stu-id="57741-155">An example of a basic connection string for the ADO.NET provider (System.Data.SqlClient) is as follows:</span></span>  
  
```  
Server=tcp: AGListener,1433;Database=MyDB;IntegratedSecurity=SSPI  
```  
  
 <span data-ttu-id="57741-156">您仍然可以選擇直接參考主要或次要複本的 SQL Server 執行個體名稱，而不使用可用性群組接聽程式名稱，不過如果選擇這樣做，便無法享有新連接自動導向至目前主要複本的好處。</span><span class="sxs-lookup"><span data-stu-id="57741-156">You can still choose to directly reference the instance of SQL Server name of the primary or secondary replicas instead of using the availability group listener server name, however if you choose to do so you will lose the benefit of new connections being directed automatically to the current primary replica.</span></span>  <span data-ttu-id="57741-157">此外，也無法享有唯讀路由的好處。</span><span class="sxs-lookup"><span data-stu-id="57741-157">You will also lose the benefit of read-only routing.</span></span>  
  
##  <a name="using-a-listener-to-connect-to-a-read-only-secondary-replica-read-only-routing"></a><a name="ConnectToSecondary"></a> <span data-ttu-id="57741-158">使用接聽程式連接到唯讀次要複本 (唯讀路由)</span><span class="sxs-lookup"><span data-stu-id="57741-158">Using a Listener to Connect to a Read-Only Secondary Replica (Read-Only Routing)</span></span>  
 <span data-ttu-id="57741-159">「唯讀路由」\*\* 是 [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] 的功能，可將對可用性群組接聽程式的內送連接路由至設為允許唯讀工作負載的次要複本。</span><span class="sxs-lookup"><span data-stu-id="57741-159">*Read-only routing* refers to the ability of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] to route incoming connections to an availability group listener to a secondary replica that is configured to allow read-only workloads.</span></span> <span data-ttu-id="57741-160">只有在下列條件成立時，參考可用性群組接聽程式名稱的內送連接才會自動路由至唯讀複本：</span><span class="sxs-lookup"><span data-stu-id="57741-160">An incoming connection referencing an availability group listener name can automatically be routed to a read-only replica if the following are true:</span></span>  
  
-   <span data-ttu-id="57741-161">至少一個次要複本設定為唯讀存取，而且每個唯讀次要複本和主要複本都設定為支援唯讀路由。</span><span class="sxs-lookup"><span data-stu-id="57741-161">At least one secondary replica is set to read-only access, and each read-only secondary replica and the primary replica are configured to support read-only routing.</span></span> <span data-ttu-id="57741-162">如需詳細資訊，請參閱本節稍後的 [若要將可用性複本設定為唯讀路由](#ConfigureARsForROR)。</span><span class="sxs-lookup"><span data-stu-id="57741-162">For more information, see [To Configure Availability Replicas for Read-Only Routing](#ConfigureARsForROR), later in this section.</span></span>  
  
-   <span data-ttu-id="57741-163">連接字串參考可用性群組接聽程式，而且內送連接的應用程式意圖設定為唯讀，例如，透過在 ODBC 或 OLEDB 連接字串或連接屬性 (attribute) 或屬性 (property) 中使用 **Application Intent=ReadOnly** 關鍵字。</span><span class="sxs-lookup"><span data-stu-id="57741-163">The connection string references an availability group listener, and the application intent of the incoming connection is set to read-only (for example, by using the **Application Intent=ReadOnly** keyword in the ODBC or OLEDB connection strings or connection attributes or properties).</span></span> <span data-ttu-id="57741-164">如需詳細資訊，請參閱本節稍後的 [唯讀應用程式意圖和唯讀路由](#ReadOnlyAppIntent)。</span><span class="sxs-lookup"><span data-stu-id="57741-164">For more information, see [Read-Only Application Intent and Read-Only Routing](#ReadOnlyAppIntent), later in this section.</span></span>  
  
###  <a name="to-configure-availability-replicas-for-read-only-routing"></a><a name="ConfigureARsForROR"></a> <span data-ttu-id="57741-165">若要將可用性複本設定為唯讀路由</span><span class="sxs-lookup"><span data-stu-id="57741-165">To Configure Availability Replicas for Read-Only Routing</span></span>  
 <span data-ttu-id="57741-166">資料庫管理員必須設定可用性複本，如下所示：</span><span class="sxs-lookup"><span data-stu-id="57741-166">A database administrator must configure the availability replicas as follows:</span></span>  
  
1.  <span data-ttu-id="57741-167">針對每個要設定為可讀取次要複本的可用性複本，資料庫管理員必須設定下列設定 (只在次要角色之下才有效)：</span><span class="sxs-lookup"><span data-stu-id="57741-167">For each availability replica that you want to configure as a readable secondary replica, a database administrator must configure the following settings, which take effect only under the secondary role:</span></span>  
  
    -   <span data-ttu-id="57741-168">連接存取權必須設定為 [全部] 或 [唯讀]。</span><span class="sxs-lookup"><span data-stu-id="57741-168">Connection access must be set to "all" or "read only".</span></span>  
  
    -   <span data-ttu-id="57741-169">必須指定唯讀路由 URL。</span><span class="sxs-lookup"><span data-stu-id="57741-169">The read-only routing URL must be specified.</span></span>  
  
2.  <span data-ttu-id="57741-170">對於每個這些複本，必須為主要角色指定唯讀路由清單。</span><span class="sxs-lookup"><span data-stu-id="57741-170">For each of these replicas, a read-only routing list must be specified for the primary role.</span></span> <span data-ttu-id="57741-171">指定一個或多個伺服器名稱做為路由目標。</span><span class="sxs-lookup"><span data-stu-id="57741-171">Specify one or more server names as routing targets.</span></span>  
  
####  <a name="related-tasks"></a><a name="RelatedTasksROR"></a> <span data-ttu-id="57741-172">相關工作</span><span class="sxs-lookup"><span data-stu-id="57741-172">Related Tasks</span></span>  
  
-   [<span data-ttu-id="57741-173">設定可用性複本的唯讀存取 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="57741-173">Configure Read-Only Access on an Availability Replica &#40;SQL Server&#41;</span></span>](availability-groups/windows/configure-read-only-access-on-an-availability-replica-sql-server.md)  
  
-   [<span data-ttu-id="57741-174">設定可用性群組的唯讀路由 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="57741-174">Configure Read-Only Routing for an Availability Group &#40;SQL Server&#41;</span></span>](availability-groups/windows/configure-read-only-routing-for-an-availability-group-sql-server.md)  
  
###  <a name="read-only-application-intent-and-read-only-routing"></a><a name="ReadOnlyAppIntent"></a><span data-ttu-id="57741-175">唯讀應用程式意圖和唯讀路由</span><span class="sxs-lookup"><span data-stu-id="57741-175">Read-Only Application Intent and Read-Only Routing</span></span>  
 <span data-ttu-id="57741-176">應用程式意圖連接字串屬性表示用戶端應用程式要導向至讀寫或唯讀可用性群組資料庫版本的要求。</span><span class="sxs-lookup"><span data-stu-id="57741-176">The application intent connection string property expresses the client application's request to be directed either to a read-write or read-only version of an availability group database.</span></span> <span data-ttu-id="57741-177">若要使用唯讀路由，在連接到可用性群組接聽程式時，用戶端必須使用連接字串中設為唯讀的應用程式意圖。</span><span class="sxs-lookup"><span data-stu-id="57741-177">To use read-only routing, a client must use an application intent of read-only in the connection string when connecting to the availability group listener.</span></span> <span data-ttu-id="57741-178">如果沒有唯讀的應用程式意圖，可用性群組接聽程式的連接會被導向至主要複本的資料庫。</span><span class="sxs-lookup"><span data-stu-id="57741-178">Without the read-only application intent, connections to the availability group listener are directed to the database on the primary replica.</span></span>  
  
 <span data-ttu-id="57741-179">應用程式意圖屬性在登入期間是儲存在用戶端的工作階段，然後 SQL Server 會處理此意圖，並依據可用性群組的設定和次要複本中目標資料庫的目前讀寫狀態，決定要執行的動作。</span><span class="sxs-lookup"><span data-stu-id="57741-179">The application intent attribute is stored in the client's session during login and the instance of SQL Server will then process this intent and determine what to do according to the configuration of the availability group and the current read-write state of the target database in the secondary replica.</span></span>  
  
 <span data-ttu-id="57741-180">指定唯讀應用程式意圖之 ADO.NET 提供者 (System.Data.SqlClient) 的連接字串範例如下：</span><span class="sxs-lookup"><span data-stu-id="57741-180">An example of a connection string for the ADO.NET provider (System.Data.SqlClient) that designates read-only application intent is as follows:</span></span>  
  
```  
Server=tcp:AGListener,1433;Database=AdventureWorks;IntegratedSecurity=SSPI;ApplicationIntent=ReadOnly  
```  
  
 <span data-ttu-id="57741-181">在這個連接字串範例中，用戶端嘗試連接到通訊埠 1433 (如果可用性群組接聽程式是在 1433 上接聽，也可以省略此通訊埠編號) 上名為 `AGListener` 的可用性群組接聽程式。</span><span class="sxs-lookup"><span data-stu-id="57741-181">In this connection string example, the client is attempting to connect to an availability group listener named `AGListener` on port 1433 (you may also omit the port if the availability group listener is listening on 1433).</span></span>  <span data-ttu-id="57741-182">連接字串將 `ApplicationIntent` 屬性設定為 `ReadOnly` ，使其成為*讀取意圖的連接字串*。</span><span class="sxs-lookup"><span data-stu-id="57741-182">The connection string has the `ApplicationIntent` property set to `ReadOnly`, making this a *read-intent connection string*.</span></span>  <span data-ttu-id="57741-183">如果沒有此設定，伺服器就不會嘗試唯讀路由連接。</span><span class="sxs-lookup"><span data-stu-id="57741-183">Without this setting, the server would not have attempted a read-only routing of the connection.</span></span>  
  
 <span data-ttu-id="57741-184">可用性群組的主要資料庫會處理內送唯讀路由要求，並嘗試找出已聯結至主要複本並設定為唯讀路由的線上唯讀複本。</span><span class="sxs-lookup"><span data-stu-id="57741-184">The primary database of the availability group processes the incoming read-only routing request and attempts to locate an online, read-only replica that is joined to the primary replica and is configured for read-only routing.</span></span>  <span data-ttu-id="57741-185">用戶端會從主要複本伺服器接收連接資訊，並連接到已識別的唯讀複本。</span><span class="sxs-lookup"><span data-stu-id="57741-185">The client receives back connection information from the primary replica server and connects to the identified read-only replica.</span></span>  
  
 <span data-ttu-id="57741-186">請注意，應用程式意圖可從用戶端驅動程式傳送至舊版 SQL Server 執行個體。</span><span class="sxs-lookup"><span data-stu-id="57741-186">Note that the application intent can be sent from a client driver to a down-level instance of SQL Server.</span></span>  <span data-ttu-id="57741-187">在此情況下，會忽略唯讀應用程式意圖，而且連接照常進行。</span><span class="sxs-lookup"><span data-stu-id="57741-187">In this case, application intent of read-only is ignored and the connection proceeds as normal.</span></span>  
  
 <span data-ttu-id="57741-188">您可以透過下列方式略過唯讀路由：不將應用程式意圖連接屬性設為 `ReadOnly` (若未指定，登入期間預設值為 `ReadWrite`)，或者直接連接到主要複本的 SQL Server 執行個體，而不使用可用性群組接聽程式名稱。</span><span class="sxs-lookup"><span data-stu-id="57741-188">You can bypass read-only routing by not setting the application intent connection property to `ReadOnly` (when not designated, the default is `ReadWrite` during login) or by connecting directly to the primary replica instance of SQL Server instead of using the availability group listener name.</span></span>  <span data-ttu-id="57741-189">如果您直接連接到唯讀複本，也不會發生唯讀路由。</span><span class="sxs-lookup"><span data-stu-id="57741-189">Read-only routing will also not occur if you connect directly to a read-only replica.</span></span>  
  
####  <a name="related-tasks"></a><a name="RelatedTasksApps"></a> <span data-ttu-id="57741-190">相關工作</span><span class="sxs-lookup"><span data-stu-id="57741-190">Related Tasks</span></span>  
  
-   [<span data-ttu-id="57741-191">高可用性/災害復原的 SQL Server Native Client 支援</span><span class="sxs-lookup"><span data-stu-id="57741-191">SQL Server Native Client Support for High Availability, Disaster Recovery</span></span>](../relational-databases/native-client/features/sql-server-native-client-support-for-high-availability-disaster-recovery.md)  
  
-   [<span data-ttu-id="57741-192">搭配 SQL Server Native Client 使用連接字串關鍵字</span><span class="sxs-lookup"><span data-stu-id="57741-192">Using Connection String Keywords with SQL Server Native Client</span></span>](../relational-databases/native-client/applications/using-connection-string-keywords-with-sql-server-native-client.md)  
  
##  <a name="bypassing-availability-group-listeners"></a><a name="BypassAGl"></a> <span data-ttu-id="57741-193">略過可用性群組接聽程式</span><span class="sxs-lookup"><span data-stu-id="57741-193">Bypassing Availability Group Listeners</span></span>  
 <span data-ttu-id="57741-194">雖然可用性群組接聽程式支援容錯移轉重新導向和唯讀路由，但用戶端連接不一定要使用它們。</span><span class="sxs-lookup"><span data-stu-id="57741-194">While availability group listeners enable support for failover redirection and read-only routing, client connections are not required to use them.</span></span> <span data-ttu-id="57741-195">用戶端連接也可以直接參考 SQL Server 執行個體，而不連接到可用性群組接聽程式。</span><span class="sxs-lookup"><span data-stu-id="57741-195">A client connection can also directly reference the instance of SQL Server instead of connecting to the availability group listener.</span></span>  
  
 <span data-ttu-id="57741-196">對 SQL Server 執行個體來說，登入連接是使用可用性群組接聽程式還是使用另一個執行個體端點，並沒有關係。</span><span class="sxs-lookup"><span data-stu-id="57741-196">To the instance of SQL Server it is irrelevant whether a connection logs in using the availability group listener or using another instance endpoint.</span></span>  <span data-ttu-id="57741-197">SQL Server 執行個體會確認目標資料庫的狀態，並依據可用性群組的組態和執行個體上資料庫的目前狀態，允許或不允許連接。</span><span class="sxs-lookup"><span data-stu-id="57741-197">The instance of SQL Server will verify the state of the targeted database and either allow or disallow connectivity based on the configuration of the availability group and the current state of the database on the instance.</span></span>  <span data-ttu-id="57741-198">例如，如果用戶端應用程式直接連接到 SQL Server 執行個體的通訊埠，連接到裝載於可用性群組的目標資料庫，而且目標資料庫處於主要狀態並已上線，連接就會成功。</span><span class="sxs-lookup"><span data-stu-id="57741-198">For example, if a client application connects directly to a instance of SQL Server port and connects to a target database hosted in an availability group, and the target database is in primary state and online, then connectivity will succeed.</span></span>  <span data-ttu-id="57741-199">如果目標資料庫處於離線狀態或處於轉換狀態，資料庫連接就會失敗。</span><span class="sxs-lookup"><span data-stu-id="57741-199">If the target database is offline or in a transitional state, connectivity to the database will fail.</span></span>  
  
 <span data-ttu-id="57741-200">另外，從資料庫鏡像移轉至 [!INCLUDE[ssHADR](../includes/sshadr-md.md)]時，只要僅一個次要複本存在且不允許使用者連接，應用程式就可以指定資料庫鏡像連接字串。</span><span class="sxs-lookup"><span data-stu-id="57741-200">Alternatively, while migrating from database mirroring to [!INCLUDE[ssHADR](../includes/sshadr-md.md)], applications can specify the database mirroring connection string as long as only one secondary replica exists and it disallows user connections.</span></span> <span data-ttu-id="57741-201">如需詳細資訊，請參閱本節稍後的 [資料庫鏡像連接字串與可用性群組搭配使用](#DbmConnectionString)。</span><span class="sxs-lookup"><span data-stu-id="57741-201">For more information, see [Using Database-Mirroring Connection Strings with Availability Groups](#DbmConnectionString), later in this section.</span></span>  
  
###  <a name="using-database-mirroring-connection-strings-with-availability-groups"></a><a name="DbmConnectionString"></a><span data-ttu-id="57741-202">搭配可用性群組使用資料庫鏡像連接字串</span><span class="sxs-lookup"><span data-stu-id="57741-202">Using Database-Mirroring Connection Strings with Availability Groups</span></span>  
 <span data-ttu-id="57741-203">如果可用性群組只擁有一個次要複本，而且未設定為允許以唯讀方式存取次要複本，則用戶端可以透過使用資料庫鏡像連接字串連接到主要複本。</span><span class="sxs-lookup"><span data-stu-id="57741-203">If an availability group possesses only one secondary replica and is not configured to allow read-access to the secondary replica, clients can connect to the primary replica by using a database mirroring connection string.</span></span> <span data-ttu-id="57741-204">從資料庫鏡像將現有的應用程式移轉到可用性群組時，這種方法會很實用，前提是您要將可用性群組限制為只能有兩個可用性複本 (一個主要複本和一個次要複本)。</span><span class="sxs-lookup"><span data-stu-id="57741-204">This approach can be useful while migrating an existing application from database mirroring to an availability group, as long as you limit the availability group to two availability replicas (a primary replica and one secondary replica).</span></span> <span data-ttu-id="57741-205">如果您加入其他次要複本，您需要為可用性群組建立可用性群組接聽程式，並更新您的應用程式使用可用性群組接聽程式 DNS 名稱。</span><span class="sxs-lookup"><span data-stu-id="57741-205">If you add additional secondary replicas, you will need to create an availability group listener for the availability group and update your applications to use the availability group listener DNS name.</span></span>  
  
 <span data-ttu-id="57741-206">當使用資料庫鏡像連接字串時，用戶端可以使用 [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Native Client 或 .NET Framework Data Provider for [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="57741-206">When using database mirroring connection strings, the client can use either [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Native Client or .NET Framework Data Provider for [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="57741-207">用戶端提供的連接字串至少必須提供一個伺服器執行個體名稱，也就是 *「初始夥伴名稱」* ，以識別一開始裝載您打算連接之可用性複本的伺服器執行個體。</span><span class="sxs-lookup"><span data-stu-id="57741-207">The connection string provided by a client must minimally supply the name of one server instance, the *initial partner name*, to identify the server instance that initially hosts the availability replica to which you intend to connect.</span></span> <span data-ttu-id="57741-208">此連接字串也可以選擇性地提供另一個伺服器執行個體的名稱，也就是 *「容錯移轉夥伴名稱」* (Failover Partner Name)，以識別一開始將次要複本裝載為容錯移轉夥伴名稱的伺服器執行個體。</span><span class="sxs-lookup"><span data-stu-id="57741-208">Optionally, the connection string can also supply the name of another server instance, the *failover partner name*, to identify the server instance that initially hosts the secondary replica as the failover partner name.</span></span>  
  
 <span data-ttu-id="57741-209">如需資料庫鏡像連接字串的詳細資訊，請參閱 [將用戶端連接至資料庫鏡像工作階段 &#40;SQL Server&#41;](database-mirroring/connect-clients-to-a-database-mirroring-session-sql-server.md)。</span><span class="sxs-lookup"><span data-stu-id="57741-209">For more information about database mirroring connection strings, see [Connect Clients to a Database Mirroring Session &#40;SQL Server&#41;](database-mirroring/connect-clients-to-a-database-mirroring-session-sql-server.md).</span></span>  
  
##  <a name="behavior-of-client-connections-on-failover"></a><a name="CCBehaviorOnFailover"></a> <span data-ttu-id="57741-210">容錯移轉時用戶端連接的行為</span><span class="sxs-lookup"><span data-stu-id="57741-210">Behavior of Client Connections on Failover</span></span>  
 <span data-ttu-id="57741-211">當可用性群組發生容錯移轉時，對可用性群組的現有持續連線會終止，而且用戶端必須建立新連接，才能繼續使用相同的主要資料庫或唯讀次要資料庫。</span><span class="sxs-lookup"><span data-stu-id="57741-211">When an availability group failover occurs, existing persistent connections to the availability group are terminated and the client must establish a new connection in order to continue working with the same primary database or read-only secondary database.</span></span>  <span data-ttu-id="57741-212">在伺服器端發生容錯移轉時，對可用性群組的連接可能會失敗，而強制用戶端連接重試連接，直到主要資料庫恢復上線為止。</span><span class="sxs-lookup"><span data-stu-id="57741-212">While a failover is occurring on the server side, connectivity to the availability group may fail, forcing the client application to retry connecting until the primary is brought fully back online.</span></span>  
  
 <span data-ttu-id="57741-213">如果在用戶端應用程式嘗試連線期間，但在連線逾時之前，可用性群組恢復上線，用戶端驅動程式在其中一個內部重試期間可能會成功連線，而應用程式在此情況下不會發生錯誤。</span><span class="sxs-lookup"><span data-stu-id="57741-213">If the availability group comes back online during a client application's connection attempt but before the connect timeout period, the client driver may successfully connect during one of its internal retry attempts and no error will be surfaced to the application in this case.</span></span>  
  
##  <a name="supporting-availability-group-multi-subnet-failovers"></a><a name="SupportAgMultiSubnetFailover"></a> <span data-ttu-id="57741-214">支援可用性群組多重子網路容錯移轉</span><span class="sxs-lookup"><span data-stu-id="57741-214">Supporting Availability Group Multi-Subnet Failovers</span></span>  
 <span data-ttu-id="57741-215">若所用的用戶端程式庫可以在連接字串中使用 MultiSubnetFailover 連線選項，即可根據所使用之提供者的語法，將 MultiSubnetFailover 設定為 "True" 或 "Yes"，來最佳化可用性群組容錯移轉至不同的子網路。</span><span class="sxs-lookup"><span data-stu-id="57741-215">If you are using client libraries that support the MultiSubnetFailover connection option in the connection string, you can optimize availability group failover to a different subnet by setting MultiSubnetFailover to "True" or "Yes", depending on the syntax of the provider you are using.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="57741-216">對於可用性群組接聽程式以及 SQL Server 容錯移轉叢集執行名稱的單一和多重子網路連接，建議使用此設定。</span><span class="sxs-lookup"><span data-stu-id="57741-216">We recommend this setting for both single and multi-subnet connections to availability groups listeners and to SQL Server Failover Cluster Instance names.</span></span>  <span data-ttu-id="57741-217">啟用此選項會增加額外的最佳化，甚至在單一子網路案例也一樣。</span><span class="sxs-lookup"><span data-stu-id="57741-217">Enabling this option adds additional optimizations, even for single-subnet scenarios.</span></span>  
  
 <span data-ttu-id="57741-218">`MultiSubnetFailover` 連接選項只適用於 TCP 網路通訊協定，而且只在連接到可用性群組接聽程式時以及任何虛擬網路名稱連接到 [!INCLUDE[ssCurrent](../includes/sscurrent-md.md)] 時才受支援。</span><span class="sxs-lookup"><span data-stu-id="57741-218">The `MultiSubnetFailover` connection option only works with the TCP network protocol and is only supported when connecting to an availability group listener and for any virtual network name connecting to [!INCLUDE[ssCurrent](../includes/sscurrent-md.md)].</span></span>  
  
 <span data-ttu-id="57741-219">可啟用多重子網路容錯移轉之 ADO.NET 提供者 (System.Data.SqlClient) 的連接字串範例如下：</span><span class="sxs-lookup"><span data-stu-id="57741-219">An example of a for the ADO.NET provider (System.Data.SqlClient) connection string that enables multi-subnet failover is as follows:</span></span>  
  
```  
Server=tcp:AGListener,1433;Database=AdventureWorks;IntegratedSecurity=SSPI; MultiSubnetFailover=True  
```  
  
 <span data-ttu-id="57741-220">`MultiSubnetFailover` 連接選項應該設為 `True`，即使可用性群組只跨越單一子網路也一樣。</span><span class="sxs-lookup"><span data-stu-id="57741-220">The `MultiSubnetFailover` connection option should be set to `True` even if the availability group only spans a single subnet.</span></span>  <span data-ttu-id="57741-221">這可讓您將新用戶端預先設定為支援子網路的未來跨越，而不需要在未來變更用戶端連接字串，此外也會最佳化單一子網路容錯移轉的容錯移轉效能。</span><span class="sxs-lookup"><span data-stu-id="57741-221">This allows you to preconfigure new clients to support future spanning of subnets without any need for future client connection string changes and also optimizes failover performance for single subnet failovers.</span></span>  <span data-ttu-id="57741-222">雖然 `MultiSubnetFailover` 連接選項不是必要，但是它提供更快子網路容錯移轉的好處。</span><span class="sxs-lookup"><span data-stu-id="57741-222">While the `MultiSubnetFailover` connection option is not required, it does provide the benefit of a faster subnet failover.</span></span>  <span data-ttu-id="57741-223">這是因為用戶端驅動程式會嘗試對與可用性群組平行相關的每個 IP 位址開啟 TCP 通訊端。</span><span class="sxs-lookup"><span data-stu-id="57741-223">This is because the client driver will attempt to open up a TCP socket for each IP address in parallel associated with the availability group.</span></span>  <span data-ttu-id="57741-224">用戶端驅動程式會等候第一個成功回應的 IP，一旦回應，就會將它用於連接。</span><span class="sxs-lookup"><span data-stu-id="57741-224">The client driver will wait for the first IP to respond with success and once it does, will then use it for the connection.</span></span>  
  
##  <a name="availability-group-listeners-and-ssl-certificates"></a><a name="SSLcertificates"></a> <span data-ttu-id="57741-225">可用性群組接聽程式和 SSL 憑證</span><span class="sxs-lookup"><span data-stu-id="57741-225">Availability Group Listeners and SSL Certificates</span></span>  
 <span data-ttu-id="57741-226">連接到可用性群組接聽程式時，如果參與的 SQL Server 執行個體同時使用 SSL 憑證和工作階段加密，連接的用戶端驅動程式需要支援 SSL 憑證中的主體替代名稱，才能強制加密。</span><span class="sxs-lookup"><span data-stu-id="57741-226">When connecting to an availability group listener, if the participating instances of SQL Server use SSL certificates in conjunction with session encryption, the connecting client driver will need to support the Subject Alternate Name in the SSL certificate in order to force encryption.</span></span>  <span data-ttu-id="57741-227">我們已計劃針對 ADO.NET (SqlClient)、Microsoft JDBC 和 SQL Native Client (SNAC)，提供 SQL Server 驅動程式對憑證主體替代名稱的支援。</span><span class="sxs-lookup"><span data-stu-id="57741-227">SQL Server driver support for certificate Subject Alternative Name is planned for ADO.NET (SqlClient), Microsoft JDBC and SQL Native Client (SNAC).</span></span>  
  
 <span data-ttu-id="57741-228">您必須針對容錯移轉叢集中的每個參與伺服器節點來設定 X.509 憑證，並在憑證的主體替代名稱中設定所有可用性群組接聽程式的清單。</span><span class="sxs-lookup"><span data-stu-id="57741-228">A X.509 certificate must be configured for each participating server node in the failover cluster with a list of all availability group listeners set in the Subject Alternate Name of the certificate.</span></span>  
  
 <span data-ttu-id="57741-229">例如，如果 WSFC 有三個可用性群組接聽程式，名為 `AG1_listener.Adventure-Works.com`、 `AG2_listener.Adventure-Works.com`和 `AG3_listener.Adventure-Works.com`，憑證的主體替代名稱設定應如下：</span><span class="sxs-lookup"><span data-stu-id="57741-229">For example, if the WSFC has three availability group listeners with the names `AG1_listener.Adventure-Works.com`, `AG2_listener.Adventure-Works.com`, and `AG3_listener.Adventure-Works.com`, the Subject Alternative Name for the certificate should be set as follows:</span></span>  
  
```  
CN = ServerFQDN  
SAN = ServerFQDN,AG1_listener.Adventure-Works.com, AG2_listener.Adventure-Works.com, AG3_listener.Adventure-Works.com  
```  
  
##  <a name="availability-group-listeners-and-server-principal-names-spns"></a><a name="SPNs"></a><span data-ttu-id="57741-230">可用性群組接聽程式和伺服器主體名稱 (Spn) </span><span class="sxs-lookup"><span data-stu-id="57741-230">Availability Group Listeners and Server Principal Names (SPNs)</span></span>  
 <span data-ttu-id="57741-231">網域管理員必須在 Active Directory 中設定每個可用性群組接聽程式名稱的伺服器主體名稱 (SPN)，以便針對可用性群組接聽程式的用戶端連接啟用 Kerberos。</span><span class="sxs-lookup"><span data-stu-id="57741-231">A Server Principal Name (SPN) must be configured in Active Directory by a domain administrator for each availability group listener name in order to enable Kerberos for the client connection to the availability group listener.</span></span> <span data-ttu-id="57741-232">註冊 SPN 時，您必須使用裝載可用性複本之伺服器執行個體的服務帳戶。</span><span class="sxs-lookup"><span data-stu-id="57741-232">When registering the SPN, you must use the service account of the server instance that hosts the availability replica .</span></span>  <span data-ttu-id="57741-233">若要讓 SPN 在所有複本上運作，相同服務帳戶必須用於裝載可用性群組之 WSFC 叢集的所有執行個體。</span><span class="sxs-lookup"><span data-stu-id="57741-233">For the SPN to work across all replicas, the same service account must be used for all instances in the WSFC cluster that hosts the availability group.</span></span>  
  
 <span data-ttu-id="57741-234">您可以使用 `setspn` Windows 命令列工具來設定 SPN。</span><span class="sxs-lookup"><span data-stu-id="57741-234">Use the `setspn` Windows command line tool to configure the SPN.</span></span>  <span data-ttu-id="57741-235">例如，若要設定 SPN 用於 `AG1listener.Adventure-Works.com` 可用性群組，而此可用性群組裝載於一組都設為使用 `corp/svclogin2`網域帳戶的 SQL Server 執行個體：</span><span class="sxs-lookup"><span data-stu-id="57741-235">For example to configure an SPN for an availability group named `AG1listener.Adventure-Works.com` hosted on a set of instances of SQL Server all configured to run under the domain account `corp/svclogin2`:</span></span>  
  
```cmd
setspn -A MSSQLSvc/AG1listener.Adventure-Works.com:1433 corp/svclogin2  
```  
  
 <span data-ttu-id="57741-236">如需有關為 SQL Server 手動註冊 SPN 的詳細資訊，請參閱＜ [註冊 Kerberos 連接的服務主體名稱](configure-windows/register-a-service-principal-name-for-kerberos-connections.md)＞。</span><span class="sxs-lookup"><span data-stu-id="57741-236">For more information about manual registration of a SPN for SQL Server, see [Register a Service Principal Name for Kerberos Connections](configure-windows/register-a-service-principal-name-for-kerberos-connections.md).</span></span>  
  
##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="57741-237">相關工作</span><span class="sxs-lookup"><span data-stu-id="57741-237">Related Tasks</span></span>  
  
-   [<span data-ttu-id="57741-238">AlwaysOn 用戶端連線性 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="57741-238">AlwaysOn Client Connectivity &#40;SQL Server&#41;</span></span>](availability-groups/windows/always-on-client-connectivity-sql-server.md)
  
-   [<span data-ttu-id="57741-239">建立或設定可用性群組接聽程式 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="57741-239">Create or Configure an Availability Group Listener &#40;SQL Server&#41;</span></span>](availability-groups/windows/create-or-configure-an-availability-group-listener-sql-server.md)  
  
-   [<span data-ttu-id="57741-240">檢視可用性群組接聽程式屬性 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="57741-240">View Availability Group Listener Properties &#40;SQL Server&#41;</span></span>](availability-groups/windows/view-availability-group-listener-properties-sql-server.md)  
  
-   [<span data-ttu-id="57741-241">移除可用性群組接聽程式 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="57741-241">Remove an Availability Group Listener &#40;SQL Server&#41;</span></span>](availability-groups/windows/remove-an-availability-group-listener-sql-server.md)  
  
-   [<span data-ttu-id="57741-242">設定可用性複本的唯讀存取 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="57741-242">Configure Read-Only Access on an Availability Replica &#40;SQL Server&#41;</span></span>](availability-groups/windows/configure-read-only-access-on-an-availability-replica-sql-server.md)  
  
-   [<span data-ttu-id="57741-243">設定可用性群組的唯讀路由 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="57741-243">Configure Read-Only Routing for an Availability Group &#40;SQL Server&#41;</span></span>](availability-groups/windows/configure-read-only-routing-for-an-availability-group-sql-server.md)  
  
##  <a name="related-content"></a><a name="RelatedContent"></a> <span data-ttu-id="57741-244">相關內容</span><span class="sxs-lookup"><span data-stu-id="57741-244">Related Content</span></span>  
  
-   [<span data-ttu-id="57741-245">Microsoft SQL Server AlwaysOn 高可用性和災害復原方案指南</span><span class="sxs-lookup"><span data-stu-id="57741-245">Microsoft SQL Server AlwaysOn Solutions Guide for High Availability and Disaster Recovery</span></span>](https://go.microsoft.com/fwlink/?LinkId=227600)  
  
-   <span data-ttu-id="57741-246">[Introduction to the Availability Group Listener](https://blogs.msdn.com/b/sqlalwayson/archive/2012/01/16/introduction-to-the-availability-group-listener.aspx) (可用性群組接聽程式簡介) (SQL Server AlwaysOn 團隊部落格)</span><span class="sxs-lookup"><span data-stu-id="57741-246">[Introduction to the Availability Group Listener](https://blogs.msdn.com/b/sqlalwayson/archive/2012/01/16/introduction-to-the-availability-group-listener.aspx) (a SQL Server AlwaysOn team blog)</span></span>  
  
-   [<span data-ttu-id="57741-247">SQL Server AlwaysOn 團隊部落格：官方 SQL Server AlwaysOn 團隊部落格</span><span class="sxs-lookup"><span data-stu-id="57741-247">SQL Server AlwaysOn Team Blog: The official SQL Server AlwaysOn Team Blog</span></span>](https://blogs.msdn.com/b/sqlalwayson/)  
  
## <a name="see-also"></a><span data-ttu-id="57741-248">另請參閱</span><span class="sxs-lookup"><span data-stu-id="57741-248">See Also</span></span>  
 <span data-ttu-id="57741-249">[AlwaysOn 可用性群組 &#40;SQL Server 的總覽&#41;](availability-groups/windows/overview-of-always-on-availability-groups-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="57741-249">[Overview of AlwaysOn Availability Groups &#40;SQL Server&#41;](availability-groups/windows/overview-of-always-on-availability-groups-sql-server.md) </span></span>  
 [<span data-ttu-id="57741-250">AlwaysOn 用戶端連線性 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="57741-250">AlwaysOn Client Connectivity &#40;SQL Server&#41;</span></span>](availability-groups/windows/always-on-client-connectivity-sql-server.md)  
 <span data-ttu-id="57741-251">[關於可用性複本的用戶端連線存取 &#40;SQL Server&#41;](availability-groups/windows/about-client-connection-access-to-availability-replicas-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="57741-251">[About Client Connection Access to Availability Replicas &#40;SQL Server&#41;](availability-groups/windows/about-client-connection-access-to-availability-replicas-sql-server.md) </span></span>  
 <span data-ttu-id="57741-252">[使用中次要：可讀取的次要複本 &#40;AlwaysOn 可用性群組&#41;](availability-groups/windows/active-secondaries-readable-secondary-replicas-always-on-availability-groups.md) </span><span class="sxs-lookup"><span data-stu-id="57741-252">[Active Secondaries: Readable Secondary Replicas &#40;AlwaysOn Availability Groups&#41;](availability-groups/windows/active-secondaries-readable-secondary-replicas-always-on-availability-groups.md) </span></span>  
 [<span data-ttu-id="57741-253">將用戶端連接至資料庫鏡像工作階段 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="57741-253">Connect Clients to a Database Mirroring Session &#40;SQL Server&#41;</span></span>](database-mirroring/connect-clients-to-a-database-mirroring-session-sql-server.md)
