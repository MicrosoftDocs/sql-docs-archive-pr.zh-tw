---
title: 概述適用于 AlwaysOn 可用性群組 (SQL Server) 的 PowerShell Cmdlet |Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- Availability Groups [SQL Server], PowerShell cmdlets
- Availability Groups [SQL Server], about
- PowerShell [SQL Server], cmdlets
ms.assetid: b3fef0d5-b6d7-4386-a0f0-d06c165ad4de
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: b6861abb3358df5e8c223d387b82e22de0f2a9d5
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87592839"
---
# <a name="overview-of-powershell-cmdlets-for-alwayson-availability-groups-sql-server"></a><span data-ttu-id="899fc-102">AlwaysOn 可用性群組的 PowerShell Cmdlet 概觀 (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="899fc-102">Overview of PowerShell Cmdlets for AlwaysOn Availability Groups (SQL Server)</span></span>
  [!INCLUDE[msCoName](../../../includes/msconame-md.md)] <span data-ttu-id="899fc-103">PowerShell 是以工作為基礎的命令列介面和指令碼語言，專為系統管理所設計。</span><span class="sxs-lookup"><span data-stu-id="899fc-103">PowerShell is a task-based command-line shell and scripting language designed especially for system administration.</span></span> [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] <span data-ttu-id="899fc-104">會在 [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] 中提供一組 PowerShell 指令程式，可讓您部署、管理和監視可用性群組、可用性複本以及可用性資料庫。</span><span class="sxs-lookup"><span data-stu-id="899fc-104">provides a set of PowerShell cmdlets in [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] that enable you to deploy, manage, and monitor availability groups, availability replicas, and availability databases.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="899fc-105">PowerShell 指令程式可以透過順利起始動作來完成。</span><span class="sxs-lookup"><span data-stu-id="899fc-105">A PowerShell cmdlet can complete by successfully initiating an action.</span></span> <span data-ttu-id="899fc-106">這並不表示預期的工作 (例如可用性群組的容錯移轉) 已經完成。</span><span class="sxs-lookup"><span data-stu-id="899fc-106">This does not indicate that the intended work, such as the fail over of an availability group, has completed.</span></span> <span data-ttu-id="899fc-107">編寫一系列動作的指令碼時，您可能必須檢查動作的狀態，並且等候這些動作完成。</span><span class="sxs-lookup"><span data-stu-id="899fc-107">When scripting a sequence of actions, you might have to check the status of actions, and wait for them to complete.</span></span>  
  
 <span data-ttu-id="899fc-108">本主題將介紹下列各組工作的指令程式：</span><span class="sxs-lookup"><span data-stu-id="899fc-108">This topic introduces the cmdlets for the following sets of tasks:</span></span>  
  
-   [<span data-ttu-id="899fc-109">設定 AlwaysOn 可用性群組的伺服器實例</span><span class="sxs-lookup"><span data-stu-id="899fc-109">Configuring a server instance for AlwaysOn Availability Groups</span></span>](#ConfiguringServerInstance)  
  
-   [<span data-ttu-id="899fc-110">備份和還原資料庫與交易記錄</span><span class="sxs-lookup"><span data-stu-id="899fc-110">Backing up and restoring databases and transaction logs</span></span>](#BnRcmdlets)  
  
-   [<span data-ttu-id="899fc-111">建立和管理可用性群組</span><span class="sxs-lookup"><span data-stu-id="899fc-111">Creating and managing an availability group</span></span>](#DeployManageAGs)  
  
-   [<span data-ttu-id="899fc-112">建立和管理可用性群組接聽程式</span><span class="sxs-lookup"><span data-stu-id="899fc-112">Creating and managing an availability group listener</span></span>](#AGlisteners)  
  
-   [<span data-ttu-id="899fc-113">建立和管理可用性複本</span><span class="sxs-lookup"><span data-stu-id="899fc-113">Creating and managing an availability replica</span></span>](#DeployManageARs)  
  
-   [<span data-ttu-id="899fc-114">加入和管理可用性資料庫</span><span class="sxs-lookup"><span data-stu-id="899fc-114">Adding and managing an availability database</span></span>](#DeployManageDbs)  
  
-   [<span data-ttu-id="899fc-115">監視可用性群組健全狀況</span><span class="sxs-lookup"><span data-stu-id="899fc-115">Monitoring availability group health</span></span>](#MonitorTblshtAGs)  
  
> [!NOTE]  
>  <span data-ttu-id="899fc-116">如需 [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] 《線上叢書》中描述如何使用 Cmdlet 來執行工作的主題清單 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] ，請參閱[AlwaysOn 可用性群組 &#40;SQL Server&#41;](overview-of-always-on-availability-groups-sql-server.md)的「相關工作」一節。</span><span class="sxs-lookup"><span data-stu-id="899fc-116">For a list of topics in [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] Books Online that describe how to use cmdlets to perform [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] tasks, see the "Related Tasks" section of [Overview of AlwaysOn Availability Groups &#40;SQL Server&#41;](overview-of-always-on-availability-groups-sql-server.md).</span></span>  
  
##  <a name="configuring-a-server-instance-for-alwayson-availability-groups"></a><a name="ConfiguringServerInstance"></a><span data-ttu-id="899fc-117">設定 AlwaysOn 可用性群組的伺服器實例</span><span class="sxs-lookup"><span data-stu-id="899fc-117">Configuring a Server Instance for AlwaysOn Availability Groups</span></span>  
  
|<span data-ttu-id="899fc-118">指令程式</span><span class="sxs-lookup"><span data-stu-id="899fc-118">Cmdlets</span></span>|<span data-ttu-id="899fc-119">描述</span><span class="sxs-lookup"><span data-stu-id="899fc-119">Description</span></span>|<span data-ttu-id="899fc-120">支援的項目</span><span class="sxs-lookup"><span data-stu-id="899fc-120">Supported on</span></span>|  
|-------------|-----------------|------------------|  
|`Disable-SqlAlwaysOn`|<span data-ttu-id="899fc-121">在伺服器執行個體上停用 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] 功能。</span><span class="sxs-lookup"><span data-stu-id="899fc-121">Disables the [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] feature on a server instance.</span></span>|<span data-ttu-id="899fc-122">`Path`、`InputObject` 或 `Name` 參數所指定的伺服器執行個體 </span><span class="sxs-lookup"><span data-stu-id="899fc-122">The server instance that is specified by the `Path`, `InputObject`, or `Name` parameter.</span></span> <span data-ttu-id="899fc-123">(必須是支援 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 的 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)]版本)。</span><span class="sxs-lookup"><span data-stu-id="899fc-123">(Must be an edition of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] that supports [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)].)</span></span>|  
|`Enable-SqlAlwaysOn`|<span data-ttu-id="899fc-124">在支援 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] 功能的 [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] 執行個體上啟用 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] 。</span><span class="sxs-lookup"><span data-stu-id="899fc-124">Enables [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] on an instance of [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] that supports the [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] feature.</span></span> <span data-ttu-id="899fc-125">如需有關支援的詳細資訊 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] ，請參閱[AlwaysOn 可用性群組 &#40;SQL Server&#41;的必要條件、限制和建議](prereqs-restrictions-recommendations-always-on-availability.md)。</span><span class="sxs-lookup"><span data-stu-id="899fc-125">For information about support for [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)], see [Prerequisites, Restrictions, and Recommendations for AlwaysOn Availability Groups &#40;SQL Server&#41;](prereqs-restrictions-recommendations-always-on-availability.md).</span></span>|<span data-ttu-id="899fc-126">支援 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 的任何 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)]版本。</span><span class="sxs-lookup"><span data-stu-id="899fc-126">Any edition of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] that supports [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)].</span></span>|  
|`New-SqlHadrEndPoint`|<span data-ttu-id="899fc-127">在伺服器執行個體上建立新的資料庫鏡像端點。</span><span class="sxs-lookup"><span data-stu-id="899fc-127">Creates a new database mirroring endpoint on a server instance.</span></span> <span data-ttu-id="899fc-128">在主要與次要資料庫之間進行資料移動時需要這個端點。</span><span class="sxs-lookup"><span data-stu-id="899fc-128">This endpoint is required for data movement between primary and secondary databases.</span></span>|<span data-ttu-id="899fc-129">任何 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]</span><span class="sxs-lookup"><span data-stu-id="899fc-129">Any instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]</span></span>|  
|`Set-SqlHadrEndpoint`|<span data-ttu-id="899fc-130">變更現有資料庫鏡像端點的屬性，例如名稱、狀態或驗證屬性。</span><span class="sxs-lookup"><span data-stu-id="899fc-130">Changes the properties of an existing database mirroring endpoint, such as the name, state, or authentication properties.</span></span>|<span data-ttu-id="899fc-131">支援 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] 且缺少資料庫鏡像端點的伺服器執行個體</span><span class="sxs-lookup"><span data-stu-id="899fc-131">A server instance that supports [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] and lacks a database mirroring endpoint</span></span>|  
  
##  <a name="backing-up-and-restoring-databases-and-transaction-logs"></a><a name="BnRcmdlets"></a><span data-ttu-id="899fc-132">備份和還原資料庫與交易記錄</span><span class="sxs-lookup"><span data-stu-id="899fc-132">Backing Up and Restoring Databases and Transaction Logs</span></span>  
  
|<span data-ttu-id="899fc-133">指令程式</span><span class="sxs-lookup"><span data-stu-id="899fc-133">Cmdlets</span></span>|<span data-ttu-id="899fc-134">描述</span><span class="sxs-lookup"><span data-stu-id="899fc-134">Description</span></span>|<span data-ttu-id="899fc-135">支援的項目</span><span class="sxs-lookup"><span data-stu-id="899fc-135">Supported on</span></span>|  
|-------------|-----------------|------------------|  
|`Backup-SqlDatabase`|<span data-ttu-id="899fc-136">建立資料或記錄備份。</span><span class="sxs-lookup"><span data-stu-id="899fc-136">Creates a data or log backup.</span></span>|<span data-ttu-id="899fc-137">任何線上資料庫 (若為 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)]，則為裝載主要複本之伺服器執行個體的資料庫)</span><span class="sxs-lookup"><span data-stu-id="899fc-137">Any online database (for [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)], a database on the server instance that hosts the primary replica)</span></span>|  
|`Restore-SqlDatabase`|<span data-ttu-id="899fc-138">還原備份。</span><span class="sxs-lookup"><span data-stu-id="899fc-138">Restores a backup.</span></span>|<span data-ttu-id="899fc-139">任何 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 執行個體 (若為 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)]，則為裝載次要複本的伺服器執行個體)</span><span class="sxs-lookup"><span data-stu-id="899fc-139">Any instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] (for [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)], a server instance that hosts a secondary replica)</span></span><br /><br /> <span data-ttu-id="899fc-140">**&#42;&#42; 重要 &#42;&#42;** 準備次要資料庫時，您必須 `-NoRecovery` 在每個命令中使用參數 `Restore-SqlDatabase` 。</span><span class="sxs-lookup"><span data-stu-id="899fc-140">**&#42;&#42; Important &#42;&#42;** When preparing a secondary database, you must use the `-NoRecovery` parameter in every `Restore-SqlDatabase` command.</span></span>|  
  
 <span data-ttu-id="899fc-141">如需使用這些 Cmdlet 來準備次要資料庫的相關資訊，請參閱[針對可用性群組手動準備次要資料庫 &#40;SQL Server&#41;](manually-prepare-a-secondary-database-for-an-availability-group-sql-server.md)。</span><span class="sxs-lookup"><span data-stu-id="899fc-141">For information about using these cmdlets to prepare a secondary database, see [Manually Prepare a Secondary Database for an Availability Group &#40;SQL Server&#41;](manually-prepare-a-secondary-database-for-an-availability-group-sql-server.md).</span></span>  
  
##  <a name="creating-and-managing-an-availability-group"></a><a name="DeployManageAGs"></a><span data-ttu-id="899fc-142">建立和管理可用性群組</span><span class="sxs-lookup"><span data-stu-id="899fc-142">Creating and Managing an Availability Group</span></span>  
  
|<span data-ttu-id="899fc-143">指令程式</span><span class="sxs-lookup"><span data-stu-id="899fc-143">Cmdlets</span></span>|<span data-ttu-id="899fc-144">描述</span><span class="sxs-lookup"><span data-stu-id="899fc-144">Description</span></span>|<span data-ttu-id="899fc-145">支援的項目</span><span class="sxs-lookup"><span data-stu-id="899fc-145">Supported on</span></span>|  
|-------------|-----------------|------------------|  
|`New-SqlAvailabilityGroup`|<span data-ttu-id="899fc-146">建立新的可用性群組。</span><span class="sxs-lookup"><span data-stu-id="899fc-146">Creates a new availability group.</span></span>|<span data-ttu-id="899fc-147">要裝載主要複本的伺服器執行個體</span><span class="sxs-lookup"><span data-stu-id="899fc-147">Server instance to host primary replica</span></span>|  
|`Remove-SqlAvailabilityGroup`|<span data-ttu-id="899fc-148">刪除可用性群組。</span><span class="sxs-lookup"><span data-stu-id="899fc-148">Deletes availability group.</span></span>|<span data-ttu-id="899fc-149">啟用 HADR 的伺服器執行個體</span><span class="sxs-lookup"><span data-stu-id="899fc-149">HADR-enabled server instance</span></span>|  
|`Set-SqlAvailabilityGroup`|<span data-ttu-id="899fc-150">設定可用性群組的屬性；讓可用性群組上線/離線。</span><span class="sxs-lookup"><span data-stu-id="899fc-150">Sets the properties of an availability group; take an availability group online/offline</span></span>|<span data-ttu-id="899fc-151">裝載主要複本的伺服器執行個體</span><span class="sxs-lookup"><span data-stu-id="899fc-151">Server instance that hosts primary replica</span></span>|  
|`Switch-SqlAvailabilityGroup`|<span data-ttu-id="899fc-152">起始下列其中一種形式的容錯移轉：</span><span class="sxs-lookup"><span data-stu-id="899fc-152">Initiates one of the following forms of failover:</span></span><br /><br /> <span data-ttu-id="899fc-153">可用性群組的強制容錯移轉 (可能遺失資料)。</span><span class="sxs-lookup"><span data-stu-id="899fc-153">A forced failover of an availability group (with possible data loss).</span></span><br /><br /> <span data-ttu-id="899fc-154">可用性群組的手動容錯移轉。</span><span class="sxs-lookup"><span data-stu-id="899fc-154">A manual failover of an availability group.</span></span>|<span data-ttu-id="899fc-155">裝載目標次要複本的伺服器執行個體</span><span class="sxs-lookup"><span data-stu-id="899fc-155">Server instance that hosts target secondary replica</span></span>|  
  
##  <a name="creating-and-managing-an-availability-group-listener"></a><a name="AGlisteners"></a> <span data-ttu-id="899fc-156">Creating and Managing an Availability Group Listener</span><span class="sxs-lookup"><span data-stu-id="899fc-156">Creating and Managing an Availability Group Listener</span></span>  
  
|<span data-ttu-id="899fc-157">Cmdlet</span><span class="sxs-lookup"><span data-stu-id="899fc-157">Cmdlet</span></span>|<span data-ttu-id="899fc-158">描述</span><span class="sxs-lookup"><span data-stu-id="899fc-158">Description</span></span>|<span data-ttu-id="899fc-159">支援的項目</span><span class="sxs-lookup"><span data-stu-id="899fc-159">Supported on</span></span>|  
|------------|-----------------|------------------|  
|`New-SqlAvailabilityGroupListener`|<span data-ttu-id="899fc-160">建立新的可用性群組接聽程式，並將其附加至現有的可用性群組。</span><span class="sxs-lookup"><span data-stu-id="899fc-160">Creates a new availability group listener and attaches it to an existing availability group.</span></span>|<span data-ttu-id="899fc-161">裝載主要複本的伺服器執行個體</span><span class="sxs-lookup"><span data-stu-id="899fc-161">Server instance that hosts primary replica</span></span>|  
|`Set-SqlAvailabilityGroupListener`|<span data-ttu-id="899fc-162">修改現有可用性群組接聽程式上的通訊埠設定。</span><span class="sxs-lookup"><span data-stu-id="899fc-162">Modifies the port setting on an existing availability group listener.</span></span>|<span data-ttu-id="899fc-163">裝載主要複本的伺服器執行個體</span><span class="sxs-lookup"><span data-stu-id="899fc-163">Server instance that hosts primary replica</span></span>|  
|`Add-SqlAvailabilityGroupListenerStaticIp`|<span data-ttu-id="899fc-164">將靜態 IP 位址加入至現有的可用性群組接聽程式組態。</span><span class="sxs-lookup"><span data-stu-id="899fc-164">Adds a static IP address to an existing availability group listener configuration.</span></span> <span data-ttu-id="899fc-165">IP 位址可以是包含子網路的 IPv4 位址或 IPv6 位址。</span><span class="sxs-lookup"><span data-stu-id="899fc-165">The IP address can be an IPv4 address with subnet, or an IPv6 address.</span></span>|<span data-ttu-id="899fc-166">裝載主要複本的伺服器執行個體</span><span class="sxs-lookup"><span data-stu-id="899fc-166">Server instance that hosts primary replica</span></span>|  
  
##  <a name="creating-and-managing-an-availability-replica"></a><a name="DeployManageARs"></a> <span data-ttu-id="899fc-167">Creating and Managing an Availability Replica</span><span class="sxs-lookup"><span data-stu-id="899fc-167">Creating and Managing an Availability Replica</span></span>  
  
|<span data-ttu-id="899fc-168">指令程式</span><span class="sxs-lookup"><span data-stu-id="899fc-168">Cmdlets</span></span>|<span data-ttu-id="899fc-169">描述</span><span class="sxs-lookup"><span data-stu-id="899fc-169">Description</span></span>|<span data-ttu-id="899fc-170">支援的項目</span><span class="sxs-lookup"><span data-stu-id="899fc-170">Supported on</span></span>|  
|-------------|-----------------|------------------|  
|<span data-ttu-id="899fc-171">**New-SqlAvailabilityReplica**</span><span class="sxs-lookup"><span data-stu-id="899fc-171">**New-SqlAvailabilityReplica**</span></span>|<span data-ttu-id="899fc-172">建立新的可用性複本。</span><span class="sxs-lookup"><span data-stu-id="899fc-172">Creates a new availability replica.</span></span> <span data-ttu-id="899fc-173">您可以使用 `-AsTemplate` 參數，針對每個新的可用性複本建立記憶體中的可用性複本物件。</span><span class="sxs-lookup"><span data-stu-id="899fc-173">You can Use the `-AsTemplate` parameter to create an in-memory availability-replica object for each new availability replica.</span></span>|<span data-ttu-id="899fc-174">裝載主要複本的伺服器執行個體</span><span class="sxs-lookup"><span data-stu-id="899fc-174">Server instance that hosts primary replica</span></span>|  
|`Join-SqlAvailabilityGroup`|<span data-ttu-id="899fc-175">將次要複本聯結至可用性群組。</span><span class="sxs-lookup"><span data-stu-id="899fc-175">Joins a secondary replica to the availability group.</span></span>|<span data-ttu-id="899fc-176">裝載次要複本的伺服器執行個體</span><span class="sxs-lookup"><span data-stu-id="899fc-176">Server instance that hosts secondary replica</span></span>|  
|<span data-ttu-id="899fc-177">**Remove-SqlAvailabilityReplica**</span><span class="sxs-lookup"><span data-stu-id="899fc-177">**Remove-SqlAvailabilityReplica**</span></span>|<span data-ttu-id="899fc-178">刪除可用性複本。</span><span class="sxs-lookup"><span data-stu-id="899fc-178">Deletes an availability replica.</span></span>|<span data-ttu-id="899fc-179">裝載主要複本的伺服器執行個體</span><span class="sxs-lookup"><span data-stu-id="899fc-179">Server instance that hosts primary replica</span></span>|  
|`Set-SqlAvailabilityReplica`|<span data-ttu-id="899fc-180">設定可用性複本的屬性。</span><span class="sxs-lookup"><span data-stu-id="899fc-180">Sets the properties of an availability replica.</span></span>|<span data-ttu-id="899fc-181">裝載主要複本的伺服器執行個體</span><span class="sxs-lookup"><span data-stu-id="899fc-181">Server instance that hosts primary replica</span></span>|  
  
##  <a name="adding-and-managing-an-availability-database"></a><a name="DeployManageDbs"></a> <span data-ttu-id="899fc-182">Adding and Managing an Availability Database</span><span class="sxs-lookup"><span data-stu-id="899fc-182">Adding and Managing an Availability Database</span></span>  
  
|<span data-ttu-id="899fc-183">指令程式</span><span class="sxs-lookup"><span data-stu-id="899fc-183">Cmdlets</span></span>|<span data-ttu-id="899fc-184">描述</span><span class="sxs-lookup"><span data-stu-id="899fc-184">Description</span></span>|<span data-ttu-id="899fc-185">支援的項目</span><span class="sxs-lookup"><span data-stu-id="899fc-185">Supported on</span></span>|  
|-------------|-----------------|------------------|  
|<span data-ttu-id="899fc-186">**Add-SqlAvailabilityDatabase**</span><span class="sxs-lookup"><span data-stu-id="899fc-186">**Add-SqlAvailabilityDatabase**</span></span>|<span data-ttu-id="899fc-187">在主要複本上，將資料庫加入至可用性群組。</span><span class="sxs-lookup"><span data-stu-id="899fc-187">On the primary replica, adds a database to an availability group.</span></span><br /><br /> <span data-ttu-id="899fc-188">在次要複本上，將次要資料庫聯結至可用性群組。</span><span class="sxs-lookup"><span data-stu-id="899fc-188">On a secondary replica, joins a secondary database to an availability group.</span></span>|<span data-ttu-id="899fc-189">裝載可用性複本的任何伺服器執行個體 (主要和次要複本的行為有所不同)</span><span class="sxs-lookup"><span data-stu-id="899fc-189">Any server instance that hosts an availability replica (behavior differs for primary and secondary replicas)</span></span>|  
|<span data-ttu-id="899fc-190">**Remove-SqlAvailabilityDatabase**</span><span class="sxs-lookup"><span data-stu-id="899fc-190">**Remove-SqlAvailabilityDatabase**</span></span>|<span data-ttu-id="899fc-191">在主要複本上，從可用性群組中移除資料庫。</span><span class="sxs-lookup"><span data-stu-id="899fc-191">On the primary replica, removes the database from the availability group.</span></span><br /><br /> <span data-ttu-id="899fc-192">在次要複本上，從本機次要複本中移除本機次要資料庫。</span><span class="sxs-lookup"><span data-stu-id="899fc-192">On a secondary replica, removes the local secondary database from the local secondary replica.</span></span>|<span data-ttu-id="899fc-193">裝載可用性複本的任何伺服器執行個體 (主要和次要複本的行為有所不同)</span><span class="sxs-lookup"><span data-stu-id="899fc-193">Any server instance that hosts an availability replica (behavior differs for primary and secondary replicas)</span></span>|  
|`Resume-SqlAvailabilityDatabase`|<span data-ttu-id="899fc-194">繼續進行暫停之可用性資料庫的資料移動。</span><span class="sxs-lookup"><span data-stu-id="899fc-194">Resumes the data movement for a suspended availability database.</span></span>|<span data-ttu-id="899fc-195">已暫停資料庫的伺服器執行個體。</span><span class="sxs-lookup"><span data-stu-id="899fc-195">The server instance on which the database was suspended.</span></span>|  
|`Suspend-SqlAvailabilityDatabase`|<span data-ttu-id="899fc-196">暫停可用性資料庫的資料移動。</span><span class="sxs-lookup"><span data-stu-id="899fc-196">Suspends the data movement for an availability database.</span></span>|<span data-ttu-id="899fc-197">裝載可用性複本的任何伺服器執行個體。</span><span class="sxs-lookup"><span data-stu-id="899fc-197">Any server instance that hosts an availability replica.</span></span>|  
  
##  <a name="monitoring-availability-group-health"></a><a name="MonitorTblshtAGs"></a> <span data-ttu-id="899fc-198">Monitoring Availability Group Health</span><span class="sxs-lookup"><span data-stu-id="899fc-198">Monitoring Availability Group Health</span></span>  
 <span data-ttu-id="899fc-199">下列 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 指令程式可讓您監視可用性群組及其複本和資料庫的健全狀況。</span><span class="sxs-lookup"><span data-stu-id="899fc-199">The following [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] cmdlets enable you to monitor the health of an availability group and its replicas and databases.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="899fc-200">您必須擁有 CONNECT、VIEW SERVER STATE 和 VIEW ANY DEFINITION 權限，才能執行這些指令程式。</span><span class="sxs-lookup"><span data-stu-id="899fc-200">You must have CONNECT, VIEW SERVER STATE, and VIEW ANY DEFINITION permissions to execute these cmdlets.</span></span>  
  
|<span data-ttu-id="899fc-201">Cmdlet</span><span class="sxs-lookup"><span data-stu-id="899fc-201">Cmdlet</span></span>|<span data-ttu-id="899fc-202">描述</span><span class="sxs-lookup"><span data-stu-id="899fc-202">Description</span></span>|<span data-ttu-id="899fc-203">支援的項目</span><span class="sxs-lookup"><span data-stu-id="899fc-203">Supported on</span></span>|  
|------------|-----------------|------------------|  
|`Test-SqlAvailabilityGroup`|<span data-ttu-id="899fc-204">透過評估 SQL Server 原則式管理 (PBM) 原則，評估可用性群組的健全狀況。</span><span class="sxs-lookup"><span data-stu-id="899fc-204">Assesses the health of an availability group by evaluating SQL Server policy based management (PBM) policies.</span></span>|<span data-ttu-id="899fc-205">裝載可用性複本的任何伺服器執行個體。\*</span><span class="sxs-lookup"><span data-stu-id="899fc-205">Any server instance that hosts an availability replica.\*</span></span>|  
|`Test-SqlAvailabilityReplica`|<span data-ttu-id="899fc-206">透過評估 SQL Server 原則式管理 (PBM) 原則，評估可用性複本的健全狀況。</span><span class="sxs-lookup"><span data-stu-id="899fc-206">Assesses the health of availability replicas by evaluating SQL Server policy based management (PBM) policies.</span></span>|<span data-ttu-id="899fc-207">裝載可用性複本的任何伺服器執行個體。\*</span><span class="sxs-lookup"><span data-stu-id="899fc-207">Any server instance that hosts an availability replica.\*</span></span>|  
|`Test-SqlDatabaseReplicaState`|<span data-ttu-id="899fc-208">透過評估 SQL Server 原則式管理 (PBM) 原則，評估所有聯結可用性複本之可用性資料庫的健全狀況。</span><span class="sxs-lookup"><span data-stu-id="899fc-208">Assesses the health of an availability database on all joined availability replicas by evaluating SQL Server policy based management (PBM) policies.</span></span>|<span data-ttu-id="899fc-209">裝載可用性複本的任何伺服器執行個體。\*</span><span class="sxs-lookup"><span data-stu-id="899fc-209">Any server instance that hosts an availability replica.\*</span></span>|  
  
 <span data-ttu-id="899fc-210">\*若要檢視可用性群組中所有可用性複本的相關資訊，請用於裝載主要複本的伺服器執行個體。</span><span class="sxs-lookup"><span data-stu-id="899fc-210">\*To view information about all of the availability replicas in an availability group, use to the server instance that hosts the primary replica.</span></span>  
  
 <span data-ttu-id="899fc-211">如需詳細資訊，請參閱[使用 AlwaysOn 原則來查看可用性群組的健全狀況 &#40;SQL Server&#41;](use-always-on-policies-to-view-the-health-of-an-availability-group-sql-server.md)。</span><span class="sxs-lookup"><span data-stu-id="899fc-211">For more information, see [Use AlwaysOn Policies to View the Health of an Availability Group &#40;SQL Server&#41;](use-always-on-policies-to-view-the-health-of-an-availability-group-sql-server.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="899fc-212">另請參閱</span><span class="sxs-lookup"><span data-stu-id="899fc-212">See Also</span></span>  
 <span data-ttu-id="899fc-213">[AlwaysOn 可用性群組 &#40;SQL Server 的總覽&#41;](overview-of-always-on-availability-groups-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="899fc-213">[Overview of AlwaysOn Availability Groups &#40;SQL Server&#41;](overview-of-always-on-availability-groups-sql-server.md) </span></span>  
 [<span data-ttu-id="899fc-214">Get Help SQL Server PowerShell</span><span class="sxs-lookup"><span data-stu-id="899fc-214">Get Help SQL Server PowerShell</span></span>](../../../powershell/sql-server-powershell.md)  
  
  
