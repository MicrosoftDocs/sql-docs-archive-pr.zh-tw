---
title: 關於可用性複本的用戶端連接存取 (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 06/14/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- Availability Groups [SQL Server], availability replicas
- Availability Groups [SQL Server], readable secondary replicas
- active secondary replicas [SQL Server], read-only access to
- Availability Groups [SQL Server], configuring
- Availability Groups [SQL Server], client connectivity
- Availability Groups [SQL Server], active secondary replicas
ms.assetid: 29027e46-43e4-4b45-b650-c4cdeacdf552
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 79e61f29957d90a429d8a0c66782ca7cf2e7bd4c
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87701947"
---
# <a name="about-client-connection-access-to-availability-replicas-sql-server"></a><span data-ttu-id="ceb29-102">關於可用性複本的用戶端連接存取 (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="ceb29-102">About Client Connection Access to Availability Replicas (SQL Server)</span></span>
  <span data-ttu-id="ceb29-103">在 AlwaysOn 可用性群組中，您可以設定一個或多個可用性複本，讓它在次要角色之下執行時 (也就是以次要複本的方式執行時)，允許唯讀連接。</span><span class="sxs-lookup"><span data-stu-id="ceb29-103">In an AlwaysOn availability group, you can configure one or more availability replicas to allow read-only connections when running under the secondary role (that is, when running as a secondary replica).</span></span> <span data-ttu-id="ceb29-104">以主要角色執行時 (也就是當做主要複本執行時)，您也可以設定每個可用性複本，以允許或排除唯讀連接。</span><span class="sxs-lookup"><span data-stu-id="ceb29-104">You can also configure each availability replica to allow or exclude read-only connections when running under the primary role (that is, when running as the primary replica).</span></span>  
  
 <span data-ttu-id="ceb29-105">若要簡化用戶端對給定可用性群組之主要或次要資料庫的存取，您應該定義可用性群組接聽程式。</span><span class="sxs-lookup"><span data-stu-id="ceb29-105">To facilitate client access to primary or secondary databases of a given availability group, you should define an availability group listener.</span></span> <span data-ttu-id="ceb29-106">根據預設，可用性群組接聽程式會將內送連接導向至主要複本。</span><span class="sxs-lookup"><span data-stu-id="ceb29-106">By default, the availability group listener directs incoming connections to the primary replica.</span></span> <span data-ttu-id="ceb29-107">不過，您可以將可用性群組設定為支援唯讀路由，讓它的可用性群組接聽程式將讀取意圖應用程式的連接要求重新導向至可讀取的次要複本。</span><span class="sxs-lookup"><span data-stu-id="ceb29-107">However, you can configure an availability group to support read-only routing, which enables its availability group listener to redirect the connection requests of read-intent applications to a readable secondary replica.</span></span> <span data-ttu-id="ceb29-108">如需詳細資訊，請參閱本主題稍後的 [設定可用性群組的唯讀路由 &#40;SQL Server&#41;](configure-read-only-routing-for-an-availability-group-sql-server.md))。</span><span class="sxs-lookup"><span data-stu-id="ceb29-108">For more information, see [Configure Read-Only Routing for an Availability Group &#40;SQL Server&#41;](configure-read-only-routing-for-an-availability-group-sql-server.md).</span></span>  
  
 <span data-ttu-id="ceb29-109">在容錯移轉期間，次要複本會轉換到主要角色，而先前的主要複本會轉換到次要角色。</span><span class="sxs-lookup"><span data-stu-id="ceb29-109">During a failover, a secondary replica transitions to the primary role and the former primary replica transitions to the secondary role.</span></span> <span data-ttu-id="ceb29-110">在容錯移轉過程中，會同時終止主要複本和次要複本的所有用戶端連接。</span><span class="sxs-lookup"><span data-stu-id="ceb29-110">During the failover process, all client connections to both the primary replica and secondary replicas are terminated.</span></span> <span data-ttu-id="ceb29-111">容錯移轉之後，當用戶端重新連接至可用性群組接聽程式時，接聽程式會將用戶端重新連接至新的主要複本 (但讀取意圖的連接要求除外)。</span><span class="sxs-lookup"><span data-stu-id="ceb29-111">After the failover, when a client reconnects to the availability group listener, the listener reconnects the client to the new primary replica, except for a read-intent connect request.</span></span> <span data-ttu-id="ceb29-112">如果用戶端、裝載新主要複本的伺服器執行個體，以及至少一個可讀取的次要複本上設定了唯讀路由，讀取意圖連接要求會重新導向至支援用戶端所需連接存取類型的次要複本。</span><span class="sxs-lookup"><span data-stu-id="ceb29-112">If read-only routing is configured on the client and on the server instances that hosts the new primary replica and on at least one readable secondary replica, read-intent connection requests are re-routed to a secondary replica that supports the type of connection access that the client requires.</span></span> <span data-ttu-id="ceb29-113">為確保容錯移轉後的用戶端經驗沒有失誤，最好同時針對每個可用性複本的次要和主要角色，設定連接存取。</span><span class="sxs-lookup"><span data-stu-id="ceb29-113">To ensure a graceful client experience after a failover, it is important to configure connection access for both the secondary and primary roles of every availability replica.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="ceb29-114">如需可用性群組接聽程式的相關資訊，處理用戶端連線要求，請參閱 [可用性群組接聽程式、用戶端連接及應用程式容錯移轉 &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md)。</span><span class="sxs-lookup"><span data-stu-id="ceb29-114">For information about the availability group listener, which handles client connection requests, see [Availability Group Listeners, Client Connectivity, and Application Failover &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md).</span></span>  
  
 <span data-ttu-id="ceb29-115">**本主題內容：**</span><span class="sxs-lookup"><span data-stu-id="ceb29-115">**In This Topic:**</span></span>  
  
-   [<span data-ttu-id="ceb29-116">次要角色所支援的連接存取類型</span><span class="sxs-lookup"><span data-stu-id="ceb29-116">Types of Connection Access Supported by the Secondary Role</span></span>](#ConnectAccessForSecondary)  
  
-   [<span data-ttu-id="ceb29-117">主要角色所支援的連接存取類型</span><span class="sxs-lookup"><span data-stu-id="ceb29-117">Types of Connection Access Supported by the Primary Role</span></span>](#ConnectAccessForPrimary)  
  
-   [<span data-ttu-id="ceb29-118">連接存取設定如何影響用戶端連線能力</span><span class="sxs-lookup"><span data-stu-id="ceb29-118">How the Connection Access Configuration Affects Client Connectivity</span></span>](#HowConnectionAccessAffectsConnectivity)  
  
-   [<span data-ttu-id="ceb29-119">相關工作</span><span class="sxs-lookup"><span data-stu-id="ceb29-119">Related Tasks</span></span>](#RelatedTasks)  
  
-   [<span data-ttu-id="ceb29-120">相關內容</span><span class="sxs-lookup"><span data-stu-id="ceb29-120">Related Content</span></span>](#RelatedContent)  
  
##  <a name="types-of-connection-access-supported-by-the-secondary-role"></a><a name="ConnectAccessForSecondary"></a> <span data-ttu-id="ceb29-121">次要角色所支援的連接存取類型</span><span class="sxs-lookup"><span data-stu-id="ceb29-121">Types of Connection Access Supported by the Secondary Role</span></span>  
 <span data-ttu-id="ceb29-122">次要角色支援用戶端連接的三種替代方式，如下所示：</span><span class="sxs-lookup"><span data-stu-id="ceb29-122">The secondary role supports three alternatives for client connections, as follows:</span></span>  
  
 <span data-ttu-id="ceb29-123">無連接</span><span class="sxs-lookup"><span data-stu-id="ceb29-123">No connections</span></span>  
 <span data-ttu-id="ceb29-124">不允許任何使用者連接。</span><span class="sxs-lookup"><span data-stu-id="ceb29-124">No user connections are allowed.</span></span> <span data-ttu-id="ceb29-125">次要資料庫不適用於讀取。</span><span class="sxs-lookup"><span data-stu-id="ceb29-125">Secondary databases are not available for read access.</span></span> <span data-ttu-id="ceb29-126">這是次要角色的預設行為。</span><span class="sxs-lookup"><span data-stu-id="ceb29-126">This is the default behavior in the secondary role.</span></span>  
  
 <span data-ttu-id="ceb29-127">僅讀取意圖連接</span><span class="sxs-lookup"><span data-stu-id="ceb29-127">Only read-intent connections</span></span>  
 <span data-ttu-id="ceb29-128">只有 `Application Intent` 連接屬性設定為 `ReadOnly` (*讀取意圖連接*) 的連接，才可以使用次要資料庫 (s) 。</span><span class="sxs-lookup"><span data-stu-id="ceb29-128">The secondary database(s) are available only for connection for which the `Application Intent` connection property is set to `ReadOnly` (*read-intent connections*).</span></span>  
  
 <span data-ttu-id="ceb29-129">如需有關此連接屬性的詳細資訊，請參閱＜ [高可用性/災害復原的 SQL Server Native Client 支援](../../../relational-databases/native-client/features/sql-server-native-client-support-for-high-availability-disaster-recovery.md)＞。</span><span class="sxs-lookup"><span data-stu-id="ceb29-129">For information about this connection property, see [SQL Server Native Client Support for High Availability, Disaster Recovery](../../../relational-databases/native-client/features/sql-server-native-client-support-for-high-availability-disaster-recovery.md).</span></span>  
  
 <span data-ttu-id="ceb29-130">允許任何唯讀連線</span><span class="sxs-lookup"><span data-stu-id="ceb29-130">Allow any read-only connection</span></span>  
 <span data-ttu-id="ceb29-131">次要資料庫全部適用於讀取連接。</span><span class="sxs-lookup"><span data-stu-id="ceb29-131">The secondary database(s) are all available for read access connections.</span></span> <span data-ttu-id="ceb29-132">此選項允許較低版本的用戶端進行連接。</span><span class="sxs-lookup"><span data-stu-id="ceb29-132">This option allows lower versioned clients to connect.</span></span>  
  
 <span data-ttu-id="ceb29-133">如需詳細資訊，請參閱 [設定可用性複本上的唯讀存取 &#40;SQL Server&#41;](configure-read-only-access-on-an-availability-replica-sql-server.md)。</span><span class="sxs-lookup"><span data-stu-id="ceb29-133">For more information, see [Configure Read-Only Access on an Availability Replica &#40;SQL Server&#41;](configure-read-only-access-on-an-availability-replica-sql-server.md).</span></span>  
  
##  <a name="types-of-connection-access-supported-by-the-primary-role"></a><a name="ConnectAccessForPrimary"></a> <span data-ttu-id="ceb29-134">主要角色所支援的連接存取類型</span><span class="sxs-lookup"><span data-stu-id="ceb29-134">Types of Connection Access Supported by the Primary Role</span></span>  
 <span data-ttu-id="ceb29-135">主要角色支援用戶端連接的兩種替代方式，如下所示：</span><span class="sxs-lookup"><span data-stu-id="ceb29-135">The primary role supports two alternatives for client connections, as follows:</span></span>  
  
 <span data-ttu-id="ceb29-136">允許所有連接</span><span class="sxs-lookup"><span data-stu-id="ceb29-136">All connections are allowed</span></span>  
 <span data-ttu-id="ceb29-137">同時允許與主要資料庫的讀寫和唯讀連接。</span><span class="sxs-lookup"><span data-stu-id="ceb29-137">Both read-write and read-only connections are allowed to primary databases.</span></span> <span data-ttu-id="ceb29-138">這是主要角色的預設行為。</span><span class="sxs-lookup"><span data-stu-id="ceb29-138">This is the default behavior for the primary role.</span></span>  
  
 <span data-ttu-id="ceb29-139">僅允許讀寫連接</span><span class="sxs-lookup"><span data-stu-id="ceb29-139">Allow only read-write connections</span></span>  
 <span data-ttu-id="ceb29-140">當 `Application Intent` 連接屬性設定為**ReadWrite**或未設定時，允許連接。</span><span class="sxs-lookup"><span data-stu-id="ceb29-140">When the `Application Intent` connection property is set to **ReadWrite** or is not set, the connection is allowed.</span></span> <span data-ttu-id="ceb29-141">`Application Intent`不允許連接字串關鍵字設定為的連接 `ReadOnly` 。</span><span class="sxs-lookup"><span data-stu-id="ceb29-141">Connections for which the `Application Intent` connection string keyword is set to `ReadOnly` are not allowed.</span></span> <span data-ttu-id="ceb29-142">僅允許讀寫連接有助於防止客戶錯誤地將讀取意圖的工作負載連接至主要複本。</span><span class="sxs-lookup"><span data-stu-id="ceb29-142">Allowing only read-write connections can help prevent your customers from connecting a read-intent work load to the primary replica by mistake.</span></span>  
  
 <span data-ttu-id="ceb29-143">如需有關此連接屬性的詳細資訊，請參閱＜ [Using Connection String Keywords with SQL Server Native Client](../../../relational-databases/native-client/applications/using-connection-string-keywords-with-sql-server-native-client.md)＞。</span><span class="sxs-lookup"><span data-stu-id="ceb29-143">For information about this connection property, see [Using Connection String Keywords with SQL Server Native Client](../../../relational-databases/native-client/applications/using-connection-string-keywords-with-sql-server-native-client.md).</span></span>  
  
 <span data-ttu-id="ceb29-144">如需詳細資訊，請參閱 [設定可用性複本上的唯讀存取 &#40;SQL Server&#41;](configure-read-only-access-on-an-availability-replica-sql-server.md)。</span><span class="sxs-lookup"><span data-stu-id="ceb29-144">For more information, see [Configure Read-Only Access on an Availability Replica &#40;SQL Server&#41;](configure-read-only-access-on-an-availability-replica-sql-server.md).</span></span>  
  
##  <a name="how-the-connection-access-configuration-affects-client-connectivity"></a><a name="HowConnectionAccessAffectsConnectivity"></a> <span data-ttu-id="ceb29-145">連接存取組態如何影響用戶端連接</span><span class="sxs-lookup"><span data-stu-id="ceb29-145">How the Connection Access Configuration Affects Client Connectivity</span></span>  
 <span data-ttu-id="ceb29-146">複本的連接存取設定會判斷連接嘗試失敗或成功。</span><span class="sxs-lookup"><span data-stu-id="ceb29-146">The connection access settings of a replica determine whether a connection attempt fails or succeeds.</span></span> <span data-ttu-id="ceb29-147">下表摘要說明每個連接存取設定的給定連接嘗試成功或失敗。</span><span class="sxs-lookup"><span data-stu-id="ceb29-147">The following table summarizes whether a given connection attempt succeeds or fails for each the connection-access setting.</span></span>  
  
|<span data-ttu-id="ceb29-148">複本角色</span><span class="sxs-lookup"><span data-stu-id="ceb29-148">Replica Role</span></span>|<span data-ttu-id="ceb29-149">複本上支援的連接存取</span><span class="sxs-lookup"><span data-stu-id="ceb29-149">Connection Access Supported on Replica</span></span>|<span data-ttu-id="ceb29-150">連接意圖</span><span class="sxs-lookup"><span data-stu-id="ceb29-150">Connection Intent</span></span>|<span data-ttu-id="ceb29-151">連接嘗試結果</span><span class="sxs-lookup"><span data-stu-id="ceb29-151">Connection-Attempt Result</span></span>|  
|------------------|--------------------------------------------|-----------------------|--------------------------------|  
|<span data-ttu-id="ceb29-152">次要</span><span class="sxs-lookup"><span data-stu-id="ceb29-152">Secondary</span></span>|<span data-ttu-id="ceb29-153">全部</span><span class="sxs-lookup"><span data-stu-id="ceb29-153">All</span></span>|<span data-ttu-id="ceb29-154">讀取意圖、讀寫，或未指定任何連接意圖</span><span class="sxs-lookup"><span data-stu-id="ceb29-154">Read-intent, read-write, or no connection intent specified</span></span>|<span data-ttu-id="ceb29-155">Success</span><span class="sxs-lookup"><span data-stu-id="ceb29-155">Success</span></span>|  
|<span data-ttu-id="ceb29-156">次要</span><span class="sxs-lookup"><span data-stu-id="ceb29-156">Secondary</span></span>|<span data-ttu-id="ceb29-157">無 (這是預設的次要行為)。</span><span class="sxs-lookup"><span data-stu-id="ceb29-157">None (This is the default secondary behavior.)</span></span>|<span data-ttu-id="ceb29-158">讀取意圖、讀寫，或未指定任何連接意圖</span><span class="sxs-lookup"><span data-stu-id="ceb29-158">Read-intent, read-write, or no connection intent specified</span></span>|<span data-ttu-id="ceb29-159">失敗</span><span class="sxs-lookup"><span data-stu-id="ceb29-159">Failure</span></span>|  
|<span data-ttu-id="ceb29-160">次要</span><span class="sxs-lookup"><span data-stu-id="ceb29-160">Secondary</span></span>|<span data-ttu-id="ceb29-161">僅限讀取意圖</span><span class="sxs-lookup"><span data-stu-id="ceb29-161">Read-intent only</span></span>|<span data-ttu-id="ceb29-162">讀取意圖</span><span class="sxs-lookup"><span data-stu-id="ceb29-162">Read-intent</span></span>|<span data-ttu-id="ceb29-163">Success</span><span class="sxs-lookup"><span data-stu-id="ceb29-163">Success</span></span>|  
|<span data-ttu-id="ceb29-164">次要</span><span class="sxs-lookup"><span data-stu-id="ceb29-164">Secondary</span></span>|<span data-ttu-id="ceb29-165">僅限讀取意圖</span><span class="sxs-lookup"><span data-stu-id="ceb29-165">Read-intent only</span></span>|<span data-ttu-id="ceb29-166">讀寫，或未指定任何連接意圖</span><span class="sxs-lookup"><span data-stu-id="ceb29-166">Read-write or no connection intent specified</span></span>|<span data-ttu-id="ceb29-167">失敗</span><span class="sxs-lookup"><span data-stu-id="ceb29-167">Failure</span></span>|  
|<span data-ttu-id="ceb29-168">主要</span><span class="sxs-lookup"><span data-stu-id="ceb29-168">Primary</span></span>|<span data-ttu-id="ceb29-169">全部 (這是預設的主要行為)。</span><span class="sxs-lookup"><span data-stu-id="ceb29-169">All (This is the default primary behavior.)</span></span>|<span data-ttu-id="ceb29-170">唯讀、讀寫，或未指定任何連接意圖</span><span class="sxs-lookup"><span data-stu-id="ceb29-170">Read-only, read-write, or no connection intent specified</span></span>|<span data-ttu-id="ceb29-171">Success</span><span class="sxs-lookup"><span data-stu-id="ceb29-171">Success</span></span>|  
|<span data-ttu-id="ceb29-172">主要</span><span class="sxs-lookup"><span data-stu-id="ceb29-172">Primary</span></span>|<span data-ttu-id="ceb29-173">讀寫</span><span class="sxs-lookup"><span data-stu-id="ceb29-173">Read-write</span></span>|<span data-ttu-id="ceb29-174">僅限讀取意圖</span><span class="sxs-lookup"><span data-stu-id="ceb29-174">Read-intent only</span></span>|<span data-ttu-id="ceb29-175">失敗</span><span class="sxs-lookup"><span data-stu-id="ceb29-175">Failure</span></span>|  
|<span data-ttu-id="ceb29-176">主要</span><span class="sxs-lookup"><span data-stu-id="ceb29-176">Primary</span></span>|<span data-ttu-id="ceb29-177">讀寫</span><span class="sxs-lookup"><span data-stu-id="ceb29-177">Read-write</span></span>|<span data-ttu-id="ceb29-178">讀寫，或未指定任何連接意圖</span><span class="sxs-lookup"><span data-stu-id="ceb29-178">Read-write or no connection intent specified</span></span>|<span data-ttu-id="ceb29-179">Success</span><span class="sxs-lookup"><span data-stu-id="ceb29-179">Success</span></span>|  
  
 <span data-ttu-id="ceb29-180">如需設定可用性群組接受用戶端連接至其複本的相關資訊，請參閱 [可用性群組接聽程式、用戶端連接及應用程式容錯移轉 &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md)。</span><span class="sxs-lookup"><span data-stu-id="ceb29-180">For information about configuring an availability group to accept client connections to its replicas, see [Availability Group Listeners, Client Connectivity, and Application Failover &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md).</span></span>  
  
### <a name="example-connection-access-configuration"></a><span data-ttu-id="ceb29-181">連接存取組態範例</span><span class="sxs-lookup"><span data-stu-id="ceb29-181">Example Connection-Access Configuration</span></span>  
 <span data-ttu-id="ceb29-182">根據不同可用性複本設定成連接存取的方式，用戶端連接的支援可能會在可用性群組容錯移轉之後變更。</span><span class="sxs-lookup"><span data-stu-id="ceb29-182">Depending on how different availability replicas are configured for connection access, support for client connections might change after an availability group fails over.</span></span> <span data-ttu-id="ceb29-183">例如，請考慮使用針對遠端非同步認可次要複本執行其報告的可用性群組。</span><span class="sxs-lookup"><span data-stu-id="ceb29-183">For example, consider an availability group for which reporting is performed on remote asynchronous-commit secondary replicas.</span></span> <span data-ttu-id="ceb29-184">此可用性群組中資料庫的所有唯讀應用程式都會將其 `Application Intent` 連接屬性設為 `ReadOnly`，讓所有唯讀連接都是讀取意圖連接。</span><span class="sxs-lookup"><span data-stu-id="ceb29-184">All of the read-only applications for the databases in this availability group set their `Application Intent` connection property to `ReadOnly`, so that all read-only connections are read-intent connections.</span></span>  
  
 <span data-ttu-id="ceb29-185">此可用性群組範例在主要運算中心擁有兩個同步認可複本，並在衛星站台擁有兩個非同步認可複本。</span><span class="sxs-lookup"><span data-stu-id="ceb29-185">This example availability group possesses two synchronous-commit replicas at the main computing center and two asynchronous-commit replicas at a satellite site.</span></span> <span data-ttu-id="ceb29-186">對於主要角色，所有複本都會設定成讀寫存取，以防止所有情況下主要複本的讀取意圖連接。</span><span class="sxs-lookup"><span data-stu-id="ceb29-186">For the primary role, all the replicas are configured for read-write access, which prevents read-intent connections to the primary replica in all situations.</span></span> <span data-ttu-id="ceb29-187">同步認可次要角色使用預設的連接存取組態 (「無」)，以防止次要角色下的所有用戶端連接。</span><span class="sxs-lookup"><span data-stu-id="ceb29-187">The synchronous commit secondary role uses the default connection-access configuration ("none"), which prevents all client connections under the secondary role.</span></span>  <span data-ttu-id="ceb29-188">對照之下，非同步認可複本會設定成允許使用次要角色的讀取意圖連接。</span><span class="sxs-lookup"><span data-stu-id="ceb29-188">In contrast, the asynchronous commit replicas are configured to permit read-intent connections under the secondary role.</span></span> <span data-ttu-id="ceb29-189">下表摘要說明這個範例組態：</span><span class="sxs-lookup"><span data-stu-id="ceb29-189">The following table summarize this example configuration:</span></span>  
  
|<span data-ttu-id="ceb29-190">複本</span><span class="sxs-lookup"><span data-stu-id="ceb29-190">Replica</span></span>|<span data-ttu-id="ceb29-191">認可模式</span><span class="sxs-lookup"><span data-stu-id="ceb29-191">Commit Mode</span></span>|<span data-ttu-id="ceb29-192">初始角色</span><span class="sxs-lookup"><span data-stu-id="ceb29-192">Initial Role</span></span>|<span data-ttu-id="ceb29-193">次要角色的連接存取</span><span class="sxs-lookup"><span data-stu-id="ceb29-193">Connection Access for Secondary Role</span></span>|<span data-ttu-id="ceb29-194">主要角色的連接存取</span><span class="sxs-lookup"><span data-stu-id="ceb29-194">Connection Access for Primary Role</span></span>|  
|-------------|-----------------|------------------|------------------------------------------|----------------------------------------|  
|<span data-ttu-id="ceb29-195">Replica1</span><span class="sxs-lookup"><span data-stu-id="ceb29-195">Replica1</span></span>|<span data-ttu-id="ceb29-196">同步</span><span class="sxs-lookup"><span data-stu-id="ceb29-196">Synchronous</span></span>|<span data-ttu-id="ceb29-197">主要</span><span class="sxs-lookup"><span data-stu-id="ceb29-197">Primary</span></span>|<span data-ttu-id="ceb29-198">None</span><span class="sxs-lookup"><span data-stu-id="ceb29-198">None</span></span>|<span data-ttu-id="ceb29-199">讀寫</span><span class="sxs-lookup"><span data-stu-id="ceb29-199">Read-write</span></span>|  
|<span data-ttu-id="ceb29-200">Replica2</span><span class="sxs-lookup"><span data-stu-id="ceb29-200">Replica2</span></span>|<span data-ttu-id="ceb29-201">同步</span><span class="sxs-lookup"><span data-stu-id="ceb29-201">Synchronous</span></span>|<span data-ttu-id="ceb29-202">次要</span><span class="sxs-lookup"><span data-stu-id="ceb29-202">Secondary</span></span>|<span data-ttu-id="ceb29-203">無</span><span class="sxs-lookup"><span data-stu-id="ceb29-203">None</span></span>|<span data-ttu-id="ceb29-204">讀寫</span><span class="sxs-lookup"><span data-stu-id="ceb29-204">Read-write</span></span>|  
|<span data-ttu-id="ceb29-205">Replica3</span><span class="sxs-lookup"><span data-stu-id="ceb29-205">Replica3</span></span>|<span data-ttu-id="ceb29-206">非同步的</span><span class="sxs-lookup"><span data-stu-id="ceb29-206">Asynchronous</span></span>|<span data-ttu-id="ceb29-207">次要</span><span class="sxs-lookup"><span data-stu-id="ceb29-207">Secondary</span></span>|<span data-ttu-id="ceb29-208">僅限讀取意圖</span><span class="sxs-lookup"><span data-stu-id="ceb29-208">Read-intentonly</span></span>|<span data-ttu-id="ceb29-209">讀寫</span><span class="sxs-lookup"><span data-stu-id="ceb29-209">Read-write</span></span>|  
|<span data-ttu-id="ceb29-210">Replica4</span><span class="sxs-lookup"><span data-stu-id="ceb29-210">Replica4</span></span>|<span data-ttu-id="ceb29-211">非同步</span><span class="sxs-lookup"><span data-stu-id="ceb29-211">Asynchronous</span></span>|<span data-ttu-id="ceb29-212">次要</span><span class="sxs-lookup"><span data-stu-id="ceb29-212">Secondary</span></span>|<span data-ttu-id="ceb29-213">僅限讀取意圖</span><span class="sxs-lookup"><span data-stu-id="ceb29-213">Read-intent only</span></span>|<span data-ttu-id="ceb29-214">讀寫</span><span class="sxs-lookup"><span data-stu-id="ceb29-214">Read-write</span></span>|  
  
 <span data-ttu-id="ceb29-215">在此範例狀況下，容錯移轉通常只發生在同步認可複本之間，而且剛容錯移轉之後，讀取意圖應用程式可以重新連接至其中一個非同步認可次要複本。</span><span class="sxs-lookup"><span data-stu-id="ceb29-215">Typically, in this example scenario, failovers occur only between the synchronous-commit replicas, and  immediately after the failover, read-intent applications are able to reconnect to one of the asynchronous-commit secondary replicas.</span></span> <span data-ttu-id="ceb29-216">不過，在主要運算中心發生災難時，兩個同步認可複本都會遺失。</span><span class="sxs-lookup"><span data-stu-id="ceb29-216">However, when a disaster occurs at the main computing center both synchronous-commit replicas are lost.</span></span> <span data-ttu-id="ceb29-217">衛星站台的資料庫管理員會透過對非同步認可次要複本執行強制手動容錯移轉來回應。</span><span class="sxs-lookup"><span data-stu-id="ceb29-217">The database administrator at the satellite site responds by performing a forced manual failover to an asynchronous-commit secondary replica.</span></span> <span data-ttu-id="ceb29-218">其餘次要複本上的次要資料庫會透過強制容錯移轉暫停，讓它們無法用於唯讀工作負載。</span><span class="sxs-lookup"><span data-stu-id="ceb29-218">The secondary databases on the remaining secondary replica are suspended by the forced failover, making them unavailable for read-only workloads.</span></span> <span data-ttu-id="ceb29-219">設定成讀寫連接的新主要複本會讓讀取意圖工作負載無法與讀寫工作負載競爭。</span><span class="sxs-lookup"><span data-stu-id="ceb29-219">The new primary replica, which is configured for read-write connections, prevents the read-intent workload from competing with the read-write workload.</span></span> <span data-ttu-id="ceb29-220">也就是說，在資料庫管理員針對其餘非同步認可次要複本繼續次要資料庫之前，讀取意圖用戶端無法連接至任何可用性複本。</span><span class="sxs-lookup"><span data-stu-id="ceb29-220">This means that until the database administrator resumes the secondary databases on the remaining asynchronous-commit secondary replica, read-intent clients cannot connect to any availability replica.</span></span>  
  
##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="ceb29-221">相關工作</span><span class="sxs-lookup"><span data-stu-id="ceb29-221">Related Tasks</span></span>  
  
-   [<span data-ttu-id="ceb29-222">設定可用性複本的唯讀存取 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="ceb29-222">Configure Read-Only Access on an Availability Replica &#40;SQL Server&#41;</span></span>](configure-read-only-access-on-an-availability-replica-sql-server.md)  
  
-   [<span data-ttu-id="ceb29-223">設定可用性群組的唯讀路由 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="ceb29-223">Configure Read-Only Routing for an Availability Group &#40;SQL Server&#41;</span></span>](configure-read-only-routing-for-an-availability-group-sql-server.md)  
  
-   [<span data-ttu-id="ceb29-224">監視可用性群組 &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="ceb29-224">Monitor Availability Groups &#40;Transact-SQL&#41;</span></span>](monitor-availability-groups-transact-sql.md)  
  
-   [<span data-ttu-id="ceb29-225">檢視可用性複本屬性 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="ceb29-225">View Availability Replica Properties &#40;SQL Server&#41;</span></span>](view-availability-replica-properties-sql-server.md)  
  
-   [<span data-ttu-id="ceb29-226">使用新增可用性群組對話方塊 &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="ceb29-226">Use the New Availability Group Dialog Box &#40;SQL Server Management Studio&#41;</span></span>](use-the-new-availability-group-dialog-box-sql-server-management-studio.md)  
  
##  <a name="related-content"></a><a name="RelatedContent"></a> <span data-ttu-id="ceb29-227">相關內容</span><span class="sxs-lookup"><span data-stu-id="ceb29-227">Related Content</span></span>  
  
-   [<span data-ttu-id="ceb29-228">Microsoft SQL Server AlwaysOn 高可用性和災害復原方案指南</span><span class="sxs-lookup"><span data-stu-id="ceb29-228">Microsoft SQL Server AlwaysOn Solutions Guide for High Availability and Disaster Recovery</span></span>](https://go.microsoft.com/fwlink/?LinkId=227600)  
  
-   [<span data-ttu-id="ceb29-229">SQL Server AlwaysOn 團隊部落格：官方 SQL Server AlwaysOn 團隊部落格</span><span class="sxs-lookup"><span data-stu-id="ceb29-229">SQL Server AlwaysOn Team Blog: The official SQL Server AlwaysOn Team Blog</span></span>](https://blogs.msdn.com/b/sqlalwayson/)  
  
## <a name="see-also"></a><span data-ttu-id="ceb29-230">另請參閱</span><span class="sxs-lookup"><span data-stu-id="ceb29-230">See Also</span></span>  
 <span data-ttu-id="ceb29-231">[AlwaysOn 可用性群組 &#40;SQL Server 的總覽&#41;](overview-of-always-on-availability-groups-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="ceb29-231">[Overview of AlwaysOn Availability Groups &#40;SQL Server&#41;](overview-of-always-on-availability-groups-sql-server.md) </span></span>  
 <span data-ttu-id="ceb29-232">[可用性群組接聽程式、用戶端連接性及應用程式容錯移轉 &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md) </span><span class="sxs-lookup"><span data-stu-id="ceb29-232">[Availability Group Listeners, Client Connectivity, and Application Failover &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md) </span></span>  
 [<span data-ttu-id="ceb29-233">統計資料</span><span class="sxs-lookup"><span data-stu-id="ceb29-233">Statistics</span></span>](../../../relational-databases/statistics/statistics.md)  
  
  
