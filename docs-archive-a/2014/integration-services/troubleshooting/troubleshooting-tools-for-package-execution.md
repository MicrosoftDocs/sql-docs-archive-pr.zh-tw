---
title: 套件執行的疑難排解工具 | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
helpviewer_keywords:
- SQL Server Integration Services packages, troubleshooting
- SSIS packages, troubleshooting
- Integration Services, troubleshooting
- errors [Integration Services], troubleshooting
- packages [Integration Services], troubleshooting
ms.assetid: f18d6ff6-e881-444c-a399-730b52130e7c
author: chugugrace
ms.author: chugu
ms.openlocfilehash: cbb19cddd202ac58cbea5622b4965449c15ba325
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87592748"
---
# <a name="troubleshooting-tools-for-package-execution"></a><span data-ttu-id="32dc3-102">封裝執行的疑難排解工具</span><span class="sxs-lookup"><span data-stu-id="32dc3-102">Troubleshooting Tools for Package Execution</span></span>
  [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] <span data-ttu-id="32dc3-103">包含的功能與工具，可讓您在完成及部署封裝之後，用以疑難排解封裝的執行問題。</span><span class="sxs-lookup"><span data-stu-id="32dc3-103">includes features and tools that you can use to troubleshoot packages when you execute them after they have been completed and deployed.</span></span>  
  
 <span data-ttu-id="32dc3-104">在設計階段， [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] 會提供中斷點以暫停封裝的執行，並提供 [進度] 視窗及資料檢視器以監視通過資料流程的資料。</span><span class="sxs-lookup"><span data-stu-id="32dc3-104">At design time, [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] provides breakpoints to pause package execution, the Progress window, and data viewers to watch your data as it passes through the data flow.</span></span> <span data-ttu-id="32dc3-105">不過，如果您是執行已經部署的封裝，就無法使用這些功能。</span><span class="sxs-lookup"><span data-stu-id="32dc3-105">However, these features are not available when you are running packages that have been deployed.</span></span> <span data-ttu-id="32dc3-106">以下列出用於疑難排解已部署之封裝的主要技術：</span><span class="sxs-lookup"><span data-stu-id="32dc3-106">The main techniques for troubleshooting deployed packages are as follows:</span></span>  
  
-   <span data-ttu-id="32dc3-107">使用事件處理常式擷取及處理封裝錯誤。</span><span class="sxs-lookup"><span data-stu-id="32dc3-107">Catch and handle package errors by using event handlers.</span></span>  
  
-   <span data-ttu-id="32dc3-108">使用錯誤輸出擷取不正確的資料。</span><span class="sxs-lookup"><span data-stu-id="32dc3-108">Capture bad data by using error outputs.</span></span>  
  
-   <span data-ttu-id="32dc3-109">使用記錄功能追蹤執行封裝的步驟。</span><span class="sxs-lookup"><span data-stu-id="32dc3-109">Track the steps of package execution by using logging.</span></span>  
  
 <span data-ttu-id="32dc3-110">您也可以使用下列秘訣與技巧，避免在執行封裝時發生問題</span><span class="sxs-lookup"><span data-stu-id="32dc3-110">You can also use the following tips and techniques to avoid problems with running packages</span></span>  
  
-   <span data-ttu-id="32dc3-111">**使用交易協助確保資料的完整性**。</span><span class="sxs-lookup"><span data-stu-id="32dc3-111">**Help to ensure data integrity by using transactions**.</span></span> <span data-ttu-id="32dc3-112">如需詳細資訊，請參閱 [Integration Services 交易](../integration-services-transactions.md)。</span><span class="sxs-lookup"><span data-stu-id="32dc3-112">For more information, see [Integration Services Transactions](../integration-services-transactions.md).</span></span>  
  
-   <span data-ttu-id="32dc3-113">**使用檢查點從失敗點重新啟動封裝**。</span><span class="sxs-lookup"><span data-stu-id="32dc3-113">**Restart packages from the point of failure by using checkpoints**.</span></span> <span data-ttu-id="32dc3-114">如需詳細資訊，請參閱 [使用檢查點來重新啟動封裝](../packages/restart-packages-by-using-checkpoints.md)。</span><span class="sxs-lookup"><span data-stu-id="32dc3-114">For more information, see [Restart Packages by Using Checkpoints](../packages/restart-packages-by-using-checkpoints.md).</span></span>  
  
## <a name="catch-and-handle-package-errors-by-using-event-handlers"></a><span data-ttu-id="32dc3-115">使用事件處理常式擷取及處理封裝錯誤</span><span class="sxs-lookup"><span data-stu-id="32dc3-115">Catch and Handle Package Errors by Using Event Handlers</span></span>  
 <span data-ttu-id="32dc3-116">您可以使用事件處理常式，回應封裝以及封裝中的物件所引發的許多事件。</span><span class="sxs-lookup"><span data-stu-id="32dc3-116">You can respond to the many events that are raised by the package and the objects in the package by using event handlers.</span></span>  
  
-   <span data-ttu-id="32dc3-117">**建立 OnError 事件的事件處理常式**。</span><span class="sxs-lookup"><span data-stu-id="32dc3-117">**Create an event handler for the OnError event**.</span></span> <span data-ttu-id="32dc3-118">在事件處理常式中，您可以使用傳送郵件工作通知管理員有關失敗的消息，使用指令碼工作與自訂邏輯取得系統資訊以進行疑難排解，或是清除暫存資源或不完全的輸出。</span><span class="sxs-lookup"><span data-stu-id="32dc3-118">In the event handler, you can use a Send Mail task to notify an administrator of the failure, use a Script task and custom logic to obtain system information for troubleshooting, or clean up temporary resources or incomplete output.</span></span> <span data-ttu-id="32dc3-119">如需詳細資訊，請參閱 [Integration Services &#40;SSIS&#41; 事件處理常式](../integration-services-ssis-event-handlers.md)。</span><span class="sxs-lookup"><span data-stu-id="32dc3-119">For more information, see [Integration Services &#40;SSIS&#41; Event Handlers](../integration-services-ssis-event-handlers.md).</span></span>  
  
## <a name="troubleshoot-bad-data-by-using-error-outputs"></a><span data-ttu-id="32dc3-120">使用錯誤輸出針對不正確的資料進行疑難排解</span><span class="sxs-lookup"><span data-stu-id="32dc3-120">Troubleshoot Bad Data by Using Error Outputs</span></span>  
 <span data-ttu-id="32dc3-121">您可以使用可用於許多資料流程元件的錯誤輸出，將包含錯誤的資料列導向不同目的地，以便稍後進行分析。</span><span class="sxs-lookup"><span data-stu-id="32dc3-121">You can use the error output available on many data flow components to direct rows that contain errors to a separate destination for later analysis.</span></span>  
  
-   <span data-ttu-id="32dc3-122">**使用錯誤輸出擷取不正確的資料**。</span><span class="sxs-lookup"><span data-stu-id="32dc3-122">**Capture bad data by using error outputs**.</span></span> <span data-ttu-id="32dc3-123">將包含錯誤的資料列傳送到不同目的地，例如錯誤資料表或文字檔。</span><span class="sxs-lookup"><span data-stu-id="32dc3-123">Send rows that contain errors to a separate destination such as an error table or a text file.</span></span> <span data-ttu-id="32dc3-124">錯誤輸出會自動加入兩個數值資料行，一個包含造成資料列遭到拒絕的錯誤編號，另一個包含發生錯誤之資料行的識別碼。</span><span class="sxs-lookup"><span data-stu-id="32dc3-124">The error output automatically adds two numeric columns that contain the number of the error that caused the row to be rejected, and the ID of the column in which the error occurred.</span></span> <span data-ttu-id="32dc3-125">如需詳細資訊，請參閱 [處理資料中的錯誤](../data-flow/error-handling-in-data.md)。</span><span class="sxs-lookup"><span data-stu-id="32dc3-125">For more information, see [Error Handling in Data](../data-flow/error-handling-in-data.md).</span></span>  
  
-   <span data-ttu-id="32dc3-126">**將易懂資訊加入錯誤輸出**。</span><span class="sxs-lookup"><span data-stu-id="32dc3-126">**Add friendly information to the error outputs**.</span></span> <span data-ttu-id="32dc3-127">除了錯誤輸出所提供的兩個數值識別碼外，您還可以加入描述性的資訊，讓錯誤輸出更容易分析。</span><span class="sxs-lookup"><span data-stu-id="32dc3-127">You can make it easier to analyze the error output by adding descriptive information in addition to the two numeric identifiers that are supplied by the error output.</span></span>  
  
     <span data-ttu-id="32dc3-128">**新增錯誤的描述**。</span><span class="sxs-lookup"><span data-stu-id="32dc3-128">**Add the description of the error**.</span></span> <span data-ttu-id="32dc3-129">使用指令碼元件可以很容易地查閱錯誤描述。</span><span class="sxs-lookup"><span data-stu-id="32dc3-129">It is easy to look up the error description by using a Script component.</span></span> <span data-ttu-id="32dc3-130">如需詳細資訊，請參閱[增強腳本元件的錯誤輸出](../extending-packages-scripting-data-flow-script-component-examples/enhancing-an-error-output-with-the-script-component.md)。</span><span class="sxs-lookup"><span data-stu-id="32dc3-130">For more information, see [Enhancing an Error Output for the Script Component](../extending-packages-scripting-data-flow-script-component-examples/enhancing-an-error-output-with-the-script-component.md).</span></span>  
  
     <span data-ttu-id="32dc3-131">**加入錯誤資料行的名稱**。</span><span class="sxs-lookup"><span data-stu-id="32dc3-131">**Add the name of the error column**.</span></span> <span data-ttu-id="32dc3-132">在「指令碼」元件中，不容易以錯誤輸出所儲存之資料行識別碼，查閱相對應的資料行名稱，所以需要執行額外的步驟。</span><span class="sxs-lookup"><span data-stu-id="32dc3-132">Looking up the column name that corresponds to the column ID saved by the error output cannot easily be done in the Script component and requires additional steps.</span></span> <span data-ttu-id="32dc3-133">資料流程中的每一個資料行識別碼，在該資料流程工作內都是獨一無二的識別碼，並且在設計階段會保存於封裝中。</span><span class="sxs-lookup"><span data-stu-id="32dc3-133">Each column ID in a data flow is unique within that Data Flow task, and is persisted in the package at design time.</span></span> <span data-ttu-id="32dc3-134">以下是將資料行名稱加入錯誤輸出的建議方法。</span><span class="sxs-lookup"><span data-stu-id="32dc3-134">The following approach is one suggestion for adding the column name to the error output.</span></span> 
  
    1.  <span data-ttu-id="32dc3-135">**建立資料行名稱的查閱資料表**。</span><span class="sxs-lookup"><span data-stu-id="32dc3-135">**Create a lookup table of column names**.</span></span> <span data-ttu-id="32dc3-136">建立會使用 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] API 的個別應用程式，以便反覆查看每個儲存的封裝、封裝中的每個資料流程、資料流程中的每個物件，以及資料流程物件中的每個輸入與輸出。</span><span class="sxs-lookup"><span data-stu-id="32dc3-136">Create a separate application that uses the [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] API to iterate over each saved package, each data flow in the package, each object in the data flow, and each input and output in the data flow object.</span></span> <span data-ttu-id="32dc3-137">此應用程式應該保存查閱資料表中的資料行識別碼以及每個資料行的名稱，以及保存父資料流程工作的識別碼與封裝識別碼。</span><span class="sxs-lookup"><span data-stu-id="32dc3-137">The application should persist the column ID and name of each column to a lookup table, along with the ID of the parent Data Flow task and the ID of the package.</span></span>  
  
    2.  <span data-ttu-id="32dc3-138">**將資料行名稱加入至輸出**。</span><span class="sxs-lookup"><span data-stu-id="32dc3-138">**Add the column name to the output**.</span></span> <span data-ttu-id="32dc3-139">將「查閱」轉換加入至錯誤輸出，以便查閱在先前步驟中所建立之查閱資料表中的資料行名稱。</span><span class="sxs-lookup"><span data-stu-id="32dc3-139">Add a Lookup transformation to the error output that looks up the column name in the lookup table created in the preceding step.</span></span> <span data-ttu-id="32dc3-140">查閱可以使用錯誤輸出中的資料行識別碼、封裝識別碼 (可在系統變數 System::PackageID 中找到)，以及資料流程工作識別碼 (可在系統變數 System::TaskID 中找到)。</span><span class="sxs-lookup"><span data-stu-id="32dc3-140">The lookup can use the column ID in the error output, the package ID (available in the system variable System::PackageID), and the ID of the Data Flow task (available in the system variable System::TaskID).</span></span>  
  
## <a name="troubleshoot-package-execution-by-using-operations-reports"></a><span data-ttu-id="32dc3-141">使用作業報表針對封裝執行進行疑難排解</span><span class="sxs-lookup"><span data-stu-id="32dc3-141">Troubleshoot Package Execution by Using Operations Reports</span></span>  
 <span data-ttu-id="32dc3-142">在 [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] 中提供標準作業報表，可協助您監視已部署至 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 目錄的 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 封裝。</span><span class="sxs-lookup"><span data-stu-id="32dc3-142">Standard operations reports are available in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] to help you monitor [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] packages that have been deployed to the [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] catalog.</span></span> <span data-ttu-id="32dc3-143">這些封裝報表可協助您檢視封裝狀態及記錄，如有必要，也可協助您識別失敗原因。</span><span class="sxs-lookup"><span data-stu-id="32dc3-143">These package reports help you to view package status and history, and, if necessary, identify the cause of failures.</span></span>  
  
 <span data-ttu-id="32dc3-144">如需詳細資訊，請參閱 [疑難排解封裝執行的報表](troubleshooting-reports-for-package-execution.md)。</span><span class="sxs-lookup"><span data-stu-id="32dc3-144">For more information, see [Troubleshooting Reports for Package Execution](troubleshooting-reports-for-package-execution.md).</span></span>  
  
## <a name="troubleshoot-package-execution-by-using-ssisdb-views"></a><span data-ttu-id="32dc3-145">使用 SSISDB 檢視疑難排解封裝執行</span><span class="sxs-lookup"><span data-stu-id="32dc3-145">Troubleshoot Package Execution by Using SSISDB Views</span></span>  
 <span data-ttu-id="32dc3-146">系統提供一些您可以查詢的 SSISDB 資料庫檢視，用以監視封裝執行以及其他作業資訊。</span><span class="sxs-lookup"><span data-stu-id="32dc3-146">A number of SSISDB database views are available that you can query to monitor package execution and other operations information.</span></span> <span data-ttu-id="32dc3-147">如需詳細資訊，請參閱[監視封裝執行和其他作業](../performance/monitor-running-packages-and-other-operations.md)。</span><span class="sxs-lookup"><span data-stu-id="32dc3-147">For more information, see [Monitoring for Package Executions and Other Operations](../performance/monitor-running-packages-and-other-operations.md).</span></span>  
  
## <a name="troubleshoot-package-execution-by-using-logging"></a><span data-ttu-id="32dc3-148">使用記錄功能針對封裝執行進行疑難排解</span><span class="sxs-lookup"><span data-stu-id="32dc3-148">Troubleshoot Package Execution by Using Logging</span></span>  
 <span data-ttu-id="32dc3-149">您可以啟用記錄功能，追蹤執行中之封裝所發生的大部分事件。</span><span class="sxs-lookup"><span data-stu-id="32dc3-149">You can track much of what occurs in your running packages by enabling logging.</span></span> <span data-ttu-id="32dc3-150">記錄提供者會擷取指定之事件的相關資訊，以供稍後分析，並使用資料庫資料表、一般檔案、XML 檔案或其他支援的輸出格式儲存這項資訊。</span><span class="sxs-lookup"><span data-stu-id="32dc3-150">Log providers capture information about the specified events for later analysis, and save that information in a database table, a flat file, an XML file, or another supported output format.</span></span>  
  
-   <span data-ttu-id="32dc3-151">**啟用記錄功能**。</span><span class="sxs-lookup"><span data-stu-id="32dc3-151">**Enable logging**.</span></span> <span data-ttu-id="32dc3-152">您可以只選取想要擷取其資訊的事件與項目，藉以精簡記錄輸出。</span><span class="sxs-lookup"><span data-stu-id="32dc3-152">You can refine the logging output by selecting only the events and only the items of information that you want to capture.</span></span> <span data-ttu-id="32dc3-153">如需詳細資訊，請參閱 [Integration Services &#40;SSIS&#41; 記錄](../performance/integration-services-ssis-logging.md)和 [Integration Services &#40;SSIS&#41; 記錄](../performance/integration-services-ssis-logging.md)。</span><span class="sxs-lookup"><span data-stu-id="32dc3-153">For more information, see [Integration Services &#40;SSIS&#41; Logging](../performance/integration-services-ssis-logging.md) and [Integration Services &#40;SSIS&#41; Logging](../performance/integration-services-ssis-logging.md).</span></span>  
  
-   <span data-ttu-id="32dc3-154">**選取封裝的 [診斷] 事件以疑難排解提供者問題。**</span><span class="sxs-lookup"><span data-stu-id="32dc3-154">**Select the package's Diagnostic event to troubleshoot provider issues.**</span></span> <span data-ttu-id="32dc3-155">現在有可幫助您疑難排解封裝與外部資料來源之間互動的記錄訊息。</span><span class="sxs-lookup"><span data-stu-id="32dc3-155">There are logging messages that help you troubleshoot a package's interaction with external data sources.</span></span> <span data-ttu-id="32dc3-156">如需詳細資訊，請參閱 [疑難排解工具封裝連接](troubleshooting-tools-for-package-connectivity.md)。</span><span class="sxs-lookup"><span data-stu-id="32dc3-156">For more information, see [Troubleshooting Tools Package Connectivity](troubleshooting-tools-for-package-connectivity.md).</span></span>  
  
-   <span data-ttu-id="32dc3-157">**增強預設的記錄輸出**。</span><span class="sxs-lookup"><span data-stu-id="32dc3-157">**Enhance the default logging output**.</span></span> <span data-ttu-id="32dc3-158">每次執行封裝時，記錄功能通常會將資料列附加至記錄目的地。</span><span class="sxs-lookup"><span data-stu-id="32dc3-158">Logging typically appends rows to the logging destination each time that a package is run.</span></span> <span data-ttu-id="32dc3-159">雖然記錄輸出的每一個資料列都會以封裝的名稱和唯一識別碼來識別封裝，並且以唯一的 ExecutionID 來識別封裝的執行，但單一清單中若有大量記錄輸出，分析就會變得很困難。</span><span class="sxs-lookup"><span data-stu-id="32dc3-159">Although each row of logging output identifies the package by its name and unique identifier, and also identifies the execution of the package by a unique ExecutionID, the large quantity of logging output in a single list can become difficult to analyze.</span></span>  
  
     <span data-ttu-id="32dc3-160">以下是用於增強預設記錄輸出的一個建議方法，讓您能夠輕鬆地產生報表：</span><span class="sxs-lookup"><span data-stu-id="32dc3-160">The following approach is one suggestion for enhancing the default logging output and making it easier to generate reports:</span></span>  
  
    1.  <span data-ttu-id="32dc3-161">**建立可記錄封裝每次執行作業的父資料表**。</span><span class="sxs-lookup"><span data-stu-id="32dc3-161">**Create a parent table that logs each execution of a package**.</span></span> <span data-ttu-id="32dc3-162">在這個父資料表中，封裝的各次執行作業只能分別記錄在單一資料列，並使用 ExecutionID 連結到 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 記錄資料表中的子記錄。</span><span class="sxs-lookup"><span data-stu-id="32dc3-162">This parent table has only a single row for each execution of a package, and uses the ExecutionID to link to the child records in the [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] logging table.</span></span> <span data-ttu-id="32dc3-163">您可以在每個封裝的開頭使用執行 SQL 工作，以建立這個新的資料列，並記錄開始時間；</span><span class="sxs-lookup"><span data-stu-id="32dc3-163">You can use an Execute SQL task at the beginning of each package to create this new row and to record the start time.</span></span> <span data-ttu-id="32dc3-164">接著再於封裝結尾使用另一個執行 SQL 工作，以結束時間、期間與狀態更新資料列。</span><span class="sxs-lookup"><span data-stu-id="32dc3-164">Then you can use another Execute SQL task at the end of the package to update the row with the end time, duration, and status.</span></span>  
  
    2.  <span data-ttu-id="32dc3-165">**將稽核資訊加入資料流程**。</span><span class="sxs-lookup"><span data-stu-id="32dc3-165">**Add auditing information to the data flow**.</span></span> <span data-ttu-id="32dc3-166">您可以使用「稽核」轉換將建立或修改每一個資料列的封裝執行資訊，加入資料流程中的資料列。</span><span class="sxs-lookup"><span data-stu-id="32dc3-166">You can use the Audit transformation to add information to rows in the data flow about the package execution that created or modified each row.</span></span> <span data-ttu-id="32dc3-167">「稽核」轉換可提供九項資訊，包括 PackageName 和 ExecutionInstanceGUID。</span><span class="sxs-lookup"><span data-stu-id="32dc3-167">The Audit transformation makes nine pieces of information available, including the PackageName and ExecutionInstanceGUID.</span></span> <span data-ttu-id="32dc3-168">如需詳細資訊，請參閱 [稽核轉換](../data-flow/transformations/audit-transformation.md)。</span><span class="sxs-lookup"><span data-stu-id="32dc3-168">For more information, see [Audit Transformation](../data-flow/transformations/audit-transformation.md).</span></span> <span data-ttu-id="32dc3-169">為了進行稽核，如果您有想要加入每個資料列的自訂資訊，便可以使用「衍生的資料行」轉換將這項資訊加入資料流程中的資料列。</span><span class="sxs-lookup"><span data-stu-id="32dc3-169">If you have custom information that you would also like to include in each row for auditing purposes, you can add this information to rows in the data flow by using a Derived Column transformation.</span></span> <span data-ttu-id="32dc3-170">如需詳細資訊，請參閱 [衍生的資料行轉換](../data-flow/transformations/derived-column-transformation.md)。</span><span class="sxs-lookup"><span data-stu-id="32dc3-170">For more information, see [Derived Column Transformation](../data-flow/transformations/derived-column-transformation.md).</span></span>  
  
    3.  <span data-ttu-id="32dc3-171">**考慮擷取資料列計數資料**。</span><span class="sxs-lookup"><span data-stu-id="32dc3-171">**Consider capturing row count data**.</span></span> <span data-ttu-id="32dc3-172">請考慮另外建立資料表以存放資料列計數資訊，在此資料表中，是以封裝的 ExecutionID 識別封裝執行的每個執行個體。</span><span class="sxs-lookup"><span data-stu-id="32dc3-172">Consider creating a separate table for row count information, where each instance of package execution is identified by its ExecutionID.</span></span> <span data-ttu-id="32dc3-173">使用「資料列計數」轉換，在資料流程的關鍵點將資料列計數儲存到一系列變數中。</span><span class="sxs-lookup"><span data-stu-id="32dc3-173">Use the Row Count transformation to save the row count into a series of variables at critical points in the data flow.</span></span> <span data-ttu-id="32dc3-174">資料流程結束後，請使用執行 SQL 工作將這一系列的值插入資料表中的資料列，以供稍後進行分析及製作報表。</span><span class="sxs-lookup"><span data-stu-id="32dc3-174">After the data flow ends, use an Execute SQL task to insert the series of values into a row in the table for later analysis and reporting.</span></span>  
  
     <span data-ttu-id="32dc3-175">如需此方法的詳細資訊，請參閱 [!INCLUDE[msCoName](../../includes/msconame-md.md)] 白皮書中以下內容的＜ETL 稽核與記錄＞一節：[Project REAL：Business Intelligence ETL 設計練習](https://www.microsoft.com/download/details.aspx?id=14582) (英文) 白皮書中的＜獨特的維度狀況＞一節。</span><span class="sxs-lookup"><span data-stu-id="32dc3-175">For more information about this approach, see the section, "ETL Auditing and Logging," in the [!INCLUDE[msCoName](../../includes/msconame-md.md)] white paper, [Project REAL: Business Intelligence ETL Design Practices](https://www.microsoft.com/download/details.aspx?id=14582).</span></span>  
  
## <a name="troubleshoot-package-execution-by-using-debug-dump-files"></a><span data-ttu-id="32dc3-176">使用偵錯傾印檔案針對封裝執行進行疑難排解</span><span class="sxs-lookup"><span data-stu-id="32dc3-176">Troubleshoot Package Execution by Using Debug Dump Files</span></span>  
 <span data-ttu-id="32dc3-177">在 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)]中，您可以建立偵錯傾印檔案，以便提供封裝執行的資訊。</span><span class="sxs-lookup"><span data-stu-id="32dc3-177">In [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)], you can create debug dump files that provide information about the execution of a package.</span></span> <span data-ttu-id="32dc3-178">如需相關資訊，請參閱 [產生封裝執行的傾印檔案](generating-dump-files-for-package-execution.md)。</span><span class="sxs-lookup"><span data-stu-id="32dc3-178">For more information, see [Generating Dump Files for Package Execution](generating-dump-files-for-package-execution.md).</span></span>  
  
## <a name="troubleshoot-run-time-validation-issues"></a><span data-ttu-id="32dc3-179">疑難排解執行階段驗證的問題</span><span class="sxs-lookup"><span data-stu-id="32dc3-179">Troubleshoot Run-time Validation Issues</span></span>  
 <span data-ttu-id="32dc3-180">有時候在尚未執行封裝中的優先工作之前，您可能無法連接到資料來源，或者無法驗證封裝的某些部分。</span><span class="sxs-lookup"><span data-stu-id="32dc3-180">Sometimes you might not be able to connect to your data sources, or portions of your package cannot be validated, until prior tasks in the package have executed.</span></span> [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] <span data-ttu-id="32dc3-181">包含下列功能，可協助您避免因這些狀況而造成的驗證錯誤：</span><span class="sxs-lookup"><span data-stu-id="32dc3-181">includes the following features to help you avoid the validation errors that would otherwise result from these conditions:</span></span>  
  
-   <span data-ttu-id="32dc3-182">**設定載入封裝時無效之封裝元素的 DelayValidation 屬性**。</span><span class="sxs-lookup"><span data-stu-id="32dc3-182">**Configure the DelayValidation property on package elements that are not valid when the package is loaded**.</span></span> <span data-ttu-id="32dc3-183">您可以將組態無效之封裝元素的 `DelayValidation` 設為 `True`，以避免載入封裝時發生驗證錯誤。</span><span class="sxs-lookup"><span data-stu-id="32dc3-183">You can set `DelayValidation` to `True` on package elements whose configuration is not valid, to prevent validation errors when the package is loaded.</span></span> <span data-ttu-id="32dc3-184">例如，您可能有一項會使用目的地資料表的資料流程工作，而這個目的地資料表卻要等到執行 SQL 工作在執行階段建立資料表後才會存在。</span><span class="sxs-lookup"><span data-stu-id="32dc3-184">For example, you may have a Data Flow task that uses a destination table that does not exist until an Execute SQL task creates the table at run time.</span></span> <span data-ttu-id="32dc3-185">`DelayValidation` 屬性可以在封裝層級啟用，也可以在封裝所包含的個別工作和容器層級啟用。</span><span class="sxs-lookup"><span data-stu-id="32dc3-185">The `DelayValidation` property can be enabled at the package level, or at the level of the individual tasks and containers that the package includes.</span></span>  
  
     <span data-ttu-id="32dc3-186">您可以針對資料流程工作設定 `DelayValidation` 屬性，但無法針對個別資料流程元件設定這個屬性。</span><span class="sxs-lookup"><span data-stu-id="32dc3-186">The `DelayValidation` property can be set on a Data Flow task, but not on individual data flow components.</span></span> <span data-ttu-id="32dc3-187">將個別資料流程元件的 <xref:Microsoft.SqlServer.Dts.Pipeline.Wrapper.IDTSComponentMetaData100.ValidateExternalMetadata%2A> 屬性設為 `false`，也可以達到類似的效果。</span><span class="sxs-lookup"><span data-stu-id="32dc3-187">You can achieve a similar effect by setting the <xref:Microsoft.SqlServer.Dts.Pipeline.Wrapper.IDTSComponentMetaData100.ValidateExternalMetadata%2A> property of individual data flow components to `false`.</span></span> <span data-ttu-id="32dc3-188">不過，當這個屬性的值是 `false` 時，元件不會察覺對外部資料來源之中繼資料所做的變更。</span><span class="sxs-lookup"><span data-stu-id="32dc3-188">However, when the value of this property is `false`, the component is not aware of changes to the metadata of external data sources.</span></span> <span data-ttu-id="32dc3-189">設為 `true` 時，<xref:Microsoft.SqlServer.Dts.Pipeline.Wrapper.IDTSComponentMetaData100.ValidateExternalMetadata%2A> 屬性可以協助避免因資料庫中的鎖定而造成的封鎖問題，尤其是在封裝使用交易時。</span><span class="sxs-lookup"><span data-stu-id="32dc3-189">When set to `true`, the <xref:Microsoft.SqlServer.Dts.Pipeline.Wrapper.IDTSComponentMetaData100.ValidateExternalMetadata%2A> property can help to avoid blocking issues caused by locking in the database, especially when the package is using transactions.</span></span>  
  
## <a name="troubleshoot-run-time-permissions-issues"></a><span data-ttu-id="32dc3-190">疑難排解執行階段權限的問題</span><span class="sxs-lookup"><span data-stu-id="32dc3-190">Troubleshoot Run-time Permissions Issues</span></span>  
 <span data-ttu-id="32dc3-191">如果您嘗試使用 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent 執行已部署封裝時發生錯誤，可能此代理程式所使用的帳戶沒有必要權限。</span><span class="sxs-lookup"><span data-stu-id="32dc3-191">If you encounter errors when trying to run deployed packages by using [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent, the accounts used by Agent might not have the required permissions.</span></span> <span data-ttu-id="32dc3-192">如需如何為您從 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent 作業執行的封裝進行疑難排解的資訊，請參閱 [從 SQL Server Agent 作業步驟呼叫 SSIS 封裝時，SSIS 封裝未執行](https://support.microsoft.com/kb/918760)。</span><span class="sxs-lookup"><span data-stu-id="32dc3-192">For information on how to troubleshoot packages that are run from [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent jobs, see [An SSIS package does not run when you call the SSIS package from a SQL Server Agent job step](https://support.microsoft.com/kb/918760).</span></span> <span data-ttu-id="32dc3-193">如需如何從 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent 作業執行封裝的詳細資訊，請參閱 [封裝的 SQL Server Agent 作業](../packages/sql-server-agent-jobs-for-packages.md)。</span><span class="sxs-lookup"><span data-stu-id="32dc3-193">For more information on how to run packages from [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent jobs, see [SQL Server Agent Jobs for Packages](../packages/sql-server-agent-jobs-for-packages.md).</span></span>  
  
 <span data-ttu-id="32dc3-194">若要連接至 Excel 或 Access 資料來源， [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent 需要使用在 TEMP 和 TMP 環境變數所指定之資料夾中有權讀取、寫入、建立和刪除暫存檔的帳戶。</span><span class="sxs-lookup"><span data-stu-id="32dc3-194">To connect to Excel or Access data sources, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent requires an account that has permission to read, write, create, and delete temporary files in the folder that is specified by the TEMP and TMP environment variables.</span></span>  
  
## <a name="troubleshoot-64-bit-issues"></a><span data-ttu-id="32dc3-195">疑難排解 64 位元的問題</span><span class="sxs-lookup"><span data-stu-id="32dc3-195">Troubleshoot 64-bit Issues</span></span>  
  
-   <span data-ttu-id="32dc3-196">**在 64 位元平台上無法使用某些資料提供者**。</span><span class="sxs-lookup"><span data-stu-id="32dc3-196">**Some data providers are not available on the 64-bit platform**.</span></span> <span data-ttu-id="32dc3-197">特別是，連接到 Excel 或 Access 資料來源所必須的 [!INCLUDE[msCoName](../../includes/msconame-md.md)] Jet OLE DB Provider 沒有 64 位元版本。</span><span class="sxs-lookup"><span data-stu-id="32dc3-197">In particular, the [!INCLUDE[msCoName](../../includes/msconame-md.md)] Jet OLE DB Provider that is required to connect to Excel or Access data sources is not available in a 64-bit version.</span></span>  
  
## <a name="troubleshoot-errors-without-a-description"></a><span data-ttu-id="32dc3-198">疑難排解沒有隨附描述的錯誤</span><span class="sxs-lookup"><span data-stu-id="32dc3-198">Troubleshoot Errors without a Description</span></span>  
 <span data-ttu-id="32dc3-199">如果您遇到沒有隨附描述的 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 錯誤，可以經由查閱錯誤的編號找出列在 [Integration Services 錯誤和訊息參考](../integration-services-error-and-message-reference.md) 中的錯誤描述。</span><span class="sxs-lookup"><span data-stu-id="32dc3-199">If you encounter an [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] error that does not have an accompanying description, you can locate the description in [Integration Services Error and Message Reference](../integration-services-error-and-message-reference.md) by looking up the error by its number.</span></span> <span data-ttu-id="32dc3-200">此清單這次沒有包含疑難排解資訊。</span><span class="sxs-lookup"><span data-stu-id="32dc3-200">The list does not include troubleshooting information at this time.</span></span>  
  
## <a name="related-tasks"></a><span data-ttu-id="32dc3-201">相關工作</span><span class="sxs-lookup"><span data-stu-id="32dc3-201">Related Tasks</span></span>  
 [<span data-ttu-id="32dc3-202">在資料流程元件中設定錯誤輸出</span><span class="sxs-lookup"><span data-stu-id="32dc3-202">Configure an Error Output in a Data Flow Component</span></span>](../configure-an-error-output-in-a-data-flow-component.md)  
  
  
