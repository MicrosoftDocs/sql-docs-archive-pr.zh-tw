---
title: 套件中敏感性資料的存取控制 | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
helpviewer_keywords:
- passwords [Integration Services]
- packages [Integration Services], security
- protection levels for packages [Integration Services]
- configuration files [Integration Services]
- encryption [Integration Services]
- cryptography [Integration Services]
- security [Integration Services], protection levels
ms.assetid: d4b073c4-4238-41fc-a258-4e114216e185
author: chugugrace
ms.author: chugu
ms.openlocfilehash: af1c29f2871d0cb43436fa065d16b24cb78fcce7
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87592755"
---
# <a name="access-control-for-sensitive-data-in-packages"></a><span data-ttu-id="5426e-102">封裝中的敏感性資料存取控制</span><span class="sxs-lookup"><span data-stu-id="5426e-102">Access Control for Sensitive Data in Packages</span></span>
  <span data-ttu-id="5426e-103">若要保護 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 封裝中的資料，您可以設定保護等級，只保護封裝中的機密資料或全部資料。</span><span class="sxs-lookup"><span data-stu-id="5426e-103">To protect the data in an [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] package, you can set a protection level that helps protect just sensitive data or all the data in the package.</span></span> <span data-ttu-id="5426e-104">此外，您可以使用密碼或使用者金鑰將資料加密，或是藉由資料庫來加密資料。</span><span class="sxs-lookup"><span data-stu-id="5426e-104">Furthermore, you can encrypt this data with a password or a user key, or rely on the database to encrypt the data.</span></span> <span data-ttu-id="5426e-105">也請注意，用於封裝的保護等級不一定是靜態的，而是隨著封裝生命週期有所改變。</span><span class="sxs-lookup"><span data-stu-id="5426e-105">Also, the protection level that you use for a package is not necessarily static, but changes throughout the life cycle of the package.</span></span> <span data-ttu-id="5426e-106">通常，您會在開發階段設定一個保護等級，然後在部署封裝時設定另一個保護等級。</span><span class="sxs-lookup"><span data-stu-id="5426e-106">You often set one protection level during development and another as soon as you deploy the package.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="5426e-107">除了本主題所描述的保護等級之外，您也可以使用固定的資料庫層級角色來保護儲存到 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 伺服器的封裝。</span><span class="sxs-lookup"><span data-stu-id="5426e-107">In addition to the protection levels described in this topic, you can use fixed database-level roles to protect packages that are saved to the [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] server.</span></span>  
  
## <a name="definition-of-sensitive-information"></a><span data-ttu-id="5426e-108">機密資訊的定義</span><span class="sxs-lookup"><span data-stu-id="5426e-108">Definition of Sensitive Information</span></span>  
 <span data-ttu-id="5426e-109">在 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 封裝中，下列資訊定義為「機密」  ：</span><span class="sxs-lookup"><span data-stu-id="5426e-109">In an [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] package, the following information is defined as *sensitive*:</span></span>  
  
-   <span data-ttu-id="5426e-110">連接字串的密碼部份。</span><span class="sxs-lookup"><span data-stu-id="5426e-110">The password part of a connection string.</span></span> <span data-ttu-id="5426e-111">不過，如果您選取加密所有項目的選項，則會將整個連接字串視為機密資料。</span><span class="sxs-lookup"><span data-stu-id="5426e-111">However, if you select an option that encrypts everything, the whole connection string will be considered sensitive.</span></span>  
  
-   <span data-ttu-id="5426e-112">標記為機密資料之工作產生的 XML 節點。</span><span class="sxs-lookup"><span data-stu-id="5426e-112">The task-generated XML nodes that are tagged as sensitive.</span></span> <span data-ttu-id="5426e-113">XML 節點的標記由 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 控制，使用者無法變更。</span><span class="sxs-lookup"><span data-stu-id="5426e-113">The tagging of XML nodes is controlled by [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] and cannot by changed by users.</span></span>  
  
-   <span data-ttu-id="5426e-114">標記為機密資訊的任何變數。</span><span class="sxs-lookup"><span data-stu-id="5426e-114">Any variable that is marked as sensitive.</span></span> <span data-ttu-id="5426e-115">變數的標記由 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)]控制。</span><span class="sxs-lookup"><span data-stu-id="5426e-115">The marking of variables is controlled by [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)].</span></span>  
  
 <span data-ttu-id="5426e-116">對於 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 是否將屬性視為機密，取決於 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 元件 (例如，連接管理員或工作) 的開發人員是否將該屬性指定為機密。</span><span class="sxs-lookup"><span data-stu-id="5426e-116">Whether [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] considers a property sensitive depends on whether the developer of the [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] component, such as a connection manager or task, has designated the property as sensitive.</span></span> <span data-ttu-id="5426e-117">使用者無法將屬性加入到視為機密之屬性的清單中，也無法從中移除屬性。</span><span class="sxs-lookup"><span data-stu-id="5426e-117">Users cannot add properties to, nor can they remove properties from, the list of properties that are considered sensitive.</span></span>  
  
## <a name="encryption"></a><span data-ttu-id="5426e-118">加密</span><span class="sxs-lookup"><span data-stu-id="5426e-118">Encryption</span></span>  
 <span data-ttu-id="5426e-119">封裝保護等級所使用的加密是使用「 [!INCLUDE[msCoName](../../includes/msconame-md.md)] 資料保護 API (DPAPI)」(「加密 API (CryptoAPI)」的一部分) 來執行的。</span><span class="sxs-lookup"><span data-stu-id="5426e-119">Encryption, as used by package protection levels, is performed by using the [!INCLUDE[msCoName](../../includes/msconame-md.md)] Data Protection API (DPAPI), which is part of the Cryptography API (CryptoAPI).</span></span>  
  
 <span data-ttu-id="5426e-120">使用密碼加密封裝的封裝保護等級也需要您提供密碼。</span><span class="sxs-lookup"><span data-stu-id="5426e-120">The package protection levels that encrypt packages by using passwords require that you provide a password also.</span></span> <span data-ttu-id="5426e-121">如果您將保護等級從不使用密碼變更為使用密碼的等級，則會提示您輸入密碼。</span><span class="sxs-lookup"><span data-stu-id="5426e-121">If you change the protection level from a level that does not use a password to one that does, you will be prompted for a password.</span></span>  
  
 <span data-ttu-id="5426e-122">此外，對於使用密碼的保護等級， [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 會使用「 [!INCLUDE[dnprdnshort](../../includes/dnprdnshort-md.md)] 類別庫 (FCL)」中，金鑰長度為 192 位元的「三重 DES」加密演算法。</span><span class="sxs-lookup"><span data-stu-id="5426e-122">Also, for the protection levels that use a password, [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] uses the Triple DES cipher algorithm with a key length of 192 bits, available in the [!INCLUDE[dnprdnshort](../../includes/dnprdnshort-md.md)] Class Library (FCL).</span></span>  
  
## <a name="protection-levels"></a><span data-ttu-id="5426e-123">保護等級</span><span class="sxs-lookup"><span data-stu-id="5426e-123">Protection Levels</span></span>  
 <span data-ttu-id="5426e-124">下表描述 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 提供的保護等級。</span><span class="sxs-lookup"><span data-stu-id="5426e-124">The following table describes the protection levels that [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] provides.</span></span> <span data-ttu-id="5426e-125">括弧中的值是 <xref:Microsoft.SqlServer.Dts.Runtime.DTSProtectionLevel> 列舉的值。</span><span class="sxs-lookup"><span data-stu-id="5426e-125">The values in parentheses are values from the <xref:Microsoft.SqlServer.Dts.Runtime.DTSProtectionLevel> enumeration.</span></span> <span data-ttu-id="5426e-126">這些值會顯示在 [屬性] 視窗中，當您在 [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)]中處理封裝時，可以使用該視窗設定封裝的屬性。</span><span class="sxs-lookup"><span data-stu-id="5426e-126">These values appear in the Properties window that you use to configure the properties of the package when you work with packages in [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)].</span></span>  
  
|<span data-ttu-id="5426e-127">保護等級</span><span class="sxs-lookup"><span data-stu-id="5426e-127">Protection level</span></span>|<span data-ttu-id="5426e-128">描述</span><span class="sxs-lookup"><span data-stu-id="5426e-128">Description</span></span>|  
|----------------------|-----------------|  
|<span data-ttu-id="5426e-129">不要儲存機密資料 (`DontSaveSensitive`)</span><span class="sxs-lookup"><span data-stu-id="5426e-129">Do not save sensitive (`DontSaveSensitive`)</span></span>|<span data-ttu-id="5426e-130">儲存封裝時，隱藏封裝中的機密屬性值。</span><span class="sxs-lookup"><span data-stu-id="5426e-130">Suppresses the values of sensitive properties in the package when the package is saved.</span></span> <span data-ttu-id="5426e-131">此保護等級不加密，但是會防止標記為機密資料的屬性與封裝一起儲存，因此其他使用者無法使用機密資料。</span><span class="sxs-lookup"><span data-stu-id="5426e-131">This protection level does not encrypt, but instead it prevents properties that are marked sensitive from being saved with the package and therefore makes the sensitive data unavailable to other users.</span></span> <span data-ttu-id="5426e-132">如果其他使用者開啟封裝，則機密資訊會以空白取代，該使用者必須提供機密資訊。</span><span class="sxs-lookup"><span data-stu-id="5426e-132">If a different user opens the package, the sensitive information is replaced with blanks and the user must provide the sensitive information.</span></span><br /><br /> <span data-ttu-id="5426e-133">與 **dtutil** 公用程式 (dtutil.exe) 搭配使用時，這個保護等級會對應至值 0。</span><span class="sxs-lookup"><span data-stu-id="5426e-133">When used with the **dtutil** utility (dtutil.exe), this protection level corresponds to the value of 0.</span></span>|  
|<span data-ttu-id="5426e-134">所有資料都以密碼加密 (`EncryptAllWithPassword`)</span><span class="sxs-lookup"><span data-stu-id="5426e-134">Encrypt all with password (`EncryptAllWithPassword`)</span></span>|<span data-ttu-id="5426e-135">使用密碼加密整個封裝。</span><span class="sxs-lookup"><span data-stu-id="5426e-135">Uses a password to encrypt the whole package.</span></span> <span data-ttu-id="5426e-136">封裝是使用建立或匯出封裝時使用者提供的密碼來加密的。</span><span class="sxs-lookup"><span data-stu-id="5426e-136">The package is encrypted by using a password that the user supplies when the package is created or exported.</span></span> <span data-ttu-id="5426e-137">若要在 [!INCLUDE[ssIS](../../includes/ssis-md.md)] 設計師 中開啟封裝，或是使用 **dtexec** 命令提示公用程式來執行封裝，使用者必須提供封裝密碼。</span><span class="sxs-lookup"><span data-stu-id="5426e-137">To open the package in [!INCLUDE[ssIS](../../includes/ssis-md.md)] Designer or run the package by using the **dtexec** command prompt utility, the user must provide the package password.</span></span> <span data-ttu-id="5426e-138">如果沒有密碼，使用者就無法存取或執行封裝。</span><span class="sxs-lookup"><span data-stu-id="5426e-138">Without the password the user cannot access or run the package.</span></span><br /><br /> <span data-ttu-id="5426e-139">與 **dtutil** 公用程式搭配使用時，這個保護等級會對應至值 3。</span><span class="sxs-lookup"><span data-stu-id="5426e-139">When used with the **dtutil** utility, this protection level corresponds to the value of 3.</span></span>|  
|<span data-ttu-id="5426e-140">所有資料以使用者金鑰加密 (`EncryptAllWithUserKey`)</span><span class="sxs-lookup"><span data-stu-id="5426e-140">Encrypt all with user key (`EncryptAllWithUserKey`)</span></span>|<span data-ttu-id="5426e-141">使用以目前使用者設定檔為基礎的金鑰加密整個封裝。</span><span class="sxs-lookup"><span data-stu-id="5426e-141">Uses a key that is based on the current user profile to encrypt the whole package.</span></span> <span data-ttu-id="5426e-142">只有建立或匯出封裝的使用者，才可以在 [!INCLUDE[ssIS](../../includes/ssis-md.md)] 設計師 中開啟封裝，或是使用 **dtexec** 命令提示公用程式來執行封裝。</span><span class="sxs-lookup"><span data-stu-id="5426e-142">Only the user who created or exported the package can open the package in [!INCLUDE[ssIS](../../includes/ssis-md.md)] Designer or run the package by using the **dtexec** command prompt utility.</span></span><br /><br /> <span data-ttu-id="5426e-143">與 **dtutil** 公用程式搭配使用時，這個保護等級會對應至值 4。</span><span class="sxs-lookup"><span data-stu-id="5426e-143">When used with the **dtutil** utility, this protection level corresponds to the value of 4.</span></span><br /><br /> <span data-ttu-id="5426e-144">注意：對於使用使用者金鑰的保護等級， [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 會使用 DPAPI 標準。</span><span class="sxs-lookup"><span data-stu-id="5426e-144">Note: For protection levels that use a user key, [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] uses DPAPI standards.</span></span> <span data-ttu-id="5426e-145">如需 DPAPI 的詳細資訊，請參閱 MSDN Library，網址為 [https://msdn.microsoft.com/library](https://go.microsoft.com/fwlink/?LinkId=15408)。</span><span class="sxs-lookup"><span data-stu-id="5426e-145">For more information about DPAPI, see the MSDN Library at [https://msdn.microsoft.com/library](https://go.microsoft.com/fwlink/?LinkId=15408).</span></span>|  
|<span data-ttu-id="5426e-146">機密資料以密碼加密 (`EncryptSensitiveWithPassword`)</span><span class="sxs-lookup"><span data-stu-id="5426e-146">Encrypt sensitive with password (`EncryptSensitiveWithPassword`)</span></span>|<span data-ttu-id="5426e-147">使用密碼僅加密封裝中的機密屬性值。</span><span class="sxs-lookup"><span data-stu-id="5426e-147">Uses a password to encrypt only the values of sensitive properties in the package.</span></span> <span data-ttu-id="5426e-148">DPAPI 用於此加密。</span><span class="sxs-lookup"><span data-stu-id="5426e-148">DPAPI is used for this encryption.</span></span> <span data-ttu-id="5426e-149">機密資料會做為封裝的一部份進行儲存，但該資料會使用建立或匯出封裝時目前使用者所提供的密碼進行加密。</span><span class="sxs-lookup"><span data-stu-id="5426e-149">Sensitive data is saved as a part of the package, but that data is encrypted by using a password that the current user supplies when the package is created or exported.</span></span> <span data-ttu-id="5426e-150">若要在「 [!INCLUDE[ssIS](../../includes/ssis-md.md)] 設計師」中開啟封裝，使用者必須提供封裝密碼。</span><span class="sxs-lookup"><span data-stu-id="5426e-150">To open the package in [!INCLUDE[ssIS](../../includes/ssis-md.md)] Designer, the user must provide the package password.</span></span> <span data-ttu-id="5426e-151">如果未提供密碼，則會開啟封裝但不提供機密資料，目前的使用者必須為機密資料提供新值。</span><span class="sxs-lookup"><span data-stu-id="5426e-151">If the password is not provided, the package opens without the sensitive data and the current user must provide new values for sensitive data.</span></span> <span data-ttu-id="5426e-152">如果使用者嘗試在未提供密碼的情況下執行封裝，則封裝執行會失敗。</span><span class="sxs-lookup"><span data-stu-id="5426e-152">If the user tries to execute the package without providing the password, package execution fails.</span></span> <span data-ttu-id="5426e-153">如需密碼和命令列執行的詳細資訊，請參閱 [dtexec 公用程式](../packages/dtexec-utility.md)。</span><span class="sxs-lookup"><span data-stu-id="5426e-153">For more information about passwords and command line execution, see [dtexec Utility](../packages/dtexec-utility.md).</span></span><br /><br /> <span data-ttu-id="5426e-154">與 **dtutil** 公用程式搭配使用時，這個保護等級會對應至值 2。</span><span class="sxs-lookup"><span data-stu-id="5426e-154">When used with the **dtutil** utility, this protection level corresponds to the value of 2.</span></span>|  
|<span data-ttu-id="5426e-155">機密資料以使用者金鑰加密 (`EncryptSensitiveWithUserKey`)</span><span class="sxs-lookup"><span data-stu-id="5426e-155">Encrypt sensitive with user key (`EncryptSensitiveWithUserKey`)</span></span>|<span data-ttu-id="5426e-156">使用以目前使用者設定檔為基礎的金鑰，僅加密封裝中的機密屬性值。</span><span class="sxs-lookup"><span data-stu-id="5426e-156">Uses a key that is based on the current user profile to encrypt only the values of sensitive properties in the package.</span></span> <span data-ttu-id="5426e-157">只有使用相同設定檔的相同使用者才可以載入封裝。</span><span class="sxs-lookup"><span data-stu-id="5426e-157">Only the same user who uses the same profile can load the package.</span></span> <span data-ttu-id="5426e-158">如果其他使用者開啟封裝，則機密資訊會以空白取代，且目前的使用者必須為機密資料提供新值。</span><span class="sxs-lookup"><span data-stu-id="5426e-158">If a different user opens the package, the sensitive information is replaced with blanks and the current user must provide new values for the sensitive data.</span></span> <span data-ttu-id="5426e-159">如果使用者嘗試執行封裝，則封裝執行會失敗。</span><span class="sxs-lookup"><span data-stu-id="5426e-159">If the user attempts to execute the package, package execution fails.</span></span> <span data-ttu-id="5426e-160">DPAPI 用於此加密。</span><span class="sxs-lookup"><span data-stu-id="5426e-160">DPAPI is used for this encryption.</span></span><br /><br /> <span data-ttu-id="5426e-161">與 **dtutil** 公用程式搭配使用時，這個保護等級會對應至值 1。</span><span class="sxs-lookup"><span data-stu-id="5426e-161">When used with the **dtutil** utility, this protection level corresponds to the value of 1.</span></span><br /><br /> <span data-ttu-id="5426e-162">注意：對於使用使用者金鑰的保護等級， [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 會使用 DPAPI 標準。</span><span class="sxs-lookup"><span data-stu-id="5426e-162">Note: For protection levels that use a user key, [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] uses DPAPI standards.</span></span> <span data-ttu-id="5426e-163">如需 DPAPI 的詳細資訊，請參閱 MSDN Library，網址為 [https://msdn.microsoft.com/library](https://go.microsoft.com/fwlink/?LinkId=15408)。</span><span class="sxs-lookup"><span data-stu-id="5426e-163">For more information about DPAPI, see the MSDN Library at [https://msdn.microsoft.com/library](https://go.microsoft.com/fwlink/?LinkId=15408).</span></span>|  
|<span data-ttu-id="5426e-164">依賴伺服器儲存體進行加密 (`ServerStorage`)</span><span class="sxs-lookup"><span data-stu-id="5426e-164">Rely on server storage for encryption (`ServerStorage`)</span></span>|<span data-ttu-id="5426e-165">使用 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 資料庫角色保護整個封裝。</span><span class="sxs-lookup"><span data-stu-id="5426e-165">Protects the whole package using [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database roles.</span></span> <span data-ttu-id="5426e-166">在將封裝儲存到 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] msdb 資料庫時，才支援此選項。</span><span class="sxs-lookup"><span data-stu-id="5426e-166">This option is supported when a package is saved to the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] msdb database.</span></span> <span data-ttu-id="5426e-167">此外，SSISDB 目錄會使用 `ServerStorage` 保護等級</span><span class="sxs-lookup"><span data-stu-id="5426e-167">In addition, the SSISDB catalog uses the `ServerStorage` protection level</span></span><br /><br /> <span data-ttu-id="5426e-168">將封裝從 [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)]儲存到檔案系統時不支援此選項。</span><span class="sxs-lookup"><span data-stu-id="5426e-168">This option is not supported when a package is saved to the file system from [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)].</span></span>|  
  
## <a name="protection-level-setting-and-the-ssisdb-catalog"></a><span data-ttu-id="5426e-169">保護等級設定和 SSISDB 目錄</span><span class="sxs-lookup"><span data-stu-id="5426e-169">Protection Level Setting and the SSISDB Catalog</span></span>  
 <span data-ttu-id="5426e-170">SSISDB 目錄會使用 `ServerStorage` 保護等級。</span><span class="sxs-lookup"><span data-stu-id="5426e-170">The SSISDB catalog uses the `ServerStorage` protection level.</span></span> <span data-ttu-id="5426e-171">當您將 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 專案部署至 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 伺服器時，目錄會自動將封裝資料與敏感值加密。</span><span class="sxs-lookup"><span data-stu-id="5426e-171">When you deploy an [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] project to the [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] server, the catalog automatically encrypts the package data and sensitive values.</span></span> <span data-ttu-id="5426e-172">當您擷取時，目錄也會自動解密資料。</span><span class="sxs-lookup"><span data-stu-id="5426e-172">The catalog also automatically decrypts the data when you retrieve it.</span></span>  
  
 <span data-ttu-id="5426e-173">如果您從 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 伺服器將專案 (.ispac 檔) 匯出至檔案系統，系統會自動將保護等級變更為 `EncryptSensitiveWithUserKey`。</span><span class="sxs-lookup"><span data-stu-id="5426e-173">If you export the project (.ispac file) from the [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] server to the file system, the system automatically changes the protection level to `EncryptSensitiveWithUserKey`.</span></span> <span data-ttu-id="5426e-174">如果您使用中的 [Integration Services 匯**入專案] Wizard**來匯入專案 [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] ，[**屬性**] 視窗中的 [ **ProtectionLevel** ] 屬性會顯示的值 `EncryptSensitiveWithUserKey` 。</span><span class="sxs-lookup"><span data-stu-id="5426e-174">If you import the project by using the **Integration Services Import Project Wizard** in [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)], the **ProtectionLevel** property in the **Properties** window shows a value of `EncryptSensitiveWithUserKey`.</span></span>  
  
## <a name="protection-level-setting-based-on-package-life-cycle"></a><span data-ttu-id="5426e-175">根據封裝生命週期設定保護等級</span><span class="sxs-lookup"><span data-stu-id="5426e-175">Protection Level Setting Based on Package Life Cycle</span></span>  
 <span data-ttu-id="5426e-176">您會在第一次於 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 中開發 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] 套件時，設定該套件的保護等級。</span><span class="sxs-lookup"><span data-stu-id="5426e-176">You set the protection level of a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] package when you first develop it in [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)].</span></span> <span data-ttu-id="5426e-177">稍後在部署封裝、從 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 中的 [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]匯入或匯出封裝，或將封裝從 [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] 複製到 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]、「 [!INCLUDE[ssIS](../../includes/ssis-md.md)] 封裝存放區」或檔案系統時，都可以更新封裝保護等級。</span><span class="sxs-lookup"><span data-stu-id="5426e-177">Later, when the package is deployed, imported or exported from [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], or copied from [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], the [!INCLUDE[ssIS](../../includes/ssis-md.md)] Package Store, or the file system, you can update the package protection level.</span></span> <span data-ttu-id="5426e-178">例如，如果您在電腦上建立和儲存封裝時，使用其中一個使用者金鑰保護等級選項，則當您將封裝提供給其他使用者時，必須變更保護等級，否則使用者無法開啟封裝。</span><span class="sxs-lookup"><span data-stu-id="5426e-178">For example, if you create and save packages on your computer with one of the user key protection level options, you likely would want to change the protection level when you give the package to other users; otherwise they cannot open the package.</span></span>  
  
 <span data-ttu-id="5426e-179">一般而言，您需要依照下列步驟變更保護等級：</span><span class="sxs-lookup"><span data-stu-id="5426e-179">Typically, you change the protection level as listed in the following steps:</span></span>  
  
1.  <span data-ttu-id="5426e-180">在開發階段，將封裝的保護等級設定保留為預設值 `EncryptSensitiveWithUserKey`。</span><span class="sxs-lookup"><span data-stu-id="5426e-180">During development, leave the protection level of packages set to the default value, `EncryptSensitiveWithUserKey`.</span></span> <span data-ttu-id="5426e-181">這項設定可以協助確保只有開發人員能夠看到封裝中的機密值。</span><span class="sxs-lookup"><span data-stu-id="5426e-181">This setting helps ensure that only the developer sees sensitive values in the package.</span></span> <span data-ttu-id="5426e-182">或者，您也可以考慮使用 `EncryptAllWithUserKey` 或`DontSaveSensitive`。</span><span class="sxs-lookup"><span data-stu-id="5426e-182">Or, you can consider using `EncryptAllWithUserKey`, or `DontSaveSensitive`.</span></span>  
  
2.  <span data-ttu-id="5426e-183">到了部署封裝的階段，您必須將保護等級變更為不需要開發人員使用者金鑰的等級。</span><span class="sxs-lookup"><span data-stu-id="5426e-183">When it is time to deploy the packages, you have to change the protection level to one that does not depend on the developer's user key.</span></span> <span data-ttu-id="5426e-184">因此，您通常必須選取 `EncryptSensitiveWithPassword` 或 `EncryptAllWithPassword`。</span><span class="sxs-lookup"><span data-stu-id="5426e-184">Therefore you typically have to select `EncryptSensitiveWithPassword`, or `EncryptAllWithPassword`.</span></span> <span data-ttu-id="5426e-185">指定暫時性的增強式密碼來加密封裝，並且讓生產環境中的作業小組知道該密碼。</span><span class="sxs-lookup"><span data-stu-id="5426e-185">Encrypt the packages by assigning a temporary strong password that is also known to the operations team in the production environment.</span></span>  
  
3.  <span data-ttu-id="5426e-186">將封裝部署到生產環境之後，作業小組可以指定只有小組內部知道的增強式密碼來重新加密已部署的封裝。</span><span class="sxs-lookup"><span data-stu-id="5426e-186">After the packages have been deployed to the production environment, the operations team can re-encrypt the deployed packages by assigning a strong password that is known only to them.</span></span> <span data-ttu-id="5426e-187">或者，作業小組也可以選擇 `EncryptSensitiveWithUserKey` 或 `EncryptAllWithUserKey`，然後使用將執行封裝之帳戶的本機認證來加密已部署的封裝。</span><span class="sxs-lookup"><span data-stu-id="5426e-187">Or, they can encrypt the deployed packages by selecting `EncryptSensitiveWithUserKey` or `EncryptAllWithUserKey`, and using the local credentials of the account that will run the packages.</span></span>  
  
## <a name="related-tasks"></a><span data-ttu-id="5426e-188">相關工作</span><span class="sxs-lookup"><span data-stu-id="5426e-188">Related Tasks</span></span>  
  
-   [<span data-ttu-id="5426e-189">設定或變更封裝的保護等級</span><span class="sxs-lookup"><span data-stu-id="5426e-189">Set or Change the Protection Level of Packages</span></span>](../set-or-change-the-protection-level-of-packages.md)  
  
## <a name="see-also"></a><span data-ttu-id="5426e-190">另請參閱</span><span class="sxs-lookup"><span data-stu-id="5426e-190">See Also</span></span>  
 <span data-ttu-id="5426e-191">[&#40;SSIS 服務匯入和匯出套件&#41;](../import-and-export-packages-ssis-service.md) </span><span class="sxs-lookup"><span data-stu-id="5426e-191">[Import and Export Packages &#40;SSIS Service&#41;](../import-and-export-packages-ssis-service.md) </span></span>  
 <span data-ttu-id="5426e-192">[Integration Services &#40;SSIS&#41; 封裝](../integration-services-ssis-packages.md) </span><span class="sxs-lookup"><span data-stu-id="5426e-192">[Integration Services &#40;SSIS&#41; Packages](../integration-services-ssis-packages.md) </span></span>  
 [<span data-ttu-id="5426e-193">安全性概觀 (Integration Services)</span><span class="sxs-lookup"><span data-stu-id="5426e-193">Security Overview &#40;Integration Services&#41;</span></span>](security-overview-integration-services.md)  
  
  
