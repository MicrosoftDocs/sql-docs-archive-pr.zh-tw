---
title: 錯誤處理 | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
ms.assetid: ff79e19d-afca-42a4-81b0-62d759380d11
author: chugugrace
ms.author: chugu
ms.openlocfilehash: 083af496c60fb11afaf85068ba980e54986134d4
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87687125"
---
# <a name="error-handling"></a><span data-ttu-id="cd122-102">錯誤處理</span><span class="sxs-lookup"><span data-stu-id="cd122-102">Error Handling</span></span>
  <span data-ttu-id="cd122-103">Oracle CDC 執行個體會針對單一 Oracle 來源資料庫中的變更進行採礦處理 (Oracle RAC 叢集會視為單一資料庫)，並將認可的變更寫入目標 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 執行個體中 CDC 資料庫內的變更資料表。</span><span class="sxs-lookup"><span data-stu-id="cd122-103">An Oracle CDC Instance mines changes from a single Oracle source database (an Oracle RAC cluster is considered a single database) and writes the committed changes to change tables in a CDC database in the target [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance.</span></span>  
  
 <span data-ttu-id="cd122-104">CDC 執行個體會在稱為 **cdc.xdbcdc_state**的系統資料表中維護其狀態。</span><span class="sxs-lookup"><span data-stu-id="cd122-104">A CDC Instance maintains its state in a system table called **cdc.xdbcdc_state**.</span></span> <span data-ttu-id="cd122-105">可以隨時查詢此資料表，以尋找 CDC 執行個體的狀態。</span><span class="sxs-lookup"><span data-stu-id="cd122-105">This table can be queried any time to find the state of the CDC Instance.</span></span> <span data-ttu-id="cd122-106">如需 cdc.xdbcdc_state 資料表的詳細資訊，請參閱 [cdc.xdbcdc_state](the-oracle-cdc-databases.md#bkmk_cdcxdbcdc_state)。</span><span class="sxs-lookup"><span data-stu-id="cd122-106">For more information about the cdc.xdbcdc_state table, see [cdc.xdbcdc_state](the-oracle-cdc-databases.md#bkmk_cdcxdbcdc_state).</span></span>  
  
 <span data-ttu-id="cd122-107">下表描述 xdbcdc_state 資料表中的 CDC 執行個體狀態。</span><span class="sxs-lookup"><span data-stu-id="cd122-107">The table below describes the CDC Instance states in the xdbcdc_state table.</span></span>  
  
 <span data-ttu-id="cd122-108">對於每個狀態而言，將會針對 cdc.xdbcdc_state 資料表中的對應資料行顯示以下兩個指標：</span><span class="sxs-lookup"><span data-stu-id="cd122-108">For each state, the following two indications are shown for the corresponding columns in the cdc.xdbcdc_state table:</span></span>  
  
-   <span data-ttu-id="cd122-109">執行個體未在使用中 (目前沒有任何 Windows 處理序正在處理它)。</span><span class="sxs-lookup"><span data-stu-id="cd122-109">Instance is not active (there is no Windows process currently handling it).</span></span> <span data-ttu-id="cd122-110">如果 [使用中] 資料行值為 1，則表示處理這個特定 Oracle CDC 執行個體之 Oracle CDC 服務的子處理序正在執行中。</span><span class="sxs-lookup"><span data-stu-id="cd122-110">If the **active** column value is 1, a subprocess of the Oracle CDC Service handling this specific Oracle CDC Instance is running.</span></span>  
  
-   <span data-ttu-id="cd122-111">如果 [錯誤] 資料行值為 0，則表示 Oracle CDC 執行個體不在錯誤狀況中。</span><span class="sxs-lookup"><span data-stu-id="cd122-111">If the **error** column value is 0, the Oracle CDC Instance is not in an error condition.</span></span> <span data-ttu-id="cd122-112">如果 [錯誤] 資料行值為 1，則表示有錯誤阻止 Oracle CDC 執行個體處理變更。</span><span class="sxs-lookup"><span data-stu-id="cd122-112">If the **error** column value is 1, there is an error that prevents the Oracle CDC Instance from processing changes.</span></span>  
  
     <span data-ttu-id="cd122-113">如果 [錯誤] 資料行的值為 1 而且 [使用中] 資料行值也是 1，則表示 Oracle CDC 執行個體發生了可以復原的錯誤，而且系統可以自動解決此錯誤。</span><span class="sxs-lookup"><span data-stu-id="cd122-113">If the **error** column has a value of 1 and the **active** column value is also 1, then a recoverable error is occurring for the Oracle CDC Instance, which can be resolved automatically.</span></span> <span data-ttu-id="cd122-114">如果 [錯誤] 資料行的值為 1 而且 [使用中] 資料行的值是 0，則在大多數情況下可能需要採取手動因應措施來解決問題，然後才可以繼續處理。</span><span class="sxs-lookup"><span data-stu-id="cd122-114">If the error column has a value of 1 and the active column has a value of 0, then in most cases a manual workaround may be needed to resolve the problem before processing can be resumed.</span></span>  
  
 <span data-ttu-id="cd122-115">下表描述 Oracle CDC 執行個體可能會在其狀態資料表中報告的各種狀態碼。</span><span class="sxs-lookup"><span data-stu-id="cd122-115">The following table describes the various status codes that the Oracle CDC Instance may report in its state table.</span></span>  
  
|<span data-ttu-id="cd122-116">狀態</span><span class="sxs-lookup"><span data-stu-id="cd122-116">Status</span></span>|<span data-ttu-id="cd122-117">使用中狀態碼</span><span class="sxs-lookup"><span data-stu-id="cd122-117">Active Status Code</span></span>|<span data-ttu-id="cd122-118">錯誤狀態碼</span><span class="sxs-lookup"><span data-stu-id="cd122-118">Error Status Code</span></span>|<span data-ttu-id="cd122-119">說明</span><span class="sxs-lookup"><span data-stu-id="cd122-119">Descriptions</span></span>|  
|------------|------------------------|-----------------------|------------------|  
|<span data-ttu-id="cd122-120">ABORTED</span><span class="sxs-lookup"><span data-stu-id="cd122-120">ABORTED</span></span>|<span data-ttu-id="cd122-121">0</span><span class="sxs-lookup"><span data-stu-id="cd122-121">0</span></span>|<span data-ttu-id="cd122-122">1</span><span class="sxs-lookup"><span data-stu-id="cd122-122">1</span></span>|<span data-ttu-id="cd122-123">Oracle CDC 執行個體未在執行中。</span><span class="sxs-lookup"><span data-stu-id="cd122-123">The Oracle CDC Instance is not running.</span></span> <span data-ttu-id="cd122-124">ABORTED 子狀態表示 Oracle CDC 執行個體為 ACTIVE 狀態然後在未預期的情況下停止。</span><span class="sxs-lookup"><span data-stu-id="cd122-124">The ABORTED substatus indicates that the Oracle CDC Instance was ACTIVE and then has stopped unexpectedly.</span></span><br /><br /> <span data-ttu-id="cd122-125">如果 Oracle CDC 服務偵測到當 Oracle CDC 執行個體於 ACTIVE 狀態下未在執行中時，Oracle CDC 服務的主要執行個體會建立 ABORTED 子狀態。</span><span class="sxs-lookup"><span data-stu-id="cd122-125">The ABORTED substatus is established by the Oracle CDC Service main instance when it detects that the Oracle CDC Instance is not running while its status is ACTIVE.</span></span>|  
|<span data-ttu-id="cd122-126">ERROR</span><span class="sxs-lookup"><span data-stu-id="cd122-126">ERROR</span></span>|<span data-ttu-id="cd122-127">0</span><span class="sxs-lookup"><span data-stu-id="cd122-127">0</span></span>|<span data-ttu-id="cd122-128">1</span><span class="sxs-lookup"><span data-stu-id="cd122-128">1</span></span>|<span data-ttu-id="cd122-129">Oracle CDC 執行個體未在執行中。</span><span class="sxs-lookup"><span data-stu-id="cd122-129">The Oracle CDC Instance is not running.</span></span> <span data-ttu-id="cd122-130">ERROR 狀態表示 CDC 執行個體在 ACTIVE 狀態下，然後遇到無法復原的錯誤於是將自己停用。</span><span class="sxs-lookup"><span data-stu-id="cd122-130">The ERROR status indicates that the CDC instance was ACTIVE but then encountered an error that is not recoverable and disabled itself.</span></span> <span data-ttu-id="cd122-131">ERROR 狀態包含以下的子狀態碼：</span><span class="sxs-lookup"><span data-stu-id="cd122-131">The ERROR status contains the following substatus codes:</span></span><br /><br /> <span data-ttu-id="cd122-132">MISCONFIGURED：偵測到無法復原的設定錯誤。</span><span class="sxs-lookup"><span data-stu-id="cd122-132">MISCONFIGURED: An unrecoverable configuration error was detected.</span></span><br /><br /> <span data-ttu-id="cd122-133">PASSWORD-REQUIRED：Attunity Oracle 異動資料擷取設計工具未設定任何密碼，或是設定的密碼無效。</span><span class="sxs-lookup"><span data-stu-id="cd122-133">PASSWORD-REQUIRED: There is no password set for the Change Data Capture Designer for Oracle by Attunity or the configured password is not valid.</span></span> <span data-ttu-id="cd122-134">這可能是因為服務的非對稱金鑰密碼發生變更。</span><span class="sxs-lookup"><span data-stu-id="cd122-134">This can be because of a change to the service asymmetric key password.</span></span>|  
|<span data-ttu-id="cd122-135">RUNNING</span><span class="sxs-lookup"><span data-stu-id="cd122-135">RUNNING</span></span>|<span data-ttu-id="cd122-136">1</span><span class="sxs-lookup"><span data-stu-id="cd122-136">1</span></span>|<span data-ttu-id="cd122-137">0</span><span class="sxs-lookup"><span data-stu-id="cd122-137">0</span></span>|<span data-ttu-id="cd122-138">CDC 執行個體正在執行及處理變更記錄。</span><span class="sxs-lookup"><span data-stu-id="cd122-138">The CDC instance is running and is processing change records.</span></span> <span data-ttu-id="cd122-139">RUNNING 狀態包含以下的子狀態碼：</span><span class="sxs-lookup"><span data-stu-id="cd122-139">The RUNNING status contains the following substatus codes:</span></span><br /><br /> <span data-ttu-id="cd122-140">IDLE：所有變更記錄都已經處理並儲存在目標控制 ( **_CT**) 資料表中。</span><span class="sxs-lookup"><span data-stu-id="cd122-140">IDLE: All change records were processed and stored into the target control (**_CT**) tables.</span></span> <span data-ttu-id="cd122-141">控制資料表沒有使用中的交易。</span><span class="sxs-lookup"><span data-stu-id="cd122-141">There is no active transaction with the control tables.</span></span><br /><br /> <span data-ttu-id="cd122-142">PROCESSING：目前有正在處理但是尚未寫入控制 ( **_CT**) 資料表的變更記錄。</span><span class="sxs-lookup"><span data-stu-id="cd122-142">PROCESSING: There are change records being processed that are not yet written to the control (**_CT**) tables.</span></span>|  
|<span data-ttu-id="cd122-143">STOPPED</span><span class="sxs-lookup"><span data-stu-id="cd122-143">STOPPED</span></span>|<span data-ttu-id="cd122-144">0</span><span class="sxs-lookup"><span data-stu-id="cd122-144">0</span></span>|<span data-ttu-id="cd122-145">0</span><span class="sxs-lookup"><span data-stu-id="cd122-145">0</span></span>|<span data-ttu-id="cd122-146">CDC 執行個體未在執行中。</span><span class="sxs-lookup"><span data-stu-id="cd122-146">The CDC instance is not running.</span></span> <span data-ttu-id="cd122-147">STOP 子狀態表示 CDC 執行個體為 ACTIVE 狀態然後在正確的情況下停止。</span><span class="sxs-lookup"><span data-stu-id="cd122-147">The STOP substatus indicates that the CDC instance was ACTIVE and then was stopped correctly.</span></span>|  
|<span data-ttu-id="cd122-148">SUSPENDED</span><span class="sxs-lookup"><span data-stu-id="cd122-148">SUSPENDED</span></span>|<span data-ttu-id="cd122-149">1</span><span class="sxs-lookup"><span data-stu-id="cd122-149">1</span></span>|<span data-ttu-id="cd122-150">1</span><span class="sxs-lookup"><span data-stu-id="cd122-150">1</span></span>|<span data-ttu-id="cd122-151">CDC 執行個體正在執行中，但是因為發生可復原的錯誤所以暫停處理。</span><span class="sxs-lookup"><span data-stu-id="cd122-151">The CDC instance is running but processing is suspended due to a recoverable error.</span></span> <span data-ttu-id="cd122-152">SUSPENDED 狀態包含以下的子狀態碼：</span><span class="sxs-lookup"><span data-stu-id="cd122-152">The SUSPENDED status contains the following substatus codes:</span></span><br /><br /> <span data-ttu-id="cd122-153">DISCONNECTED：無法建立與來源 Oracle 資料庫的連接。</span><span class="sxs-lookup"><span data-stu-id="cd122-153">DISCONNECTED: The connection with the source Oracle database cannot be established.</span></span> <span data-ttu-id="cd122-154">一旦還原連接時，處理作業便會繼續。</span><span class="sxs-lookup"><span data-stu-id="cd122-154">Processing will resume once connection is restored.</span></span><br /><br /> <span data-ttu-id="cd122-155">STORAGE：儲存體已滿。</span><span class="sxs-lookup"><span data-stu-id="cd122-155">STORAGE: The storage is full.</span></span> <span data-ttu-id="cd122-156">當有儲存體可用時，處理作業便會繼續。</span><span class="sxs-lookup"><span data-stu-id="cd122-156">Processing will resume when storage becomes available.</span></span> <span data-ttu-id="cd122-157">某些情況下可能不會出現這個狀態，因為無法更新狀態資料表。</span><span class="sxs-lookup"><span data-stu-id="cd122-157">In some cases, this status may not appear because the status table cannot be updated.</span></span><br /><br /> <span data-ttu-id="cd122-158">LOGGER：記錄器已連接到 Oracle，但是因為暫時性問題所以無法讀取 Oracle 交易記錄。</span><span class="sxs-lookup"><span data-stu-id="cd122-158">LOGGER: The logger is connected to Oracle but it cannot read the Oracle transaction logs because of a temporary problem.</span></span>|  
|<span data-ttu-id="cd122-159">DATAERROR</span><span class="sxs-lookup"><span data-stu-id="cd122-159">DATAERROR</span></span>|<span data-ttu-id="cd122-160">x</span><span class="sxs-lookup"><span data-stu-id="cd122-160">x</span></span>|<span data-ttu-id="cd122-161">x</span><span class="sxs-lookup"><span data-stu-id="cd122-161">x</span></span>|<span data-ttu-id="cd122-162">此狀態碼僅用於 **xdbcdc_trace** 資料表。</span><span class="sxs-lookup"><span data-stu-id="cd122-162">This status code is only used for the **xdbcdc_trace** table.</span></span> <span data-ttu-id="cd122-163">不會出現在 **xdbcdc_state** 資料表中。</span><span class="sxs-lookup"><span data-stu-id="cd122-163">It does not appear in the **xdbcdc_state** table.</span></span> <span data-ttu-id="cd122-164">具有此狀態的追蹤記錄表示 Oracle 記錄檔記錄發生問題。</span><span class="sxs-lookup"><span data-stu-id="cd122-164">Trace records with this status indicate a problem with an Oracle log record.</span></span> <span data-ttu-id="cd122-165">錯誤的記錄檔記錄會儲存在 [資料] 資料行中當做 BLOB。</span><span class="sxs-lookup"><span data-stu-id="cd122-165">The bad log record is stored in the **data** column as a BLOB.</span></span> <span data-ttu-id="cd122-166">DATAERROR 狀態包含以下的子狀態碼：</span><span class="sxs-lookup"><span data-stu-id="cd122-166">The DATAERROR status contains the following substatus codes:</span></span><br /><br /> <span data-ttu-id="cd122-167">BADRECORD：無法剖析附加的記錄檔記錄。</span><span class="sxs-lookup"><span data-stu-id="cd122-167">BADRECORD: The attached log record could not be parsed.</span></span><br /><br /> <span data-ttu-id="cd122-168">CONVERT-ERROR：某些資料行中的資料無法轉換為擷取資料表中的目標資料行。</span><span class="sxs-lookup"><span data-stu-id="cd122-168">CONVERT-ERROR: The data in some columns could not be converted to the target columns in the capture table.</span></span> <span data-ttu-id="cd122-169">只有當組態指定轉換錯誤應該產生追蹤記錄時，才可能會出現這個狀態。</span><span class="sxs-lookup"><span data-stu-id="cd122-169">This status may appear only if the configuration specifies that conversion errors should produce trace records.</span></span>|  
  
 <span data-ttu-id="cd122-170">因為 Oracle CDC 服務狀態會儲存在 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]中，所以資料庫中的狀態值可能不會影響此服務的實際狀態。</span><span class="sxs-lookup"><span data-stu-id="cd122-170">Because the Oracle CDC Service state is stored in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], there may be cases where the state value in the database might not reflect the actual state of the service.</span></span> <span data-ttu-id="cd122-171">最常見的情況是此服務遺失與 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 的連接，而且基於任何理由無法繼續。</span><span class="sxs-lookup"><span data-stu-id="cd122-171">The most common scenario is when the service loses its connection to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] and cannot resume it (for any reason).</span></span> <span data-ttu-id="cd122-172">在此情況下，儲存在 **cdc.xdbcdc_state** 中的狀態會過時。</span><span class="sxs-lookup"><span data-stu-id="cd122-172">In that case, the state stored in **cdc.xdbcdc_state** becomes stale.</span></span> <span data-ttu-id="cd122-173">如果上次更新時間戳記 (UTC) 已超過一分鐘，則狀態可能已過時。</span><span class="sxs-lookup"><span data-stu-id="cd122-173">If the last update timestamp (UTC) is more than a minute old, the state is probably stale.</span></span> <span data-ttu-id="cd122-174">在此情況下，請使用 Windows 事件檢視器來尋找有關此服務之狀態的其他資訊。</span><span class="sxs-lookup"><span data-stu-id="cd122-174">In this case, use the Windows Event Viewer to find additional information about the status of the service.</span></span>  
  
## <a name="error-handling"></a><span data-ttu-id="cd122-175">錯誤處理</span><span class="sxs-lookup"><span data-stu-id="cd122-175">Error Handling</span></span>  
 <span data-ttu-id="cd122-176">本節描述 Oracle CDC 服務如何處理錯誤。</span><span class="sxs-lookup"><span data-stu-id="cd122-176">This section describes how the Oracle CDC Service handles errors.</span></span>  
  
### <a name="logging"></a><span data-ttu-id="cd122-177">記錄</span><span class="sxs-lookup"><span data-stu-id="cd122-177">Logging</span></span>  
 <span data-ttu-id="cd122-178">Oracle CDC 服務會在下列其中一個位置建立錯誤資訊。</span><span class="sxs-lookup"><span data-stu-id="cd122-178">The Oracle CDC Service creates error information in one of the following places.</span></span>  
  
-   <span data-ttu-id="cd122-179">Windows 事件記錄檔，它會與記錄錯誤功能一起使用，並指示 Oracle CDC 服務生命週期事件 (啟動、停止 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 執行個體或是與它連接或重新連接)。</span><span class="sxs-lookup"><span data-stu-id="cd122-179">The Windows event log, which is used with logging errors and to indicate Oracle CDC Service life cycle events (starting, stopping, (re)connection to the target [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance).</span></span>  
  
-   <span data-ttu-id="cd122-180">MSXDBCDC.dbo.xdbcdc_trace 資料表，它是由 Oracle CDC 服務主要處理序用於一般記錄和追蹤。</span><span class="sxs-lookup"><span data-stu-id="cd122-180">The MSXDBCDC.dbo.xdbcdc_trace table, which is used for general logging and tracing by the Oracle CDC Service main process.</span></span>  
  
-   <span data-ttu-id="cd122-181">\<cdc-database>.cdc.xdbcdc_trace 資料表，其可供 Oracle CDC 執行個體用於一般記錄和追蹤。</span><span class="sxs-lookup"><span data-stu-id="cd122-181">The \<cdc-database>.cdc.xdbcdc_trace table, which is used for general logging and tracing by Oracle CDC Instances.</span></span> <span data-ttu-id="cd122-182">這表示與特定 Oracle CDC 執行個體相關之錯誤都會記錄到該執行個體的追蹤資料表。</span><span class="sxs-lookup"><span data-stu-id="cd122-182">This means that errors related to a specific Oracle CDC Instance are logged to that instance's trace table.</span></span>  
  
 <span data-ttu-id="cd122-183">當 Oracle CDC 服務在以下情況時會記錄資訊：</span><span class="sxs-lookup"><span data-stu-id="cd122-183">Information is logged by the Oracle CDC service when the service:</span></span>  
  
-   <span data-ttu-id="cd122-184">由服務控制管理員啟動或停止。</span><span class="sxs-lookup"><span data-stu-id="cd122-184">Is started or stopped by the service control manager.</span></span>  
  
-   <span data-ttu-id="cd122-185">無法連接到關聯的 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 執行個體，以及在失敗之後隨即成功地建立連接。</span><span class="sxs-lookup"><span data-stu-id="cd122-185">Cannot connect to the associated [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance and when it successfully establishes a connection following a failure.</span></span>  
  
-   <span data-ttu-id="cd122-186">啟動 Oracle CDC 服務執行個體時遇到錯誤。</span><span class="sxs-lookup"><span data-stu-id="cd122-186">Encounters an error starting Oracle CDC Service instances.</span></span>  
  
-   <span data-ttu-id="cd122-187">偵測到 Oracle CDC 執行個體已中止。</span><span class="sxs-lookup"><span data-stu-id="cd122-187">Detects that an Oracle CDC Instance has aborted.</span></span>  
  
-   <span data-ttu-id="cd122-188">遇到非預期的錯誤。</span><span class="sxs-lookup"><span data-stu-id="cd122-188">Encounters an unexpected error.</span></span>  
  
 <span data-ttu-id="cd122-189">當 CDC 執行個體在以下情況時會記錄資訊：</span><span class="sxs-lookup"><span data-stu-id="cd122-189">Information is logged by the CDC instance when the instance:</span></span>  
  
-   <span data-ttu-id="cd122-190">已啟用或停用。</span><span class="sxs-lookup"><span data-stu-id="cd122-190">Is enabled or disabled.</span></span>  
  
-   <span data-ttu-id="cd122-191">遇到錯誤。</span><span class="sxs-lookup"><span data-stu-id="cd122-191">Encounters an error.</span></span>  
  
-   <span data-ttu-id="cd122-192">從可復原的錯誤復原。</span><span class="sxs-lookup"><span data-stu-id="cd122-192">Recovers from a recoverable error.</span></span>  
  
 <span data-ttu-id="cd122-193">追蹤資料表也用於記錄詳細追蹤資訊，以供疑難排解之用。</span><span class="sxs-lookup"><span data-stu-id="cd122-193">The trace table is also used for recording detailed trace information for troubleshooting.</span></span>  
  
### <a name="handling-source-oracle-connection-errors"></a><span data-ttu-id="cd122-194">處理來源 Oracle 連接錯誤</span><span class="sxs-lookup"><span data-stu-id="cd122-194">Handling Source Oracle Connection Errors</span></span>  
 <span data-ttu-id="cd122-195">Oracle CDC 服務需要具備與來源 Oracle 資料庫之間的持續性連接。</span><span class="sxs-lookup"><span data-stu-id="cd122-195">The Oracle CDC Service needs a persistent connection with the source Oracle database.</span></span> <span data-ttu-id="cd122-196">與服務組態不相關的許多連接錯誤 (例如網路錯誤) 會視為暫時性錯誤。</span><span class="sxs-lookup"><span data-stu-id="cd122-196">Many connection errors that are unrelated to the service configuration (such as networking errors) are considered transient.</span></span> <span data-ttu-id="cd122-197">因此，如果 Oracle CDC 服務無法建立與 Oracle 資料庫之間的連接 (不論是在啟動時或是在中斷連接之後工作時)，此服務會將其狀態變更為 SUSPENDED/DISCONNECTED，然後進入重試迴圈 (在此迴圈中會以規律的間隔重試連接)。</span><span class="sxs-lookup"><span data-stu-id="cd122-197">Therefore, if the Oracle CDC Service cannot establish connection with the Oracle database (either on start or during work following a disconnection), the service changes its state to SUSPENDED/DISCONNECTED and enters a retry loop where the connection is retried at regular intervals.</span></span> <span data-ttu-id="cd122-198">當重新建立連接時，處理作業會繼續。</span><span class="sxs-lookup"><span data-stu-id="cd122-198">When the connection is re-established, processing continues.</span></span>  
  
 <span data-ttu-id="cd122-199">其他類型的連接錯誤不是暫時性 (例如，認證錯誤、權限不足及資料庫位址錯誤)。</span><span class="sxs-lookup"><span data-stu-id="cd122-199">Other types of connection errors are not transient (for example, bad credentials, insufficient privileges, and bad database address).</span></span> <span data-ttu-id="cd122-200">當發生這些錯誤時，Oracle CDC 服務狀態會設定為 ERROR/MISCONFIGURED 或 ERROR/PASSWORD-REQUIRED，而且此服務會停用。</span><span class="sxs-lookup"><span data-stu-id="cd122-200">When these errors occur, the Oracle CDC Service state is set to ERROR/MISCONFIGURED or to ERROR/PASSWORD-REQUIRED and the service is disabled.</span></span> <span data-ttu-id="cd122-201">當使用者修正根本錯誤時，應該要手動重新啟用 Oracle CDC 執行個體，處理作業才會繼續。</span><span class="sxs-lookup"><span data-stu-id="cd122-201">When the user fixes the underlying error, the Oracle CDC Instance should be manually re-enabled for processing to resume.</span></span>  
  
 <span data-ttu-id="cd122-202">如果不清楚錯誤是否為暫時性，最好先假定它是暫時性。</span><span class="sxs-lookup"><span data-stu-id="cd122-202">When it is not clear whether the error is transient, it is best to assume it is transient.</span></span>  
  
### <a name="handling-target-sql-server-connection-errors"></a><span data-ttu-id="cd122-203">處理目標 SQL Server 連接錯誤</span><span class="sxs-lookup"><span data-stu-id="cd122-203">Handling Target SQL Server Connection Errors</span></span>  
 <span data-ttu-id="cd122-204">Oracle CDC 服務需要具備與目標 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 執行個體之間的持續性連接。</span><span class="sxs-lookup"><span data-stu-id="cd122-204">The Oracle CDC Service needs a persistent connection to the target [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance.</span></span> <span data-ttu-id="cd122-205">此連接是用於：</span><span class="sxs-lookup"><span data-stu-id="cd122-205">This connection is used to:</span></span>  
  
-   <span data-ttu-id="cd122-206">確定目前沒有同名的其他服務正在使用這個 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 執行個體。</span><span class="sxs-lookup"><span data-stu-id="cd122-206">Ensure that there are no other services by the same name currently working with this [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance.</span></span>  
  
-   <span data-ttu-id="cd122-207">檢查哪一個 Oracle CDC 執行個體已啟用或停用，並啟動 (或停止) 其子處理序。</span><span class="sxs-lookup"><span data-stu-id="cd122-207">Check which Oracle CDC Instance is enabled or disabled and start (or stop) its subprocess.</span></span>  
  
 <span data-ttu-id="cd122-208">當此服務建立與目標 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 執行個體的連接，並依據正在使用的這個名稱來驗證它是唯一的 Oracle CDC 服務時，它可以檢查哪些 Oracle CDC 執行個體已啟用，並開始其處理程序 (之後此服務會在這些程序停用時加以停止)。</span><span class="sxs-lookup"><span data-stu-id="cd122-208">When the service establishes a connection with the target [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance and verifies that it is the only Oracle CDC service by this name that is working, it can check which Oracle CDC instances are enabled and start their handling processes (afterward the service stops these processes when they are disabled).</span></span> <span data-ttu-id="cd122-209">Oracle CDC 執行個體會使用其 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 連接來處理 Oracle CDC 執行個體的 CDC 資料庫。</span><span class="sxs-lookup"><span data-stu-id="cd122-209">The Oracle CDC instances use their [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] connections to work with the CDC database of the Oracle CDC instance.</span></span>  
  
 <span data-ttu-id="cd122-210">在連接目標 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 失敗時處理錯誤的方式取決於錯誤是否為暫時性。</span><span class="sxs-lookup"><span data-stu-id="cd122-210">How errors are handled when the connection to the target [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] fails depends on whether the errors are transient.</span></span>  
  
 <span data-ttu-id="cd122-211">如果是已知的非暫時性錯誤 (例如認證錯誤、權限不足、連接資訊錯誤)，此服務會將錯誤記錄到 Windows 事件記錄檔然後停止 (它無法寫入追蹤資料表，因為它無法連接至 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)])。</span><span class="sxs-lookup"><span data-stu-id="cd122-211">For known non-transient errors (such as bad credentials, insufficient privileges, bad connection information), the service logs an error to the Windows event log and stops (it cannot write to the trace table because it cannot connect to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]).</span></span> <span data-ttu-id="cd122-212">在這個案例中，使用者必須解決此錯誤，並重新啟動 Oracle CDC Windows 服務。</span><span class="sxs-lookup"><span data-stu-id="cd122-212">In this case, the user must resolve the error and restart the Oracle CDC Windows service.</span></span>  
  
 <span data-ttu-id="cd122-213">如果是暫時性錯誤和非預期的錯誤，則會重試此作業數次，而且如果失敗持續一段很長的時間，CDC 服務會停止其 CDC 執行個體子處理序，並回到最初的連接嘗試 (這時候，另一部電腦上的 Oracle CDC 服務可能已經取得具名 CDC 服務的控制權)。</span><span class="sxs-lookup"><span data-stu-id="cd122-213">For transient errors and unexpected errors, the operation is retried several times and if the failure persists for a significant time period, the CDC Service stops its CDC Instance subprocesses and goes back to its initial connection attempt (by this time, an Oracle CDC Service on another machine may have already taken control of the named CDC service).</span></span>  
  
### <a name="handling-target-sql-server-storage-full-errors"></a><span data-ttu-id="cd122-214">處理目標 SQL Server 儲存體已滿的錯誤</span><span class="sxs-lookup"><span data-stu-id="cd122-214">Handling Target SQL Server Storage Full Errors</span></span>  
 <span data-ttu-id="cd122-215">當 Oracle CDC 服務偵測到它無法將新的變更資料插入目標 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] CDC 執行個體時，它會將一則警告寫入事件記錄檔，並嘗試插入追蹤記錄 (雖然可能會因為同樣的原因而失敗)。</span><span class="sxs-lookup"><span data-stu-id="cd122-215">When the Oracle CDC Service detects that it cannot insert new change data into the target [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] CDC database, it writes a warning to the event log and tries to insert a trace record (although that may fail for the same reason).</span></span> <span data-ttu-id="cd122-216">然後它會以特定間隔重試作業，直到成功為止。</span><span class="sxs-lookup"><span data-stu-id="cd122-216">It then retries the operation in a specific interval until it is successful.</span></span>  
  
### <a name="handling-oracle-cdc-errors"></a><span data-ttu-id="cd122-217">處理 Oracle CDC 錯誤</span><span class="sxs-lookup"><span data-stu-id="cd122-217">Handling Oracle CDC Errors</span></span>  
 <span data-ttu-id="cd122-218">Oracle CDC 執行個體會讀取 Oracle 交易記錄並進行處理。</span><span class="sxs-lookup"><span data-stu-id="cd122-218">The Oracle CDC Instance reads the Oracle transaction log and processes it.</span></span> <span data-ttu-id="cd122-219">如果 CDC 處理遇到錯誤，則會在 **cdc.xdbcdc_state** 資料表中報告此錯誤，而且使用者需要根據報告的錯誤來手動介入。</span><span class="sxs-lookup"><span data-stu-id="cd122-219">If the CDC processing encounters an error, it is reported in the **cdc.xdbcdc_state** table and the user needs to manually intervene based on the reported error.</span></span>  
  
 <span data-ttu-id="cd122-220">例如，Oracle CDC 執行個體可能有一段期間沒有活動，而且必要的 Oracle 交易記錄檔案不再可用。</span><span class="sxs-lookup"><span data-stu-id="cd122-220">For example, the Oracle CDC Instance may not be active for an extended duration and the required Oracle transaction log files are no longer available.</span></span> <span data-ttu-id="cd122-221">在此情況下，Oracle DBA 必須還原必要的記錄，Oracle CDC 執行個體才能繼續處理。</span><span class="sxs-lookup"><span data-stu-id="cd122-221">In this case, the Oracle DBA must restore the required logs for the Oracle CDC Instance to resume processing.</span></span>  
  
### <a name="handling-unexpected-oracle-cdc-instance-failures"></a><span data-ttu-id="cd122-222">處理非預期的 Oracle CDC 執行個體失敗</span><span class="sxs-lookup"><span data-stu-id="cd122-222">Handling Unexpected Oracle CDC Instance Failures</span></span>  
 <span data-ttu-id="cd122-223">Oracle CDC 服務會監視其 CDC 執行個體子處理序。</span><span class="sxs-lookup"><span data-stu-id="cd122-223">The Oracle CDC Service monitors its CDC Instance subprocesses.</span></span> <span data-ttu-id="cd122-224">當 CDC 執行個體子處理序中止時，CDC 服務會在 MSXDBCDC.dbo.xdbcdc_databases 資料表中停用它，並將其 cdc.xdbcdc_state 狀態更新為 ABORTED。</span><span class="sxs-lookup"><span data-stu-id="cd122-224">When a CDC Instance subprocess aborts, the CDC Service disables it in the MSXDBCDC.dbo.xdbcdc_databases table and updates its cdc.xdbcdc_state status to ABORTED.</span></span> <span data-ttu-id="cd122-225">在此情況下，標準 Windows 錯誤報告對話方塊會用來報告這個錯誤，以供進一步分析。</span><span class="sxs-lookup"><span data-stu-id="cd122-225">In this case, the standard Windows Error Reporting dialog box is used to report this error for further analysis.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="cd122-226">另請參閱</span><span class="sxs-lookup"><span data-stu-id="cd122-226">See Also</span></span>  
 <span data-ttu-id="cd122-227">[Attunity Oracle 異動資料擷取設計工具](change-data-capture-designer-for-oracle-by-attunity.md) </span><span class="sxs-lookup"><span data-stu-id="cd122-227">[Change Data Capture Designer for Oracle by Attunity](change-data-capture-designer-for-oracle-by-attunity.md) </span></span>  
 [<span data-ttu-id="cd122-228">Oracle CDC 執行個體</span><span class="sxs-lookup"><span data-stu-id="cd122-228">The Oracle CDC Instance</span></span>](the-oracle-cdc-instance.md)  
