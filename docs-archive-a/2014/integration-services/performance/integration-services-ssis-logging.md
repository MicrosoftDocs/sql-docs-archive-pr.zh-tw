---
title: Integration Services (SSIS) 記錄 | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
helpviewer_keywords:
- containers [Integration Services], logs
- Windows Event log provider [Integration Services]
- XML File log provider [Integration Services]
- SQL Server Profiler, log provider
- SQL Server Integration Services packages, logs
- SSIS packages, logs
- tasks [Integration Services], logs
- logs [Integration Services], log providers
- Integration Services packages, logs
- log providers [Integration Services]
- packages [Integration Services], logs
- Text File log provider
- SQL Server log provider
ms.assetid: 65e17889-371f-4951-9a7e-9932b2d0dcde
author: chugugrace
ms.author: chugu
ms.openlocfilehash: f79a8bf7889948a17671f9373bec30e8fdf78ba2
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87592090"
---
# <a name="integration-services-ssis-logging"></a><span data-ttu-id="8b203-102">Integration Services (SSIS) 記錄</span><span class="sxs-lookup"><span data-stu-id="8b203-102">Integration Services (SSIS) Logging</span></span>
  [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="8b203-103">[!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 包括可用於在套件、容器和工作中實作記錄的記錄提供者。</span><span class="sxs-lookup"><span data-stu-id="8b203-103">[!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] includes log providers that you can use to implement logging in packages, containers, and tasks.</span></span> <span data-ttu-id="8b203-104">使用記錄，可以擷取有關封裝的執行階段資訊，藉此幫助您在每次執行封裝時對其進行稽核和疑難排解。</span><span class="sxs-lookup"><span data-stu-id="8b203-104">With logging, you can capture run-time information about a package, helping you audit and troubleshoot a package every time it is run.</span></span> <span data-ttu-id="8b203-105">例如，記錄可以擷取執行封裝之操作員的名稱，以及封裝開始和結束的時間。</span><span class="sxs-lookup"><span data-stu-id="8b203-105">For example, a log can capture the name of the operator who ran the package and the time the package began and finished.</span></span>  
  
 <span data-ttu-id="8b203-106">您可以設定在 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 伺服器上的封裝執行期間發生的記錄範圍。</span><span class="sxs-lookup"><span data-stu-id="8b203-106">You can configure the scope of logging that occurs during a package execution on the [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] server.</span></span> <span data-ttu-id="8b203-107">如需詳細資訊，請參閱 [在 SSIS 伺服器上啟用封裝執行的記錄功能](../enable-logging-for-package-execution-on-the-ssis-server.md)。</span><span class="sxs-lookup"><span data-stu-id="8b203-107">For more information, see [Enable Logging for Package Execution on the SSIS Server](../enable-logging-for-package-execution-on-the-ssis-server.md).</span></span>  
  
 <span data-ttu-id="8b203-108">您還可以在使用 **dtexec** 命令提示公用程式執行封裝時，併入記錄功能。</span><span class="sxs-lookup"><span data-stu-id="8b203-108">You can also include logging when you run a package using the **dtexec** command prompt utility.</span></span> <span data-ttu-id="8b203-109">如需支援記錄功能之命令提示引數的詳細資訊，請參閱 [dtexec 公用程式](../packages/dtexec-utility.md)。</span><span class="sxs-lookup"><span data-stu-id="8b203-109">For more information about the command prompt arguments that support logging, see [dtexec Utility](../packages/dtexec-utility.md).</span></span>  
  
## <a name="configure-logging-in-sql-server-data-tools"></a><span data-ttu-id="8b203-110">設定 SQL Server Data Tools 中的記錄功能</span><span class="sxs-lookup"><span data-stu-id="8b203-110">Configure Logging in SQL Server Data Tools</span></span>  
 <span data-ttu-id="8b203-111">記錄與封裝相關聯，並在封裝層級設定。</span><span class="sxs-lookup"><span data-stu-id="8b203-111">Logs are associated with packages and are configured at the package level.</span></span> <span data-ttu-id="8b203-112">封裝中的每個工作或容器都可將資訊記錄至任何封裝記錄檔中。</span><span class="sxs-lookup"><span data-stu-id="8b203-112">Each task or container in a package can log information to any package log.</span></span> <span data-ttu-id="8b203-113">您可以啟用封裝中工作和容器的記錄功能，即使該封裝本身未啟用記錄功能。</span><span class="sxs-lookup"><span data-stu-id="8b203-113">The tasks and containers in a package can be enabled for logging even if the package itself is not.</span></span> <span data-ttu-id="8b203-114">例如，可以在「執行 SQL」工作上啟用記錄功能，而無需在父封裝上啟用記錄功能。</span><span class="sxs-lookup"><span data-stu-id="8b203-114">For example, you can enable logging on an Execute SQL task without enabling logging on the parent package.</span></span> <span data-ttu-id="8b203-115">封裝、容器或工作可以寫入多重記錄檔。</span><span class="sxs-lookup"><span data-stu-id="8b203-115">A package, container, or task can write to multiple logs.</span></span> <span data-ttu-id="8b203-116">您可以僅在封裝上啟用記錄功能，也可以選擇在封裝所包含的任何個別工作或容器上啟用記錄功能。</span><span class="sxs-lookup"><span data-stu-id="8b203-116">You can enable logging on the package only, or you can choose to enable logging on any individual task or container that the package includes.</span></span>  
  
 <span data-ttu-id="8b203-117">當您將記錄加入封裝時，請選擇記錄提供者和記錄的位置。</span><span class="sxs-lookup"><span data-stu-id="8b203-117">When you add the log to a package, you choose the log provider and the location of the log.</span></span> <span data-ttu-id="8b203-118">記錄提供者會指定記錄資料的格式：例如， [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 資料庫或文字檔。</span><span class="sxs-lookup"><span data-stu-id="8b203-118">The log provider specifies the format for the log data: for example, a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database or text file.</span></span>  
  
 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] <span data-ttu-id="8b203-119">包括下列記錄提供者：</span><span class="sxs-lookup"><span data-stu-id="8b203-119">includes the following log providers:</span></span>  
  
-   <span data-ttu-id="8b203-120">「文字檔」記錄提供者，它會將記錄項目以逗號分隔值 (CSV) 的格式寫入 ASCII 文字檔。</span><span class="sxs-lookup"><span data-stu-id="8b203-120">The Text File log provider, which writes log entries to ASCII text files in a comma-separated value (CSV) format.</span></span> <span data-ttu-id="8b203-121">此提供者的預設副檔名為 .log。</span><span class="sxs-lookup"><span data-stu-id="8b203-121">The default file name extension for this provider is .log.</span></span>  
  
-   <span data-ttu-id="8b203-122">[!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] 記錄提供者，它可寫入追蹤檔，您可以使用 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Profiler 檢視該追蹤檔。</span><span class="sxs-lookup"><span data-stu-id="8b203-122">The [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] log provider, which writes traces that you can view using [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Profiler.</span></span> <span data-ttu-id="8b203-123">此提供者的預設副檔名為 .trc。</span><span class="sxs-lookup"><span data-stu-id="8b203-123">The default file name extension for this provider is .trc.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="8b203-124">您無法在以 64 位元模式執行的封裝中使用 [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] 記錄提供者。</span><span class="sxs-lookup"><span data-stu-id="8b203-124">You cannot use the [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] log provider in a package that is running in 64-bit mode.</span></span>  
  
-   <span data-ttu-id="8b203-125">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]記錄提供者，它會將記錄專案寫入 `sysssislog` 資料庫中的資料表 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 。</span><span class="sxs-lookup"><span data-stu-id="8b203-125">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] log provider, which writes log entries to the `sysssislog` table in a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database.</span></span>  
  
-   <span data-ttu-id="8b203-126">「Windows 事件」記錄提供者，它可將項目寫入本機電腦上之「Windows 事件」記錄的「應用程式」記錄中。</span><span class="sxs-lookup"><span data-stu-id="8b203-126">The Windows Event log provider, which writes entries to the Application log in the Windows Event log on the local computer.</span></span>  
  
-   <span data-ttu-id="8b203-127">「XML 檔案」記錄提供者，它可將記錄檔寫入 XML 檔案中。</span><span class="sxs-lookup"><span data-stu-id="8b203-127">The XML File log provider, which writes log files to an XML file.</span></span> <span data-ttu-id="8b203-128">此提供者的預設副檔名為 .xml。</span><span class="sxs-lookup"><span data-stu-id="8b203-128">The default file name extension for this provider is .xml.</span></span>  
  
 <span data-ttu-id="8b203-129">如果您將記錄提供者加入封裝或以程式設計的方式設定記錄，則可以使用 ProgID 或 ClassID 來識別記錄提供者，以取代使用 [設定 SSIS 記錄] 對話方塊中所顯示之 [[!INCLUDE[ssIS](../../includes/ssis-md.md)] 設計師] 的名稱。</span><span class="sxs-lookup"><span data-stu-id="8b203-129">If you add a log provider to a package or configure logging programmatically, you can use either a ProgID or ClassID to identify the log provider, instead of using the names that [!INCLUDE[ssIS](../../includes/ssis-md.md)] Designer displays in the **Configure SSIS Logs** dialog box.</span></span>  
  
 <span data-ttu-id="8b203-130">下表列出 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 所包含之記錄提供者的 ProgID 和 ClassID，以及記錄提供者寫入記錄檔的位置。</span><span class="sxs-lookup"><span data-stu-id="8b203-130">The following table lists the ProgID and ClassID for the log providers that [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] includes, and the location of the logs to which log providers write.</span></span>  
  
|<span data-ttu-id="8b203-131">記錄提供者</span><span class="sxs-lookup"><span data-stu-id="8b203-131">Log provider</span></span>|<span data-ttu-id="8b203-132">ProgID</span><span class="sxs-lookup"><span data-stu-id="8b203-132">ProgID</span></span>|<span data-ttu-id="8b203-133">ClassID</span><span class="sxs-lookup"><span data-stu-id="8b203-133">ClassID</span></span>|<span data-ttu-id="8b203-134">Location</span><span class="sxs-lookup"><span data-stu-id="8b203-134">Location</span></span>|  
|------------------|------------|-------------|--------------|  
|<span data-ttu-id="8b203-135">文字檔</span><span class="sxs-lookup"><span data-stu-id="8b203-135">Text file</span></span>|<span data-ttu-id="8b203-136">DTS.LogProviderTextFile</span><span class="sxs-lookup"><span data-stu-id="8b203-136">DTS.LogProviderTextFile</span></span>|<span data-ttu-id="8b203-137">{0A039101-ACC1-4E06-943F-279948323883}</span><span class="sxs-lookup"><span data-stu-id="8b203-137">{0A039101-ACC1-4E06-943F-279948323883}</span></span>|<span data-ttu-id="8b203-138">記錄提供者所使用的「檔案」連接管理員會指定文字檔的路徑。</span><span class="sxs-lookup"><span data-stu-id="8b203-138">The File connection manager that the log provider uses specifies the path of the text file.</span></span>|  
|<span data-ttu-id="8b203-139">SQL Server Profiler</span><span class="sxs-lookup"><span data-stu-id="8b203-139">SQL Server Profiler</span></span>|<span data-ttu-id="8b203-140">DTS.LogProviderSQLProfiler</span><span class="sxs-lookup"><span data-stu-id="8b203-140">DTS.LogProviderSQLProfiler</span></span>|<span data-ttu-id="8b203-141">{E93F6300-AE0C-4916-A7BF-A8D0CE12C77A}</span><span class="sxs-lookup"><span data-stu-id="8b203-141">{E93F6300-AE0C-4916-A7BF-A8D0CE12C77A}</span></span>|<span data-ttu-id="8b203-142">記錄提供者所使用的「檔案」連線管理員會指定 [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)]所使用之檔案的路徑。</span><span class="sxs-lookup"><span data-stu-id="8b203-142">The File connection manager that the log provider uses specifies the path of the file used by [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)].</span></span>|  
|<span data-ttu-id="8b203-143">SQL Server</span><span class="sxs-lookup"><span data-stu-id="8b203-143">SQL Server</span></span>|<span data-ttu-id="8b203-144">DTS.LogProviderSQLServer</span><span class="sxs-lookup"><span data-stu-id="8b203-144">DTS.LogProviderSQLServer</span></span>|<span data-ttu-id="8b203-145">{94150B25-6AEB-4C0D-996D-D37D1C4FDEDA}</span><span class="sxs-lookup"><span data-stu-id="8b203-145">{94150B25-6AEB-4C0D-996D-D37D1C4FDEDA}</span></span>|<span data-ttu-id="8b203-146">記錄提供者所使用的 OLE DB 連線管理員會指定包含具有記錄項目之 sysssislog 資料表的 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 資料庫。</span><span class="sxs-lookup"><span data-stu-id="8b203-146">The OLE DB connection manager that the log provider uses specifies the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database that contains the sysssislog table with the log entries.</span></span>|  
|<span data-ttu-id="8b203-147">Windows 事件記錄檔</span><span class="sxs-lookup"><span data-stu-id="8b203-147">Windows Event Log</span></span>|<span data-ttu-id="8b203-148">DTS.LogProviderEventLog</span><span class="sxs-lookup"><span data-stu-id="8b203-148">DTS.LogProviderEventLog</span></span>|<span data-ttu-id="8b203-149">{071CC8EB-C343-4CFF-8D58-564B92FCA3CF}</span><span class="sxs-lookup"><span data-stu-id="8b203-149">{071CC8EB-C343-4CFF-8D58-564B92FCA3CF}</span></span>|<span data-ttu-id="8b203-150">Windows 事件檢視器中的應用程式記錄檔包含 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 記錄資訊。</span><span class="sxs-lookup"><span data-stu-id="8b203-150">The Application log in Windows Event Viewer contains the [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] log information.</span></span>|  
|<span data-ttu-id="8b203-151">XML 檔案</span><span class="sxs-lookup"><span data-stu-id="8b203-151">XML File</span></span>|<span data-ttu-id="8b203-152">DTS.LogProviderXMLFile</span><span class="sxs-lookup"><span data-stu-id="8b203-152">DTS.LogProviderXMLFile</span></span>|<span data-ttu-id="8b203-153">{440945A4-2A22-4F19-B577-EAF5FDDC5F7A}</span><span class="sxs-lookup"><span data-stu-id="8b203-153">{440945A4-2A22-4F19-B577-EAF5FDDC5F7A}</span></span>|<span data-ttu-id="8b203-154">記錄提供者所使用的「檔案」連接管理員會指定 XML 檔案的路徑。</span><span class="sxs-lookup"><span data-stu-id="8b203-154">The File connection manager that the log provider uses specifies the path of the XML file.</span></span>|  
  
 <span data-ttu-id="8b203-155">您還可以建立自訂記錄提供者。</span><span class="sxs-lookup"><span data-stu-id="8b203-155">You can also create custom log providers.</span></span> <span data-ttu-id="8b203-156">如需詳細資訊，請參閱 [建立自訂記錄提供者](../extending-packages-custom-objects/log-provider/creating-a-custom-log-provider.md)。</span><span class="sxs-lookup"><span data-stu-id="8b203-156">For more information, see [Creating a Custom Log Provider](../extending-packages-custom-objects/log-provider/creating-a-custom-log-provider.md).</span></span>  
  
 <span data-ttu-id="8b203-157">封裝中的記錄提供者是此封裝之記錄提供者集合的成員。</span><span class="sxs-lookup"><span data-stu-id="8b203-157">The log providers in a package are members of the log providers collection of the package.</span></span> <span data-ttu-id="8b203-158">使用 [[!INCLUDE[ssIS](../../includes/ssis-md.md)] 設計師] 建立封裝並實作記錄時，您可在 [!INCLUDE[ssIS](../../includes/ssis-md.md)] 設計師的 [封裝總管] 索引標籤上，看到 [記錄提供者] 資料夾中集合成員的清單。</span><span class="sxs-lookup"><span data-stu-id="8b203-158">When you create a package and implement logging by using [!INCLUDE[ssIS](../../includes/ssis-md.md)] Designer, you can see a list of the collection members in the **Log Provider** folders on the **Package Explorer** tab of [!INCLUDE[ssIS](../../includes/ssis-md.md)] Designer.</span></span>  
  
 <span data-ttu-id="8b203-159">您可以藉由提供記錄提供者的名稱和描述，並指定記錄提供者使用的連接管理員，來設定記錄提供者。</span><span class="sxs-lookup"><span data-stu-id="8b203-159">You configure a log provider by providing a name and description for the log provider and specifying the connection manager that the log provider uses.</span></span> <span data-ttu-id="8b203-160">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 記錄提供者會使用 OLE DB 連接管理員。</span><span class="sxs-lookup"><span data-stu-id="8b203-160">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] log provider uses an OLE DB connection manager.</span></span> <span data-ttu-id="8b203-161">「文字檔」、「 [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)]」和「XML 檔案」記錄提供者全都使用「檔案」連線管理員。</span><span class="sxs-lookup"><span data-stu-id="8b203-161">The Text File, [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)], and XML File log providers all use File connection managers.</span></span> <span data-ttu-id="8b203-162">Windows 事件記錄檔提供者不使用連接管理員，因為它會直接寫入「Windows 事件記錄檔」中。</span><span class="sxs-lookup"><span data-stu-id="8b203-162">The Windows Event log provider does not use a connection manager, because it writes directly to the Windows Event log.</span></span> <span data-ttu-id="8b203-163">如需詳細資訊，請參閱 [OLE DB 連線管理員](../connection-manager/ole-db-connection-manager.md) 和 [檔案連線管理員](../connection-manager/file-connection-manager.md)。</span><span class="sxs-lookup"><span data-stu-id="8b203-163">For more information, see [OLE DB Connection Manager](../connection-manager/ole-db-connection-manager.md) and [File Connection Manager](../connection-manager/file-connection-manager.md).</span></span>  
  
### <a name="logging-customization"></a><span data-ttu-id="8b203-164">自訂記錄</span><span class="sxs-lookup"><span data-stu-id="8b203-164">Logging Customization</span></span>  
 <span data-ttu-id="8b203-165">為了自訂事件或自訂訊息的記錄， [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 提供通常記錄之資訊的結構描述，以用於併入記錄項目。</span><span class="sxs-lookup"><span data-stu-id="8b203-165">To customize the logging of an event or custom message, [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] provides a schema of commonly logged information to include in log entries.</span></span> <span data-ttu-id="8b203-166">[!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 記錄結構描述會定義可以記錄的資訊。</span><span class="sxs-lookup"><span data-stu-id="8b203-166">The [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] log schema defines the information that you can log.</span></span> <span data-ttu-id="8b203-167">您可以從記錄結構描述選擇每個記錄項目的元素。</span><span class="sxs-lookup"><span data-stu-id="8b203-167">You can select elements from the log schema for each log entry.</span></span>  
  
 <span data-ttu-id="8b203-168">封裝及其容器和工作不一定要記錄相同資訊，相同封裝或容器內的工作也可以記錄不同的資訊。</span><span class="sxs-lookup"><span data-stu-id="8b203-168">A package and its containers and tasks do not have to log the same information, and tasks within the same package or container can log different information.</span></span> <span data-ttu-id="8b203-169">例如，封裝可以在封裝啟動時記錄操作員資訊，一個工作可以記錄工作失敗的來源，而另一個工作可以在發生錯誤時記錄資訊。</span><span class="sxs-lookup"><span data-stu-id="8b203-169">For example, a package can log operator information when the package starts, one task can log the source of the task's failure, and another task can log information when errors occur.</span></span> <span data-ttu-id="8b203-170">如果封裝及其容器和工作使用多重記錄檔，則相同的資訊會寫入所有記錄檔中。</span><span class="sxs-lookup"><span data-stu-id="8b203-170">If a package and its containers and tasks use multiple logs, the same information is written to all the logs.</span></span>  
  
 <span data-ttu-id="8b203-171">您可以指定要記錄的事件和每個事件要記錄的資訊，以選取符合您需要的記錄層級。</span><span class="sxs-lookup"><span data-stu-id="8b203-171">You can select a level of logging that suits your needs by specifying the events to log and the information to log for each event.</span></span> <span data-ttu-id="8b203-172">您可能會發現某些事件提供的資訊比其他事件更有用。</span><span class="sxs-lookup"><span data-stu-id="8b203-172">You may find that some events provide more useful information than others.</span></span> <span data-ttu-id="8b203-173">例如，您可能只想記錄 **PreExecute** 事件的電腦和操作員名稱，而不是 **Error** 事件的所有可用資訊。</span><span class="sxs-lookup"><span data-stu-id="8b203-173">For example, you might want to log only the computer and operator names for the **PreExecute** event but all available information for the **Error** event.</span></span>  
  
 <span data-ttu-id="8b203-174">若要防止記錄檔使用大量的磁碟空間，或避免可能會降低效能的過度記錄，可以選取要記錄的特定事件和資訊項目，以限制記錄。</span><span class="sxs-lookup"><span data-stu-id="8b203-174">To prevent log files from using large amounts of disk space, or to avoid excessive logging, which could degrade performance, you can limit logging by selecting specific events and information items to log.</span></span> <span data-ttu-id="8b203-175">例如，您可以設定記錄檔僅擷取每個錯誤的日期和電腦名稱。</span><span class="sxs-lookup"><span data-stu-id="8b203-175">For example, you can configure a log to capture only the date and the computer name for each error.</span></span>  
  
 <span data-ttu-id="8b203-176">在 [[!INCLUDE[ssIS](../../includes/ssis-md.md)] 設計師] 中，使用 [設定 SSIS 記錄]  對話方塊來定義記錄選項。</span><span class="sxs-lookup"><span data-stu-id="8b203-176">In [!INCLUDE[ssIS](../../includes/ssis-md.md)] Designer, you define the logging options by using the **Configure SSIS Logs** dialog box.</span></span>  
  
#### <a name="log-schema"></a><span data-ttu-id="8b203-177">記錄結構描述</span><span class="sxs-lookup"><span data-stu-id="8b203-177">Log Schema</span></span>  
 <span data-ttu-id="8b203-178">下表描述記錄結構描述中的元素。</span><span class="sxs-lookup"><span data-stu-id="8b203-178">The following table describes the elements in the log schema.</span></span>  
  
|<span data-ttu-id="8b203-179">元素</span><span class="sxs-lookup"><span data-stu-id="8b203-179">Element</span></span>|<span data-ttu-id="8b203-180">描述</span><span class="sxs-lookup"><span data-stu-id="8b203-180">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="8b203-181">電腦</span><span class="sxs-lookup"><span data-stu-id="8b203-181">Computer</span></span>|<span data-ttu-id="8b203-182">發生記錄事件之電腦的名稱。</span><span class="sxs-lookup"><span data-stu-id="8b203-182">The name of the computer on which the log event occurred.</span></span>|  
|<span data-ttu-id="8b203-183">運算子</span><span class="sxs-lookup"><span data-stu-id="8b203-183">Operator</span></span>|<span data-ttu-id="8b203-184">啟動封裝之使用者的識別。</span><span class="sxs-lookup"><span data-stu-id="8b203-184">The identity of the user who launched the package.</span></span>|  
|<span data-ttu-id="8b203-185">SourceName</span><span class="sxs-lookup"><span data-stu-id="8b203-185">SourceName</span></span>|<span data-ttu-id="8b203-186">發生記錄事件之容器或工作的名稱。</span><span class="sxs-lookup"><span data-stu-id="8b203-186">The name of the container or task in which the log event occurred.</span></span>|  
|<span data-ttu-id="8b203-187">SourceID</span><span class="sxs-lookup"><span data-stu-id="8b203-187">SourceID</span></span>|<span data-ttu-id="8b203-188">封裝的唯一識別碼；「For 迴圈」、「Foreach 迴圈」或「時序」容器；或者發生記錄事件的工作。</span><span class="sxs-lookup"><span data-stu-id="8b203-188">The unique identifier of the package; the For Loop, Foreach Loop, or Sequence container; or the task in which the log event occurred.</span></span>|  
|<span data-ttu-id="8b203-189">ExecutionID</span><span class="sxs-lookup"><span data-stu-id="8b203-189">ExecutionID</span></span>|<span data-ttu-id="8b203-190">封裝執行執行個體的 GUID。</span><span class="sxs-lookup"><span data-stu-id="8b203-190">The GUID of the package execution instance.</span></span><br /><br /> <span data-ttu-id="8b203-191">請注意：執行單一封裝可能會建立記錄項目，其中包含不同的 ExecutionID 元素值。</span><span class="sxs-lookup"><span data-stu-id="8b203-191">Note: Running a single package might create log entries with different values for the ExecutionID element.</span></span> <span data-ttu-id="8b203-192">例如，當您在 [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)]中執行封裝時，驗證階段可能會建立記錄項目，其中包含了對應到 [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)]的 ExecutionID 元素。</span><span class="sxs-lookup"><span data-stu-id="8b203-192">For example, when you run a package in [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)], the validation phase might create log entries with an ExecutionID element that corresponds to [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)].</span></span> <span data-ttu-id="8b203-193">但是，執行階段可能會建立記錄項目，其中包含了對應到 dtshost.exe 的 ExecutionID 元素。</span><span class="sxs-lookup"><span data-stu-id="8b203-193">However, the execution phase might create log entries with an ExecutionID element that corresponds to dtshost.exe.</span></span> <span data-ttu-id="8b203-194">在另一個範例中，當您執行包含「執行封裝」工作的封裝時，每一個工作都會執行子封裝。</span><span class="sxs-lookup"><span data-stu-id="8b203-194">For another example, when you run a package that contains Execute Package tasks, each of these tasks runs a child package.</span></span> <span data-ttu-id="8b203-195">這些子封裝可能會建立記錄項目，其中包含了與父封裝建立之記錄項目不同的 ExecutionID 元素。</span><span class="sxs-lookup"><span data-stu-id="8b203-195">These child packages might create log entries that have a different ExecutionID element than the log entries that the parent package creates.</span></span>|  
|<span data-ttu-id="8b203-196">MessageText</span><span class="sxs-lookup"><span data-stu-id="8b203-196">MessageText</span></span>|<span data-ttu-id="8b203-197">與記錄項目相關聯的訊息。</span><span class="sxs-lookup"><span data-stu-id="8b203-197">A message associated with the log entry.</span></span>|  
|<span data-ttu-id="8b203-198">DataBytes</span><span class="sxs-lookup"><span data-stu-id="8b203-198">DataBytes</span></span>|<span data-ttu-id="8b203-199">記錄項目特定的位元組陣列。</span><span class="sxs-lookup"><span data-stu-id="8b203-199">A byte array specific to the log entry.</span></span> <span data-ttu-id="8b203-200">此欄位的意義會因記錄項目的不同而不同。</span><span class="sxs-lookup"><span data-stu-id="8b203-200">The meaning of this field varies by log entry.</span></span>|  
  
 <span data-ttu-id="8b203-201">下表描述記錄結構描述中，在 [設定 SSIS 記錄] 對話方塊的 [詳細資料] 索引標籤上沒有提供的三個額外元素。</span><span class="sxs-lookup"><span data-stu-id="8b203-201">The following table describes three additional elements in the log schema that are not available on the **Details** tab of the **Configure SSIS Logs** dialog box.</span></span>  
  
|<span data-ttu-id="8b203-202">元素</span><span class="sxs-lookup"><span data-stu-id="8b203-202">Element</span></span>|<span data-ttu-id="8b203-203">描述</span><span class="sxs-lookup"><span data-stu-id="8b203-203">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="8b203-204">StartTime</span><span class="sxs-lookup"><span data-stu-id="8b203-204">StartTime</span></span>|<span data-ttu-id="8b203-205">容器或工作開始執行的時間。</span><span class="sxs-lookup"><span data-stu-id="8b203-205">The time at which the container or task starts to run.</span></span>|  
|<span data-ttu-id="8b203-206">EndTime</span><span class="sxs-lookup"><span data-stu-id="8b203-206">EndTime</span></span>|<span data-ttu-id="8b203-207">容器或工作停止執行的時間。</span><span class="sxs-lookup"><span data-stu-id="8b203-207">The time at which the container or task stops running.</span></span>|  
|<span data-ttu-id="8b203-208">DataCode</span><span class="sxs-lookup"><span data-stu-id="8b203-208">DataCode</span></span>|<span data-ttu-id="8b203-209">選擇性的整數值，一般會包含 <xref:Microsoft.SqlServer.Dts.Runtime.DTSExecResult> 列舉的值，指出執行容器或工作的結果：</span><span class="sxs-lookup"><span data-stu-id="8b203-209">An optional integer value that typically contains a value from the <xref:Microsoft.SqlServer.Dts.Runtime.DTSExecResult> enumeration that indicates the result of running the container or task:</span></span><br /><br /> <span data-ttu-id="8b203-210">0 - 成功</span><span class="sxs-lookup"><span data-stu-id="8b203-210">0 - Success</span></span><br /><br /> <span data-ttu-id="8b203-211">1 - 失敗</span><span class="sxs-lookup"><span data-stu-id="8b203-211">1 - Failure</span></span><br /><br /> <span data-ttu-id="8b203-212">2 - 已完成</span><span class="sxs-lookup"><span data-stu-id="8b203-212">2 - Completed</span></span><br /><br /> <span data-ttu-id="8b203-213">3 - 已取消</span><span class="sxs-lookup"><span data-stu-id="8b203-213">3 - Canceled</span></span>|  
  
##### <a name="log-entries"></a><span data-ttu-id="8b203-214">記錄項目</span><span class="sxs-lookup"><span data-stu-id="8b203-214">Log Entries</span></span>  
 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] <span data-ttu-id="8b203-215">支援預先定義事件上的記錄項目，並為許多 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 物件提供自訂記錄項目。</span><span class="sxs-lookup"><span data-stu-id="8b203-215">supports log entries on predefined events and provides custom log entries for many [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] objects.</span></span> <span data-ttu-id="8b203-216">在 [[!INCLUDE[ssIS](../../includes/ssis-md.md)] 設計師] 中的 [設定 SSIS 記錄] 對話方塊會列出這些事件和自訂記錄項目。</span><span class="sxs-lookup"><span data-stu-id="8b203-216">The **Configure SSIS Logs** dialog box in [!INCLUDE[ssIS](../../includes/ssis-md.md)] Designer lists these events and custom log entries.</span></span>  
  
 <span data-ttu-id="8b203-217">下表描述的預先定義事件可在發生執行階段事件時寫入記錄項目。</span><span class="sxs-lookup"><span data-stu-id="8b203-217">The following table describes the predefined events that can be enabled to write log entries when run-time events occur.</span></span> <span data-ttu-id="8b203-218">這些記錄項目會套用至可執行檔、封裝和封裝所包含的工作和容器。</span><span class="sxs-lookup"><span data-stu-id="8b203-218">These log entries apply to executables, the package, and the tasks and containers that the package includes.</span></span> <span data-ttu-id="8b203-219">記錄項目的名稱與引發並造成寫入記錄項目之執行階段事件的名稱相同。</span><span class="sxs-lookup"><span data-stu-id="8b203-219">The name of the log entry is the same as the name of the run-time event that was raised and caused the log entry to be written.</span></span>  
  
|<span data-ttu-id="8b203-220">事件</span><span class="sxs-lookup"><span data-stu-id="8b203-220">Events</span></span>|<span data-ttu-id="8b203-221">描述</span><span class="sxs-lookup"><span data-stu-id="8b203-221">Description</span></span>|  
|------------|-----------------|  
|<span data-ttu-id="8b203-222">**OnError**</span><span class="sxs-lookup"><span data-stu-id="8b203-222">**OnError**</span></span>|<span data-ttu-id="8b203-223">發生錯誤時寫入記錄項目。</span><span class="sxs-lookup"><span data-stu-id="8b203-223">Writes a log entry when an error occurs.</span></span>|  
|<span data-ttu-id="8b203-224">**OnExecStatusChanged**</span><span class="sxs-lookup"><span data-stu-id="8b203-224">**OnExecStatusChanged**</span></span>|<span data-ttu-id="8b203-225">當工作 (非容器) 在偵錯期間暫停或繼續時，寫入記錄項目。</span><span class="sxs-lookup"><span data-stu-id="8b203-225">Writes a log entry when a task (not a container) is suspended or resumed during debugging.</span></span>|  
|<span data-ttu-id="8b203-226">**OnInformation**</span><span class="sxs-lookup"><span data-stu-id="8b203-226">**OnInformation**</span></span>|<span data-ttu-id="8b203-227">在驗證和執行可執行檔以報告資訊期間，寫入記錄項目。</span><span class="sxs-lookup"><span data-stu-id="8b203-227">Writes a log entry during the validation and execution of an executable to report information.</span></span>|  
|<span data-ttu-id="8b203-228">**OnPostExecute**</span><span class="sxs-lookup"><span data-stu-id="8b203-228">**OnPostExecute**</span></span>|<span data-ttu-id="8b203-229">在可執行檔已完成執行後立即寫入記錄項目。</span><span class="sxs-lookup"><span data-stu-id="8b203-229">Writes a log entry immediately after the executable has finished running.</span></span>|  
|<span data-ttu-id="8b203-230">**OnPostValidate**</span><span class="sxs-lookup"><span data-stu-id="8b203-230">**OnPostValidate**</span></span>|<span data-ttu-id="8b203-231">在完成驗證可執行檔時寫入記錄項目。</span><span class="sxs-lookup"><span data-stu-id="8b203-231">Writes a log entry when the validation of the executable finishes.</span></span>|  
|<span data-ttu-id="8b203-232">**OnPreExecute**</span><span class="sxs-lookup"><span data-stu-id="8b203-232">**OnPreExecute**</span></span>|<span data-ttu-id="8b203-233">在可執行檔執行前立即寫入記錄項目。</span><span class="sxs-lookup"><span data-stu-id="8b203-233">Writes a log entry immediately before the executable runs.</span></span>|  
|<span data-ttu-id="8b203-234">**OnPreValidate**</span><span class="sxs-lookup"><span data-stu-id="8b203-234">**OnPreValidate**</span></span>|<span data-ttu-id="8b203-235">在啟動驗證可執行檔時寫入記錄項目。</span><span class="sxs-lookup"><span data-stu-id="8b203-235">Writes a log entry when the validation of the executable starts.</span></span>|  
|<span data-ttu-id="8b203-236">**OnProgress**</span><span class="sxs-lookup"><span data-stu-id="8b203-236">**OnProgress**</span></span>|<span data-ttu-id="8b203-237">在可執行檔處理可量值進度時寫入記錄項目。</span><span class="sxs-lookup"><span data-stu-id="8b203-237">Writes a log entry when measurable progress is made by the executable.</span></span>|  
|<span data-ttu-id="8b203-238">**OnQueryCancel**</span><span class="sxs-lookup"><span data-stu-id="8b203-238">**OnQueryCancel**</span></span>|<span data-ttu-id="8b203-239">在工作處理期間任何可取消執行的時間點寫入記錄項目。</span><span class="sxs-lookup"><span data-stu-id="8b203-239">Writes a log entry at any juncture in the task processing where it is feasible to cancel execution.</span></span>|  
|<span data-ttu-id="8b203-240">**OnTaskFailed**</span><span class="sxs-lookup"><span data-stu-id="8b203-240">**OnTaskFailed**</span></span>|<span data-ttu-id="8b203-241">在工作失敗時寫入記錄項目。</span><span class="sxs-lookup"><span data-stu-id="8b203-241">Writes a log entry when a task fails.</span></span>|  
|<span data-ttu-id="8b203-242">**OnVariableValueChanged**</span><span class="sxs-lookup"><span data-stu-id="8b203-242">**OnVariableValueChanged**</span></span>|<span data-ttu-id="8b203-243">在變數的值變更時寫入記錄項目。</span><span class="sxs-lookup"><span data-stu-id="8b203-243">Writes a log entry when the value of a variable changes.</span></span>|  
|<span data-ttu-id="8b203-244">**OnWarning**</span><span class="sxs-lookup"><span data-stu-id="8b203-244">**OnWarning**</span></span>|<span data-ttu-id="8b203-245">發生警告時寫入記錄項目。</span><span class="sxs-lookup"><span data-stu-id="8b203-245">Writes a log entry when a warning occurs.</span></span>|  
|<span data-ttu-id="8b203-246">**PipelineComponentTime**</span><span class="sxs-lookup"><span data-stu-id="8b203-246">**PipelineComponentTime**</span></span>|<span data-ttu-id="8b203-247">針對每個資料流程元件，寫入每個驗證和執行階段的記錄項目。</span><span class="sxs-lookup"><span data-stu-id="8b203-247">For each data flow component, writes a log entry for each phase of validation and execution.</span></span> <span data-ttu-id="8b203-248">記錄項目會指定每個階段的處理時間。</span><span class="sxs-lookup"><span data-stu-id="8b203-248">The log entry specifies the processing time for each phase.</span></span>|  
|<span data-ttu-id="8b203-249">**Diagnostic**</span><span class="sxs-lookup"><span data-stu-id="8b203-249">**Diagnostic**</span></span>|<span data-ttu-id="8b203-250">寫入提供診斷資訊的記錄項目。</span><span class="sxs-lookup"><span data-stu-id="8b203-250">Writes a log entry that provides diagnostic information.</span></span><br /><br /> <span data-ttu-id="8b203-251">例如，您可以在每次呼叫外部資料提供者前後記錄訊息。</span><span class="sxs-lookup"><span data-stu-id="8b203-251">For example, you can log a message before and after every call to an external data provider.</span></span> <span data-ttu-id="8b203-252">如需詳細資訊，請參閱 [封裝執行的疑難排解工具](../troubleshooting/troubleshooting-tools-for-package-execution.md)。</span><span class="sxs-lookup"><span data-stu-id="8b203-252">For more information, see [Troubleshooting Tools for Package Execution](../troubleshooting/troubleshooting-tools-for-package-execution.md).</span></span>|  
  
 <span data-ttu-id="8b203-253">封裝及許多工作都有可以啟用記錄功能的自訂記錄項目。</span><span class="sxs-lookup"><span data-stu-id="8b203-253">The package and many tasks have custom log entries that can be enabled for logging.</span></span> <span data-ttu-id="8b203-254">例如，[傳送郵件] 工作會提供 **SendMailTaskBegin** 自訂記錄項目，其會在 [傳送郵件] 工作開始執行時，但在工作傳送電子郵件訊息之前，記錄資訊。</span><span class="sxs-lookup"><span data-stu-id="8b203-254">For example, the Send Mail task provides the **SendMailTaskBegin** custom log entry, which logs information when the Send Mail task starts to run, but before the task sends an e-mail message.</span></span> <span data-ttu-id="8b203-255">如需詳細資訊，請參閱 [自訂訊息以進行記錄](../custom-messages-for-logging.md)。</span><span class="sxs-lookup"><span data-stu-id="8b203-255">For more information, see [Custom Messages for Logging](../custom-messages-for-logging.md).</span></span>  
  
### <a name="differentiating-package-copies"></a><span data-ttu-id="8b203-256">區分封裝副本</span><span class="sxs-lookup"><span data-stu-id="8b203-256">Differentiating Package Copies</span></span>  
 <span data-ttu-id="8b203-257">記錄資料包含記錄項目所屬封裝的名稱和 GUID。</span><span class="sxs-lookup"><span data-stu-id="8b203-257">Log data includes the name and the GUID of the package to which the log entries belong.</span></span> <span data-ttu-id="8b203-258">如果您透過複製現有的封裝來建立新的封裝，將一併複製現有封裝的名稱和 GUID。</span><span class="sxs-lookup"><span data-stu-id="8b203-258">If you create a new package by copying an existing package, the name and the GUID of the existing package are also copied.</span></span> <span data-ttu-id="8b203-259">因此，您可能會有兩套具有相同 GUID 和名稱的封裝，使您難以區分記錄資料中的封裝。</span><span class="sxs-lookup"><span data-stu-id="8b203-259">As a result, you may have two packages that have the same GUID and name, making it difficult to differentiate between the packages in the log data.</span></span>  
  
 <span data-ttu-id="8b203-260">為了消除這種模糊不清的狀況，您應該更新這個新封裝的名稱和 GUID。</span><span class="sxs-lookup"><span data-stu-id="8b203-260">To eliminate this ambiguity, you should update the name and the GUID of the new packages.</span></span> <span data-ttu-id="8b203-261">在 [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] 中，您可以在 [屬性] 視窗的 `ID` 屬性中重新產生 GUID，並更新 `Name` 屬性的值。</span><span class="sxs-lookup"><span data-stu-id="8b203-261">In [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)], you can regenerate the GUID in the `ID` property and update the value of the `Name` property in the Properties window.</span></span> <span data-ttu-id="8b203-262">您也可以使用程式設計方式或 **dtutil** 命令提示字元來變更 GUID 和名稱。</span><span class="sxs-lookup"><span data-stu-id="8b203-262">You can also change the GUID and the name programmatically, or by using the **dtutil** command prompt.</span></span> <span data-ttu-id="8b203-263">如需詳細資訊，請參閱 [設定封裝屬性](../set-package-properties.md) 和 [dtutil 公用程式](../dtutil-utility.md)。</span><span class="sxs-lookup"><span data-stu-id="8b203-263">For more information, see [Set Package Properties](../set-package-properties.md) and [dtutil Utility](../dtutil-utility.md).</span></span>  
  
### <a name="parent-logging-options"></a><span data-ttu-id="8b203-264">父記錄選項</span><span class="sxs-lookup"><span data-stu-id="8b203-264">Parent Logging Options</span></span>  
 <span data-ttu-id="8b203-265">通常，工作和「For 迴圈」、「Foreach 迴圈」和「時序」容器的記錄選項符合封裝或父容器的選項。</span><span class="sxs-lookup"><span data-stu-id="8b203-265">Frequently, the logging options of tasks and For Loop, Foreach Loop, and Sequence containers match those of the package or a parent container.</span></span> <span data-ttu-id="8b203-266">在該情況下，可以設定它們從其父容器繼承記錄選項。</span><span class="sxs-lookup"><span data-stu-id="8b203-266">In that case, you can configure them to inherit their logging options from their parent container.</span></span> <span data-ttu-id="8b203-267">例如，在包含「執行 SQL」工作的「For 迴圈」容器中，「執行 SQL」工作可以使用在「For 迴圈」容器上設定的記錄選項。</span><span class="sxs-lookup"><span data-stu-id="8b203-267">For example, in a For Loop container that includes an Execute SQL task, the Execute SQL task can use the logging options that are set on the For Loop container.</span></span> <span data-ttu-id="8b203-268">若要使用父記錄選項，可將容器的 LoggingMode 屬性設為 **UseParentSetting**。</span><span class="sxs-lookup"><span data-stu-id="8b203-268">To use the parent logging options, you set the LoggingMode property of the container to **UseParentSetting**.</span></span> <span data-ttu-id="8b203-269">可以在 [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] 的 [屬性] 視窗中，或透過 [[!INCLUDE[ssIS](../../includes/ssis-md.md)] 設計師] 的 [設定 SSIS 記錄] 對話方塊設定此屬性。</span><span class="sxs-lookup"><span data-stu-id="8b203-269">You can set this property in the **Properties** window of [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] or through the **Configure SSIS Logs** dialog box in [!INCLUDE[ssIS](../../includes/ssis-md.md)] Designer.</span></span>  
  
### <a name="logging-templates"></a><span data-ttu-id="8b203-270">記錄範本</span><span class="sxs-lookup"><span data-stu-id="8b203-270">Logging Templates</span></span>  
 <span data-ttu-id="8b203-271">在 [設定 SSIS 記錄]  對話方塊中，還可以將常用的記錄組態建立和儲存為範本，然後在多個封裝中使用這些範本。</span><span class="sxs-lookup"><span data-stu-id="8b203-271">In the **Configure SSIS Logs** dialog box, you can also create and save frequently used logging configurations as templates, and then use the templates in multiple packages.</span></span> <span data-ttu-id="8b203-272">這使得跨多個封裝套用一致的記錄策略，以及修改封裝的記錄設定變得很容易，只要更新後再套用範本即可。</span><span class="sxs-lookup"><span data-stu-id="8b203-272">This makes it easy to apply a consistent logging strategy across multiple packages and to modify log settings on packages by updating and then applying the templates.</span></span> <span data-ttu-id="8b203-273">範本以 XML 檔案儲存。</span><span class="sxs-lookup"><span data-stu-id="8b203-273">The templates are stored in XML files.</span></span>  
  
 <span data-ttu-id="8b203-274">**若要使用 [設定 SSIS 記錄] 對話方塊設定記錄**</span><span class="sxs-lookup"><span data-stu-id="8b203-274">**To configure logging using the Configure SSIS Logs dialog box**</span></span>  
  
1.  <span data-ttu-id="8b203-275">啟用封裝及其工作的記錄功能。</span><span class="sxs-lookup"><span data-stu-id="8b203-275">Enable the package and its tasks for logging.</span></span> <span data-ttu-id="8b203-276">記錄可以發生在封裝、容器和工作層級上。</span><span class="sxs-lookup"><span data-stu-id="8b203-276">Logging can occur at the package, the container, and the task level.</span></span> <span data-ttu-id="8b203-277">您可以為封裝、容器和工作指定不同的記錄檔。</span><span class="sxs-lookup"><span data-stu-id="8b203-277">You can specify different logs for packages, containers, and tasks.</span></span>  
  
2.  <span data-ttu-id="8b203-278">選取記錄提供者，並為封裝加入記錄。</span><span class="sxs-lookup"><span data-stu-id="8b203-278">Select a log provider and add a log for the package.</span></span> <span data-ttu-id="8b203-279">記錄檔僅可以在封裝層級建立，且工作或容器必須使用為封裝建立的記錄檔之一。</span><span class="sxs-lookup"><span data-stu-id="8b203-279">Logs can be created only at the package level, and a task or container must use one of the logs created for the package.</span></span> <span data-ttu-id="8b203-280">每個記錄檔都與下列記錄提供者之一相關聯：文字檔、 [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)]、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]、Windows 記錄檔或 XML 檔案。</span><span class="sxs-lookup"><span data-stu-id="8b203-280">Each log is associated with one of the following log providers: Text file, [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)], [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], Windows Event Log, or XML file.</span></span> <span data-ttu-id="8b203-281">如需詳細資訊，請參閱 [在 SQL Server Data Tools 中啟用封裝記錄功能](../enable-package-logging-in-sql-server-data-tools.md)。</span><span class="sxs-lookup"><span data-stu-id="8b203-281">For more information, see [Enable Package Logging in SQL Server Data Tools](../enable-package-logging-in-sql-server-data-tools.md).</span></span>  
  
3.  <span data-ttu-id="8b203-282">選取事件，以及要在記錄檔中擷取之每個事件的記錄結構描述資訊。</span><span class="sxs-lookup"><span data-stu-id="8b203-282">Select the events and the log schema information about each event you want to capture in the log.</span></span> <span data-ttu-id="8b203-283">如需詳細資訊，請參閱 [使用已儲存的組態檔來設定記錄](../configure-logging-by-using-a-saved-configuration-file.md)。</span><span class="sxs-lookup"><span data-stu-id="8b203-283">For more information, see [Configure Logging by Using a Saved Configuration File](../configure-logging-by-using-a-saved-configuration-file.md).</span></span>  
  
### <a name="configuration-of-log-provider"></a><span data-ttu-id="8b203-284">設定記錄提供者</span><span class="sxs-lookup"><span data-stu-id="8b203-284">Configuration of Log Provider</span></span>  
 <span data-ttu-id="8b203-285">您可以透過 [!INCLUDE[ssIS](../../includes/ssis-md.md)] 設計師或以程式設計方式設定屬性。</span><span class="sxs-lookup"><span data-stu-id="8b203-285">You can set properties through [!INCLUDE[ssIS](../../includes/ssis-md.md)] Designer or programmatically.</span></span>  
  
 <span data-ttu-id="8b203-286">記錄提供者是按照在封裝中實作記錄的步驟而建立和設定的。</span><span class="sxs-lookup"><span data-stu-id="8b203-286">A log provider is created and configured as a step in implementing logging in a package.</span></span> <span data-ttu-id="8b203-287">如需詳細資訊，請參閱[Integration Services 記錄](integration-services-ssis-logging.md)。</span><span class="sxs-lookup"><span data-stu-id="8b203-287">For more information, see [Integration Services Logging](integration-services-ssis-logging.md).</span></span>  
  
 <span data-ttu-id="8b203-288">建立記錄提供者之後，您可以在 [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)]的 [屬性] 視窗中檢視和修改其屬性。</span><span class="sxs-lookup"><span data-stu-id="8b203-288">After you create a log provider, you can view and modify its properties in the Properties window of [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)].</span></span>  
  
 <span data-ttu-id="8b203-289">如需以程式設計方式設定這些屬性的詳細資訊，請參閱 <xref:Microsoft.SqlServer.Dts.Runtime.LogProvider> 類別的文件。</span><span class="sxs-lookup"><span data-stu-id="8b203-289">For information about programmatically setting these properties, see the documentation for the <xref:Microsoft.SqlServer.Dts.Runtime.LogProvider> class.</span></span>  
  
### <a name="logging-for-data-flow-tasks"></a><span data-ttu-id="8b203-290">資料流程工作的記錄功能</span><span class="sxs-lookup"><span data-stu-id="8b203-290">Logging for Data Flow Tasks</span></span>  
 <span data-ttu-id="8b203-291">資料流程工作提供許多可用以監視及調整效能的自訂記錄項目。</span><span class="sxs-lookup"><span data-stu-id="8b203-291">The Data Flow task provides many custom log entries that can be used to monitor and adjust performance.</span></span> <span data-ttu-id="8b203-292">例如，您可以監視可能會造成記憶體遺漏的元件，或是追蹤執行某特定元件所花費的時間。</span><span class="sxs-lookup"><span data-stu-id="8b203-292">For example, you can monitor components that might cause memory leaks, or keep track of how long it takes to run a particular component.</span></span> <span data-ttu-id="8b203-293">如需這些自訂記錄項目的清單以及記錄輸出範例，請參閱 [資料流程工作](../control-flow/data-flow-task.md)。</span><span class="sxs-lookup"><span data-stu-id="8b203-293">For a list of these custom log entries and sample logging output, see [Data Flow Task](../control-flow/data-flow-task.md).</span></span>  
  
#### <a name="use-the-pipelinecomponenttime-event"></a><span data-ttu-id="8b203-294">使用 PipelineComponentTime 事件</span><span class="sxs-lookup"><span data-stu-id="8b203-294">Use the PipelineComponentTime Event</span></span>  
 <span data-ttu-id="8b203-295">最有用的自訂記錄項目可能是 PipelineComponentTime 事件。</span><span class="sxs-lookup"><span data-stu-id="8b203-295">Perhaps the most useful custom log entry is the PipelineComponentTime event.</span></span> <span data-ttu-id="8b203-296">這個記錄項目會報告每個元件在五個主要處理步驟的每個步驟中所花費的毫秒數。</span><span class="sxs-lookup"><span data-stu-id="8b203-296">This log entry reports the number of milliseconds that each component in the data flow spends on each of the five major processing steps.</span></span> <span data-ttu-id="8b203-297">下表描述這些處理步驟。</span><span class="sxs-lookup"><span data-stu-id="8b203-297">The following table describes these processing steps.</span></span> [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] <span data-ttu-id="8b203-298">開發人員會將這些步驟辨識為 <xref:Microsoft.SqlServer.Dts.Pipeline.PipelineComponent>。</span><span class="sxs-lookup"><span data-stu-id="8b203-298">developers will recognize these steps as the principal methods of a <xref:Microsoft.SqlServer.Dts.Pipeline.PipelineComponent>.</span></span>  
  
|<span data-ttu-id="8b203-299">步驟</span><span class="sxs-lookup"><span data-stu-id="8b203-299">Step</span></span>|<span data-ttu-id="8b203-300">描述</span><span class="sxs-lookup"><span data-stu-id="8b203-300">Description</span></span>|  
|----------|-----------------|  
|<span data-ttu-id="8b203-301">Validate</span><span class="sxs-lookup"><span data-stu-id="8b203-301">Validate</span></span>|<span data-ttu-id="8b203-302">元件會檢查有效的屬性值和組態設定。</span><span class="sxs-lookup"><span data-stu-id="8b203-302">The component checks for valid property values and configuration settings.</span></span>|  
|<span data-ttu-id="8b203-303">PreExecute</span><span class="sxs-lookup"><span data-stu-id="8b203-303">PreExecute</span></span>|<span data-ttu-id="8b203-304">元件會在開始處理資料列之前，執行一次處理。</span><span class="sxs-lookup"><span data-stu-id="8b203-304">The component performs one-time processing before it starts to process rows of data.</span></span>|  
|<span data-ttu-id="8b203-305">PostExecute</span><span class="sxs-lookup"><span data-stu-id="8b203-305">PostExecute</span></span>|<span data-ttu-id="8b203-306">元件會在已經處理所有資料列之後，執行一次處理。</span><span class="sxs-lookup"><span data-stu-id="8b203-306">The component performs one-time processing after it has processed all rows of data.</span></span>|  
|<span data-ttu-id="8b203-307">ProcessInput</span><span class="sxs-lookup"><span data-stu-id="8b203-307">ProcessInput</span></span>|<span data-ttu-id="8b203-308">轉換或目的地元件會處理上游來源或轉換傳遞給它的傳入資料列。</span><span class="sxs-lookup"><span data-stu-id="8b203-308">The transformation or destination component processes the incoming rows of data that an upstream source or transformation has passed to it.</span></span>|  
|<span data-ttu-id="8b203-309">PrimeOutput</span><span class="sxs-lookup"><span data-stu-id="8b203-309">PrimeOutput</span></span>|<span data-ttu-id="8b203-310">來源或轉換元件會填入要傳遞給下游轉換或目的地元件的資料緩衝區。</span><span class="sxs-lookup"><span data-stu-id="8b203-310">The source or transformation component fills the buffers of data to be passed to a downstream transformation or destination component.</span></span>|  
  
 <span data-ttu-id="8b203-311">當您啟用 PipelineComponentTime 事件時， [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] 就會針對每個元件所執行的每個處理步驟記錄一則訊息。</span><span class="sxs-lookup"><span data-stu-id="8b203-311">When you enable the PipelineComponentTime event, [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] logs one message for each processing step performed by each component.</span></span> <span data-ttu-id="8b203-312">下列記錄項目會顯示 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] CalculatedColumns 封裝範例所記錄的訊息子集：</span><span class="sxs-lookup"><span data-stu-id="8b203-312">The following log entries show a subset of the messages that the [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] CalculatedColumns package sample logs:</span></span>  
  
 `The component "Calculate LineItemTotalCost" (3522) spent 356 milliseconds in ProcessInput.`  
  
 `The component "Sum Quantity and LineItemTotalCost" (3619) spent 79 milliseconds in ProcessInput.`  
  
 `The component "Calculate Average Cost" (3662) spent 16 milliseconds in ProcessInput.`  
  
 `The component "Sort by ProductID" (3717) spent 125 milliseconds in ProcessInput.`  
  
 `The component "Load Data" (3773) spent 0 milliseconds in ProcessInput.`  
  
 `The component "Extract Data" (3869) spent 688 milliseconds in PrimeOutput filling buffers on output "OLE DB Source Output" (3879).`  
  
 `The component "Sum Quantity and LineItemTotalCost" (3619) spent 141 milliseconds in PrimeOutput filling buffers on output "Aggregate Output 1" (3621).`  
  
 `The component "Sort by ProductID" (3717) spent 16 milliseconds in PrimeOutput filling buffers on output "Sort Output" (3719).`  
  
 <span data-ttu-id="8b203-313">這些記錄項目顯示資料流程工作將大部分時間花費在下列步驟上 (在此依遞減順序顯示)：</span><span class="sxs-lookup"><span data-stu-id="8b203-313">These log entries show that the data flow task spent the most time on the following steps, shown here in descending order:</span></span>  
  
-   <span data-ttu-id="8b203-314">名為 "Extract Data" 的 OLE DB 來源花費了 688 毫秒</span><span class="sxs-lookup"><span data-stu-id="8b203-314">The OLE DB source that is named "Extract Data" spent 688 ms.</span></span> <span data-ttu-id="8b203-315">來載入資料。</span><span class="sxs-lookup"><span data-stu-id="8b203-315">loading data.</span></span>  
  
-   <span data-ttu-id="8b203-316">名為 "Calculate LineItemTotalCost" 的「衍生的資料行」轉換花費了 356 毫秒</span><span class="sxs-lookup"><span data-stu-id="8b203-316">The Derived Column transformation that is named "Calculate LineItemTotalCost" spent 356 ms.</span></span> <span data-ttu-id="8b203-317">來計算傳入資料列。</span><span class="sxs-lookup"><span data-stu-id="8b203-317">performing calculations on incoming rows.</span></span>  
  
-   <span data-ttu-id="8b203-318">名為 "Sum Quantity and LineItemTotalCost" 的「彙總」轉換花費了結合的 220 毫秒 (141 毫秒在 PrimeOutput 而 79 毫秒在 ProcessInput) 來執行計算以及將資料傳遞給下一個轉換。</span><span class="sxs-lookup"><span data-stu-id="8b203-318">The Aggregate transformation that is named "Sum Quantity and LineItemTotalCost" spent a combined 220 ms-141 in PrimeOutput and 79 in ProcessInput-performing calculations and passing the data to the next transformation.</span></span>  
  
## <a name="related-tasks"></a><span data-ttu-id="8b203-319">相關工作</span><span class="sxs-lookup"><span data-stu-id="8b203-319">Related Tasks</span></span>  
 <span data-ttu-id="8b203-320">下列清單包含說明如何執行記錄功能相關工作的主題連結。</span><span class="sxs-lookup"><span data-stu-id="8b203-320">The following list contains links to topics that show how to perform tasks related to the logging feature.</span></span>  
  
-   <span data-ttu-id="8b203-321">[[設定 SSIS 記錄] 對話方塊](../configure-ssis-logs-dialog-box.md)</span><span class="sxs-lookup"><span data-stu-id="8b203-321">[Configure SSIS Logs Dialog Box](../configure-ssis-logs-dialog-box.md)</span></span>  
  
-   [<span data-ttu-id="8b203-322">啟用 SQL Server Data Tools 中的封裝記錄功能</span><span class="sxs-lookup"><span data-stu-id="8b203-322">Enable Package Logging in SQL Server Data Tools</span></span>](../enable-package-logging-in-sql-server-data-tools.md)  
  
-   [<span data-ttu-id="8b203-323">在 SSIS 伺服器上啟用封裝執行的記錄功能</span><span class="sxs-lookup"><span data-stu-id="8b203-323">Enable Logging for Package Execution on the SSIS Server</span></span>](../enable-logging-for-package-execution-on-the-ssis-server.md)  
  
-   [<span data-ttu-id="8b203-324">檢視記錄事件視窗中的記錄項目</span><span class="sxs-lookup"><span data-stu-id="8b203-324">View Log Entries in the Log Events Window</span></span>](../view-log-entries-in-the-log-events-window.md)  
  
## <a name="related-content"></a><span data-ttu-id="8b203-325">相關內容</span><span class="sxs-lookup"><span data-stu-id="8b203-325">Related Content</span></span>  
 [<span data-ttu-id="8b203-326">用於完整及詳細記錄的 DTLoggedExec 工具 (CodePlex 專案)</span><span class="sxs-lookup"><span data-stu-id="8b203-326">DTLoggedExec Tool for Full and Detail Logging (CodePlex Project)</span></span>](https://go.microsoft.com/fwlink/?LinkId=150579)  
  
## <a name="see-also"></a><span data-ttu-id="8b203-327">另請參閱</span><span class="sxs-lookup"><span data-stu-id="8b203-327">See Also</span></span>  
 [<span data-ttu-id="8b203-328">檢視記錄事件視窗中的記錄項目</span><span class="sxs-lookup"><span data-stu-id="8b203-328">View Log Entries in the Log Events Window</span></span>](../view-log-entries-in-the-log-events-window.md)  
  
  
