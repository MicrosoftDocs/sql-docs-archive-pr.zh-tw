---
title: Azure SQL DW 上傳工作 | Microsoft Docs
ms.custom: ''
ms.date: 12/29/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
f1_keywords:
- SQL12.DTS.DESIGNER.AFPDWUPTASK.F1
- SQL11.DTS.DESIGNER.AFPDWUPTASK.F1
ms.assetid: 112cf764-f85a-4c1a-b732-d299d717c0d4
author: yualan
ms.author: chugu
ms.openlocfilehash: d90cc36b5e8beb35313b76ecef2ed95f065dcb89
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87592822"
---
# <a name="azure-sql-dw-upload-task"></a><span data-ttu-id="fe1b1-102">Azure SQL DW 上傳工作</span><span class="sxs-lookup"><span data-stu-id="fe1b1-102">Azure SQL DW Upload Task</span></span>
<span data-ttu-id="fe1b1-103">**Azure SQL DW 上傳工作** 讓 SSIS 套件能夠將本機資料上傳到 Azure SQL 資料倉儲 (DW) 中的資料表。</span><span class="sxs-lookup"><span data-stu-id="fe1b1-103">The **Azure SQL DW Upload Task** enables an SSIS package to upload local data to a table in Azure SQL Data Warehouse (DW).</span></span> <span data-ttu-id="fe1b1-104">目前支援的來源資料檔案格式為使用 UTF8 編碼的分隔文字。</span><span class="sxs-lookup"><span data-stu-id="fe1b1-104">The currently supported source data file format is delimited text in UTF8 encoding.</span></span> <span data-ttu-id="fe1b1-105">上傳程式會遵循有效率的 PolyBase 方法。</span><span class="sxs-lookup"><span data-stu-id="fe1b1-105">The uploading process follows the efficient PolyBase approach.</span></span> <span data-ttu-id="fe1b1-106">具體來說，資料會先上傳到 Azure Blob 儲存體，再到 Azure SQL DW。</span><span class="sxs-lookup"><span data-stu-id="fe1b1-106">Specifically, data will first be uploaded to Azure Blob Storage, and then to Azure SQL DW.</span></span> <span data-ttu-id="fe1b1-107">因此，使用此工作會需要 Azure Blob 儲存體。</span><span class="sxs-lookup"><span data-stu-id="fe1b1-107">Therefore, an Azure Blob Storage account is needed to use this task.</span></span>

<span data-ttu-id="fe1b1-108">若要新增 **Azure SQL DW 上傳工作**，請將其從 SSIS 工具箱拖放到設計工具畫布，然後按兩下或在其上按一下滑鼠右鍵，再按一下 [編輯]  ，即可看到工作編輯器對話方塊。</span><span class="sxs-lookup"><span data-stu-id="fe1b1-108">To add an **Azure SQL DW Upload Task**, drag-drop it from SSIS Toolbox to the designer canvas, and double-click or right-click and click **Edit** to see the task editor dialog box.</span></span>

<span data-ttu-id="fe1b1-109">在 [一般]  頁面上設定下列屬性。</span><span class="sxs-lookup"><span data-stu-id="fe1b1-109">On the **General** page, configure the following properties.</span></span>

<span data-ttu-id="fe1b1-110">欄位</span><span class="sxs-lookup"><span data-stu-id="fe1b1-110">Field</span></span>|<span data-ttu-id="fe1b1-111">描述</span><span class="sxs-lookup"><span data-stu-id="fe1b1-111">Description</span></span>
-----|-----------
<span data-ttu-id="fe1b1-112">LocalDirectory</span><span class="sxs-lookup"><span data-stu-id="fe1b1-112">LocalDirectory</span></span>|<span data-ttu-id="fe1b1-113">指定包含要上傳之資料檔案的本機目錄。</span><span class="sxs-lookup"><span data-stu-id="fe1b1-113">Specifies the local directory that contains the data files to be uploaded.</span></span>
<span data-ttu-id="fe1b1-114">Recursively</span><span class="sxs-lookup"><span data-stu-id="fe1b1-114">Recursively</span></span>|<span data-ttu-id="fe1b1-115">指定是否要以遞迴方式搜尋子目錄。</span><span class="sxs-lookup"><span data-stu-id="fe1b1-115">Specifies whether to recursively search sub-directories.</span></span>
<span data-ttu-id="fe1b1-116">FileName</span><span class="sxs-lookup"><span data-stu-id="fe1b1-116">FileName</span></span>|<span data-ttu-id="fe1b1-117">指定名稱篩選，以選取具有特定名稱模式的檔案。</span><span class="sxs-lookup"><span data-stu-id="fe1b1-117">Specifies a name filter to select files with certain name pattern.</span></span> <span data-ttu-id="fe1b1-118">例如</span><span class="sxs-lookup"><span data-stu-id="fe1b1-118">E.g.</span></span> <span data-ttu-id="fe1b1-119">MySheet\*.xsl\* 會包含 MySheet001.xsl 及 MySheetABC.xslx 這類的檔案。</span><span class="sxs-lookup"><span data-stu-id="fe1b1-119">MySheet\*.xsl\* will include files such as MySheet001.xsl and MySheetABC.xslx.</span></span>
<span data-ttu-id="fe1b1-120">RowDelimiter</span><span class="sxs-lookup"><span data-stu-id="fe1b1-120">RowDelimiter</span></span>|<span data-ttu-id="fe1b1-121">指定標示各資料列結尾的字元。</span><span class="sxs-lookup"><span data-stu-id="fe1b1-121">Specifies the character(s) that marks the end of each row.</span></span>
<span data-ttu-id="fe1b1-122">ColumnDelimiter</span><span class="sxs-lookup"><span data-stu-id="fe1b1-122">ColumnDelimiter</span></span>|<span data-ttu-id="fe1b1-123">指定一或多個標示各資料行結尾的字元。</span><span class="sxs-lookup"><span data-stu-id="fe1b1-123">Specifies one or more characters that mark the end of each column.</span></span> <span data-ttu-id="fe1b1-124">例如</span><span class="sxs-lookup"><span data-stu-id="fe1b1-124">E.g.</span></span> <span data-ttu-id="fe1b1-125">&#124; (縱線字元)、\t (定位字元)、' (單引號)、" (雙引號) 和 0x5c (反斜線)。</span><span class="sxs-lookup"><span data-stu-id="fe1b1-125">&#124; (pipe), \t (tab), ' (single quote), " (double quote), and 0x5c (backslash).</span></span>
<span data-ttu-id="fe1b1-126">IsFirstRowHeader</span><span class="sxs-lookup"><span data-stu-id="fe1b1-126">IsFirstRowHeader</span></span>|<span data-ttu-id="fe1b1-127">指定每個資料檔案中的第一個資料列是否包含資料行名稱，而非實際資料。</span><span class="sxs-lookup"><span data-stu-id="fe1b1-127">Specifies whether the first row in each data file contains column names instead of actual data.</span></span>
<span data-ttu-id="fe1b1-128">AzureStorageConnection</span><span class="sxs-lookup"><span data-stu-id="fe1b1-128">AzureStorageConnection</span></span>|<span data-ttu-id="fe1b1-129">指定 Azure 儲存體連線管理員。</span><span class="sxs-lookup"><span data-stu-id="fe1b1-129">Specifies an Azure Storage connection manager.</span></span>
<span data-ttu-id="fe1b1-130">BlobContainer</span><span class="sxs-lookup"><span data-stu-id="fe1b1-130">BlobContainer</span></span>|<span data-ttu-id="fe1b1-131">指定要透過 PolyBase 將本機資料上傳及轉送到 Azure DW 的目的 Blob 容器名稱。</span><span class="sxs-lookup"><span data-stu-id="fe1b1-131">Specifies the name of blob container to which local data will be uploaded and relayed to Azure DW via PolyBase.</span></span> <span data-ttu-id="fe1b1-132">如果容器不存在，系統將會建立新容器。</span><span class="sxs-lookup"><span data-stu-id="fe1b1-132">A new container will be created if it does not exist.</span></span>
<span data-ttu-id="fe1b1-133">BlobDirectory</span><span class="sxs-lookup"><span data-stu-id="fe1b1-133">BlobDirectory</span></span>|<span data-ttu-id="fe1b1-134">指定要透過 PolyBase 將本機資料上傳及轉送到 Azure DW 的目的 Blob 目錄 (虛擬階層式結構)。</span><span class="sxs-lookup"><span data-stu-id="fe1b1-134">Specifies the blob directory (virtual hierarchical structure) to which local data will be uploaded and relayed to Azure DW via PolyBase.</span></span>
<span data-ttu-id="fe1b1-135">RetainFiles</span><span class="sxs-lookup"><span data-stu-id="fe1b1-135">RetainFiles</span></span>|<span data-ttu-id="fe1b1-136">指定是否要保留上傳到 Azure 儲存體的檔案。</span><span class="sxs-lookup"><span data-stu-id="fe1b1-136">Specifies whether to retain the files uploaded to Azure Storage.</span></span>
<span data-ttu-id="fe1b1-137">CompressionType</span><span class="sxs-lookup"><span data-stu-id="fe1b1-137">CompressionType</span></span>|<span data-ttu-id="fe1b1-138">指定在將檔案上傳到 Azure 儲存體時要使用的壓縮格式。</span><span class="sxs-lookup"><span data-stu-id="fe1b1-138">Specifies the compression format to use upon uploading files to Azure Storage.</span></span> <span data-ttu-id="fe1b1-139">本機來源不會受到影響。</span><span class="sxs-lookup"><span data-stu-id="fe1b1-139">Local source is not affected.</span></span>
<span data-ttu-id="fe1b1-140">CompressionLevel</span><span class="sxs-lookup"><span data-stu-id="fe1b1-140">CompressionLevel</span></span>|<span data-ttu-id="fe1b1-141">指定要用於壓縮格式的壓縮層級。</span><span class="sxs-lookup"><span data-stu-id="fe1b1-141">Specifies the compression level to use for the compression format.</span></span>
<span data-ttu-id="fe1b1-142">AzureDwConnection</span><span class="sxs-lookup"><span data-stu-id="fe1b1-142">AzureDwConnection</span></span>|<span data-ttu-id="fe1b1-143">指定 Azure SQL DW 的 ADO.NET 連線管理員。</span><span class="sxs-lookup"><span data-stu-id="fe1b1-143">Specifies an ADO.NET connection manager for Azure SQL DW.</span></span>
<span data-ttu-id="fe1b1-144">TableName</span><span class="sxs-lookup"><span data-stu-id="fe1b1-144">TableName</span></span>|<span data-ttu-id="fe1b1-145">指定目的資料表的名稱。</span><span class="sxs-lookup"><span data-stu-id="fe1b1-145">Specifies name of the destination table.</span></span> <span data-ttu-id="fe1b1-146">選擇現有的資料表名稱，或選擇 **\<New Table ...>** 建立新的資料表。</span><span class="sxs-lookup"><span data-stu-id="fe1b1-146">Either choose an existing table name, or create a new one by choosing **\<New Table ...>**.</span></span>
<span data-ttu-id="fe1b1-147">TableDistribution</span><span class="sxs-lookup"><span data-stu-id="fe1b1-147">TableDistribution</span></span>|<span data-ttu-id="fe1b1-148">指定新資料表的發佈方法。</span><span class="sxs-lookup"><span data-stu-id="fe1b1-148">Specifies the distribution method for new table.</span></span> <span data-ttu-id="fe1b1-149">如果為 **TableName**指定了新的資料表名稱即適用。</span><span class="sxs-lookup"><span data-stu-id="fe1b1-149">Applies if a new table name is specified for **TableName**.</span></span>
<span data-ttu-id="fe1b1-150">HashColumnName</span><span class="sxs-lookup"><span data-stu-id="fe1b1-150">HashColumnName</span></span>|<span data-ttu-id="fe1b1-151">指定用於雜湊表發佈的資料行。</span><span class="sxs-lookup"><span data-stu-id="fe1b1-151">Specifies the column used for hash table distribution.</span></span> <span data-ttu-id="fe1b1-152">如果為 **TableDistribution** 指定了 **HASH**即適用。</span><span class="sxs-lookup"><span data-stu-id="fe1b1-152">Applies if **HASH** is specified for **TableDistribution**.</span></span>

<span data-ttu-id="fe1b1-153">根據您上傳到新資料表或現有資料表，看到的 [對應] \*\*\*\* 頁面會有所不同。</span><span class="sxs-lookup"><span data-stu-id="fe1b1-153">You will see a different **Mappings** page depending on whether you are uploading to a new table or to an existing one.</span></span> <span data-ttu-id="fe1b1-154">如果是前者，請設定要對應哪些來源資料行，及其在要建立的目的資料表中對應名稱為何。</span><span class="sxs-lookup"><span data-stu-id="fe1b1-154">In the former case, configure which source columns are to be mapped and their corresponding names in the to-be-created destination table.</span></span> <span data-ttu-id="fe1b1-155">如果是後者，請設定來源與目的資料行之間的對應關係。</span><span class="sxs-lookup"><span data-stu-id="fe1b1-155">In the latter case, configure the mapping relationships between source and destination columns.</span></span>

<span data-ttu-id="fe1b1-156">在 [資料行]  頁面上，為各來源資料行設定資料類型屬性。</span><span class="sxs-lookup"><span data-stu-id="fe1b1-156">On the **Columns** page, configure the data type properties for each source column.</span></span>

<span data-ttu-id="fe1b1-157">[T-SQL]  頁面會顯示用來將資料從 Azure Blob 儲存體上傳到 Azure SQL DW 的 T-SQL。</span><span class="sxs-lookup"><span data-stu-id="fe1b1-157">The **T-SQL** page shows the T-SQL used to load data from Azure Blob Storage to Azure SQL DW.</span></span> <span data-ttu-id="fe1b1-158">T-SQL 從其他頁面上的組態自動產生，會在工作執行過程中執行。</span><span class="sxs-lookup"><span data-stu-id="fe1b1-158">The T-SQL is automatically generated from configurations on the other pages, and will be executed as part of the task execution.</span></span> <span data-ttu-id="fe1b1-159">您也可以按一下 [編輯]  按鈕以手動編輯產生的 T-SQL，使其符合您的特定需求。</span><span class="sxs-lookup"><span data-stu-id="fe1b1-159">You may choose to manually edit the generated T-SQL to meet your particular needs by clicking the **Edit** button.</span></span> <span data-ttu-id="fe1b1-160">您之後可以按一下 [重設]  按鈕，還原成自動產生的 T-SQL。</span><span class="sxs-lookup"><span data-stu-id="fe1b1-160">You can revert to the automatically generated one later on by clicking the **Reset** button.</span></span>
